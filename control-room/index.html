<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Control Room · Geodiametrics</title>

<style>
:root{
  --fg:#e9eefc;--muted:rgba(233,238,252,.65);
  --panel:rgba(12,16,34,.62);--stroke:rgba(233,238,252,.14);
  --radius:22px;--shadow:0 18px 55px rgba(0,0,0,.55);
}
*{box-sizing:border-box}
html,body{margin:0;height:100%}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:var(--fg);
  background:
    radial-gradient(1200px 900px at 20% 10%, rgba(122,162,255,.18), transparent 60%),
    radial-gradient(900px 700px at 80% 30%, rgba(180,140,255,.14), transparent 60%),
    linear-gradient(180deg,#070b18,#050714 70%,#04040f);
  overflow-x:hidden;
}
header{
  position:sticky;top:0;z-index:10;
  backdrop-filter:blur(12px);
  background:linear-gradient(180deg,rgba(6,9,20,.75),rgba(6,9,20,.35));
  border-bottom:1px solid var(--stroke);
}
.bar{max-width:1100px;margin:auto;padding:14px 18px;display:flex;align-items:center;justify-content:space-between}
.brand{font-weight:700;letter-spacing:.4px}
nav a{margin-left:10px;padding:8px 14px;border-radius:999px;border:1px solid var(--stroke);background:rgba(255,255,255,.05);color:var(--fg);text-decoration:none}
main{max-width:1100px;margin:0 auto;padding:48px 18px 96px}
h1{font-size:clamp(36px,6vw,60px);margin:0 0 8px}
.lead{color:var(--muted);max-width:760px}
.panel{margin-top:28px;padding:22px;border-radius:var(--radius);background:var(--panel);border:1px solid var(--stroke);box-shadow:var(--shadow)}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin-top:16px}
.card{padding:18px;border-radius:18px;background:rgba(10,14,28,.6);border:1px solid var(--stroke)}
.btn{appearance:none;border:1px solid rgba(233,238,252,.18);background:rgba(255,255,255,.06);color:var(--fg);padding:10px 14px;border-radius:999px;font-weight:800;cursor:pointer}
.btn:active{transform:translateY(1px)}
.table{width:100%;border-collapse:collapse;margin-top:12px;font-size:14px}
th,td{padding:8px;border-bottom:1px solid var(--stroke);text-align:left}
footer{text-align:center;color:var(--muted);margin-top:64px}
small{color:var(--muted)}
</style>
</head>

<body>
<header>
  <div class="bar">
    <div class="brand">Geodiametrics</div>
    <nav>
      <a href="/">Home</a>
      <a href="/apps/">Apps</a>
      <a href="/architecture/">Architecture</a>
    </nav>
  </div>
</header>

<main>
  <h1>Control Room</h1>
  <p class="lead">Single execution authority. Engines are namespaces. Matrix observes registrations. Viewer pages do not execute.</p>

  <!-- Quad-Core Controls -->
  <section class="panel">
    <h2>Diamond Fusion · Quad Core</h2>
    <div class="grid">
      <div class="card"><b>Core I</b><br/><small>Selection</small></div>
      <div class="card"><b>Core II</b><br/><small>Resolution</small></div>
      <div class="card"><b>Core III</b><br/><small>Commitment</small></div>
      <div class="card"><b>Core IV</b><br/><small>Continuation</small></div>
    </div>
    <div style="margin-top:12px">
      <button class="btn" id="registerAll">Register All Cores</button>
      <button class="btn" id="clearAll">Clear Registry</button>
    </div>
    <small>Registration writes to localStorage using a canonical key.</small>
  </section>

  <!-- Matrix -->
  <section class="panel">
    <h2>Engine Matrix</h2>
    <button class="btn" id="refresh">Refresh</button>
    <table class="table">
      <thead>
        <tr><th>Namespace</th><th>Family</th><th>Core</th><th>Version</th><th>Seen</th></tr>
      </thead>
      <tbody id="matrix-body">
        <tr><td colspan="5">No engines registered.</td></tr>
      </tbody>
    </table>
  </section>

  <footer>© 2026 Geodiametrics · Control Room</footer>
</main>

<script>
/* CANONICAL REGISTRATION CONTRACT */
const PREFIX = "GEOD_ENGINE::";
const CORES = [
  {ns:"diamond_fusion_core_1", family:"diamond_fusion", core:1},
  {ns:"diamond_fusion_core_2", family:"diamond_fusion", core:2},
  {ns:"diamond_fusion_core_3", family:"diamond_fusion", core:3},
  {ns:"diamond_fusion_core_4", family:"diamond_fusion", core:4}
];

function register(core){
  const payload = {
    namespace: core.ns,
    family: core.family,
    core: core.core,
    version: "1.0",
    cycle: ["input","admissibility","execution","evidence","return"],
    invariants: ["agency","constraint","responsibility","coherence"],
    registered_at: new Date().toISOString()
  };
  localStorage.setItem(PREFIX + core.ns, JSON.stringify(payload));
}

function registerAll(){
  CORES.forEach(register);
  render();
}

function clearAll(){
  Object.keys(localStorage)
    .filter(k => k.startsWith(PREFIX))
    .forEach(k => localStorage.removeItem(k));
  render();
}

function render(){
  const body = document.getElementById("matrix-body");
  body.innerHTML = "";
  const keys = Object.keys(localStorage).filter(k=>k.startsWith(PREFIX)).sort();
  if(!keys.length){
    body.innerHTML = "<tr><td colspan='5'>No engines registered.</td></tr>";
    return;
  }
  keys.forEach(k=>{
    const d = JSON.parse(localStorage.getItem(k) || "{}");
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${d.namespace}</td><td>${d.family}</td><td>${d.core}</td><td>${d.version}</td><td>local</td>`;
    body.appendChild(tr);
  });
}

document.getElementById("registerAll").onclick = registerAll;
document.getElementById("clearAll").onclick = clearAll;
document.getElementById("refresh").onclick = render;
render();
</script>
</body>
</html>
