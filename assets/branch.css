/* ============================================================
   BRANCH GEOMETRY OWNER
   MID-AUTUMN EDITION
   Snowflake field + Diamond compass
   No html/body overrides
   ============================================================ */

/* =============================
   COMPASS CONTAINER
   ============================= */

.crp-snowflake{
  width:100%;
  max-width:760px;
  margin:0 auto;
  padding:16px 12px 32px;

  position:relative;
  display:grid;
  place-items:center;

  --sf-size: min(720px, 90vw, 85vh);
  --sf-radius: calc(var(--sf-size) * 0.33);
  --sf-node: clamp(90px, 16vw, 140px);
  --sf-core: clamp(130px, 22vw, 180px);

  width:var(--sf-size);
  height:var(--sf-size);

  border-radius:999px;

  /* Deep night panel */
  background:
    radial-gradient(circle at center, rgba(255,223,120,0.06), transparent 45%),
    radial-gradient(circle at center, rgba(255,255,255,0.04), transparent 70%),
    rgba(5,8,18,0.65);

  border:1px solid rgba(255,255,255,0.08);
  box-shadow:0 20px 60px rgba(0,0,0,0.45);

  overflow:hidden;
}

/* Snowflake lattice (subtle) */
.crp-snowflake::before{
  content:"";
  position:absolute;
  inset:8%;
  border-radius:999px;
  border:1px dashed rgba(255,255,255,0.08);
  pointer-events:none;
}

.crp-snowflake::after{
  content:"";
  position:absolute;
  inset:20%;
  border-radius:999px;
  border:1px dashed rgba(255,255,255,0.05);
  pointer-events:none;
}

/* =============================
   NUCLEUS — DIAMOND (MOON CORE)
   ============================= */

.crp-nucleus{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);

  width:var(--sf-core);
  height:var(--sf-core);
  border-radius:28px;

  display:grid;
  place-items:center;
  text-align:center;

  font-weight:950;
  letter-spacing:.4px;

  /* Moon glow */
  background:
    radial-gradient(circle at center, rgba(255,236,150,0.85), rgba(255,190,80,0.25) 60%, rgba(255,180,60,0.08) 80%, transparent 100%),
    rgba(20,22,40,0.9);

  color:#fdf6d3;

  border:1px solid rgba(255,230,140,0.6);

  box-shadow:
    0 0 30px rgba(255,210,120,0.35),
    0 12px 40px rgba(0,0,0,0.4);

  cursor:pointer;
  z-index:3;
}

.crp-nucleus:hover{
  box-shadow:
    0 0 45px rgba(255,220,150,0.5),
    0 16px 60px rgba(0,0,0,0.5);
}

/* =============================
   AXIS NODES — DIAMOND COMPASS
   ============================= */

.crp-axis{
  position:absolute;
  left:50%;
  top:50%;
  width:var(--sf-node);
  height:var(--sf-node);

  transform-origin:center;

  /* Diamond shape */
  transform:
    translate(-50%,-50%)
    rotate(45deg)
    translate(var(--dx), var(--dy));

  display:grid;
  place-items:center;
  text-align:center;

  background:
    linear-gradient(145deg, rgba(255,215,120,0.18), rgba(255,150,60,0.05));

  border:1px solid rgba(255,210,120,0.35);

  box-shadow:
    0 8px 24px rgba(0,0,0,0.35),
    inset 0 0 0 1px rgba(255,240,180,0.12);

  cursor:pointer;
  z-index:2;
}

/* counter-rotate text inside diamond */
.crp-axis > *{
  transform:rotate(-45deg);
}

.crp-axis:hover{
  box-shadow:
    0 0 20px rgba(255,200,120,0.45),
    0 10px 28px rgba(0,0,0,0.45);
}

/* =============================
   HEX POSITIONING
   ============================= */

.crp-axis[data-axis="rho"]{
  --dx: 0px;
  --dy: calc(var(--sf-radius) * -1);
}

.crp-axis[data-axis="tc"]{
  --dx: calc(var(--sf-radius) * 0.866);
  --dy: calc(var(--sf-radius) * -0.5);
}

.crp-axis[data-axis="delta"]{
  --dx: calc(var(--sf-radius) * 0.866);
  --dy: calc(var(--sf-radius) * 0.5);
}

.crp-axis[data-axis="hip"]{
  --dx: 0px;
  --dy: var(--sf-radius);
}

.crp-axis[data-axis="lambda"]{
  --dx: calc(var(--sf-radius) * -0.866);
  --dy: calc(var(--sf-radius) * 0.5);
}

.crp-axis[data-axis="cert"]{
  --dx: calc(var(--sf-radius) * -0.866);
  --dy: calc(var(--sf-radius) * -0.5);
}
