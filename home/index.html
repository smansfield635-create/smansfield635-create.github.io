<!-- TNT — CARDINALITY_SPINE_ADVANCED_v1 (PLACE THIS AS YOUR “CARDINALITY-FIRST INDEX” PAGE)
     MODE: ADVANCED (PAGINATED) · NO DRIFT · CARDINALITY-FIRST · MIRROR-READY
     SCOPE (PHASE 1): 4-FACE ONLY (N/E/S/W)
     LENSES: gd_style=formal|informal (copy only)
     LANG: gd_lang=en|zh (EN-only / 中文-only)
     KEYS (CANON): gd_lang / gd_style / gd_time (read+persist; no new keys)
     NOTE:
       - This is the “Cardinality Spine” (Structure-first). Mirror page comes later.
       - Product jump links are STUBBED safely (you can replace hrefs later).
       - Geometry/count is stable: same rows exist in both lenses and both languages.
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Cardinality Spine · Index</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>

<style>
/* DO NOT TOUCH FIELD — ui.css owns html/body background */
body{margin:0;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
a{color:inherit;text-decoration:none}

/* Buttons (fallback-safe) */
.btn,.crp-btn{
  display:inline-flex;align-items:center;justify-content:center;
  padding:10px 14px;border-radius:14px;
  background:linear-gradient(145deg, rgba(12,22,38,.92), rgba(7,11,18,.95));
  color:#fff;border:1px solid rgba(255,255,255,.10);
  box-shadow:0 14px 36px rgba(0,0,0,.65);
  cursor:pointer;font-weight:900;letter-spacing:.2px;
  -webkit-tap-highlight-color:transparent;
}
.btn:hover,.crp-btn:hover{box-shadow:0 18px 50px rgba(0,0,0,.9),0 0 14px rgba(212,175,55,.20)}
.btn:active,.crp-btn:active{transform:translateY(1px)}

/* Layout */
.wrap{width:min(1040px,94vw);margin:0 auto;padding:14px 0 110px;display:flex;flex-direction:column;gap:14px}
.topbar{
  position:sticky;top:0;z-index:50;
  padding:12px 0;
  backdrop-filter:blur(8px);
}
.toprow{
  display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;
}
.brand{
  display:flex;flex-direction:column;gap:4px;
  padding:10px 14px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);
}
.brand .k{font-size:12px;letter-spacing:3px;text-transform:uppercase;opacity:.78;margin:0}
.brand .t{font-weight:950;font-size:18px;letter-spacing:.2px;margin:0}
.brand .s{font-size:12px;opacity:.78;margin:0}

.controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end}
.select{
  appearance:none;
  padding:10px 14px;border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.18);
  color:#fff;font-weight:900;letter-spacing:.2px;
}

/* Face header card */
.faceCard{
  border:1px solid rgba(255,255,255,.10);
  border-radius:22px;
  background:linear-gradient(145deg, rgba(17,22,28,.80), rgba(11,15,20,.88));
  box-shadow:0 18px 60px rgba(0,0,0,.70);
  padding:14px 16px;
  display:flex;gap:14px;align-items:flex-start;
}
.faceBar{width:10px;border-radius:99px;background:var(--faceColor);flex:0 0 auto}
.faceMeta{flex:1 1 auto;min-width:0}
.faceMeta h2{margin:0 0 6px;font-weight:950;letter-spacing:.2px;font-size:16px}
.faceMeta p{margin:0;color:rgba(255,255,255,.84);line-height:1.45;font-size:13px}
.faceMeta .hint{margin-top:8px;color:rgba(255,255,255,.70);font-size:12px}

/* Narrative rows (long horizontal bubbles stacked vertically) */
.list{display:flex;flex-direction:column;gap:12px}
.row{
  border:1px solid rgba(255,255,255,.10);
  border-radius:22px;
  background:linear-gradient(145deg, rgba(12,22,38,.86), rgba(7,11,18,.92));
  box-shadow:0 16px 52px rgba(0,0,0,.60);
  overflow:hidden;
}
.head{
  display:flex;align-items:center;justify-content:space-between;gap:10px;
  padding:14px 16px;cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}
.left{display:flex;align-items:center;gap:12px;min-width:0}
.badge{width:10px;height:22px;border-radius:99px;background:var(--faceColor);flex:0 0 auto}
.title{font-weight:950;letter-spacing:.2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.sub{font-size:12px;opacity:.72;margin-left:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chev{font-size:16px;opacity:.75;flex:0 0 auto}

/* Body: 3 stacked paragraph bubbles (Concept / Live / Roadmap) */
.body{display:none;padding:14px 16px 16px;border-top:1px solid rgba(255,255,255,.08)}
.row.open .body{display:block}
.pstack{display:flex;flex-direction:column;gap:12px}
.pbub{
  padding:14px 16px;border-radius:18px;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 30% 30%, rgba(120,160,255,.06), transparent 55%),
    linear-gradient(145deg, rgba(17,22,28,.80), rgba(11,15,20,.88));
  box-shadow:0 12px 40px rgba(0,0,0,.55), inset 0 2px 0 rgba(255,255,255,.05);
}
.pbub .pt{margin:0 0 8px;font-weight:950;letter-spacing:.2px;font-size:13px}
.pbub .pp{margin:0;color:rgba(255,255,255,.86);line-height:1.55;font-size:13px}
.tag{opacity:.75}

/* Jump row */
.jump{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;margin-top:12px}

/* Bottom dock */
.dock{
  position:fixed;left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:120;
  width:min(980px,94vw);
  display:flex;justify-content:center;
  gap:10px;flex-wrap:wrap;
  padding:10px 12px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.20);
  backdrop-filter:blur(8px);
}

/* Mobile */
@media (max-width:560px){
  .brand .t{font-size:16px}
  .controls{justify-content:flex-start}
}
</style>
</head>

<body>

<div class="topbar">
  <div class="wrap">
    <div class="toprow">
      <div class="brand" aria-hidden="true">
        <p class="k" id="bk">CARDINALITY SPINE</p>
        <p class="t" id="bt">Index · Structure-first</p>
        <p class="s" id="bs">North · East · South · West</p>
      </div>

      <div class="controls">
        <select class="select" id="faceSelect" aria-label="Face">
          <option value="N">N · DEFINITIONS</option>
          <option value="E">E · PRODUCTS</option>
          <option value="S">S · CONSTRAINTS</option>
          <option value="W">W · CONTAINMENT</option>
        </select>

        <select class="select" id="lensSelect" aria-label="Lens">
          <option value="formal">Formal</option>
          <option value="informal">Informal</option>
        </select>

        <select class="select" id="langSelect" aria-label="Language">
          <option value="en">EN</option>
          <option value="zh">中文</option>
        </select>

        <a class="btn" id="btnMirror" href="#">MIRROR</a>
      </div>
    </div>
  </div>
</div>

<div class="wrap">
  <div class="faceCard" id="faceCard" style="--faceColor:#1F3A8A">
    <div class="faceBar"></div>
    <div class="faceMeta">
      <h2 id="faceH">N · DEFINITIONS</h2>
      <p id="faceP">Cardinality-first. Meaning before deployment. Definitions bind scope and prevent drift.</p>
      <p class="hint" id="faceHint">Two narratives per face. Each expands into Concept · Live · Roadmap, then jumps to a product page.</p>
    </div>
  </div>

  <div class="list" id="list"></div>
</div>

<nav class="dock" aria-label="Bottom navigation">
  <a class="btn" id="dockHub" href="/home/">HUB</a>
  <a class="btn" id="dockExplore" href="/explore/">EXPLORE</a>
  <a class="btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="btn" id="dockGauges" href="/gauges/">GAUGES</a>
</nav>

<script>
(function(){
  // ===== CANON KEYS ONLY =====
  var qs = new URLSearchParams(location.search);
  var gd_lang  = qs.get("gd_lang")  || localStorage.getItem("gd_lang")  || "en";
  var gd_style = qs.get("gd_style") || localStorage.getItem("gd_style") || "formal";
  var gd_time  = qs.get("gd_time")  || localStorage.getItem("gd_time")  || "now";

  if(gd_lang!=="en" && gd_lang!=="zh") gd_lang="en";
  if(gd_style!=="formal" && gd_style!=="informal") gd_style="formal";
  if(gd_time==="trajectory") gd_time="post";
  if(gd_time!=="origin" && gd_time!=="now" && gd_time!=="post") gd_time="now";

  try{
    localStorage.setItem("gd_lang", gd_lang);
    localStorage.setItem("gd_style", gd_style);
    localStorage.setItem("gd_time", gd_time);
  }catch(e){}

  document.documentElement.lang = (gd_lang==="zh") ? "zh" : "en";

  function q(){
    var p=new URLSearchParams();
    p.set("gd_lang", gd_lang);
    p.set("gd_style", gd_style);
    p.set("gd_time", gd_time);
    return "?"+p.toString();
  }

  // Wire dock (state preserved)
  document.getElementById("dockHub").href="/home/"+q();
  document.getElementById("dockExplore").href="/explore/"+q();
  document.getElementById("dockProducts").href="/products/"+q();
  document.getElementById("dockLaws").href="/laws/"+q();
  document.getElementById("dockGauges").href="/gauges/"+q();

  // Controls initial
  var faceSelect=document.getElementById("faceSelect");
  var lensSelect=document.getElementById("lensSelect");
  var langSelect=document.getElementById("langSelect");
  lensSelect.value = gd_style;
  langSelect.value = gd_lang;

  // Face colors (subset of your 12-shade ring)
  var FACE_COLOR = { N:"#1F3A8A", E:"#0EA5E9", S:"#F59E0B", W:"#7F1D1D" };

  // Helpers
  function T(enF,enI,zhF,zhI){
    return (gd_lang==="zh") ? ((gd_style==="formal")?zhF:zhI) : ((gd_style==="formal")?enF:enI);
  }

  // === Phase 1 content: 4 faces × 2 narratives each (no product guessing; safe stubs) ===
  // Replace href fields later with your real product pages.
  var DATA = {
    N: {
      labelEN:"N · DEFINITIONS",
      labelZH:"N · 定义",
      descEN:"Cardinality-first. Meaning before deployment. Definitions bind scope and prevent drift.",
      descZH:"先结构后执行。定义先行，范围可采信，语义不漂移。",
      rows:[
        {
          tEN:"N1 · Semantic Contract",
          tZH:"N1 · 语义契约",
          sEN:"Meaning is pinned before measurement.",
          sZH:"先钉含义，再谈测量。",
          cENF:"Definitions lock meaning so measurement and claims remain admissible within declared scope.",
          cENI:"Lock meanings first so nothing drifts.",
          cZHF:"定义钉住含义，使测量与主张在声明范围内保持可采信。",
          cZHI:"先把词钉死，后面就不漂。",
          nENF:"Live usage routes disputes to definitions and registries instead of persuasion.",
          nENI:"When it’s fuzzy, you route—don’t argue.",
          nZHF:"现况中，争议被路由回定义与注册表，而不是靠说服。",
          nZHI:"模糊就跳转，不争论。",
          rENF:"Extend definitions only by explicit declaration and testability; never by narrative inflation.",
          rENI:"Add meaning carefully—never by hype.",
          rZHF:"路线图：只通过明确声明与可证伪性扩展定义；绝不靠叙事膨胀。",
          rZHI:"加词要谨慎，别靠吹。",
          href:"#"
        },
        {
          tEN:"N2 · Invariants Under Scale",
          tZH:"N2 · 规模下的不变量",
          sEN:"What must never change.",
          sZH:"永远不该变的线。",
          cENF:"Invariants define the non-negotiables that keep the compass coherent across instances.",
          cENI:"The rules you never bend.",
          cZHF:"不变量定义跨实例保持罗盘一致性的不可协商项。",
          cZHI:"永远不弯的规则。",
          nENF:"Live enforcement prevents silent semantic edits during expansion and product proliferation.",
          nENI:"No silent edits allowed.",
          nZHF:"现况执行阻止扩张与产品倍增过程中的静默改义。",
          nZHI:"不让你悄悄改。",
          rENF:"Add invariants only when observer-invariant and testable; otherwise refuse expansion.",
          rENI:"Only add weight when it’s measurable.",
          rZHF:"路线图：只在可观察一致且可证伪时增加不变量；否则拒绝扩张。",
          rZHI:"能测才加重量。",
          href:"#"
        }
      ]
    },

    E: {
      labelEN:"E · PRODUCTS",
      labelZH:"E · 产品",
      descEN:"Cardinality-first. Products are bounded execution ramps—adoption surfaces under constraint.",
      descZH:"先结构后产品。产品是有界执行匝道，在约束内被采纳。",
      rows:[
        {
          tEN:"E1 · Execution Surfaces",
          tZH:"E1 · 执行面",
          sEN:"Deploy without drift.",
          sZH:"部署不漂移。",
          cENF:"A product is an execution surface that must preserve navigation contracts and admissibility boundaries.",
          cENI:"A tool that must keep the rules intact.",
          cZHF:"产品是执行面，必须保持导航契约与可采信边界。",
          cZHI:"工具也要守规矩。",
          nENF:"Live deployment routes verification to Laws/Gauges rather than persuasion.",
          nENI:"Proof has an address.",
          nZHF:"现况部署把核查路由到法则/量规，而不是靠说服。",
          nZHI:"证据有地址。",
          rENF:"Scale products by replication of the same compass geometry, not redesign.",
          rENI:"Clone structure, don’t reinvent.",
          rZHF:"路线图：通过复制同一罗盘几何扩张产品，而不是重造。",
          rZHI:"复制结构，不重造。",
          href:"#"
        },
        {
          tEN:"E2 · IP vs SKU",
          tZH:"E2 · IP与SKU",
          sEN:"Structure vs packaging.",
          sZH:"结构 vs 封装。",
          cENF:"IP is structural capability; SKU is market packaging. Packaging never changes geometry.",
          cENI:"Engine vs box. Box never changes the compass.",
          cZHF:"IP是结构能力；SKU是市场封装。封装不改变几何。",
          cZHI:"发动机 vs 盒子。盒子不改罗盘。",
          nENF:"Live SKU expansion is allowed only as payload under fixed anchors.",
          nENI:"More SKUs, same compass.",
          nZHF:"现况中SKU扩张只能作为固定锚点下的载荷。",
          nZHI:"SKU多了，罗盘不变。",
          rENF:"Licensing lives inside Products as packaging rules, not new coordinates.",
          rENI:"Licensing is packaging, not geometry.",
          rZHF:"路线图：授权属于产品封装规则，而不是新坐标。",
          rZHI:"授权是封装，不是几何。",
          href:"#"
        }
      ]
    },

    S: {
      labelEN:"S · CONSTRAINTS",
      labelZH:"S · 约束",
      descEN:"Cardinality-first. Constraints protect truth boundaries: admissibility, gates, and anti-drift.",
      descZH:"先约束再扩张。可采信闸门、阶段闸门、反漂移共同守边界。",
      rows:[
        {
          tEN:"S1 · Admissibility Gate",
          tZH:"S1 · 可采信闸门",
          sEN:"No scope, no claim.",
          sZH:"无范围，不主张。",
          cENF:"Claims are refused without declared scope, receipts, and falsifiers.",
          cENI:"No proof, no claim.",
          cZHF:"无声明范围、无收据、无证伪条件则拒绝主张。",
          cZHI:"没证据就别说。",
          nENF:"Live gates block shortcut traversal and narrative inflation.",
          nENI:"No shortcuts.",
          nZHF:"现况闸门阻止抄近道与叙事膨胀。",
          nZHI:"不走捷径。",
          rENF:"Publish refusal doctrine so boundaries remain stable under scale.",
          rENI:"Make ‘no’ explicit.",
          rZHF:"路线图：公开拒绝准则，使边界在规模化中仍稳定。",
          rZHI:"把“不行”写清楚。",
          href:"#"
        },
        {
          tEN:"S2 · Phase Gates",
          tZH:"S2 · 阶段闸门",
          sEN:"Prerequisites, not hype.",
          sZH:"先决条件，不是噱头。",
          cENF:"‘When’ is prerequisites. Readiness is a checklist, not a date.",
          cENI:"Readiness is a list, not a promise.",
          cZHF:"“何时”是先决条件。就绪是清单，不是日期。",
          cZHI:"就绪是清单，不是承诺。",
          nENF:"Live frontier expansion must show prerequisites before invitation.",
          nENI:"Gate before dream.",
          nZHF:"现况前沿扩张必须先展示先决条件，再发出邀请。",
          nZHI:"先闸门再做梦。",
          rENF:"Tighten gates only with evidence; never loosen by narrative.",
          rENI:"Evidence tightens—stories don’t.",
          rZHF:"路线图：只用证据收紧闸门；绝不靠叙事放松。",
          rZHI:"证据能收紧，故事不能放松。",
          href:"#"
        }
      ]
    },

    W: {
      labelEN:"W · CONTAINMENT",
      labelZH:"W · 隔离",
      descEN:"Cardinality-first. Containment prevents cascade: isolation, evidence chain, and recoverability.",
      descZH:"先隔离再扩张。隔离层、证据链、可恢复性共同防级联。",
      rows:[
        {
          tEN:"W1 · Isolation",
          tZH:"W1 · 隔离层",
          sEN:"Keep damage local.",
          sZH:"把损伤局部化。",
          cENF:"Failures must be segmented so local breaks cannot become global collapse.",
          cENI:"Contain it fast.",
          cZHF:"失败必须分段，局部破损不能演变为全局崩塌。",
          cZHI:"先隔离，别扩散。",
          nENF:"Live lane separation + return paths prevent tunnel behavior.",
          nENI:"Always keep an exit.",
          nZHF:"现况干线分离+返回路径防止隧道效应。",
          nZHI:"永远有出口。",
          rENF:"Add containment gauges as the system scales; measure spillover mechanically.",
          rENI:"Measure containment, don’t assume it.",
          rZHF:"路线图：规模化时增加隔离量规；用机制测外溢。",
          rZHI:"隔离要测，别靠感觉。",
          href:"#"
        },
        {
          tEN:"W2 · Evidence Chain",
          tZH:"W2 · 证据链",
          sEN:"Receipts bind reality.",
          sZH:"收据绑定现实。",
          cENF:"Actions bind to receipts so narrative cannot inflate claims.",
          cENI:"Receipts beat persuasion.",
          cZHF:"行动绑定收据，叙事无法膨胀主张。",
          cZHI:"收据胜过说服。",
          nENF:"Live verification routes remain linkable (Laws/Gauges) without exposing recipes.",
          nENI:"Proof posture, not secrets.",
          nZHF:"现况核查路径可引用（法则/量规），但不泄露配方。",
          nZHI:"证明姿态，不泄密。",
          rENF:"Strengthen audit posture as artifacts accumulate; keep boundaries intact.",
          rENI:"More artifacts, stronger proof.",
          rZHF:"路线图：工件越多审计越强；边界保持不变。",
          rZHI:"工件越多，证明越强。",
          href:"#"
        }
      ]
    }
  };

  // UI i18n (single-language)
  function setText(id, txt){ var el=document.getElementById(id); if(el) el.textContent=txt; }
  if(gd_lang==="zh"){
    setText("bk","基轴体系");
    setText("bt","索引 · 先结构");
    setText("bs","北 · 东 · 南 · 西");
    setText("btnMirror","镜像");
    faceSelect.options[0].text="N · 定义";
    faceSelect.options[1].text="E · 产品";
    faceSelect.options[2].text="S · 约束";
    faceSelect.options[3].text="W · 隔离";
  }

  // Set face card + list
  var faceCard=document.getElementById("faceCard");
  var faceH=document.getElementById("faceH");
  var faceP=document.getElementById("faceP");
  var list=document.getElementById("list");

  function renderFace(face){
    // color + header
    faceCard.style.setProperty("--faceColor", FACE_COLOR[face] || "#93C5FD");
    var pack = DATA[face];
    faceH.textContent = (gd_lang==="zh") ? pack.labelZH : pack.labelEN;
    faceP.textContent = (gd_lang==="zh") ? pack.descZH : pack.descEN;

    // list rows
    list.innerHTML="";
    pack.rows.forEach(function(r, idx){
      var row=document.createElement("div");
      row.className="row";
      row.style.setProperty("--faceColor", FACE_COLOR[face] || "#93C5FD");

      var head=document.createElement("div");
      head.className="head";

      var left=document.createElement("div");
      left.className="left";

      var badge=document.createElement("div");
      badge.className="badge";

      var title=document.createElement("div");
      title.className="title";
      title.textContent = (gd_lang==="zh") ? r.tZH : r.tEN;

      var sub=document.createElement("div");
      sub.className="sub";
      sub.textContent = (gd_lang==="zh") ? r.sZH : r.sEN;

      left.appendChild(badge);
      left.appendChild(title);
      left.appendChild(sub);

      var chev=document.createElement("div");
      chev.className="chev";
      chev.textContent="▸";

      head.appendChild(left);
      head.appendChild(chev);

      var body=document.createElement("div");
      body.className="body";

      var pstack=document.createElement("div");
      pstack.className="pstack";

      function paraBlock(mode, text){
        var pb=document.createElement("div");
        pb.className="pbub";
        var pt=document.createElement("p");
        pt.className="pt";
        pt.textContent=mode;
        var pp=document.createElement("p");
        pp.className="pp";
        pp.textContent=text;
        pb.appendChild(pt);
        pb.appendChild(pp);
        return pb;
      }

      // Resolve per lens
      var c = T(r.cENF,r.cENI,r.cZHF,r.cZHI);
      var n = T(r.nENF,r.nENI,r.nZHF,r.nZHI);
      var ro= T(r.rENF,r.rENI,r.rZHF,r.rZHI);

      var mC = (gd_lang==="zh") ? "概念" : "Concept";
      var mN = (gd_lang==="zh") ? "现况" : "Live";
      var mR = (gd_lang==="zh") ? "路线图" : "Roadmap";

      pstack.appendChild(paraBlock(mC, c));
      pstack.appendChild(paraBlock(mN, n));
      pstack.appendChild(paraBlock(mR, ro));

      var jump=document.createElement("div");
      jump.className="jump";

      var a=document.createElement("a");
      a.className="btn";
      a.textContent = (gd_lang==="zh") ? "跳转产品" : "JUMP TO PRODUCT";
      a.href = r.href; // STUB SAFE (#) until you replace
      jump.appendChild(a);

      body.appendChild(pstack);
      body.appendChild(jump);

      head.addEventListener("click", function(){
        // close others
        list.querySelectorAll(".row").forEach(function(x){
          if(x!==row){ x.classList.remove("open"); var c=x.querySelector(".chev"); if(c) c.textContent="▸"; }
        });
        var open = row.classList.toggle("open");
        chev.textContent = open ? "▾" : "▸";
      });

      row.appendChild(head);
      row.appendChild(body);
      list.appendChild(row);

      // open first by default
      if(idx===0){
        row.classList.add("open");
        chev.textContent="▾";
      }
    });
  }

  // Bind controls
  function applyState(){
    gd_style = lensSelect.value;
    gd_lang  = langSelect.value;
    try{
      localStorage.setItem("gd_style", gd_style);
      localStorage.setItem("gd_lang", gd_lang);
    }catch(e){}
    location.search = q() + "&face=" + encodeURIComponent(faceSelect.value);
  }

  // Face selection from query
  var face = (new URLSearchParams(location.search).get("face") || "N").toUpperCase();
  if(!DATA[face]) face="N";
  faceSelect.value = face;

  // Mirror button (stub; replace when mirror page path is known)
  document.getElementById("btnMirror").href = "#";

  // Render
  renderFace(face);

  // Change handlers (reload with preserved keys)
  faceSelect.addEventListener("change", function(){ location.search = q() + "&face=" + encodeURIComponent(faceSelect.value); });
  lensSelect.addEventListener("change", applyState);
  langSelect.addEventListener("change", applyState);

})();
</script>

</body>
</html>
