<!-- TNT — /products/index.html  (PRODUCTS HUB → 4 SUBPAGES)
     Fix: buttons didn’t work because we tried to hold an entire product encyclopedia on one page.
     New structure (correct):
       NORTH → /products/software/
       EAST  → /products/commercial/
       SOUTH → /products/energy/
       WEST  → /products/education/
     Main page stays clean (no lenses on main page).
     Dual-lens persists via localStorage and is also propagated via query string on click.
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · Cardinal Axis</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>

<style>
:root{
  --R:124px;
  --goldSoft:rgba(212,175,55,.35);
  --obs1:#070b12;
  --obs2:#0c1626;
  --mut2:rgba(255,255,255,.68);
}

body{
  margin:0;
  min-height:100vh;
  background:
    radial-gradient(circle at 50% 40%, rgba(90,140,255,.10), transparent 60%),
    repeating-linear-gradient(45deg, rgba(255,255,255,.02) 0 1px, transparent 1px 100px),
    linear-gradient(180deg,#b00000 0%,#7a0000 60%,#550000 100%);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:#fff;
  overflow-x:hidden;
}

/* Top-left only */
.top-left{
  position:fixed;left:16px;top:16px;z-index:90;
  display:flex;gap:10px;flex-wrap:wrap;align-items:center;
}
.btn{
  padding:10px 16px;
  border-radius:14px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  color:white;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.7);
  cursor:pointer;
  font-weight:900;
  letter-spacing:.2px;
  text-decoration:none;
}
.btn:hover{ box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px var(--goldSoft); }

/* Center brand */
.brand{
  position:fixed;
  left:50%;
  top:16px;
  transform:translateX(-50%);
  z-index:80;
  text-align:center;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);
  backdrop-filter:blur(8px);
}
.brand .name{ font-weight:950; letter-spacing:1.2px; font-size:12px; opacity:.95; }
.brand .tag{ font-size:11px; letter-spacing:.6px; opacity:.70; margin-top:2px; }

/* Stage */
.stage{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:min(560px,92vw);
  height:min(560px,92vw);
  z-index:40;
}

/* Diamond link (anchor) */
.diamond{
  width:150px;height:150px;
  position:absolute;
  left:50%;top:50%;
  transform-origin:center;
  border-radius:22px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;

  background:
    radial-gradient(circle at 35% 25%, rgba(255,255,255,.15), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.18), transparent 60%),
    linear-gradient(160deg, var(--obs2) 0%, var(--obs1) 60%);

  box-shadow:
    0 25px 70px rgba(0,0,0,.82),
    inset 0 2px 0 rgba(255,255,255,.18),
    inset 0 -25px 35px rgba(0,0,0,.65);

  border:1px solid rgba(255,255,255,.08);
  transition:all 260ms ease;

  text-decoration:none;
  color:#fff;
  display:block;
}
.diamond::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 5deg, transparent 5deg 15deg);
  mix-blend-mode:overlay;
  opacity:.25;
  pointer-events:none;
}
.diamond:hover{
  transform:translate(-50%,-50%) rotate(45deg) scale(1.02);
  box-shadow:
    0 30px 90px rgba(0,0,0,.9),
    0 0 22px var(--goldSoft),
    inset 0 2px 0 rgba(255,255,255,.22),
    inset 0 -28px 40px rgba(0,0,0,.7);
}

.inner{
  width:100%;
  height:100%;
  transform:rotate(-45deg);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:16px;
  gap:10px;
  pointer-events:none;
}
.dir{ font-weight:950; letter-spacing:.6px; font-size:16px; }
.preview{ font-size:13px; opacity:.88; line-height:1.35; max-width:16em; color:var(--mut2); }

#north{ transform:translate(-50%,-50%) translate(0, calc(var(--R) * -1)) rotate(45deg); }
#east { transform:translate(-50%,-50%) translate(var(--R),0) rotate(45deg); }
#south{ transform:translate(-50%,-50%) translate(0,var(--R)) rotate(45deg); }
#west { transform:translate(-50%,-50%) translate(calc(var(--R) * -1),0) rotate(45deg); }

.core{
  position:absolute;
  left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:64px;height:64px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.18);
  box-shadow:0 18px 44px rgba(0,0,0,.62), inset 0 2px 0 rgba(255,255,255,.10);
  display:grid;
  place-items:center;
  font-weight:950;
  letter-spacing:.5px;
  opacity:.90;
  pointer-events:none;
}

/* Dock */
.dock{
  position:fixed;
  left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:90;
  width:min(900px,94vw);
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.20);
  backdrop-filter:blur(8px);
}

/* Stamp */
.stamp{
  position:fixed;
  right:16px;
  bottom:max(16px, env(safe-area-inset-bottom));
  z-index:85;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.18);
  backdrop-filter:blur(8px);
  font-weight:950;
  letter-spacing:.8px;
  font-size:11px;
  opacity:.90;
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" href="/home/">HUB</a>
  <a class="btn" href="/door/">EXIT</a>
</div>

<div class="brand">
  <div class="name" id="brandName">CARDINAL AXIS</div>
  <div class="tag" id="brandTag">Traversal Encyclopedic Study</div>
</div>

<div class="stage" id="stage">
  <a class="diamond" id="north" href="/products/software/">
    <div class="inner">
      <div class="dir" id="nLab">SOFTWARE</div>
      <div class="preview" id="nPrev">Software systems express the architecture as executable tools.</div>
    </div>
  </a>

  <a class="diamond" id="east" href="/products/commercial/">
    <div class="inner">
      <div class="dir" id="eLab">COMMERCIAL</div>
      <div class="preview" id="ePrev">Commercial systems package execution into revenue-ready workflows.</div>
    </div>
  </a>

  <a class="diamond" id="south" href="/products/energy/">
    <div class="inner">
      <div class="dir" id="sLab">ENERGY</div>
      <div class="preview" id="sPrev">Energy systems apply the architecture to infrastructure and conversion chains.</div>
    </div>
  </a>

  <a class="diamond" id="west" href="/products/education/">
    <div class="inner">
      <div class="dir" id="wLab">EDUCATION</div>
      <div class="preview" id="wPrev">Education systems teach traversal study as a repeatable method.</div>
    </div>
  </a>

  <div class="core">◆</div>
</div>

<nav class="dock" id="dock">
  <a class="btn" id="goTerminal" href="/index.html">TERMINAL</a>
  <a class="btn" id="goLinks" href="/links/">LINKS</a>
  <a class="btn active" href="/products/">PRODUCTS</a>
  <a class="btn" id="goLaws" href="/laws/">LAWS</a>
  <a class="btn" id="goGauges" href="/gauges/">GAUGES</a>
</nav>

<div class="stamp" id="stamp">TRAVERSAL STUDY</div>

<script>
(function(){
  // Dual lens always: EN + 中文
  const qs = new URLSearchParams(location.search);
  const qLang = qs.get("lang");
  let lang = (qLang==="zh"||qLang==="en") ? qLang : (localStorage.getItem("gd_lang")==="zh" ? "zh" : "en");
  try{ localStorage.setItem("gd_lang", lang); }catch(e){}

  // Persisted lenses (kept for subpages)
  let style = localStorage.getItem("gd_style") || "formal";
  let time  = localStorage.getItem("gd_time")  || "now";
  if(time==="trajectory") time="post";
  if(!["origin","now","post"].includes(time)) time="now";
  if(!["formal","informal"].includes(style)) style="formal";

  const UI = {
    en:{
      brand:"CARDINAL AXIS",
      tag:"Traversal Encyclopedic Study",
      stamp:"TRAVERSAL STUDY",
      north:{t:"SOFTWARE", s:"Software systems express the architecture as executable tools."},
      east:{t:"COMMERCIAL", s:"Commercial systems package execution into revenue-ready workflows."},
      south:{t:"ENERGY", s:"Energy systems apply the architecture to infrastructure and conversion chains."},
      west:{t:"EDUCATION", s:"Education systems teach traversal study as a repeatable method."},
      dock:{terminal:"TERMINAL",links:"LINKS",laws:"LAWS",gauges:"GAUGES"}
    },
    zh:{
      brand:"四向轴",
      tag:"遍历式百科研究",
      stamp:"遍历研究",
      north:{t:"软件", s:"软件系统把架构表达为可执行工具。"},
      east:{t:"商业", s:"商业系统把执行打包为可变现流程。"},
      south:{t:"能源", s:"能源系统把架构应用到基础设施与转换链。"},
      west:{t:"教育", s:"教育系统把遍历研究教成可重复的方法。"},
      dock:{terminal:"终端",links:"链接",laws:"法则",gauges:"量规"}
    }
  };
  const T = UI[lang] || UI.en;

  document.getElementById("brandName").textContent = T.brand;
  document.getElementById("brandTag").textContent = T.tag;
  document.getElementById("stamp").textContent = T.stamp;

  document.getElementById("nLab").textContent = T.north.t;
  document.getElementById("nPrev").textContent = T.north.s;
  document.getElementById("eLab").textContent = T.east.t;
  document.getElementById("ePrev").textContent = T.east.s;
  document.getElementById("sLab").textContent = T.south.t;
  document.getElementById("sPrev").textContent = T.south.s;
  document.getElementById("wLab").textContent = T.west.t;
  document.getElementById("wPrev").textContent = T.west.s;

  document.getElementById("goTerminal").textContent = T.dock.terminal;
  document.getElementById("goLinks").textContent = T.dock.links;
  document.getElementById("goLaws").textContent = T.dock.laws;
  document.getElementById("goGauges").textContent = T.dock.gauges;

  // Propagate lens state to subpages via query string (deterministic)
  const q = "lang="+encodeURIComponent(lang)+"&style="+encodeURIComponent(style)+"&time="+encodeURIComponent(time);

  document.getElementById("north").setAttribute("href","/products/software/?"+q);
  document.getElementById("east").setAttribute("href","/products/commercial/?"+q);
  document.getElementById("south").setAttribute("href","/products/energy/?"+q);
  document.getElementById("west").setAttribute("href","/products/education/?"+q);

  document.getElementById("goTerminal").setAttribute("href","/index.html?"+q);
  document.getElementById("goLinks").setAttribute("href","/links/?"+q);
  document.getElementById("goLaws").setAttribute("href","/laws/?"+q);
  document.getElementById("goGauges").setAttribute("href","/gauges/?"+q);

  // Leveling (no overlap) like hub: keep stage centered between top and dock
  function level(){
    const top = document.querySelector(".top-left");
    const dock = document.getElementById("dock");
    const stage = document.getElementById("stage");
    if(!dock || !stage) return;
    const safe=10;
    const topBand = (top ? top.getBoundingClientRect().bottom : 0) + safe;
    const dockTop = dock.getBoundingClientRect().top - safe;
    const centerY = (topBand + dockTop) / 2;
    stage.style.top = centerY + "px";
  }
  window.addEventListener("resize", level, {passive:true});
  window.addEventListener("orientationchange", ()=>setTimeout(level,50), {passive:true});
  setTimeout(level,0);
})();
</script>

</body>
</html>
