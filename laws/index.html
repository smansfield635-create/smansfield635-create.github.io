<!-- TNT — /laws/index.html  (LAWS · HUB · GEM STANDARD)
     PATTERN (matches DOT.GRID / SSG / ACRONYMS):
       - Main page: 4 diamonds (HOW IT FEELS / WHY IT MATTERS / HOW IT WORKS / WHAT’S NEXT)
       - Click a diamond → centered modal
       - Modal lenses ONLY: STYLE (formal/informal) + TIME (CONCEPT / NOW / ROADMAP) with gd_time = origin/now/post
       - Inside modal: 4 BUBBLES (rich paragraph; consumer-legible)
       - Modal footer actions are bubbles (no purple links): RETURN / JUMP HUB / JUMP EXPLORE
       - Deterministic state propagation via ?lang=&style=&time= and gd_* localStorage
     LOCKS:
       - TNT FULL FILE
       - Uses /assets/ui.css + /assets/branch.css only
       - DOES NOT style html/body background (ui.css owns field)
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>LAWS · Standards & Principles</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>

<style>
:root{
  --R:124px;
  --goldSoft:rgba(212,175,55,.35);
  --obs1:#070b12;
  --obs2:#0c1626;
  --mut:rgba(255,255,255,.84);
}

/* Top-left controls */
.top-left{
  position:fixed;left:16px;top:16px;z-index:90;
  display:flex;gap:10px;flex-wrap:wrap;align-items:center;
}

/* Title pill */
.brand{
  position:fixed;left:50%;top:16px;transform:translateX(-50%);
  z-index:80;text-align:center;
  padding:10px 14px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);
  backdrop-filter:blur(8px);
}
.brand .t1{font-weight:950;letter-spacing:1.1px;font-size:12px;opacity:.95}
.brand .t2{margin-top:2px;font-size:11px;letter-spacing:.6px;opacity:.72}

/* Stage */
.stage{
  position:fixed;left:50%;top:52%;
  transform:translate(-50%,-50%);
  width:min(560px,92vw);
  height:min(560px,92vw);
  z-index:40;
}

/* Outer gem diamond */
.outer{
  position:absolute;left:50%;top:50%;
  width:min(560px,92vw);
  height:min(560px,92vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:60px;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.14), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.45) 0%, rgba(7,11,18,.62) 70%);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:
    0 90px 260px rgba(0,0,0,.62),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -50px 90px rgba(0,0,0,.55);
  pointer-events:none;
  opacity:.85;
}
.outer::after{
  content:"";
  position:absolute; inset:0; border-radius:60px;
  background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 6deg, transparent 6deg 18deg);
  opacity:.16;
}

/* Gem diamonds */
.d{
  width:150px;height:150px;
  position:absolute;left:50%;top:50%;
  transform-origin:center;
  border-radius:26px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;

  background:
    radial-gradient(circle at 35% 25%, rgba(255,255,255,.14), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.18), transparent 60%),
    linear-gradient(160deg, rgba(12,22,38,.92) 0%, rgba(7,11,18,.95) 70%);

  border:1px solid rgba(255,255,255,.10);
  box-shadow:
    0 28px 84px rgba(0,0,0,.78),
    inset 0 2px 0 rgba(255,255,255,.14),
    inset 0 -28px 44px rgba(0,0,0,.62);

  transition:transform 220ms ease, box-shadow 220ms ease, border-color 220ms ease;
}
.d::before{
  content:"";
  position:absolute; inset:0; border-radius:26px; padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.45;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude;
  pointer-events:none;
}
.d::after{
  content:"";
  position:absolute; left:12%; right:12%; top:10%; height:28%;
  border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.16), rgba(255,255,255,0));
  opacity:.85;
  transform:rotate(-10deg);
  pointer-events:none;
}
.d:hover{
  transform:translate(-50%,-50%) rotate(45deg) scale(1.02);
  box-shadow:
    0 34px 110px rgba(0,0,0,.88),
    0 0 18px rgba(212,175,55,.18),
    inset 0 2px 0 rgba(255,255,255,.18),
    inset 0 -32px 52px rgba(0,0,0,.68);
  border-color:rgba(212,175,55,.28);
}
.d.active{
  border-color:rgba(212,175,55,.55);
  box-shadow:
    0 34px 110px rgba(0,0,0,.88),
    0 0 30px rgba(212,175,55,.40),
    inset 0 2px 0 rgba(255,255,255,.18),
    inset 0 -32px 52px rgba(0,0,0,.68);
}

.d-n{ transform:translate(-50%,-50%) translate(0, calc(var(--R) * -1)) rotate(45deg); }
.d-e{ transform:translate(-50%,-50%) translate(var(--R), 0) rotate(45deg); }
.d-s{ transform:translate(-50%,-50%) translate(0, var(--R)) rotate(45deg); }
.d-w{ transform:translate(-50%,-50%) translate(calc(var(--R) * -1), 0) rotate(45deg); }

.in{
  width:100%; height:100%;
  transform:rotate(-45deg);
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  text-align:center;
  padding:16px;
  gap:8px;
  pointer-events:none;
  user-select:none;
}
.lab{ font-weight:950; letter-spacing:.8px; font-size:15px; }
.sub{ font-size:12.5px; opacity:.86; line-height:1.35; max-width:16em; }

.core{
  position:absolute;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:64px;height:64px;border-radius:18px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.18);
  box-shadow:0 18px 44px rgba(0,0,0,.62), inset 0 2px 0 rgba(255,255,255,.10);
  display:grid;place-items:center;
  font-weight:950;letter-spacing:.5px;
  opacity:.92;
  pointer-events:none;
}

/* Bottom dock */
.dock{
  position:fixed;left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:90;
  width:min(980px,94vw);
  display:flex;justify-content:center;
  gap:10px;flex-wrap:wrap;
  padding:10px 12px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.20);
  backdrop-filter:blur(8px);
}

/* Modal */
.bd{
  position:fixed;inset:0;z-index:200;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(10px);
  display:none;
}
.bd.show{display:block;}
.modal{
  position:fixed;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:min(1020px,94vw);
  max-height:88vh;
  display:none;
  z-index:210;
}
.modal.show{display:block;}
.shell{
  height:88vh;
  border-radius:26px;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 50% 18%, rgba(176,0,0,.20), transparent 55%),
    radial-gradient(circle at 40% 25%, rgba(90,140,255,.12), transparent 55%),
    linear-gradient(160deg, rgba(17,22,28,.90), rgba(11,15,20,.94));
  box-shadow:0 60px 180px rgba(0,0,0,.92);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  position:relative;
}
.shell::before{
  content:"";
  position:absolute;
  left:50%;
  top:58%;
  width:min(980px,94vw);
  height:min(980px,94vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:70px;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.16), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.45) 0%, rgba(7,11,18,.68) 70%);
  box-shadow:
    0 100px 280px rgba(0,0,0,.72),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -55px 100px rgba(0,0,0,.55);
  opacity:.55;
  pointer-events:none;
}
.mhead{
  display:flex;justify-content:space-between;align-items:center;
  gap:10px;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08);
  position:relative;z-index:2;
}
.mtitle{ margin:0; font-weight:950; letter-spacing:.3px; font-size:16px; }
.mclose{ border:0; background:transparent; color:#fff; font-size:18px; cursor:pointer; padding:8px 10px; }

.lensbar{
  display:flex;gap:10px;flex-wrap:wrap;
  align-items:center;justify-content:center;
  padding:10px 10px 12px;border-bottom:1px solid rgba(255,255,255,.08);
  position:relative;z-index:2;
}
.chip{
  padding:10px 16px;border-radius:999px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.65);
  cursor:pointer;font-weight:900;letter-spacing:.2px;color:#fff;
}
.chip.active{
  border-color:rgba(212,175,55,.35);
  box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 16px rgba(212,175,55,.30);
}

.mbody{
  padding:14px 16px 18px;
  overflow:auto;-webkit-overflow-scrolling:touch;
  flex:1 1 auto;
  position:relative;z-index:2;
}

/* 4 bubbles (rich paragraph cards) */
.grid{display:grid;gap:14px}
.bubble{
  padding:16px 18px;border-radius:22px;
  background:
    radial-gradient(circle at 30% 30%, rgba(120,160,255,.08), transparent 55%),
    linear-gradient(145deg, rgba(12,22,38,.92), rgba(7,11,18,.95));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 18px 60px rgba(0,0,0,.70), inset 0 2px 0 rgba(255,255,255,.06);
  position:relative;
}
.bubble::before{
  content:"";
  position:absolute;inset:0;border-radius:22px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, rgba(212,175,55,.35) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude;
  pointer-events:none;
}
.bubble h4{margin:0 0 8px;font-weight:950;letter-spacing:.2px}
.bubble p{margin:0;color:var(--mut);line-height:1.55}
.bubble p span{color:rgba(255,255,255,.70);font-weight:800}

/* Modal footer actions (bubbles) */
.mact{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:14px}
.sbtn{
  display:inline-flex;align-items:center;justify-content:center;
  padding:12px 18px;border-radius:14px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  color:#fff;border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.7);
  cursor:pointer;font-weight:900;letter-spacing:.2px;text-decoration:none;
}
.sbtn:hover{ box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px rgba(212,175,55,.20); }

@media (max-width:520px){
  :root{ --R: 116px; }
  .stage{ width:min(520px,92vw); height:min(520px,92vw); }
  .outer{ width:min(520px,92vw); height:min(520px,92vw); }
  .core{ width:58px; height:58px; }
  .shell{ height:90vh; }
}
</style>
</head>

<body>

<div class="top-left">
  <a class="crp-btn" id="btnHub" href="/home/">HUB</a>
  <a class="crp-btn" id="btnExit" href="/door/">EXIT</a>
</div>

<div class="brand">
  <div class="t1" id="brandTop">LAWS</div>
  <div class="t2" id="brandSub">STANDARDS · PRINCIPLES · GOVERNANCE</div>
</div>

<div class="stage" aria-label="Laws diamond">
  <div class="outer"></div>

  <div class="d d-n" id="dFeels" role="button" tabindex="0">
    <div class="in">
      <div class="lab" id="labFeels">HOW IT FEELS</div>
      <div class="sub" id="subFeels">Clarity without ideology.</div>
    </div>
  </div>

  <div class="d d-e" id="dMatters" role="button" tabindex="0">
    <div class="in">
      <div class="lab" id="labMatters">WHY IT MATTERS</div>
      <div class="sub" id="subMatters">Lower risk · more trust.</div>
    </div>
  </div>

  <div class="d d-w" id="dWorks" role="button" tabindex="0">
    <div class="in">
      <div class="lab" id="labWorks">HOW IT WORKS</div>
      <div class="sub" id="subWorks">Measure · bound · audit.</div>
    </div>
  </div>

  <div class="d d-s" id="dNext" role="button" tabindex="0">
    <div class="in">
      <div class="lab" id="labNext">WHAT’S NEXT</div>
      <div class="sub" id="subNext">CARES/HIP/UCI pages.</div>
    </div>
  </div>

  <div class="core">◆</div>
</div>

<nav class="dock" aria-label="Bottom navigation">
  <a class="crp-btn" id="dockTerminal" href="/index.html">TERMINAL</a>
  <a class="crp-btn" id="dockExplore" href="/explore/">EXPLORE</a>
  <a class="crp-btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="crp-btn" id="dockLinks" href="/links/">LINKS</a>
</nav>

<div class="bd" id="bd"></div>

<div class="modal" id="modal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="mTitle">LAWS · DETAIL</h3>
      <button class="mclose" id="mClose" aria-label="Close" type="button">✕</button>
    </div>

    <div class="lensbar">
      <button class="chip" id="chipStyle" type="button">STYLE: FORMAL</button>
      <button class="chip" id="chipConcept" data-time="origin" type="button">CONCEPT</button>
      <button class="chip" id="chipNow" data-time="now" type="button">NOW</button>
      <button class="chip" id="chipRoadmap" data-time="post" type="button">ROADMAP</button>
    </div>

    <div class="mbody">
      <div class="grid">
        <div class="bubble"><h4 id="h1"></h4><p id="p1"></p></div>
        <div class="bubble"><h4 id="h2"></h4><p id="p2"></p></div>
        <div class="bubble"><h4 id="h3"></h4><p id="p3"></p></div>
        <div class="bubble"><h4 id="h4"></h4><p id="p4"></p></div>
      </div>

      <div class="mact">
        <button class="sbtn" id="mReturn" type="button">RETURN</button>
        <a class="sbtn" id="mJumpHub" href="/home/">JUMP HUB</a>
        <a class="sbtn" id="mJumpExplore" href="/explore/">JUMP EXPLORE</a>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  // ===== STATE =====
  var qs = new URLSearchParams(location.search);
  var qLang = qs.get("lang");
  var qStyle = qs.get("style");
  var qTime = qs.get("time");

  var lang = (qLang==="zh"||qLang==="en") ? qLang : ((localStorage.getItem("gd_lang")==="zh") ? "zh" : "en");
  var style = (qStyle==="formal"||qStyle==="informal") ? qStyle : (localStorage.getItem("gd_style")||"formal");
  var time = (qTime==="origin"||qTime==="now"||qTime==="post") ? qTime : (localStorage.getItem("gd_time")||"now");
  if(time==="trajectory") time="post";

  try{
    localStorage.setItem("gd_lang", lang);
    localStorage.setItem("gd_style", style);
    localStorage.setItem("gd_time", time);
  }catch(e){}

  function q(){ return "lang="+encodeURIComponent(lang)+"&style="+encodeURIComponent(style)+"&time="+encodeURIComponent(time); }

  function wire(){
    var s=q();
    document.getElementById("btnHub").href="/home/?"+s;
    document.getElementById("btnExit").href="/door/?"+s;

    document.getElementById("dockTerminal").href="/index.html?"+s;
    document.getElementById("dockExplore").href="/explore/?"+s;
    document.getElementById("dockProducts").href="/products/?"+s;
    document.getElementById("dockLinks").href="/links/?"+s;

    document.getElementById("mJumpHub").href="/home/?"+s;
    document.getElementById("mJumpExplore").href="/explore/?"+s;
  }
  wire();

  // ===== UI STRINGS (single-language render) =====
  var UI = {
    en:{
      top:"LAWS",
      sub:"STANDARDS · PRINCIPLES · GOVERNANCE",
      tiles:{
        feels:{lab:"HOW IT FEELS", sub:"Clarity without ideology."},
        matters:{lab:"WHY IT MATTERS", sub:"Lower risk · more trust."},
        works:{lab:"HOW IT WORKS", sub:"Measure · bound · audit."},
        next:{lab:"WHAT’S NEXT", sub:"CARES/HIP/UCI pages."}
      },
      lens:{formal:"FORMAL", informal:"INFORMAL", concept:"CONCEPT", now:"NOW", roadmap:"ROADMAP"},
      actions:{return:"RETURN", jHub:"JUMP HUB", jExp:"JUMP EXPLORE"}
    },
    zh:{
      top:"法则",
      sub:"标准 · 原则 · 治理",
      tiles:{
        feels:{lab:"使用感受", sub:"清晰而中立。"},
        matters:{lab:"为什么重要", sub:"更低风险 · 更可信。"},
        works:{lab:"怎么运作", sub:"测量 · 约束 · 审计。"},
        next:{lab:"下一步", sub:"CARES/HIP/UCI 页面。"}
      },
      lens:{formal:"正式", informal:"直接", concept:"概念", now:"现在", roadmap:"路线图"},
      actions:{return:"返回", jHub:"跳转枢纽", jExp:"跳转探索"}
    }
  };
  var T = (lang==="zh") ? UI.zh : UI.en;
  document.documentElement.lang = (lang==="zh") ? "zh" : "en";

  document.getElementById("brandTop").textContent = T.top;
  document.getElementById("brandSub").textContent = T.sub;

  document.getElementById("labFeels").textContent = T.tiles.feels.lab;
  document.getElementById("subFeels").textContent = T.tiles.feels.sub;
  document.getElementById("labMatters").textContent = T.tiles.matters.lab;
  document.getElementById("subMatters").textContent = T.tiles.matters.sub;
  document.getElementById("labWorks").textContent = T.tiles.works.lab;
  document.getElementById("subWorks").textContent = T.tiles.works.sub;
  document.getElementById("labNext").textContent = T.tiles.next.lab;
  document.getElementById("subNext").textContent = T.tiles.next.sub;

  document.getElementById("mReturn").textContent = T.actions.return;
  document.getElementById("mJumpHub").textContent = T.actions.jHub;
  document.getElementById("mJumpExplore").textContent = T.actions.jExp;

  // ===== LENS UI =====
  var chipStyle=document.getElementById("chipStyle");
  var chipConcept=document.getElementById("chipConcept");
  var chipNow=document.getElementById("chipNow");
  var chipRoadmap=document.getElementById("chipRoadmap");

  function setLensLabels(){
    chipStyle.textContent = "STYLE: " + (style==="formal" ? T.lens.formal : T.lens.informal);
    chipConcept.textContent = T.lens.concept;
    chipNow.textContent = T.lens.now;
    chipRoadmap.textContent = T.lens.roadmap;

    chipConcept.classList.toggle("active", time==="origin");
    chipNow.classList.toggle("active", time==="now");
    chipRoadmap.classList.toggle("active", time==="post");
  }

  // ===== CONTENT (4 bubbles per view) =====
  var C = {
    feels:{
      origin:{
        formal:[
          {h:"Neutral clarity", p:"These pages are written to be neutral: they describe what a rule does and when it applies, without ideology. <span>Structure first.</span>"},
          {h:"You always know the frame", p:"Concept/Now/Roadmap makes it clear whether you are reading foundations, current operation, or planned expansion. <span>No hidden frame shifts.</span>"},
          {h:"Reading feels safe", p:"Rules are bounded and testable; they don’t rely on intention stories. <span>That reduces argument and increases agreement.</span>"},
          {h:"Navigation stays coherent", p:"The same gem + modal contract keeps the Laws section consistent with the rest of the site. <span>Less cognitive load.</span>"}
        ],
        informal:[
          {h:"Clear without preaching", p:"You can read it without feeling pushed. <span>Just the rule.</span>"},
          {h:"You know what you’re reading", p:"Concept/Now/Roadmap tells you the frame. <span>No guessing.</span>"},
          {h:"It feels fair", p:"Rules are about behavior and outcomes. <span>Not labels.</span>"},
          {h:"It feels consistent", p:"Same look, same flow. <span>Easy to use.</span>"}
        ]
      },
      now:{
        formal:[
          {h:"Operational tone", p:"Now focuses on what is enforced today: routing discipline, state discipline, and gate discipline. <span>Execution language.</span>"},
          {h:"Less confusion", p:"When rules are explicit, users stop debating what a page ‘meant’. <span>Meaning becomes stable.</span>"},
          {h:"Faster orientation", p:"A consistent rules hub reduces onboarding time for new users. <span>They learn the map once.</span>"},
          {h:"Stable return paths", p:"Every rule can be opened, read, and closed without losing your place. <span>Traversal stays calm.</span>"}
        ],
        informal:[
          {h:"What’s enforced now", p:"It tells you what rules are active today. <span>Practical.</span>"},
          {h:"Less arguing", p:"Clear rules reduce confusion. <span>Period.</span>"},
          {h:"Easy onboarding", p:"People learn faster. <span>Same map.</span>"},
          {h:"Easy returns", p:"Read it, close it, keep going. <span>No resets.</span>"}
        ]
      },
      post:{
        formal:[
          {h:"Roadmap stays disciplined", p:"Planned standards (CARES/HIP/UCI) can expand without changing the interaction contract. <span>Growth without drift.</span>"},
          {h:"Public-safe publishing", p:"Rules become shareable because their meaning is bounded and consistent. <span>Stable references.</span>"},
          {h:"Cross-domain portability", p:"Standards can be applied to multiple domains because the primitives are universal. <span>One method, many uses.</span>"},
          {h:"Long-term trust", p:"Consistency over time becomes evidence of integrity. <span>That is the trust surface.</span>"}
        ],
        informal:[
          {h:"Growth without drift", p:"Add standards without breaking the site. <span>Same rules.</span>"},
          {h:"Shareable rules", p:"People can link and trust it. <span>Stable meaning.</span>"},
          {h:"Works across domains", p:"Same primitives everywhere. <span>One method.</span>"},
          {h:"Trust builds", p:"Consistency becomes proof. <span>That’s the point.</span>"}
        ]
      }
    },

    matters:{
      origin:{
        formal:[
          {h:"Risk suppression", p:"Rules exist to suppress correlated failure: when everything depends on one fragile link, cascades happen. <span>Standards reduce blast radius.</span>"},
          {h:"Admissibility", p:"Bounded definitions and falsifiers make claims checkable. <span>Checkable beats persuasive.</span>"},
          {h:"Anti-capture", p:"Separation of powers prevents the system from being tuned for convenience. <span>Integrity over comfort.</span>"},
          {h:"Consumer legibility", p:"Rules written plainly become usable by non-experts. <span>That increases adoption.</span>"}
        ],
        informal:[
          {h:"Stops cascades", p:"Rules reduce chain reactions. <span>Less damage.</span>"},
          {h:"Makes it checkable", p:"You can verify it. <span>No vibes.</span>"},
          {h:"Prevents cheating", p:"Roles separated. <span>No capture.</span>"},
          {h:"Makes it usable", p:"Normal people can read it. <span>That matters.</span>"}
        ]
      },
      now:{
        formal:[
          {h:"Deployment stability", p:"Standards reduce ‘mystery breakage’ by defining what can change and what cannot. <span>Deterministic recoverability.</span>"},
          {h:"Faster debugging", p:"If a rule is violated, the failure mode is classifiable. <span>404 means missing path, not metaphysics.</span>"},
          {h:"Safer scaling", p:"Uniformity allows cloning: new pages inherit the contract. <span>No reinventing each node.</span>"},
          {h:"Public trust", p:"A coherent rules hub improves credibility because it shows discipline. <span>Discipline is visible.</span>"}
        ],
        informal:[
          {h:"Less breakage", p:"Rules make updates safer. <span>Deterministic.</span>"},
          {h:"Faster fixes", p:"Failures are obvious. <span>Fix path, fix state.</span>"},
          {h:"Scale by cloning", p:"Same pattern everywhere. <span>Less mess.</span>"},
          {h:"People trust discipline", p:"Consistency shows seriousness. <span>It’s visible.</span>"}
        ]
      },
      post:{
        formal:[
          {h:"Certification readiness", p:"Once standards are stable, certification becomes possible: tiers, revocation, registry. <span>Optional layer, strong spine.</span>"},
          {h:"Institutional adoption", p:"Institutions adopt what is auditable and stable. <span>Rules are the adoption surface.</span>"},
          {h:"Cross-language expansion", p:"Rules can be translated without changing meaning when primitives are locked. <span>Overlays, not forks.</span>"},
          {h:"Durability under pressure", p:"Under time stress, the system stays coherent because constraints are explicit. <span>That is resilience.</span>"}
        ],
        informal:[
          {h:"Certification possible", p:"Tiers and registry become real. <span>Optional but strong.</span>"},
          {h:"Institutions adopt it", p:"Auditable rules get adopted. <span>Simple.</span>"},
          {h:"Translate safely", p:"Meaning stays stable. <span>No forks.</span>"},
          {h:"Durable under stress", p:"Constraints keep it coherent. <span>Resilient.</span>"}
        ]
      }
    },

    works:{
      origin:{
        formal:[
          {h:"Measure exposure", p:"Start by measuring correlated exposure (ρ) and alignment (TC). <span>If you don’t measure, you can’t bound.</span>"},
          {h:"Bound exposure", p:"Apply gates (WaveCap, segmentation, rollback readiness). <span>Structure prevents cascades.</span>"},
          {h:"Detect acceleration", p:"Track changes over time (Δρ, ΔTC). <span>Acceleration matters more than snapshots.</span>"},
          {h:"Audit + enforce", p:"Record evidence, publish reason codes, and enforce revocations when required. <span>Accountability is operational.</span>"}
        ],
        informal:[
          {h:"Measure first", p:"If you don’t measure, you’re guessing. <span>Start there.</span>"},
          {h:"Bound it", p:"Cap rollout, segment zones, keep rollback ready. <span>Contain damage.</span>"},
          {h:"Watch acceleration", p:"Trend matters. <span>Not just today’s number.</span>"},
          {h:"Audit it", p:"Log it and enforce it. <span>Accountability.</span>"}
        ]
      },
      now:{
        formal:[
          {h:"Contracted UI + state", p:"Laws pages use the same state contract: lang/style/time propagate, modal is centered, returns are stable. <span>Uniform surface.</span>"},
          {h:"Bound claims", p:"Each law page states what is claimed, what is not claimed, and how it could be falsified. <span>Admissible writing.</span>"},
          {h:"Deterministic gating", p:"Rules are written as constraints: PASS/FAIL/UNKNOWN with quotas. <span>No narrative tuning.</span>"},
          {h:"Publishable structure", p:"Pages are modular: each standard can become its own route later without rewriting the hub. <span>Safe expansion.</span>"}
        ],
        informal:[
          {h:"Same contract", p:"Same state, same modal, same returns. <span>Consistent.</span>"},
          {h:"Bounded writing", p:"Say what it is and isn’t. <span>Checkable.</span>"},
          {h:"Constraints, not vibes", p:"PASS/FAIL rules. <span>Operational.</span>"},
          {h:"Modular pages", p:"Easy to expand later. <span>No rewrites.</span>"}
        ]
      },
      post:{
        formal:[
          {h:"Standard registry", p:"Each standard gets a registry entry (version, hash, scope). <span>Immutable history.</span>"},
          {h:"Demo integration", p:"Standards connect to demos (HIP rollout simulator, certificate lookup). <span>Rules become interactive.</span>"},
          {h:"Public audit dashboard", p:"Dashboards show whether gates are being respected. <span>Visibility reduces corruption.</span>"},
          {h:"Cross-domain adapters", p:"Domain adapters map real systems into the same law primitives. <span>Universal interface.</span>"}
        ],
        informal:[
          {h:"Registry", p:"Versions and history. <span>Immutable.</span>"},
          {h:"Demos", p:"Rules you can see. <span>Interactive.</span>"},
          {h:"Dashboards", p:"See gate compliance. <span>Visibility.</span>"},
          {h:"Adapters", p:"Same primitives across domains. <span>Universal.</span>"}
        ]
      }
    },

    next:{
      origin:{
        formal:[
          {h:"Publish CARES", p:"CARES becomes the neutral standard page: definitions + minimal law + mapping into the site. <span>Stable reference.</span>"},
          {h:"Publish HIP", p:"HIP becomes the change-control gate page: wave caps, rollback, audit latency. <span>Enforcement layer.</span>"},
          {h:"Publish UCI", p:"UCI becomes the measurement page: ρ/TC/Δ and export schema. <span>Operationalization.</span>"},
          {h:"Add China lens (optional layer)", p:"Add a dedicated lens that maps classical principles into measurable constraints. <span>Parallel wisdom, same rigor.</span>"}
        ],
        informal:[
          {h:"Write CARES", p:"The neutral standard page. <span>Reference.</span>"},
          {h:"Write HIP", p:"Change-control gates. <span>Enforce.</span>"},
          {h:"Write UCI", p:"Measurements + schema. <span>Operational.</span>"},
          {h:"Add China lens", p:"Classics → constraints. <span>Same rigor.</span>"}
        ]
      },
      now:{
        formal:[
          {h:"Keep names consistent", p:"CARES/HIP/UCI labels must match across pages and links. <span>No naming drift.</span>"},
          {h:"Create subroutes only when ready", p:"When a standard needs depth, create its own folder with the same gem contract. <span>One at a time.</span>"},
          {h:"Fill content density", p:"No empty bubbles: each view must deliver real context. <span>Legible to consumers.</span>"},
          {h:"Verify deployment determinism", p:"Use view-source probes and direct file URLs when debugging. <span>Stop caching ghosts.</span>"}
        ],
        informal:[
          {h:"Keep labels stable", p:"Same names everywhere. <span>No drift.</span>"},
          {h:"Add subpages only when needed", p:"One at a time. <span>Same pattern.</span>"},
          {h:"Fill bubbles", p:"No empties. <span>Make it worth reading.</span>"},
          {h:"Debug deterministically", p:"Probes + direct URLs. <span>No ghosts.</span>"}
        ]
      },
      post:{
        formal:[
          {h:"Certification lookup", p:"Add a certificate serial lookup page tied to the registry. <span>Public accountability.</span>"},
          {h:"Revocation logic", p:"Publish revocation rules and reason codes. <span>No silent changes.</span>"},
          {h:"Industry landing pages", p:"Data centers, utilities, industrial automation, finance. <span>Same laws, different adapters.</span>"},
          {h:"Live demos", p:"Blast radius simulation + staged rollout vs full rollout. <span>Make value visible.</span>"}
        ],
        informal:[
          {h:"Lookup page", p:"Serial lookup. <span>Accountability.</span>"},
          {h:"Revocation rules", p:"No silent changes. <span>Reason codes.</span>"},
          {h:"Industry pages", p:"Same laws, different adapters. <span>Clear.</span>"},
          {h:"Live demos", p:"Show value. <span>Make it visible.</span>"}
        ]
      }
    }
  };

  // ===== MODAL WIRING =====
  var bd=document.getElementById("bd");
  var modal=document.getElementById("modal");
  var mClose=document.getElementById("mClose");
  var mTitle=document.getElementById("mTitle");

  var chipStyle=document.getElementById("chipStyle");
  var chipConcept=document.getElementById("chipConcept");
  var chipNow=document.getElementById("chipNow");
  var chipRoadmap=document.getElementById("chipRoadmap");

  var h1=document.getElementById("h1"), p1=document.getElementById("p1");
  var h2=document.getElementById("h2"), p2=document.getElementById("p2");
  var h3=document.getElementById("h3"), p3=document.getElementById("p3");
  var h4=document.getElementById("h4"), p4=document.getElementById("p4");

  var activeSection=null; // feels|matters|works|next

  function persist(){
    try{ localStorage.setItem("gd_style", style); localStorage.setItem("gd_time", time); }catch(e){}
  }

  function setLensLabels(){
    chipStyle.textContent = "STYLE: " + (style==="formal" ? T.lens.formal : T.lens.informal);
    chipConcept.textContent = T.lens.concept;
    chipNow.textContent = T.lens.now;
    chipRoadmap.textContent = T.lens.roadmap;

    chipConcept.classList.toggle("active", time==="origin");
    chipNow.classList.toggle("active", time==="now");
    chipRoadmap.classList.toggle("active", time==="post");
  }

  function render(){
    persist();
    wire();
    setLensLabels();

    if(!activeSection) return;
    var pack = C[activeSection][time][style];
    var titleMap = {
      feels: (lang==="zh" ? "使用感受" : "HOW IT FEELS"),
      matters: (lang==="zh" ? "为什么重要" : "WHY IT MATTERS"),
      works: (lang==="zh" ? "怎么运作" : "HOW IT WORKS"),
      next: (lang==="zh" ? "下一步" : "WHAT’S NEXT")
    };
    mTitle.textContent = T.top + " · " + titleMap[activeSection];

    h1.textContent = pack[0].h; p1.innerHTML = pack[0].p;
    h2.textContent = pack[1].h; p2.innerHTML = pack[1].p;
    h3.textContent = pack[2].h; p3.innerHTML = pack[2].p;
    h4.textContent = pack[3].h; p4.innerHTML = pack[3].p;
  }

  function open(which){
    activeSection=which;
    ["dFeels","dMatters","dWorks","dNext"].forEach(function(id){
      document.getElementById(id).classList.toggle("active",
        (which==="feels" && id==="dFeels") ||
        (which==="matters" && id==="dMatters") ||
        (which==="works" && id==="dWorks") ||
        (which==="next" && id==="dNext")
      );
    });

    render();
    bd.classList.add("show");
    modal.classList.add("show");
  }

  function close(){
    bd.classList.remove("show");
    modal.classList.remove("show");
    ["dFeels","dMatters","dWorks","dNext"].forEach(function(id){ document.getElementById(id).classList.remove("active"); });
    activeSection=null;
  }

  // Click handlers
  document.getElementById("dFeels").onclick=function(){ open("feels"); };
  document.getElementById("dMatters").onclick=function(){ open("matters"); };
  document.getElementById("dWorks").onclick=function(){ open("works"); };
  document.getElementById("dNext").onclick=function(){ open("next"); };

  ["dFeels","dMatters","dWorks","dNext"].forEach(function(id){
    var el=document.getElementById(id);
    el.addEventListener("keydown", function(e){
      if(e.key==="Enter"||e.key===" "){ e.preventDefault(); el.click(); }
    });
  });

  // Lenses (inside modal only)
  chipStyle.onclick=function(){
    style = (style==="formal") ? "informal" : "formal";
    render();
  };
  chipConcept.onclick=function(){ time="origin"; render(); };
  chipNow.onclick=function(){ time="now"; render(); };
  chipRoadmap.onclick=function(){ time="post"; render(); };

  // Close actions
  bd.onclick=close;
  mClose.onclick=close;
  document.getElementById("mReturn").onclick=close;

  setLensLabels();
})();
</script>

</body>
</html>
