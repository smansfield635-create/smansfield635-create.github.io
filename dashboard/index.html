<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Geodiametrics · Dashboard</title>
<style>
:root{--fg:#e9eefc;--muted:rgba(233,238,252,.78);--stroke:rgba(233,238,252,.14);--glass:rgba(10,14,26,.62);--panel:rgba(10,14,26,.70);--shadow:0 18px 55px rgba(0,0,0,.55);--r:22px}
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;overflow-x:hidden;background:
radial-gradient(1400px 900px at 12% 10%, rgba(140,120,255,.20), transparent 60%),
radial-gradient(1200px 900px at 55% 85%, rgba(255,120,200,.14), transparent 65%),
radial-gradient(900px 700px at 92% 22%, rgba(80,210,255,.14), transparent 60%),
linear-gradient(180deg,#050713 0%,#060821 40%,#03040b 100%)}
body::before{content:"";position:fixed;inset:0;pointer-events:none;z-index:-2;opacity:.85;background:
radial-gradient(1px 1px at 12% 18%, rgba(255,255,255,.80), transparent 60%),
radial-gradient(1px 1px at 22% 72%, rgba(255,255,255,.65), transparent 60%),
radial-gradient(1px 1px at 38% 32%, rgba(255,255,255,.72), transparent 60%),
radial-gradient(1px 1px at 48% 86%, rgba(255,255,255,.55), transparent 60%),
radial-gradient(1px 1px at 66% 28%, rgba(255,255,255,.62), transparent 60%),
radial-gradient(1px 1px at 78% 58%, rgba(255,255,255,.58), transparent 60%),
radial-gradient(1px 1px at 92% 22%, rgba(255,255,255,.70), transparent 60%);
background-size:1400px 1400px}
body::after{content:"";position:fixed;inset:-10%;pointer-events:none;z-index:-1;opacity:.70;transform:rotate(-12deg);
background:
radial-gradient(1300px 360px at 54% 55%, rgba(120,180,255,.14), transparent 75%),
radial-gradient(900px 280px at 48% 52%, rgba(255,190,220,.10), transparent 78%);
filter:blur(1px)}
header{position:sticky;top:0;z-index:10;border-bottom:1px solid var(--stroke);background:var(--glass);backdrop-filter:blur(10px)}
.bar{max-width:1100px;margin:0 auto;padding:14px 16px;display:flex;align-items:center;justify-content:space-between;gap:12px}
.brand{font-weight:900;letter-spacing:.35px}
nav{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
nav a{color:var(--muted);text-decoration:none;font-weight:850;font-size:14px;padding:8px 10px;border-radius:999px;border:1px solid transparent}
nav a:hover{color:var(--fg);border-color:rgba(233,238,252,.10);background:rgba(255,255,255,.03)}
main{max-width:1100px;margin:0 auto;padding:34px 16px 70px}
h1{margin:10px 0 8px;font-size:42px;line-height:1.08;letter-spacing:.2px}
.sub{max-width:78ch;color:var(--muted);line-height:1.65;margin:0 0 18px}
.grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));margin-top:14px}
.card{background:var(--panel);border:1px solid var(--stroke);border-radius:var(--r);padding:18px;box-shadow:var(--shadow)}
.card h2{margin:0 0 8px;font-size:18px;letter-spacing:.3px}
.kicker{opacity:.75;margin:0 0 10px;line-height:1.55}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid rgba(233,238,252,.14);background:rgba(255,255,255,.03);font-weight:850}
select,button,textarea,input{font:inherit}
select,input{background:rgba(0,0,0,.35);color:var(--fg);border:1px solid rgba(233,238,252,.14);border-radius:12px;padding:10px 12px;outline:none}
button{background:rgba(255,255,255,.04);color:var(--fg);border:1px solid rgba(233,238,252,.14);border-radius:999px;padding:10px 14px;font-weight:900;cursor:pointer}
button:hover{background:rgba(255,255,255,.06)}
textarea{width:100%;min-height:120px;background:rgba(0,0,0,.28);color:var(--fg);border:1px solid rgba(233,238,252,.14);border-radius:14px;padding:12px;outline:none}
.small{font-size:13px;opacity:.78;line-height:1.55}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
.list{display:grid;gap:10px;margin-top:10px}
.item{display:flex;justify-content:space-between;gap:10px;align-items:center;padding:10px 12px;border-radius:14px;border:1px solid rgba(233,238,252,.12);background:rgba(0,0,0,.22)}
.item b{font-weight:900}
footer{margin-top:44px;padding-top:18px;border-top:1px solid var(--stroke);text-align:center;font-size:13px;color:rgba(233,238,252,.60)}
@media (prefers-reduced-motion:reduce){*{scroll-behavior:auto}}
</style>
</head><body>
<header><div class="bar">
<div class="brand">Geodiametrics</div>
<nav>
<a href="/">Home</a>
<a href="/methods/">Methods</a>
<a href="/dashboard/">Dashboard</a>
<a href="/apps/">Apps</a>
<a href="/reference/">Reference</a>
<a href="/problem/">Problem</a>
</nav>
</div></header>

<main>
<h1>Dashboard</h1>
<p class="sub">Empirical tracking hub. Evidence-first. Audit-friendly. No narrative ordering.</p>

<div class="grid">

  <section class="card" id="cdl">
    <h2>Cyclical Dynamics Law Status</h2>
    <p class="kicker">Local operator control until automated telemetry is wired.</p>
    <div class="row" style="margin:8px 0 12px;">
      <span class="pill">Current <span id="cdlCurrent" class="mono" style="margin-left:6px;">UNKNOWN</span></span>
      <span class="pill">Last set <span id="cdlLast" class="mono" style="margin-left:6px;">—</span></span>
    </div>
    <div class="row">
      <select id="cdlSelect">
        <option value="RUNNING">RUNNING</option>
        <option value="HURDLE">HURDLE</option>
        <option value="WALL">WALL</option>
        <option value="COMPLETE">COMPLETE</option>
      </select>
      <button id="cdlSave">Save</button>
      <button id="cdlReset">Reset</button>
    </div>
    <p class="small" style="margin-top:14px">
      <b>RUNNING</b> = cycle executing (reduce/contrast/condense/dedup/improve).<br/>
      <b>HURDLE</b> = friction; continue internally; no escalation.<br/>
      <b>WALL</b> = proven blocker; notify; await decision.<br/>
      <b>COMPLETE</b> = stable minimal state; proceed to next task/cycle.
    </p>
  </section>

  <section class="card" id="local">
    <h2>Local Analytics (Device)</h2>
    <p class="kicker">Local-first telemetry stored in this browser. It proves the pipeline works without external services.</p>
    <div class="row" style="margin:10px 0 12px;">
      <span class="pill">Pageviews <span id="pv" class="mono" style="margin-left:6px;">0</span></span>
      <span class="pill">Sessions <span id="ss" class="mono" style="margin-left:6px;">0</span></span>
      <span class="pill">Last seen <span id="ls" class="mono" style="margin-left:6px;">—</span></span>
    </div>
    <div class="list" id="paths"></div>
    <div class="row" style="margin-top:12px">
      <button id="export">Export Telemetry JSON</button>
      <button id="clear">Clear Telemetry</button>
    </div>
    <p class="small" style="margin-top:12px">Export gives you an empirical record you can archive or correlate with OSF timestamps.</p>
  </section>

  <section class="card">
    <h2>Research Identity & Provenance</h2>
    <div class="item">
      <div>
        <b>ORCID iD</b>
        <div class="small">Persistent identifier linking a researcher to outputs across platforms.</div>
      </div>
      <a class="pill" href="https://orcid.org/0009-0004-1293-0405" target="_blank" rel="noopener">0009-0004-1293-0405 →</a>
    </div>
    <div class="item">
      <div>
        <b>OSF Projects</b>
        <div class="small">Timestamped artifacts + version history for independent verification.</div>
      </div>
      <a class="pill" href="https://osf.io/" target="_blank" rel="noopener">View OSF →</a>
    </div>
    <p class="small" style="margin-top:12px">Links are provided for verification, not persuasion. Dates, revisions, and publication order can be inspected independently.</p>
  </section>

  <section class="card">
    <h2>Manual Baseline Log</h2>
    <p class="kicker">Paste timestamped baselines here until automated analytics are wired.</p>
    <textarea id="baseline" placeholder="YYYY-MM-DD hh:mm — baseline event — notes"></textarea>
    <div class="row" style="margin-top:10px">
      <button id="saveBaseline">Save</button>
      <button id="clearBaseline">Clear</button>
      <button id="exportBaseline">Export JSON</button>
    </div>
    <p class="small" style="margin-top:10px">Stored locally in this browser until you choose a server or analytics provider.</p>
  </section>

  <section class="card">
    <h2>Next Instrumentation</h2>
    <div class="item"><div><b>Option A — Cloudflare Web Analytics</b><div class="small">One script tag site-wide once you have the token.</div></div></div>
    <div class="item"><div><b>Option B — Umami / Plausible</b><div class="small">One script tag site-wide. Privacy-first.</div></div></div>
    <div class="item"><div><b>Option C — GA4</b><div class="small">One script tag site-wide. Use only if needed.</div></div></div>
  </section>

</div>

<footer>© <span id="y"></span> Geodiametrics</footer>
</main>

<script>
(()=>{const YEAR=new Date().getFullYear();document.getElementById("y").textContent=YEAR;

// --------- Cyclical Law Status (local) ----------
const CDL_KEY="gd_cdl_status_v1";
const CDL_TS="gd_cdl_status_ts_v1";
const cdlCur=document.getElementById("cdlCurrent");
const cdlLast=document.getElementById("cdlLast");
const cdlSel=document.getElementById("cdlSelect");
const cdlSave=document.getElementById("cdlSave");
const cdlReset=document.getElementById("cdlReset");

function loadCDL(){
  const v=localStorage.getItem(CDL_KEY)||"UNKNOWN";
  const ts=localStorage.getItem(CDL_TS)||"—";
  cdlCur.textContent=v;
  cdlLast.textContent=ts;
  if([...cdlSel.options].some(o=>o.value===v)) cdlSel.value=v;
}
cdlSave.onclick=()=>{const v=cdlSel.value;localStorage.setItem(CDL_KEY,v);localStorage.setItem(CDL_TS,new Date().toISOString());loadCDL();};
cdlReset.onclick=()=>{localStorage.removeItem(CDL_KEY);localStorage.removeItem(CDL_TS);loadCDL();};
loadCDL();

// --------- Telemetry (local-first) ----------
const TKEY="gd_telemetry_v1";
const SKEY="gd_session_v1";
const SLAST="gd_session_last_v1";
const SESSION_WINDOW=30*60*1000; // 30 min

function getTelemetry(){
  try{return JSON.parse(localStorage.getItem(TKEY)||"{}");}catch(e){return {};}
}
function setTelemetry(t){localStorage.setItem(TKEY,JSON.stringify(t));}
function nowISO(){return new Date().toISOString();}
function ensureSession(){
  const now=Date.now();
  const last=parseInt(localStorage.getItem(SLAST)||"0",10);
  let sid=localStorage.getItem(SKEY);
  if(!sid || !last || (now-last)>SESSION_WINDOW){
    sid="s_"+Math.random().toString(16).slice(2)+"_"+
        Math.random().toString(16).slice(2);
    localStorage.setItem(SKEY,sid);
    const t=getTelemetry();
    t.sessions=(t.sessions||0)+1;
    setTelemetry(t);
  }
  localStorage.setItem(SLAST,String(now));
  return sid;
}
function bump(path){
  ensureSession();
  const t=getTelemetry();
  t.pageviews=(t.pageviews||0)+1;
  t.lastSeen=nowISO();
  t.paths=t.paths||{};
  t.paths[path]=(t.paths[path]||0)+1;
  setTelemetry(t);
}
function renderTelemetry(){
  const t=getTelemetry();
  document.getElementById("pv").textContent=String(t.pageviews||0);
  document.getElementById("ss").textContent=String(t.sessions||0);
  document.getElementById("ls").textContent=(t.lastSeen||"—");
  const pathsEl=document.getElementById("paths");
  pathsEl.innerHTML="";
  const entries=Object.entries(t.paths||{}).sort((a,b)=>b[1]-a[1]).slice(0,8);
  if(entries.length===0){pathsEl.innerHTML='<div class="small">No paths recorded yet.</div>';return;}
  entries.forEach(([p,c])=>{
    const div=document.createElement("div");
    div.className="item";
    div.innerHTML=`<div class="mono">${p}</div><div class="pill mono">${c}</div>`;
    pathsEl.appendChild(div);
  });
}

bump(location.pathname||"/");
renderTelemetry();

document.getElementById("export").onclick=()=>{
  const t=getTelemetry();
  const blob=new Blob([JSON.stringify({exportedAt:nowISO(),telemetry:t},null,2)],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="geodiametrics-telemetry.json";
  a.click();
  URL.revokeObjectURL(a.href);
};
document.getElementById("clear").onclick=()=>{
  localStorage.removeItem(TKEY);
  renderTelemetry();
};

// --------- Baseline log (local) ----------
const BKEY="gd_baselines_v1";
const tb=document.getElementById("baseline");
function loadB(){tb.value=(localStorage.getItem(BKEY)||"");}
function saveB(){localStorage.setItem(BKEY,tb.value||"");}
loadB();
document.getElementById("saveBaseline").onclick=saveB;
document.getElementById("clearBaseline").onclick=()=>{tb.value="";saveB();};
document.getElementById("exportBaseline").onclick=()=>{
  const blob=new Blob([JSON.stringify({exportedAt:nowISO(),baselines:tb.value||""},null,2)],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="geodiametrics-baselines.json";
  a.click();
  URL.revokeObjectURL(a.href);
};

// NOTE: Cloudflare Web Analytics script should already be installed site-wide.
// If not, paste your Cloudflare "beacon.min.js" snippet right before </body> on each page you want tracked.
})();
</script>

<!-- Cloudflare Web Analytics (PASTE YOUR SNIPPET HERE IF NEEDED) -->
</body></html>
