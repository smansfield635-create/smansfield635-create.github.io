
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Engine Sync · Geodiametrics</title>

  <style>
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:#0b0f1a;
      color:#e9ecf5;
      line-height:1.6;
    }
    header{
      padding:28px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    header h1{
      margin:0;
      font-size:28px;
      letter-spacing:.4px;
    }
    main{
      max-width:900px;
      margin:0 auto;
      padding:36px 22px 72px;
    }
    p{color:#cfd6ef;margin:0 0 14px}
    .card{
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.08);
      border-radius:18px;
      padding:22px;
      margin:20px 0;
    }
    .row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }
    select,button,input{
      padding:10px 14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.25);
      color:#e9ecf5;
      font-weight:600;
    }
    button{cursor:pointer}
    .pill{
      padding:6px 12px;
      border-radius:999px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      font-size:12px;
      font-weight:800;
      letter-spacing:.3px;
    }
    pre{
      background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.1);
      border-radius:14px;
      padding:14px;
      white-space:pre-wrap;
      word-break:break-word;
      color:#cfd6ef;
    }
    footer{
      border-top:1px solid rgba(255,255,255,.08);
      padding:24px;
      text-align:center;
      font-size:13px;
      color:#aab0c5;
    }
  </style>
</head>

<body>

<header>
  <h1>Engine Sync</h1>
</header>

<main>

  <div class="card">
    <p><strong>PURPOSE.</strong> Local execution-state tracker. No accounts. No servers. Evidence-only.</p>
    <div class="row">
      <span class="pill">STATUS</span>
      <span id="status" class="pill">UNKNOWN</span>
      <span class="pill">LAST SET: <span id="when">—</span></span>
    </div>

    <div class="row" style="margin-top:14px">
      <select id="state">
        <option>UNKNOWN</option>
        <option>RUNNING</option>
        <option>HURDLE</option>
        <option>WALL</option>
        <option>COMPLETE</option>
      </select>
      <button id="save">Save</button>
      <button id="reset">Reset</button>
    </div>
  </div>

  <div class="card">
    <p><strong>NOTES.</strong> Stored locally in this browser.</p>
    <div class="row" style="margin-top:10px">
      <input id="note" style="flex:1" placeholder="YYYY-MM-DD hh:mm — observation" />
      <button id="add">Add</button>
      <button id="export">Export JSON</button>
    </div>
    <pre id="log">[]</pre>
  </div>

</main>

<footer>
  © 2026 Geodiametrics · Engine Sync
</footer>

<script>
(() => {
  const KS="engine_sync_state_v1";
  const KT="engine_sync_time_v1";
  const KN="engine_sync_notes_v1";

  const statusEl=document.getElementById("status");
  const whenEl=document.getElementById("when");
  const sel=document.getElementById("state");
  const logEl=document.getElementById("log");

  function load(){
    const s=localStorage.getItem(KS)||"UNKNOWN";
    const t=localStorage.getItem(KT)||"—";
    sel.value=s;
    statusEl.textContent=s;
    whenEl.textContent=t;
  }

  function loadNotes(){
    let n=[];
    try{n=JSON.parse(localStorage.getItem(KN)||"[]");}catch{}
    logEl.textContent=JSON.stringify(n,null,2);
    return n;
  }

  document.getElementById("save").onclick=()=>{
    const s=sel.value;
    const t=new Date().toISOString();
    localStorage.setItem(KS,s);
    localStorage.setItem(KT,t);
    load();
  };

  document.getElementById("reset").onclick=()=>{
    localStorage.removeItem(KS);
    localStorage.removeItem(KT);
    load();
  };

  document.getElementById("add").onclick=()=>{
    const v=document.getElementById("note").value.trim();
    if(!v) return;
    const n=loadNotes();
    n.push({time:new Date().toISOString(), note:v});
    localStorage.setItem(KN,JSON.stringify(n));
    document.getElementById("note").value="";
    loadNotes();
  };

  document.getElementById("export").onclick=()=>{
    let n=[]; try{n=JSON.parse(localStorage.getItem(KN)||"[]");}catch{}
    const payload={
      exported_at:new Date().toISOString(),
      state:localStorage.getItem(KS)||"UNKNOWN",
      last_set:localStorage.getItem(KT)||"—",
      notes:n
    };
    const blob=new Blob([JSON.stringify(payload,null,2)],{type:"application/json"});
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;
    a.download="engine-sync-export.json";
    document.body.appendChild(a);
    a.click();
    a.remove();
    setTimeout(()=>URL.revokeObjectURL(url),500);
  };

  load();
  loadNotes();
})();
</script>

</body>
</html>
