<!-- TNT FILE: /door/index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Door · Geodiametrics</title>
  <link rel="stylesheet" href="/assets/ui.css?v=9100"/>
  <link rel="stylesheet" href="/assets/branch.css?v=9100"/>
  <script defer src="/assets/instrument.js?v=9100"></script>
</head>
<body>
  <div class="page">
    <div class="diamond-field"><div class="plate"></div></div>

    <div class="wrap" style="position:relative; z-index:2;">
      <div class="hero center">
        <h1>DOOR</h1>
        <p>Choose your route.</p>
        <div class="mt12">
          <span class="pill">LANG: <span id="langPill">EN</span></span>
          <span class="pill">DEPTH: <span id="depthPill">EXPLORE</span></span>
        </div>
      </div>

      <div class="lane-row">
        <button class="pill btn" id="setEN" type="button">EN</button>
        <button class="pill btn" id="setZH" type="button">中文</button>
        <a class="pill btn" href="/" id="backIdx">BACK</a>
      </div>

      <div class="diamond-grid mt12">
        <button class="diamond gold pos-top" id="goExplore" type="button" aria-label="Explore">
          <div class="inner">
            <div class="label">EXPLORE</div>
            <div class="sub">Surface</div>
          </div>
        </button>

        <button class="diamond pos-left" id="goLinks" type="button" aria-label="Links">
          <div class="inner">
            <div class="label">LINKS</div>
            <div class="sub">Identity</div>
          </div>
        </button>

        <button class="diamond pos-right" id="goLearn" type="button" aria-label="Learn">
          <div class="inner">
            <div class="label">LEARN</div>
            <div class="sub">Deep</div>
          </div>
        </button>

        <button class="diamond pos-bottom" id="goHome" type="button" aria-label="Home">
          <div class="inner">
            <div class="label">HOME</div>
            <div class="sub">Enter hub</div>
          </div>
        </button>
      </div>

      <div class="panel mt16" style="padding:14px 16px; max-width:820px; margin-left:auto; margin-right:auto;">
        <div class="section-title">What these routes mean</div>
        <div style="margin-top:10px; color:rgba(234,242,246,.78); line-height:1.65;">
          <b>Explore</b> shows the surface map (fast orientation).<br/>
          <b>Learn</b> enters the deep map (nested bubbles + resolution).<br/>
          <b>Home</b> enters the hub at your current depth.<br/>
          <b>Links</b> opens identity and reference anchors.
        </div>
      </div>

      <div class="ink">GEODIAMETRICS</div>
      <footer class="footer">CANONICAL · STABLE · © GEODIAMETRICS</footer>
    </div>
  </div>

  <script>
  (() => {
    const K1_LANG="gd_lang", K2_LANG="crp_lang";
    const K1_DEPTH="gd_depth", K2_DEPTH="crp_depth";

    const read = (k)=>{ try{return localStorage.getItem(k)||"";}catch(e){return "";} };
    const writeBoth = (a,b,v)=>{ try{localStorage.setItem(a,v);localStorage.setItem(b,v);}catch(e){} };

    // init pills
    const lang = (read(K1_LANG)||read(K2_LANG)||"en").toLowerCase()==="zh" ? "zh" : "en";
    const depth = (read(K1_DEPTH)||read(K2_DEPTH)||"explore").toLowerCase()==="learn" ? "learn" : "explore";

    document.getElementById("langPill").textContent = (lang==="zh" ? "中文" : "EN");
    document.getElementById("depthPill").textContent = (depth==="learn" ? "LEARN" : "EXPLORE");

    // language toggle
    document.getElementById("setEN").addEventListener("click", ()=>{ writeBoth(K1_LANG,K2_LANG,"en"); location.href="/door/?lang=en"; });
    document.getElementById("setZH").addEventListener("click", ()=>{ writeBoth(K1_LANG,K2_LANG,"zh"); location.href="/door/?lang=zh"; });

    // routes
    document.getElementById("goExplore").addEventListener("click", ()=>{
      writeBoth(K1_DEPTH,K2_DEPTH,"explore");
      location.href="/home/?depth=explore";
    });

    document.getElementById("goLearn").addEventListener("click", ()=>{
      writeBoth(K1_DEPTH,K2_DEPTH,"learn");
      location.href="/home/?depth=learn";
    });

    document.getElementById("goHome").addEventListener("click", ()=>{
      // keep existing depth
      location.href="/home/?depth=" + encodeURIComponent(depth);
    });

    document.getElementById("goLinks").addEventListener("click", ()=>{
      location.href="/links/";
    });
  })();
  </script>
</body>
</html>
