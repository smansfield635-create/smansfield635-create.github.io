<!-- TNT — /products/software/index.html  (SOFTWARE · 2-POINT WISHBONE · 72 NARRATIVES · EN/中文/ES)
     MODEL (LOCKED):
       LEVEL 1 (Page): 2 glossy diamonds = ENGINE / PLATFORM
       LEVEL 2 (Domains Modal): 6 domains + RETURN
       LEVEL 3 (Narrative Modal): Tone toggle (FORMAL / INFORMAL) + 3 bubbles (CONCEPT / LIVE / ROADMAP) tap-to-open
     COUNT:
       12 domains × 3 time bubbles × 2 tones = 72 narratives
     LANGUAGE:
       lang=en => EN only
       lang=zh => 中文 only
       lang=es => ES only
     STATE:
       URL + LS: gd_lang/gd_style/gd_time/gd_depth (preserved on every jump)
     LOCKS:
       - Uses /assets/ui.css + /assets/branch.css + /assets/instruments.js
       - No html/body background overrides (ui.css owns field)
       - Tap-safe (no inline onclick)
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · SOFTWARE</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
a{text-decoration:none;color:inherit}
:root{
  --R:170px;
  --D:198px;
  --goldSoft:rgba(212,175,55,.45);
  --obsA:rgba(12,22,38,.95);
  --obsB:rgba(6,10,16,.98);
  --mut:rgba(255,255,255,.90);
  --mut2:rgba(255,255,255,.74);
}

/* base */
body{margin:0;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
body::before,body::after{pointer-events:none!important}

/* Top */
.top-left{
  position:fixed;left:16px;top:16px;z-index:140;
  display:flex;gap:10px;flex-wrap:nowrap;white-space:nowrap;align-items:center;
}
.top-left .btn{white-space:nowrap}

/* Brand */
.brand{
  position:fixed;left:50%;top:16px;transform:translateX(-50%);
  z-index:130;text-align:center;padding:10px 18px;border-radius:999px;
  border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.18);pointer-events:none
}
.brand .t{font-weight:950;font-size:40px;letter-spacing:.25px;line-height:1.05;margin:0}
.brand .s{opacity:.86;font-size:14px;margin:6px 0 0;line-height:1.25}

/* Stage */
.stage{position:fixed;left:50%;top:56%;transform:translate(-50%,-50%);width:min(720px,94vw);height:min(720px,94vw);z-index:60;pointer-events:none}
.outer{
  position:absolute;left:50%;top:50%;
  width:min(680px,92vw);height:min(680px,92vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:60px;opacity:.62;pointer-events:none;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.14), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.42) 0%, rgba(7,11,18,.58) 70%);
  box-shadow:
    0 90px 260px rgba(0,0,0,.55),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -50px 90px rgba(0,0,0,.55)
}
.outer::after{
  content:"";position:absolute;inset:0;border-radius:60px;opacity:.12;pointer-events:none;
  background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 6deg, transparent 6deg 18deg)
}

/* Glossy diamond */
.d{
  width:var(--D);height:var(--D);
  position:absolute;left:50%;top:50%;
  transform-origin:center;border-radius:28px;
  cursor:pointer;pointer-events:auto;touch-action:manipulation;
  -webkit-tap-highlight-color:transparent;
  overflow:hidden;
  background:
    radial-gradient(circle at 30% 22%, rgba(255,255,255,.55), transparent 45%),
    radial-gradient(circle at 70% 78%, rgba(0,120,255,.30), transparent 60%),
    linear-gradient(160deg, var(--obsA), var(--obsB));
  border:1px solid rgba(255,255,255,.16);
  box-shadow:
    0 38px 120px rgba(0,0,0,.85),
    0 0 32px rgba(212,175,55,.28),
    inset 0 2px 0 rgba(255,255,255,.25),
    inset 0 -42px 78px rgba(0,0,0,.80);
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.d::before{
  content:"";position:absolute;inset:0;border-radius:28px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.65;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  pointer-events:none
}
.d::after{
  content:"";position:absolute;left:10%;right:10%;top:10%;
  height:28%;border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.25), rgba(255,255,255,0));
  transform:rotate(-10deg);pointer-events:none
}
.d:hover{
  transform:translate(-50%,-50%) translate(var(--tx), var(--ty)) rotate(45deg) scale(1.02);
  border-color:rgba(212,175,55,.35);
  box-shadow:
    0 44px 140px rgba(0,0,0,.92),
    0 0 44px rgba(212,175,55,.32),
    inset 0 2px 0 rgba(255,255,255,.28),
    inset 0 -46px 86px rgba(0,0,0,.84)
}
.d:active{
  transform:translate(-50%,-50%) translate(var(--tx), var(--ty)) rotate(45deg) scale(.99);
}
.d.active{
  border-color:rgba(212,175,55,.65);
  box-shadow:
    0 44px 140px rgba(0,0,0,.92),
    0 0 66px rgba(212,175,55,.34),
    inset 0 2px 0 rgba(255,255,255,.28),
    inset 0 -46px 86px rgba(0,0,0,.84);
}

/* Wishbone placement (2-point) */
.dL{ --tx:calc(var(--R) * -1); --ty:0px; transform:translate(-50%,-50%) translate(var(--tx),var(--ty)) rotate(45deg); }
.dR{ --tx:var(--R);           --ty:0px; transform:translate(-50%,-50%) translate(var(--tx),var(--ty)) rotate(45deg); }

.inner{
  transform:rotate(-45deg) translateY(-3px);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  text-align:center;height:100%;padding:14px;gap:8px;
  pointer-events:none;user-select:none
}
.lab{font-weight:950;font-size:18px;letter-spacing:.6px;text-shadow:0 0 16px rgba(255,255,255,.14)}
.sub{font-size:13px;opacity:.88;line-height:1.25;max-width:18em}

/* Core */
.core{
  position:absolute;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:60px;height:60px;border-radius:18px;
  background:rgba(0,0,0,.20);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 18px 44px rgba(0,0,0,.55), inset 0 2px 0 rgba(255,255,255,.10);
  display:grid;place-items:center;
  pointer-events:none
}

/* Dock */
.dock{
  position:fixed;left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:120;width:min(980px,94vw);
  display:flex;justify-content:center;gap:10px;flex-wrap:wrap;
  padding:10px 12px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.18);
  pointer-events:none
}
.dock .btn{pointer-events:auto}

/* Modals */
.bd{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.72);backdrop-filter:blur(10px);display:none}
.bd.show{display:block}
.modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:min(1180px,96vw);height:90vh;display:none;z-index:210}
.modal.show{display:block}
.shell{
  height:90vh;border-radius:22px;border:1px solid rgba(255,255,255,.14);
  background:linear-gradient(160deg, rgba(10,18,30,.96), rgba(6,10,16,.98));
  overflow:hidden;display:flex;flex-direction:column
}
.mhead{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
.mtitle{margin:0;font-weight:950;letter-spacing:.3px;font-size:16px}
.mclose{border:0;background:transparent;color:#fff;font-size:18px;cursor:pointer;padding:8px 10px}
.mbody{padding:16px;overflow:auto;-webkit-overflow-scrolling:touch;flex:1 1 auto}

.hint{
  max-width:980px;margin:0 auto 12px;
  padding:10px 12px;border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);
  color:rgba(255,255,255,.80);
  font-size:12.5px;line-height:1.45
}

/* Domains grid */
.qgrid{display:grid;gap:14px;grid-template-columns:1fr}
@media (min-width:760px){.qgrid{grid-template-columns:1fr 1fr}}
.domCard{
  width:100%;height:140px;position:relative;border-radius:22px;
  cursor:pointer;pointer-events:auto;touch-action:manipulation;
  background:
    radial-gradient(circle at 30% 22%, rgba(255,255,255,.50), transparent 52%),
    radial-gradient(circle at 70% 78%, rgba(0,120,255,.26), transparent 62%),
    linear-gradient(160deg, rgba(14,24,40,.96), rgba(7,11,18,.98));
  border:1px solid rgba(255,255,255,.16);
  box-shadow:0 22px 70px rgba(0,0,0,.70), inset 0 2px 0 rgba(255,255,255,.22), inset 0 -34px 60px rgba(0,0,0,.70)
}
.domCard::before{
  content:"";position:absolute;inset:0;border-radius:22px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  pointer-events:none
}
.dcInner{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:14px;pointer-events:none}
.dcT{font-weight:950;letter-spacing:.25px}
.dcS{font-size:12.5px;opacity:.82;margin-top:6px}

/* Narrative modal */
.lensbar{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:0 0 14px}
.pill{
  padding:10px 14px;border-radius:999px;
  background:linear-gradient(145deg, rgba(17,22,28,.92), rgba(11,15,20,.96));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 14px 36px rgba(0,0,0,.65);
  cursor:pointer;font-weight:900;letter-spacing:.2px;color:#fff;
  user-select:none;-webkit-tap-highlight-color:transparent
}
.pill.active{border-color:rgba(212,175,55,.60);box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px rgba(212,175,55,.22)}
.bubble{
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;background:rgba(255,255,255,.05);
  padding:14px 14px 12px;margin:0 0 12px;
  cursor:pointer;-webkit-tap-highlight-color:transparent
}
.bubble h4{margin:0 0 8px;font-weight:950;letter-spacing:.15px}
.bubble p{margin:0;color:var(--mut2);line-height:1.65;display:none}
.bubble.open p{display:block}

@media (max-width:560px){
  :root{--R:148px;--D:176px}
  .stage{top:54%}
}
@media (max-width:420px){
  :root{--R:138px;--D:168px}
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" id="btnBack" href="/products/">BACK</a>
  <a class="btn" id="btnExit" href="/index.html">EXIT</a>
</div>

<div class="brand" aria-hidden="true">
  <div class="t" id="hdrT">Software</div>
  <div class="s" id="hdrS">Wishbone · Engine ↔ Platform · 72 Narratives</div>
</div>

<div class="stage" aria-label="Software wishbone">
  <div class="outer"></div>

  <div class="d dL" id="dEngine" role="button" tabindex="0" aria-label="Engine">
    <div class="inner">
      <div class="lab" id="labEngine">ENGINE</div>
      <div class="sub" id="subEngine">How it runs · state · gates</div>
    </div>
  </div>

  <div class="d dR" id="dPlatform" role="button" tabindex="0" aria-label="Platform">
    <div class="inner">
      <div class="lab" id="labPlatform">PLATFORM</div>
      <div class="sub" id="subPlatform">How it ships · surfaces · routing</div>
    </div>
  </div>

  <div class="core">◆</div>
</div>

<nav class="dock" aria-label="Bottom navigation">
  <a class="btn" id="dockTerminal" href="/index.html">TERMINAL</a>
  <a class="btn" id="dockDoor" href="/door/">DOOR</a>
  <a class="btn" id="dockHub" href="/home/">HUB</a>
  <a class="btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="btn" id="dockGauges" href="/gauges/">GAUGES</a>
  <a class="btn" id="dockLinks" href="/links/">LINKS</a>
</nav>

<div class="bd" id="bd"></div>

<!-- Domains Modal -->
<div class="modal" id="domainsModal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="domainsTitle">SOFTWARE · ENGINE</h3>
      <button class="mclose" id="domainsClose" aria-label="Close" type="button">✕</button>
    </div>
    <div class="mbody">
      <div class="hint" id="domainsHint">Tap a domain to enter its narrative. RETURN closes this layer.</div>
      <div class="qgrid" id="domainsGrid"></div>
    </div>
  </div>
</div>

<!-- Narrative Modal -->
<div class="modal" id="narrativeModal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="narTitle">SOFTWARE · Domain</h3>
      <button class="mclose" id="narClose" aria-label="Close" type="button">✕</button>
    </div>

    <div class="mbody">
      <div class="lensbar">
        <div class="pill active" id="toneFormal">FORMAL</div>
        <div class="pill" id="toneInformal">INFORMAL</div>
      </div>

      <div class="hint" id="narHint">Content evolves by time (Concept → Live → Roadmap) and by tone (Formal vs Informal).</div>

      <div class="bubble" id="bConcept"><h4 id="hConcept">Concept</h4><p id="pConcept"></p></div>
      <div class="bubble" id="bLive"><h4 id="hLive">Live</h4><p id="pLive"></p></div>
      <div class="bubble" id="bRoadmap"><h4 id="hRoadmap">Roadmap</h4><p id="pRoadmap"></p></div>
    </div>
  </div>
</div>

<script>
(function(){
  // ===== state =====
  var qs=new URLSearchParams(location.search);
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var style = qs.get("style") || localStorage.getItem("gd_style") || "formal";
  var time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  var depth = qs.get("depth") || localStorage.getItem("gd_depth") || "explore";
  if(time==="trajectory") time="post";
  if(lang!=="en" && lang!=="zh" && lang!=="es") lang="en";
  if(style!=="formal" && style!=="informal") style="formal";
  if(time!=="origin" && time!=="now" && time!=="post") time="now";
  if(depth!=="explore" && depth!=="learn") depth="explore";

  try{
    localStorage.setItem("gd_lang",lang);
    localStorage.setItem("gd_style",style);
    localStorage.setItem("gd_time",time);
    localStorage.setItem("gd_depth",depth);
  }catch(e){}
  document.documentElement.lang=(lang==="zh")?"zh":(lang==="es")?"es":"en";

  function q(){
    var p=new URLSearchParams();
    p.set("lang",lang); p.set("style",style); p.set("time",time); p.set("depth",depth);
    return "?"+p.toString();
  }

  // nav links
  document.getElementById("btnBack").href="/products/"+q();
  document.getElementById("btnExit").href="/index.html"+q();
  document.getElementById("dockTerminal").href="/index.html"+q();
  document.getElementById("dockDoor").href="/door/"+q();
  document.getElementById("dockHub").href="/home/"+q();
  document.getElementById("dockProducts").href="/products/"+q();
  document.getElementById("dockLaws").href="/laws/"+q();
  document.getElementById("dockGauges").href="/gauges/"+q();
  document.getElementById("dockLinks").href="/links/"+q();

  // ===== UI text =====
  var UI={
    en:{
      hdrT:"Software",
      hdrS:"Wishbone · Engine ↔ Platform · 72 Narratives",
      d:{engine:{lab:"ENGINE",sub:"How it runs · state · gates"}, platform:{lab:"PLATFORM",sub:"How it ships · surfaces · routing"}},
      domainsHint:"Tap a domain to enter its narrative. RETURN closes this layer.",
      narHint:"Content evolves by time (Concept → Live → Roadmap) and by tone (Formal vs Informal).",
      formal:"FORMAL", informal:"INFORMAL",
      concept:"Concept", live:"Live", roadmap:"Roadmap",
      domSub:"Concept · Live · Roadmap",
      ret:"RETURN"
    },
    zh:{
      hdrT:"软件",
      hdrS:"叉形入口 · 引擎 ↔ 平台 · 72段叙事",
      d:{engine:{lab:"引擎",sub:"怎么跑 · 状态 · 闸门"}, platform:{lab:"平台",sub:"怎么交付 · 界面 · 路由"}},
      domainsHint:"点选域进入叙事。RETURN 关闭本层。",
      narHint:"内容随时间（概念→上线→路线图）与语气（正式/通俗）演进。",
      formal:"正式", informal:"通俗",
      concept:"概念", live:"上线", roadmap:"路线图",
      domSub:"概念 · 上线 · 路线图",
      ret:"RETURN"
    },
    es:{
      hdrT:"Software",
      hdrS:"Horquilla · Motor ↔ Plataforma · 72 Narrativas",
      d:{engine:{lab:"MOTOR",sub:"Cómo corre · estado · compuertas"}, platform:{lab:"PLATAFORMA",sub:"Cómo se entrega · superficies · rutas"}},
      domainsHint:"Toca un dominio para ver su narrativa. RETURN cierra esta capa.",
      narHint:"El contenido evoluciona por tiempo (Concepto → En vivo → Hoja de ruta) y por tono (Formal vs Informal).",
      formal:"FORMAL", informal:"INFORMAL",
      concept:"Concepto", live:"En vivo", roadmap:"Hoja de ruta",
      domSub:"Concepto · En vivo · Hoja de ruta",
      ret:"RETURN"
    }
  };
  var T=(lang==="zh")?UI.zh:(lang==="es")?UI.es:UI.en;

  document.getElementById("hdrT").textContent=T.hdrT;
  document.getElementById("hdrS").textContent=T.hdrS;
  document.getElementById("labEngine").textContent=T.d.engine.lab;
  document.getElementById("subEngine").textContent=T.d.engine.sub;
  document.getElementById("labPlatform").textContent=T.d.platform.lab;
  document.getElementById("subPlatform").textContent=T.d.platform.sub;

  document.getElementById("domainsHint").textContent=T.domainsHint;
  document.getElementById("narHint").textContent=T.narHint;
  document.getElementById("toneFormal").textContent=T.formal;
  document.getElementById("toneInformal").textContent=T.informal;
  document.getElementById("hConcept").textContent=T.concept;
  document.getElementById("hLive").textContent=T.live;
  document.getElementById("hRoadmap").textContent=T.roadmap;

  // ===== Domain catalog (stable IDs) =====
  var DOMAINS = {
    state_runtime: {en:"State Runtime", zh:"状态运行时", es:"Runtime de estado"},
    deterministic_gates: {en:"Deterministic Gates", zh:"确定性闸门", es:"Compuertas deterministas"},
    receipt_progression: {en:"Receipt Progression", zh:"收据式推进", es:"Progresión por recibos"},
    change_control: {en:"Change Control", zh:"变更控制", es:"Control de cambios"},
    audit_discipline: {en:"Audit Discipline", zh:"审计纪律", es:"Disciplina de auditoría"},
    admissibility_doctrine: {en:"Admissibility Doctrine", zh:"可采信教义", es:"Doctrina de admisibilidad"},

    navigation_surfaces: {en:"Navigation Surfaces", zh:"导航界面", es:"Superficies de navegación"},
    product_packaging: {en:"Product Packaging", zh:"产品封装", es:"Empaquetado de producto"},
    enterprise_deployment: {en:"Enterprise Deployment", zh:"企业部署", es:"Despliegue empresarial"},
    dotgrid_sweeps: {en:"Dot.Grid Sweeps", zh:"Dot.Grid 扫掠", es:"Barridos Dot.Grid"},
    scoring_outputs: {en:"Scoring Outputs", zh:"评分输出", es:"Salidas de puntuación"},
    registry_lookups: {en:"Registry Lookups", zh:"登记查询", es:"Consultas de registro"}
  };

  var ENGINE6 = ["state_runtime","deterministic_gates","receipt_progression","change_control","audit_discipline","admissibility_doctrine"];
  var PLATFORM6 = ["navigation_surfaces","product_packaging","enterprise_deployment","dotgrid_sweeps","scoring_outputs","registry_lookups"];

  function dTitle(id){
    var o=DOMAINS[id]||null;
    if(!o) return id;
    return (lang==="zh")?o.zh:(lang==="es")?(o.es||o.en):o.en;
  }

  // ===== 72 narratives (3 lang × 2 tone × 3 time) =====
  // tone: formal|informal, phase: concept|live|roadmap
  function P(en,zh,es){ return {en:en, zh:zh, es:es}; }
  function N(formal,informal){ return {formal:formal, informal:informal}; }
  function T3(concept,live,roadmap){ return {concept:concept, live:live, roadmap:roadmap}; }

  var TEXT = {
    state_runtime: T3(
      N(
        P(
          "The runtime is a constrained state machine: declared keys define the coordinate and each transition is atomic. The same evidence stream yields the same next state under identical rules. This makes execution reproducible and drift-resistant.",
          "运行时是受约束的状态机：规范键定义坐标，状态转移必须原子化。同一证据流在同一规则下得到同一下一状态，从而让执行可复现、抗漂移。",
          "El runtime es una máquina de estados acotada: las claves declaradas definen la coordenada y cada transición es atómica. La misma evidencia produce el mismo siguiente estado bajo las mismas reglas."
        ),
        P(
          "The runtime is the part that keeps everything from turning into chaos. You are always in a state, and every move changes state cleanly. No guessing, no magic—just discipline.",
          "运行时负责防止系统变成混乱：你总在某个状态里，每一步都干净地换到下一个状态。不靠猜，不靠“魔法”，靠纪律。",
          "El runtime evita el caos: siempre estás en un estado y cada paso cambia el estado de forma limpia. Sin magia ni suposiciones: disciplina."
        )
      ),
      N(
        P(
          "Live operation requires state to survive refresh, navigation, and device variance. Back-navigation can invalidate downstream receipts; forward movement requires fresh confirmation. Drift triggers rollback rather than reinterpretation.",
          "上线态要求状态能穿越刷新、返回、设备差异。回退会使下游收据失效；前进需要重新确认。出现漂移则回滚，而不是改口解释。",
          "En vivo, el estado debe sobrevivir recarga, navegación y variaciones del dispositivo. Volver puede invalidar recibos; avanzar requiere confirmación. La deriva dispara rollback."
        ),
        P(
          "Live means it doesn’t break when you tap around. Leave and come back and it still knows what’s true. If something goes weird, it resets cleanly instead of spiraling.",
          "上线意味着你怎么点都不崩：离开再回来，系统仍知道什么是真的。出问题就干净重置，不让它螺旋失控。",
          "En vivo significa que no se rompe cuando tocas. Sales y vuelves y sigue siendo correcto. Si se pone raro, se reinicia limpio."
        )
      ),
      N(
        P(
          "Roadmap extends the runtime into domain adapters and exportable receipts: each transition can emit a compact proof bundle (inputs, decision, result). Coverage expands without changing the core contract.",
          "路线图把运行时扩展为可插拔的领域适配器与可导出的收据：每次转移都可输出小型证明包（输入、决策、结果）。覆盖面扩大但契约不变。",
          "La hoja de ruta añade adaptadores por dominio y recibos exportables: cada transición puede emitir un paquete de prueba (entradas, decisión, resultado) sin cambiar el contrato base."
        ),
        P(
          "Next, the runtime learns new domains without changing the rules. More surfaces, same discipline. And you can export what happened so others can verify it.",
          "下一步是在不改规则的前提下接入更多领域：更多界面，同样纪律；还可以导出发生了什么，让别人能核查。",
          "Luego, el runtime se extiende a nuevos dominios sin cambiar reglas: más superficies, misma disciplina, y exportas lo ocurrido para que otros lo verifiquen."
        )
      )
    ),

    deterministic_gates: T3(
      N(
        P(
          "Gates are binary admissibility checks under declared scope. They prevent escalation without receipts and suppress narrative inflation. A gate is a rule: given inputs, it yields pass or fail.",
          "闸门是在声明范围内的二元可采信检查：没有收据就不允许升级，防止叙事膨胀。闸门是规则：给定输入，只产出通过/失败。",
          "Las compuertas son verificaciones binarias de admisibilidad bajo alcance declarado. Sin recibos no hay escalación. Dado un input, devuelve pasa/falla."
        ),
        P(
          "Gates are the yes/no switches that keep the system honest. If the proof isn’t there, you don’t level up. Simple and clean.",
          "闸门就是让系统诚实的“是/否”开关：没证明就不升级，干净利落。",
          "Las compuertas son el sí/no que mantiene honestidad. Si no hay prueba, no subes de nivel. Simple."
        )
      ),
      N(
        P(
          "Live gates forbid timers-as-gates, hidden shortcuts, and silent overrides. Failures are contained and logged; success advances with a receipt. This preserves comparability across time.",
          "上线闸门禁止用计时当闸门、禁止暗捷径、禁止静默覆盖。失败会被隔离并记录；通过则携带收据推进，从而保证跨时间可比较。",
          "En vivo, no hay temporizadores como compuertas, ni atajos ocultos, ni overrides silenciosos. Fallos se contienen y registran; éxitos avanzan con recibo."
        ),
        P(
          "Live gating means no sneaky passes. You either meet it or you don’t. If you fail, it stops drift immediately and tells you what broke.",
          "上线闸门不允许“偷过”：要么满足，要么不满足。不满足就立刻止漂移，并告诉你哪里坏了。",
          "En vivo no hay pases furtivos: cumples o no. Si fallas, corta la deriva y te dice qué se rompió."
        )
      ),
      N(
        P(
          "Roadmap adds reason codes and replay: independent observers can reproduce gate decisions from the same receipt set. That upgrades trust while keeping the logic minimal.",
          "路线图加入原因码与可回放：独立观察者可用同一收据集复现闸门决策。在保持逻辑极简的同时提升可信度。",
          "La hoja de ruta añade códigos de razón y replay: observadores independientes pueden reproducir la decisión con el mismo set de recibos, aumentando confianza."
        ),
        P(
          "Next, every gate comes with a clean “why” that anyone can rerun. Same inputs, same result. That’s how trust scales.",
          "下一步是每个闸门都有可复跑的“为什么”：同输入同结果，信任因此能规模化。",
          "Luego, cada compuerta viene con un “por qué” rerunable: mismo input, mismo resultado. Así escala la confianza."
        )
      )
    ),

    receipt_progression: T3(
      N(
        P(
          "Progression is receipt-gated: advancement requires evidence that survives scope locks. Time does not grant progress; outputs do. This makes progress audit-friendly by default.",
          "推进是收据闸门式的：升级必须有在范围锁下仍成立的证据。时间不授予进步，输出才授予进步，因此默认可审计。",
          "La progresión está acotada por recibos: avanzar requiere evidencia que sobreviva al alcance. El tiempo no otorga progreso; la salida sí. Por defecto es audit-able."
        ),
        P(
          "You don’t progress because time passed—you progress because you did the thing. Receipts are the proof you earned the next step.",
          "不是因为过了时间就算进步，而是因为你做到了。收据就是你配得上下一步的证明。",
          "No avanzas por pasar tiempo; avanzas por hacerlo. Los recibos prueban que te ganaste el siguiente paso."
        )
      ),
      N(
        P(
          "Live progression preserves position across navigation and language toggles. Back-navigation can invalidate downstream receipts; forward steps require confirmation. Conflicts prefer safety over momentum.",
          "上线推进会在导航与语言切换中保持位置。回退会使下游收据失效；前进需要确认。出现冲突时优先安全而非速度。",
          "En vivo, la progresión se conserva al navegar o cambiar idioma. Volver puede invalidar recibos; avanzar requiere confirmación. Ante conflicto, seguridad > impulso."
        ),
        P(
          "Live means you can’t accidentally skip into the future. If you back out, the system knows what becomes invalid and keeps you honest.",
          "上线意味着你无法误闯未来：你一回退，系统就知道哪些东西无效，并把你拉回真实状态。",
          "En vivo no puedes “saltar” por accidente. Si retrocedes, el sistema sabe qué se invalida y te mantiene honesto."
        )
      ),
      N(
        P(
          "Roadmap adds registrable receipt bundles (hashable) so progress can be recognized across products without leaking private data. Verification scales without centralized trust.",
          "路线图加入可登记的收据包（可哈希），让进度能跨产品被认可而不泄露隐私。验证可扩展且不依赖中心信任。",
          "La hoja de ruta añade paquetes de recibos registrables (hasheables) para reconocer progreso entre productos sin filtrar datos privados. La verificación escala sin confianza central."
        ),
        P(
          "Next, your receipts become portable. Proof scales; privacy stays. That’s how progress becomes real outside one page.",
          "下一步是收据可携带：证明可扩展，隐私不牺牲。这样进度才能在页面之外也算数。",
          "Luego, tus recibos se vuelven portátiles: la prueba escala y la privacidad permanece. Así el progreso cuenta fuera de una sola página."
        )
      )
    ),

    change_control: T3(
      N(
        P(
          "Change control defines how updates occur without corrupting comparability. If a change affects outcomes, it creates a new epoch. Past results remain interpretable under original rules.",
          "变更控制规定如何升级而不破坏可比性：只要影响结果就开启新纪元；旧结果仍按旧规则可解释。",
          "El control de cambios define cómo actualizar sin romper comparabilidad. Si cambia resultados, crea una nueva época. Lo anterior sigue interpretable con reglas originales."
        ),
        P(
          "Change control is how you upgrade without rewriting history. If rules change, you stamp it. Comparisons stay honest.",
          "变更控制就是“不改历史”的升级法：规则变了就盖章，比较才诚实。",
          "Control de cambios es actualizar sin reescribir historia. Si cambias reglas, lo marcas. Comparaciones honestas."
        )
      ),
      N(
        P(
          "Live control requires staged rollout, rollback readiness, and documented reasons. Hotfixes must not become hidden policy changes. Stability remains primary.",
          "上线变更必须分阶段发布、随时可回滚、且理由可追溯。热修不能变成暗政策变更。稳定性优先。",
          "En vivo, requiere rollout por fases, rollback listo y razones documentadas. Los hotfix no pueden ser cambios de política ocultos. La estabilidad es prioridad."
        ),
        P(
          "Live means don’t push chaos to production. Roll out in waves, keep rollback ready, and don’t pretend a hotfix is harmless.",
          "上线意味着别把混乱推到生产：分波次、备回滚、别假装热修无害。",
          "En vivo: no empujes caos a producción. Ola por ola, rollback listo, y no finjas que un hotfix es inocuo."
        )
      ),
      N(
        P(
          "Roadmap introduces signed releases and policy registries so changes become verifiable events. This strengthens external trust while keeping internal speed.",
          "路线图引入签名发布与策略登记，使变更成为可验证事件：外部信任增强，内部速度不降。",
          "La hoja de ruta añade releases firmados y registros de política para que los cambios sean eventos verificables, fortaleciendo confianza externa sin perder velocidad interna."
        ),
        P(
          "Next, updates become ‘signed events’ you can point to. People trust systems that don’t quietly change under their feet.",
          "下一步是更新变成“可指认的签名事件”：人们信任不会悄悄换地板的系统。",
          "Luego, las actualizaciones son ‘eventos firmados’. La gente confía en sistemas que no cambian silenciosamente bajo sus pies."
        )
      )
    ),

    audit_discipline: T3(
      N(
        P(
          "Audit discipline requires observer-invariant evaluation: outputs are judged by receipts, not intent. Implemented via logging, replay, and fixed rule application under declared scope.",
          "审计纪律要求观察者不变：用收据判输出，而不是用意图判。通过日志、回放、固定规则在声明范围内实现。",
          "La disciplina de auditoría exige evaluación invariante: se juzga por recibos, no por intención. Se implementa con logs, replay y reglas fijas bajo alcance declarado."
        ),
        P(
          "Audit discipline means: show what happened. Not what you meant. Receipts decide.",
          "审计纪律就是：看发生了什么，不看你“想表达什么”。收据说了算。",
          "Auditoría significa: muestra lo que pasó, no lo que ‘quisiste’. Los recibos deciden."
        )
      ),
      N(
        P(
          "Live audit mode produces bundles that can be re-run. Disagreements resolve via scope or missing receipts, not interpretation battles. This keeps disputes cheap and bounded.",
          "上线审计会产出可复跑的包。分歧通过范围或缺失收据解决，而不是争论解释。争议因此变得便宜且有界。",
          "En vivo, el modo auditoría produce paquetes re-ejecutables. Desacuerdos se resuelven por alcance o recibos faltantes, no por debates de interpretación. Disputas quedan acotadas."
        ),
        P(
          "Live auditing makes fights boring. If you disagree, look at the receipt. If it’s missing, log it and move on.",
          "上线审计让争吵变无聊：不一致就看收据；没收据就记缺失，然后继续。",
          "La auditoría en vivo vuelve las peleas aburridas: si discrepas, mira el recibo. Si falta, regístralo y sigue."
        )
      ),
      N(
        P(
          "Roadmap adds audit automation with strict separation of tuning authority. Builders cannot silently tune thresholds; auditors cannot silently relax them. This blocks capture.",
          "路线图加入自动审计，同时严格分离调参权：开发者不能暗调阈值，审计者也不能暗放宽。防捕获。",
          "La hoja de ruta añade automatización con separación estricta de autoridad: quien construye no puede ajustar umbrales en silencio; quien audita no puede relajarlos en silencio. Evita captura."
        ),
        P(
          "Next, audits get faster without getting weaker. And nobody gets to secretly tune outcomes to look good.",
          "下一步是审计更快但不更弱；没人能偷偷调结果来“好看”。",
          "Luego, auditorías más rápidas sin volverse débiles. Nadie puede ‘tunear’ resultados en secreto para verse bien."
        )
      )
    ),

    admissibility_doctrine: T3(
      N(
        P(
          "Doctrine defines what may be claimed and what must remain conditional. It prevents upgrades beyond receipts and locks language to measured scope. Software must obey this or it becomes narrative-driven.",
          "教义规定什么能主张、什么必须条件化：防止超出收据升级，并把语言锁在可测范围内。软件必须遵守，否则就会被叙事驱动。",
          "La doctrina define qué se puede afirmar y qué debe ser condicional. Evita upgrades sin recibos y ata el lenguaje al alcance medido. Sin esto, el software se vuelve narrativo."
        ),
        P(
          "Doctrine is the rule: don’t say more than you can prove. Software gets dangerous when it sells stories. This keeps it honest.",
          "教义就是：别说超过你能证明的东西。软件一卖故事就危险。这个规则让它诚实。",
          "Doctrina: no digas más de lo que puedes probar. El software se vuelve peligroso cuando vende historias. Esto lo mantiene honesto."
        )
      ),
      N(
        P(
          "Live doctrine enforces posture: concept stays concept, live stays measured, roadmap stays gated. If evidence is missing, the system must say so and refuse escalation.",
          "上线教义会强制姿态：概念就是概念；上线必须可测；路线图必须有闸门。证据缺失就必须声明并拒绝升级。",
          "En vivo, la doctrina mantiene postura: concepto es concepto, en vivo es medido, roadmap es con compuertas. Si falta evidencia, el sistema lo declara y no escala."
        ),
        P(
          "Live doctrine means call things what they are. If it’s not measured, don’t hype it. If it’s only a plan, label it as a plan.",
          "上线教义就是：是什么就说是什么。没测就别吹；只是计划就标成计划。",
          "En vivo: llama a las cosas por su nombre. Si no está medido, no lo exageres. Si es plan, dilo plan."
        )
      ),
      N(
        P(
          "Roadmap standardizes doctrine templates across products so claim discipline holds everywhere. This reduces drift and accelerates safe adoption.",
          "路线图把教义模板标准化到全产品：主张纪律处处一致，漂移减少，安全采纳加速。",
          "La hoja de ruta estandariza plantillas doctrinales entre productos para que la disciplina de afirmación sea consistente. Reduce deriva y acelera adopción segura."
        ),
        P(
          "Next, every page speaks the same honest language. No surprises. No inflated claims. Clear posture everywhere.",
          "下一步是每一页都说同一种诚实语言：没惊喜、没膨胀、姿态清晰。",
          "Luego, cada página habla el mismo lenguaje honesto: sin sorpresas, sin inflación de afirmaciones, postura clara en todas partes."
        )
      )
    ),

    navigation_surfaces: T3(
      N(
        P(
          "Surfaces present options without altering invariants. A surface may simplify choices, but it must not change what is admissible. UX is subordinate to engine rules.",
          "界面负责呈现选项但不能改不变量：可以简化选择，但不能改变什么是可采信。体验必须服从引擎规则。",
          "Las superficies presentan opciones sin alterar invariantes. Pueden simplificar, pero no cambiar lo admisible. La UX está subordinada a reglas del motor."
        ),
        P(
          "The surface can look simple, but it can’t lie. Pretty doesn’t get to override the rules.",
          "界面可以很简单，但不能撒谎；漂亮不能覆盖规则。",
          "La superficie puede ser simple, pero no puede mentir. Lo bonito no anula reglas."
        )
      ),
      N(
        P(
          "Live surfaces require tap reliability: no competing UI stacks, no intercepting overlays, no double routes. Each action yields one deterministic outcome.",
          "上线界面要求点按可靠：没有竞争层、没有拦截遮罩、没有双重路由；每次动作只产生一个确定结果。",
          "En vivo, la superficie exige fiabilidad de toque: sin UI compitiendo, sin overlays interceptando, sin rutas dobles. Cada acción produce un resultado determinista."
        ),
        P(
          "Live means every tap works the first time. No ghost layers. Touch it, and it does exactly one thing.",
          "上线意味着每次点按一次成功：没有幽灵层；你点它，它只做一件事。",
          "En vivo, cada toque funciona a la primera. Sin capas fantasma. Lo tocas y hace exactamente una cosa."
        )
      ),
      N(
        P(
          "Roadmap introduces reusable templates across products so interactions feel identical everywhere. Consistency reduces cognitive load and increases adoption velocity.",
          "路线图引入跨产品复用模板：交互处处一致，认知负担下降，采纳速度提升。",
          "La hoja de ruta trae plantillas reutilizables entre productos: misma interacción en todas partes, menos carga cognitiva, más adopción."
        ),
        P(
          "Next, every product page feels like the same machine. Learn one, use them all.",
          "下一步是每个产品页都像同一台机器：学会一个，就能用全部。",
          "Luego, cada página de producto se siente como la misma máquina: aprendes una y usas todas."
        )
      )
    ),

    product_packaging: T3(
      N(
        P(
          "Packaging binds engines to sellable surfaces without mixing doctrine into marketing. Product pages state what you can use; proof pages state what is true. This prevents claim inflation.",
          "封装把引擎绑定到可交付界面，但不把教义写成营销：产品页说你能用什么，证明页说什么是真的。防止主张膨胀。",
          "El empaquetado une motores a superficies vendibles sin mezclar doctrina con marketing. Producto: qué puedes usar. Prueba: qué es cierto. Evita inflación de afirmaciones."
        ),
        P(
          "Packaging is: here’s what you can use—without turning proof into sales copy. Products do the job; laws set boundaries.",
          "封装就是：告诉你能用什么，但不把证明写成广告。产品做事，法则定边界。",
          "Empaquetado: aquí está lo que puedes usar, sin convertir prueba en publicidad. Productos hacen el trabajo; leyes fijan límites."
        )
      ),
      N(
        P(
          "Live packaging eliminates dead ends: every card opens, every open has a return, and state is preserved across jumps. The spine stays navigable under pressure.",
          "上线封装消灭死路：每张卡都能打开；每个打开都有返回；跳转保持状态。压力下依旧可导航。",
          "En vivo elimina callejones: cada tarjeta abre, cada abrir tiene retorno, y el estado se conserva. La columna sigue navegable bajo presión."
        ),
        P(
          "Live packaging means you can actually find things and get back. No 404s. No loops. Clean routes.",
          "上线封装意味着你真能找到东西并回得来：不404、不绕圈、路由干净。",
          "Empaquetado en vivo: encuentras cosas y vuelves. Sin 404, sin bucles, rutas limpias."
        )
      ),
      N(
        P(
          "Roadmap adds tiering (SaaS/Enterprise/Government) and registry status so access level is legible without reading internal doctrine. Packaging stays human-first.",
          "路线图加入分级（SaaS/企业/政府）与登记状态，让访问级别一眼可读，无需翻内部教义。封装保持人类可读。",
          "La hoja de ruta añade niveles (SaaS/Empresa/Gobierno) y estado de registro para que el acceso sea legible sin leer doctrina interna."
        ),
        P(
          "Next, products get clear tiers and access signals. People don’t need jargon to understand what’s available.",
          "下一步是产品拥有清晰分级与访问信号：不靠术语也能理解可用内容。",
          "Luego, productos con niveles claros y señales de acceso. Sin jerga para entender qué está disponible."
        )
      )
    ),

    enterprise_deployment: T3(
      N(
        P(
          "Enterprise deployment is staged rollout with segmentation and rollback readiness. Claims remain bounded to measured bands. Governance is explicit: who deploys, who audits, who tunes.",
          "企业部署是分阶段发布+分区隔离+可回滚准备。主张必须限制在可测区间。治理明确：谁部署、谁审计、谁调参。",
          "Despliegue empresarial = rollout por fases con segmentación y rollback listo. Afirmaciones acotadas a bandas medidas. Gobernanza explícita: quién despliega, audita y ajusta."
        ),
        P(
          "Enterprise is scale without breaking. Waves, zones, rollback. No hero moves.",
          "企业就是“不坏掉的扩张”：波次、分区、回滚；不靠英雄主义。",
          "Empresa es escalar sin romper: olas, zonas, rollback. Sin heroísmos."
        )
      ),
      N(
        P(
          "Live posture monitors correlated exposure and gate compliance. Deployment decisions reference receipts, not urgency. Instability triggers containment and reversion to last stable state.",
          "上线姿态监测相关暴露与闸门合规。部署决策依据收据而非紧迫感。不稳即隔离并回到上一稳定态。",
          "En vivo monitorea exposición correlacionada y compuertas. Decisiones se basan en recibos, no urgencia. Inestabilidad → contención y volver al último estado estable."
        ),
        P(
          "Live enterprise means: if it wobbles, stop. If it clusters, split. If it drifts, roll back.",
          "上线企业：一晃就停；一聚就拆；一漂就回滚。",
          "Empresa en vivo: si tiembla, para. Si se agrupa, separa. Si deriva, rollback."
        )
      ),
      N(
        P(
          "Roadmap builds audit bundles and API exports so third parties can verify posture without privileged access. External trust scales when proof is portable.",
          "路线图构建审计包与API导出，让第三方无需特权也能核查姿态。证明可携带，外部信任才能扩张。",
          "La hoja de ruta añade paquetes de auditoría y exports API para que terceros verifiquen sin acceso privilegiado. La confianza escala cuando la prueba es portable."
        ),
        P(
          "Next, enterprise gets ‘proof packages’ you can hand to auditors and partners. They verify without your whole stack.",
          "下一步：企业拥有可交给审计与合作方的“证明包”，无需交出整套系统也能核查。",
          "Luego, la empresa tiene ‘paquetes de prueba’ para auditores y socios, verificables sin entregar todo tu stack."
        )
      )
    ),

    dotgrid_sweeps: T3(
      N(
        P(
          "Dot.Grid is a traversal-friendly indexing sweep: it enumerates states under fixed definitions and produces comparable windows. Its value is repeatable classification under constraint.",
          "Dot.Grid 是面向遍历的索引扫掠：在固定定义下枚举状态并产出可比较窗口。价值在于“约束下的可重复分类”。",
          "Dot.Grid es un barrido de indexación para recorrido: enumera estados bajo definiciones fijas y produce ventanas comparables. Valor: clasificación repetible bajo restricción."
        ),
        P(
          "Dot.Grid is the scanner. It lets you sweep the same way every time so results don’t depend on mood or narrative.",
          "Dot.Grid 就是扫描器：每次同样扫法，结果不依赖情绪或故事。",
          "Dot.Grid es el escáner: barridos iguales cada vez; resultados no dependen de estado de ánimo o narrativa."
        )
      ),
      N(
        P(
          "Live sweeps enforce window discipline and stable naming so comparisons remain valid across time. Outputs route to Gauges for display and Laws for interpretation bounds.",
          "上线扫掠强制窗口纪律与稳定命名，使跨时间比较有效。输出去量规展示，去法则约束解释。",
          "En vivo, los barridos mantienen disciplina de ventana y nombres estables para comparar en el tiempo. Salidas van a Medidores (visual) y Leyes (límites de interpretación)."
        ),
        P(
          "Live sweeps mean you can compare today to yesterday fairly. Same window, same labels, same output.",
          "上线扫掠让今天对昨天的比较变公平：同窗口、同标签、同输出。",
          "Barridos en vivo: comparar hoy vs ayer de forma justa. Misma ventana, mismas etiquetas, misma salida."
        )
      ),
      N(
        P(
          "Roadmap adds adapter packs so sweeps apply across domains (software, energy, governance) while preserving the same stability contract when the 256-style indexing is used.",
          "路线图加入适配包，使扫掠可跨领域（软件/能源/治理），同时在使用256式索引时保持同一稳定契约。",
          "La hoja de ruta añade adaptadores para aplicar barridos a múltiples dominios (software, energía, gobernanza) manteniendo el mismo contrato de estabilidad cuando se usa el estilo 256."
        ),
        P(
          "Next, Dot.Grid plugs into more domains—same sweep logic, more places to use it. Learn once, reuse everywhere.",
          "下一步：Dot.Grid 接入更多领域——同扫掠逻辑，更多用武之地；学一次，到处复用。",
          "Luego, Dot.Grid se conecta a más dominios: misma lógica, más usos. Aprendes una vez, reutilizas en todas partes."
        )
      )
    ),

    scoring_outputs: T3(
      N(
        P(
          "Scoring converts gate vectors and exposure into a bounded metric with reason codes. A score cannot override a fail state; it compresses decisions, not reality.",
          "评分把闸门向量与暴露转成带原因码的有界指标。分数不能覆盖失败态；它压缩决策，不改现实。",
          "La puntuación convierte vectores de compuertas y exposición en una métrica acotada con códigos de razón. No puede anular un fallo; comprime decisiones, no la realidad."
        ),
        P(
          "Scoring makes the signal easy to read. It doesn’t let you cheat a fail. It tells you where you stand and why.",
          "评分让信号更好读：不允许你“用分数作弊”去盖过失败；它告诉你位置和原因。",
          "La puntuación hace la señal legible: no te deja ‘tapar’ un fallo. Te dice dónde estás y por qué."
        )
      ),
      N(
        P(
          "Live scoring produces stable summaries and exports. Any threshold change creates a new epoch; silent tuning is disallowed. This keeps comparisons honest.",
          "上线评分会产出稳定摘要与导出。阈值变更必须新纪元；禁止静默调参。比较因此诚实。",
          "En vivo, produce resúmenes y exports estables. Cambiar umbrales crea nueva época; ajustar en silencio está prohibido. Comparaciones honestas."
        ),
        P(
          "Live scoring means no moving goalposts. If the rule changes, it’s stamped. If you compare scores, it’s fair.",
          "上线评分意味着不挪球门：规则变了就盖章；你比对分数才公平。",
          "En vivo, no se mueven los postes: si cambia la regla, se marca. Comparar puntuaciones es justo."
        )
      ),
      N(
        P(
          "Roadmap integrates portfolio and underwriting views while keeping evidence traceable via hashed receipts. Scores become shareable without leaking private telemetry.",
          "路线图接入组合与承保视图，同时用哈希收据保持证据可追溯。分数可分享但不泄露隐私遥测。",
          "La hoja de ruta integra vistas de portafolio y underwriting manteniendo evidencia trazable con recibos hasheados. Puntuaciones se comparten sin filtrar telemetría privada."
        ),
        P(
          "Next, you can share a score with proof attached—without dumping private data. Trust gets easier when evidence travels with the number.",
          "下一步：你能分享带证明的分数，而不倾倒隐私数据。证据跟着数字走，信任就更容易。",
          "Luego, compartes puntuación con prueba adjunta sin volcar datos privados. La confianza crece cuando la evidencia viaja con el número."
        )
      )
    ),

    registry_lookups: T3(
      N(
        P(
          "Registry provides lookupable status for packages, tiers, and validity windows. It publishes minimum necessary truth (status, time, reason) without exposing sensitive internals.",
          "登记系统提供可查询的包状态、分层与有效窗口；它只发布最小必要真相（状态/时间/原因），不暴露敏感内部。",
          "El registro ofrece estado consultable de paquetes, niveles y ventanas de validez. Publica la verdad mínima (estado, tiempo, razón) sin exponer internos sensibles."
        ),
        P(
          "Registry is the status check. Active, suspended, revoked—plus the reason. Clear and verifiable.",
          "登记系统就是状态核查：启用/暂停/撤销+原因码。清楚且可核查。",
          "Registro es el chequeo de estado: activo, suspendido, revocado—con razón. Claro y verificable."
        )
      ),
      N(
        P(
          "Live registry forbids silent revocation and enforces deterministic renewal. Every suspension or reinstatement is logged and auditable. This blocks capture and hidden exceptions.",
          "上线登记禁止静默撤销，并强制确定性续期规则。暂停/恢复都必须有日志可审计，阻断捕获与暗例外。",
          "En vivo, prohíbe revocación silenciosa y obliga renovaciones deterministas. Suspensiones y reintegros quedan registrados y auditables. Bloquea captura y excepciones ocultas."
        ),
        P(
          "Live registry means nobody can quietly flip things behind the scenes. If it changes, you can see it.",
          "上线登记意味着没人能背地里悄悄翻转状态：一变就能看见。",
          "Registro en vivo: nadie puede cambiar cosas en secreto. Si cambia, lo ves."
        )
      ),
      N(
        P(
          "Roadmap adds third-party attestations and replay bundles so status becomes verifiable across organizations. Registry becomes the bridge from internal execution to external trust.",
          "路线图加入第三方证明与回放包，使状态能跨组织核查。登记成为内部执行到外部信任的桥梁。",
          "La hoja de ruta añade atestaciones de terceros y paquetes de replay para verificar estado entre organizaciones. El registro se vuelve el puente entre ejecución interna y confianza externa."
        ),
        P(
          "Next, registry becomes real-world credibility. Outside groups verify status without taking your word for it.",
          "下一步：登记系统成为现实世界的可信度。外部机构无需“听你说”，就能核查状态。",
          "Luego, el registro se vuelve credibilidad real: terceros verifican estado sin depender de tu palabra."
        )
      )
    )
  };

  // ===== refs =====
  var bd=document.getElementById("bd");
  var domainsModal=document.getElementById("domainsModal");
  var narrativeModal=document.getElementById("narrativeModal");
  var domainsClose=document.getElementById("domainsClose");
  var narClose=document.getElementById("narClose");
  var domainsTitle=document.getElementById("domainsTitle");
  var domainsGrid=document.getElementById("domainsGrid");
  var narTitle=document.getElementById("narTitle");

  var toneFormal=document.getElementById("toneFormal");
  var toneInformal=document.getElementById("toneInformal");
  var bConcept=document.getElementById("bConcept");
  var bLive=document.getElementById("bLive");
  var bRoadmap=document.getElementById("bRoadmap");
  var pConcept=document.getElementById("pConcept");
  var pLive=document.getElementById("pLive");
  var pRoadmap=document.getElementById("pRoadmap");

  var currentSide="ENGINE"; // ENGINE|PLATFORM
  var currentDomain=null;   // domain id
  var tone="formal";        // formal|informal

  function showBD(){ bd.classList.add("show"); }
  function hideBD(){ bd.classList.remove("show"); }
  function closeAll(){
    domainsModal.classList.remove("show");
    narrativeModal.classList.remove("show");
    hideBD();
    setActiveDiamond(null);
  }

  function setActiveDiamond(which){
    var dE=document.getElementById("dEngine");
    var dP=document.getElementById("dPlatform");
    dE.classList.toggle("active", which==="ENGINE");
    dP.classList.toggle("active", which==="PLATFORM");
  }

  function openDomains(side){
    currentSide=side;
    setActiveDiamond(side);
    domainsTitle.textContent = (lang==="zh" ? "软件 · " : (lang==="es" ? "Software · " : "SOFTWARE · ")) + (side==="ENGINE" ? T.d.engine.lab : T.d.platform.lab);

    // build 6 domains + RETURN
    domainsGrid.innerHTML="";
    var list = (side==="ENGINE") ? ENGINE6 : PLATFORM6;

    list.forEach(function(id){
      var card=document.createElement("div");
      card.className="domCard";
      card.setAttribute("role","button");
      card.tabIndex=0;
      card.innerHTML='<div class="dcInner"><div class="dcT">'+dTitle(id)+'</div><div class="dcS">'+T.domSub+'</div></div>';
      function act(){ openNarrative(id); }
      card.addEventListener("click", act);
      card.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); act(); }});
      domainsGrid.appendChild(card);
    });

    var ret=document.createElement("div");
    ret.className="domCard";
    ret.setAttribute("role","button");
    ret.tabIndex=0;
    ret.innerHTML='<div class="dcInner"><div class="dcT">'+T.ret+'</div><div class="dcS">—</div></div>';
    function r(){ closeAll(); }
    ret.addEventListener("click", r);
    ret.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); r(); }});
    domainsGrid.appendChild(ret);

    showBD();
    narrativeModal.classList.remove("show");
    domainsModal.classList.add("show");
  }

  function applyTone(next){
    tone=next;
    toneFormal.classList.toggle("active", tone==="formal");
    toneInformal.classList.toggle("active", tone==="informal");
    renderNarrative();
  }

  function renderNarrative(){
    if(!currentDomain){ return; }
    var pack = TEXT[currentDomain];
    var phase = {
      concept: pack.concept[tone],
      live: pack.live[tone],
      roadmap: pack.roadmap[tone]
    };
    function pickLang(obj){
      return (lang==="zh") ? obj.zh : (lang==="es") ? obj.es : obj.en;
    }
    pConcept.textContent = pickLang(phase.concept);
    pLive.textContent = pickLang(phase.live);
    pRoadmap.textContent = pickLang(phase.roadmap);
  }

  function openNarrative(domainId){
    currentDomain=domainId;
    narTitle.textContent = (lang==="zh" ? "软件 · " : (lang==="es" ? "Software · " : "SOFTWARE · ")) + dTitle(domainId);

    // reset bubbles
    [bConcept,bLive,bRoadmap].forEach(function(b){ b.classList.remove("open"); });

    // ensure tone
    applyTone(tone);

    domainsModal.classList.remove("show");
    showBD();
    narrativeModal.classList.add("show");
  }

  function bindBubble(box){
    box.tabIndex=0; box.setAttribute("role","button");
    box.addEventListener("click", function(){ box.classList.toggle("open"); });
    box.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); box.classList.toggle("open"); }});
  }
  bindBubble(bConcept); bindBubble(bLive); bindBubble(bRoadmap);

  // buttons
  toneFormal.addEventListener("click", function(){ applyTone("formal"); });
  toneInformal.addEventListener("click", function(){ applyTone("informal"); });

  // close wiring
  domainsClose.addEventListener("click", closeAll);
  narClose.addEventListener("click", closeAll);
  bd.addEventListener("click", closeAll);
  domainsModal.addEventListener("click", function(e){ e.stopPropagation(); });
  narrativeModal.addEventListener("click", function(e){ e.stopPropagation(); });

  // diamond bindings
  function bindDiamond(id, side){
    var el=document.getElementById(id);
    function act(){ openDomains(side); }
    el.addEventListener("click", act);
    el.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); act(); }});
  }
  bindDiamond("dEngine","ENGINE");
  bindDiamond("dPlatform","PLATFORM");

  // default open
  openDomains("ENGINE");
})();
</script>

</body>
</html>
