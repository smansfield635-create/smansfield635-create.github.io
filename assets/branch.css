/* ============================================================
   GEODIAMETRICS BRANCH â€” CANONICAL GEOMETRY LAYER (branch.css)
   FILE: /assets/branch.css
   OWNERSHIP (LOCKED):
   - GEOMETRY ONLY (layout + positioning + transforms + modal geometry)
   - MUST NOT set html/body background, color-scheme, or typography
   - MUST NOT override ui.css field ownership
   ============================================================ */

/* ---------- Safety: branch owns NO field ---------- */
/* (Intentionally NO html, body selectors here.) */

:root{
  --gd-diamond: 150px;
  --gd-diamond-mobile: 120px;
  --gd-gap: 22px;
  --gd-radius: 22px;
}

/* ---------- Common wrappers (geometry only) ---------- */
.page{ width:100%; }
.wrap{ width:min(1100px,94vw); margin:0 auto; }
.stage{ width:100%; display:flex; justify-content:center; align-items:center; }

/* ---------- Diamond primitives (geometry only) ---------- */
.diamond,
.gd-diamond{
  position:relative;
  width:var(--gd-diamond);
  height:var(--gd-diamond);
  border-radius:var(--gd-radius);
  transform:rotate(45deg);
  display:flex;
  align-items:center;
  justify-content:center;
  text-decoration:none;
  -webkit-tap-highlight-color:transparent;
}

.diamond > span,
.gd-diamond > span,
.diamond > span > span,
.diamond span{
  transform:rotate(-45deg);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  gap:6px;
  width:100%;
  height:100%;
  padding:14px;
}

/* Optional small label blocks (no typography styling beyond size/opacity) */
.diamond small,
.gd-diamond small{
  opacity:.82;
  font-size:12px;
  letter-spacing:.4px;
}

/* ---------- Compass platform (big diamond made of 4 diamonds) ---------- */
.platform,
.gd-platform{
  position:relative;
  width: calc(var(--gd-diamond) * 3);
  height: calc(var(--gd-diamond) * 3);
  display:block;
}

/* Position helpers (top/right/bottom/left) */
.platform .top,
.gd-platform .top{ position:absolute; left:50%; top:0; transform:translateX(-50%) rotate(45deg); }
.platform .right,
.gd-platform .right{ position:absolute; right:0; top:50%; transform:translateY(-50%) rotate(45deg); }
.platform .bottom,
.gd-platform .bottom{ position:absolute; left:50%; bottom:0; transform:translateX(-50%) rotate(45deg); }
.platform .left,
.gd-platform .left{ position:absolute; left:0; top:50%; transform:translateY(-50%) rotate(45deg); }

/* Center nucleus (small diamond) */
.platform .center,
.gd-platform .center{
  position:absolute;
  left:50%;
  top:50%;
  width:72px;
  height:72px;
  border-radius:18px;
  transform:translate(-50%,-50%) rotate(45deg);
  display:flex;
  align-items:center;
  justify-content:center;
}
.platform .center > span,
.gd-platform .center > span{
  transform:rotate(-45deg);
  font-weight:900;
  letter-spacing:.6px;
}

/* ---------- Grid-style diamonds (used in some pages) ---------- */
.diamond-grid,
.gd-diamond-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--gd-gap);
  width:min(720px,92vw);
}

/* ============================================================
   MODAL GEOMETRY (NO COLORS / NO MATERIAL)
   Purpose: stop repeating modal positioning in every page.
   Styling (background/borders/shadows/colors) stays in ui.css or per-page.
   ============================================================ */

.bd{
  position:fixed;
  inset:0;
  display:none;
  z-index:200;
}
.bd.show{ display:block; }

.modal{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:min(1020px,94vw);
  max-height:88vh;
  display:none;
  z-index:210;
}
.modal.show{ display:block; }

.shell{
  height:88vh;
  max-height:88vh;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

.mhead{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  padding:14px 16px;
  flex:0 0 auto;
}

.mbody{
  padding:14px 16px 18px;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
  flex:1 1 auto;
}

.lensbar{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:center;
  padding:10px 10px 14px;
  margin:-6px -6px 14px;
}

.mgrid{
  display:grid;
  gap:14px;
}
@media (min-width:920px){
  .mgrid{ grid-template-columns:1fr 1fr; }
}

.mact{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:14px;
}

/* ============================================================
   RESPONSIVE SCALING
   ============================================================ */

@media (max-width:520px){
  :root{ --gd-diamond: var(--gd-diamond-mobile); }
  .platform,
  .gd-platform{
    width: calc(var(--gd-diamond) * 3);
    height: calc(var(--gd-diamond) * 3);
  }
  .platform .center,
  .gd-platform .center{
    width:60px;
    height:60px;
  }
  .shell{ height:90vh; max-height:90vh; }
}

/* ---------- Pointer event safety (geometry only) ---------- */
.platform a,
.gd-platform a,
.diamond,
.gd-diamond{ pointer-events:auto; }
