<!-- TNT — /products/energy/index.html  (ENERGY SUB-HUB · GEM STANDARD · DIAMOND-OF-DIAMONDS)
     vE-9005 (HARD-BIND CONTENT + 3–4× DENSITY)
     FIXES:
       - Eliminates “0 content” by defining ALL content inside the SAME IIFE that renders the modal.
       - No window injection, no multi-script ordering risk.
       - open(): show modal first, then render.
       - render(): hard fallback if ANY field is missing (never blank).
       - Hit-test lock: .stage pointer-events none; .d pointer-events auto
       - Dock tap-safe: container ignores taps; buttons still click
     LOCKS:
       - TNT FULL FILE
       - Uses /assets/ui.css + /assets/branch.css only
       - DOES NOT style html/body background
       - Canonical keys only: gd_lang / gd_style / gd_time
       - lang=en => EN only; lang=zh => 中文 only
       - 4 boxes × 4 bullets per view (minimum)
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · ENERGY</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>

<style>
:root{
  --R:154px;
  --goldSoft:rgba(212,175,55,.35);
  --obs1:#070b12;
  --obs2:#0c1626;
  --mut:rgba(255,255,255,.84);
  --mut2:rgba(255,255,255,.68);
}
body{margin:0;min-height:100vh;overflow-x:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;color:#fff}

/* Debug pill */
#dbg{
  position:fixed; right:12px; top:12px; z-index:9999;
  padding:8px 10px; border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.22);
  backdrop-filter:blur(10px);
  font-weight:950; letter-spacing:.3px; font-size:12px;
  color:rgba(255,255,255,.92);
  pointer-events:none;
}

/* Top-left */
.top-left{position:fixed;left:16px;top:16px;z-index:90;display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.btn{
  padding:10px 16px;border-radius:14px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  color:#fff;border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.7);
  cursor:pointer;font-weight:900;letter-spacing:.2px;text-decoration:none;
  -webkit-tap-highlight-color:transparent;
}
.btn:hover{box-shadow:0 18px 50px rgba(0,0,0,.9),0 0 14px var(--goldSoft)}

/* Brand pill */
.brand{
  position:fixed;left:50%;top:16px;transform:translateX(-50%);
  z-index:80;text-align:center;padding:10px 14px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);backdrop-filter:blur(8px);
}
.brand .name{font-weight:950;letter-spacing:1.2px;font-size:12px;opacity:.95}
.brand .tag{font-size:11px;letter-spacing:.6px;opacity:.70;margin-top:2px}

/* Stage (hit-test lock) */
.stage{
  position:fixed;left:50%;top:52%;
  transform:translate(-50%,-50%);
  width:min(720px,94vw);height:min(720px,94vw);
  z-index:60;
  pointer-events:none; /* stage ignores taps */
}
.outer{
  position:absolute;left:50%;top:50%;
  width:min(680px,92vw);height:min(680px,92vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:60px;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.14), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.45) 0%, rgba(7,11,18,.62) 70%);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 90px 260px rgba(0,0,0,.72), inset 0 2px 0 rgba(255,255,255,.10), inset 0 -50px 90px rgba(0,0,0,.55);
  opacity:.85;
  pointer-events:none;
}
.outer::after{
  content:"";position:absolute;inset:0;border-radius:60px;
  background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 6deg, transparent 6deg 18deg);
  opacity:.16; pointer-events:none;
}
.d{
  width:170px;height:170px;position:absolute;left:50%;top:50%;
  transform-origin:center;border-radius:26px;cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  background:
    radial-gradient(circle at 35% 25%, rgba(255,255,255,.14), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.18), transparent 60%),
    linear-gradient(160deg, rgba(12,22,38,.92) 0%, rgba(7,11,18,.95) 70%);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 28px 84px rgba(0,0,0,.78), inset 0 2px 0 rgba(255,255,255,.14), inset 0 -28px 44px rgba(0,0,0,.62);
  transition:transform 220ms ease, box-shadow 220ms ease, border-color 220ms ease;
  pointer-events:auto; /* diamonds receive taps */
  touch-action:manipulation;
}
.d::before{
  content:"";position:absolute;inset:0;border-radius:26px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.45;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  pointer-events:none;
}
.d::after{
  content:"";position:absolute;left:12%;right:12%;top:10%;height:28%;
  border-radius:999px;background:linear-gradient(to bottom, rgba(255,255,255,.16), rgba(255,255,255,0));
  opacity:.85;transform:rotate(-10deg);pointer-events:none;
}
.d:hover{transform:translate(-50%,-50%) rotate(45deg) scale(1.02)}
.d.active{
  border-color:rgba(212,175,55,.55);
  box-shadow:0 34px 110px rgba(0,0,0,.88),0 0 30px rgba(212,175,55,.40),
    inset 0 2px 0 rgba(255,255,255,.18),inset 0 -32px 52px rgba(0,0,0,.68);
}
.d-n{transform:translate(-50%,-50%) translate(0, calc(var(--R) * -1)) rotate(45deg)}
.d-e{transform:translate(-50%,-50%) translate(var(--R), 0) rotate(45deg)}
.d-s{transform:translate(-50%,-50%) translate(0, var(--R)) rotate(45deg)}
.d-w{transform:translate(-50%,-50%) translate(calc(var(--R) * -1), 0) rotate(45deg)}
.inner{width:100%;height:100%;transform:rotate(-45deg);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:16px;gap:10px;pointer-events:none;user-select:none}
.lab{font-weight:950;letter-spacing:.8px;font-size:16px}
.sub{font-size:12.5px;opacity:.80;line-height:1.35;max-width:18em}
.core{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:74px;height:74px;border-radius:22px;border:1px solid rgba(255,255,255,.10);background:rgba(0,0,0,.18);box-shadow:0 18px 44px rgba(0,0,0,.62), inset 0 2px 0 rgba(255,255,255,.10);display:grid;place-items:center;font-weight:950;letter-spacing:.5px;opacity:.92;pointer-events:none}

/* Dock (tap-safe) */
.dock{
  position:fixed;left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:90;width:min(900px,94vw);
  display:flex;justify-content:center;gap:10px;flex-wrap:wrap;
  padding:10px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.20);backdrop-filter:blur(8px);
  pointer-events:none;
}
.dock .btn{pointer-events:auto}

/* Modal */
.bd{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.65);backdrop-filter:blur(10px);display:none}
.bd.show{display:block}
.modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:min(1020px,94vw);max-height:88vh;display:none;z-index:210}
.modal.show{display:block}
.shell{
  height:88vh;border-radius:26px;border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 50% 18%, rgba(176,0,0,.20), transparent 55%),
    radial-gradient(circle at 40% 25%, rgba(90,140,255,.12), transparent 55%),
    linear-gradient(160deg,var(--obs2) 0%, var(--obs1) 65%);
  box-shadow:0 60px 180px rgba(0,0,0,.92);
  overflow:hidden;display:flex;flex-direction:column;
}
.mhead{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
.mtitle{margin:0;font-weight:950;letter-spacing:.3px;font-size:16px}
.mclose{border:0;background:transparent;color:#fff;font-size:18px;cursor:pointer;padding:8px 10px}
.mbody{padding:14px 16px 18px;overflow:auto;-webkit-overflow-scrolling:touch;flex:1 1 auto}
.lensbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center;padding:10px 10px 14px;border-bottom:1px solid rgba(255,255,255,.08);margin:-6px -6px 14px}
.chip{padding:10px 16px;border-radius:999px;background:linear-gradient(145deg,var(--obs2),var(--obs1));border:1px solid rgba(255,255,255,.08);box-shadow:0 14px 36px rgba(0,0,0,.65);cursor:pointer;font-weight:900;letter-spacing:.2px;color:#fff}
.chip.active{border-color:rgba(212,175,55,.35);box-shadow:0 18px 50px rgba(0,0,0,.9),0 0 16px rgba(212,175,55,.30)}
.mgrid{display:grid;gap:14px}
@media (min-width:920px){.mgrid{grid-template-columns:1fr 1fr}}
.box{
  padding:16px 18px;border-radius:22px;
  background:
    radial-gradient(circle at 30% 30%, rgba(120,160,255,.08), transparent 55%),
    linear-gradient(145deg, rgba(12,22,38,.92), rgba(7,11,18,.95));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 18px 60px rgba(0,0,0,.70), inset 0 2px 0 rgba(255,255,255,.06);
  position:relative;
}
.box::before{
  content:"";position:absolute;inset:0;border-radius:22px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  pointer-events:none;
}
.h{margin:0 0 8px;font-weight:950;letter-spacing:.2px}
.p{margin:0 0 10px;color:var(--mut);line-height:1.55}
.ul{margin:0 0 0 18px;padding:0;color:var(--mut2)}
.ul li{margin:6px 0}
.mact{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:14px}
.sbtn{padding:12px 18px;border-radius:14px;background:linear-gradient(145deg,var(--obs2),var(--obs1));color:#fff;border:1px solid rgba(255,255,255,.08);box-shadow:0 14px 36px rgba(0,0,0,.7);cursor:pointer;font-weight:900;letter-spacing:.2px;text-decoration:none}

@media (max-width:560px){:root{--R:136px}.d{width:158px;height:158px}.stage{top:50%}}
</style>
</head>

<body>

<div id="dbg">ENERGY LIVE · vE-9005</div>

<div class="top-left">
  <a class="btn" id="btnBack" href="/products/">BACK</a>
  <a class="btn" id="btnExit" href="/door/">EXIT</a>
</div>

<div class="brand">
  <div class="name" id="brandName">PRODUCTS</div>
  <div class="tag" id="brandTag">ENERGY CONVERSION</div>
</div>

<div class="stage">
  <div class="outer"></div>

  <div class="d d-n" id="dChain" role="button" tabindex="0" onclick="window.__openEnergy('chain')">
    <div class="inner"><div class="lab" id="labChain">CHAIN</div><div class="sub" id="subChain">Solar → plasma → fusion.</div></div>
  </div>
  <div class="d d-e" id="dPlasma" role="button" tabindex="0" onclick="window.__openEnergy('plasma')">
    <div class="inner"><div class="lab" id="labPlasma">PLASMA</div><div class="sub" id="subPlasma">Formation · stability.</div></div>
  </div>
  <div class="d d-s" id="dFusion" role="button" tabindex="0" onclick="window.__openEnergy('fusion')">
    <div class="inner"><div class="lab" id="labFusion">FUSION</div><div class="sub" id="subFusion">Confinement · criteria.</div></div>
  </div>
  <div class="d d-w" id="dValidation" role="button" tabindex="0" onclick="window.__openEnergy('validation')">
    <div class="inner"><div class="lab" id="labValidation">VALIDATION</div><div class="sub" id="subValidation">Signals · falsifiers.</div></div>
  </div>

  <div class="core">◆</div>
</div>

<nav class="dock" id="dock">
  <a class="btn" id="dockHub" href="/home/">HUB</a>
  <a class="btn" id="dockTerminal" href="/index.html">TERMINAL</a>
  <a class="btn" id="dockLinks" href="/links/">LINKS</a>
  <a class="btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="btn" id="dockGauges" href="/gauges/">GAUGES</a>
</nav>

<div class="bd" id="bd"></div>

<div class="modal" id="modal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="mTitle">DETAIL</h3>
      <button class="mclose" id="mClose" aria-label="Close" type="button">✕</button>
    </div>

    <div class="mbody">
      <div class="lensbar">
        <button class="chip" id="styleChip" type="button">STYLE: FORMAL</button>
        <button class="chip" data-time="origin" id="chipConcept" type="button">CONCEPT</button>
        <button class="chip" data-time="now" id="chipLive" type="button">LIVE</button>
        <button class="chip" data-time="post" id="chipRoadmap" type="button">ROADMAP</button>
      </div>

      <div class="mgrid">
        <div class="box"><h4 class="h" id="h1"></h4><p class="p" id="p1"></p><ul class="ul" id="u1"></ul></div>
        <div class="box"><h4 class="h" id="h2"></h4><p class="p" id="p2"></p><ul class="ul" id="u2"></ul></div>
        <div class="box"><h4 class="h" id="h3"></h4><p class="p" id="p3"></p><ul class="ul" id="u3"></ul></div>
        <div class="box"><h4 class="h" id="h4"></h4><p class="p" id="p4"></p><ul class="ul" id="u4"></ul></div>
      </div>

      <div class="mact">
        <button class="sbtn" id="mReturn" type="button">RETURN</button>
        <a class="sbtn" id="mJumpProducts" href="/products/">JUMP PRODUCTS</a>
        <a class="sbtn" id="mJumpHub" href="/home/">JUMP HUB</a>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const dbg=document.getElementById("dbg");

  // State hydration
  const qs = new URLSearchParams(location.search);
  let lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  let style = qs.get("style") || localStorage.getItem("gd_style") || "formal";
  let time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  if(!["en","zh"].includes(lang)) lang="en";
  if(!["formal","informal"].includes(style)) style="formal";
  if(time==="trajectory") time="post";
  if(!["origin","now","post"].includes(time)) time="now";
  try{ localStorage.setItem("gd_lang",lang); localStorage.setItem("gd_style",style); localStorage.setItem("gd_time",time); }catch(e){}
  document.documentElement.lang = (lang==="zh") ? "zh" : "en";

  const q = () => `lang=${encodeURIComponent(lang)}&style=${encodeURIComponent(style)}&time=${encodeURIComponent(time)}`;
  function setLinks(){
    const s=q();
    document.getElementById("btnBack").href="/products/?"+s;
    document.getElementById("btnExit").href="/door/?"+s;
    document.getElementById("dockHub").href="/home/?"+s;
    document.getElementById("dockTerminal").href="/index.html?"+s;
    document.getElementById("dockLinks").href="/links/?"+s;
    document.getElementById("dockProducts").href="/products/?"+s;
    document.getElementById("dockLaws").href="/laws/?"+s;
    document.getElementById("dockGauges").href="/gauges/?"+s;
    document.getElementById("mJumpProducts").href="/products/?"+s;
    document.getElementById("mJumpHub").href="/home/?"+s;
  }
  setLinks();

  const UI = {
    en:{
      brand:"PRODUCTS", tag:"ENERGY CONVERSION", stylePrefix:"STYLE: ",
      d:{chain:{lab:"CHAIN",sub:"Solar → plasma → fusion."},plasma:{lab:"PLASMA",sub:"Formation · stability."},fusion:{lab:"FUSION",sub:"Confinement · criteria."},validation:{lab:"VALIDATION",sub:"Signals · falsifiers."}},
      lens:{formal:"FORMAL",informal:"INFORMAL",concept:"CONCEPT",live:"LIVE",roadmap:"ROADMAP"},
      btn:{ret:"RETURN",jp:"JUMP PRODUCTS",jh:"JUMP HUB"}
    },
    zh:{
      brand:"产品", tag:"能源转换", stylePrefix:"风格：",
      d:{chain:{lab:"链路",sub:"太阳 → 等离子 → 聚变。"},plasma:{lab:"等离子",sub:"形成 · 稳定。"},fusion:{lab:"聚变",sub:"约束 · 标准。"},validation:{lab:"验证",sub:"信号 · 证伪。"}},
      lens:{formal:"正式",informal:"直接",concept:"概念",live:"上线",roadmap:"路线图"},
      btn:{ret:"返回",jp:"跳转产品",jh:"跳转枢纽"}
    }
  };
  const ui = (lang==="zh") ? UI.zh : UI.en;

  document.getElementById("brandName").textContent = ui.brand;
  document.getElementById("brandTag").textContent = ui.tag;
  document.getElementById("labChain").textContent = ui.d.chain.lab;
  document.getElementById("subChain").textContent = ui.d.chain.sub;
  document.getElementById("labPlasma").textContent = ui.d.plasma.lab;
  document.getElementById("subPlasma").textContent = ui.d.plasma.sub;
  document.getElementById("labFusion").textContent = ui.d.fusion.lab;
  document.getElementById("subFusion").textContent = ui.d.fusion.sub;
  document.getElementById("labValidation").textContent = ui.d.validation.lab;
  document.getElementById("subValidation").textContent = ui.d.validation.sub;

  // Modal refs
  const bd=document.getElementById("bd");
  const modal=document.getElementById("modal");
  const mClose=document.getElementById("mClose");
  const mTitle=document.getElementById("mTitle");
  const styleChip=document.getElementById("styleChip");
  const chipConcept=document.getElementById("chipConcept");
  const chipLive=document.getElementById("chipLive");
  const chipRoadmap=document.getElementById("chipRoadmap");
  const h1=document.getElementById("h1"),p1=document.getElementById("p1"),u1=document.getElementById("u1");
  const h2=document.getElementById("h2"),p2=document.getElementById("p2"),u2=document.getElementById("u2");
  const h3=document.getElementById("h3"),p3=document.getElementById("p3"),u3=document.getElementById("u3");
  const h4=document.getElementById("h4"),p4=document.getElementById("p4"),u4=document.getElementById("u4");
  document.getElementById("mReturn").textContent = ui.btn.ret;
  document.getElementById("mJumpProducts").textContent = ui.btn.jp;
  document.getElementById("mJumpHub").textContent = ui.btn.jh;

  const persist=()=>{ try{ localStorage.setItem("gd_style",style); localStorage.setItem("gd_time",time);}catch(e){} };
  const setLensLabels=()=>{
    styleChip.textContent = ui.stylePrefix + (style==="formal" ? ui.lens.formal : ui.lens.informal);
    chipConcept.textContent = ui.lens.concept;
    chipLive.textContent = ui.lens.live;
    chipRoadmap.textContent = ui.lens.roadmap;
    chipConcept.classList.toggle("active", time==="origin");
    chipLive.classList.toggle("active", time==="now");
    chipRoadmap.classList.toggle("active", time==="post");
  };
  const fill=(hEl,pEl,uEl,b)=>{
    const safeB = b || {h:"—",p:"—",u:["—","—","—","—"]};
    hEl.textContent = safeB.h || "—";
    pEl.textContent = safeB.p || "—";
    uEl.innerHTML = "";
    const arr = (safeB.u && safeB.u.length) ? safeB.u : ["—","—","—","—"];
    for(let i=0;i<4;i++){
      const li=document.createElement("li");
      li.textContent = arr[i] || "—";
      uEl.appendChild(li);
    }
  };

  // =========================
  // FULL CONTENT (embedded here)
  // =========================
  const EN = {
    chain:{
      origin:{
        formal:{title:"CHAIN · Concept (Formal)",
          b1:{h:"Chain model",p:"We model the energy problem as a conversion chain with explicit stage boundaries. Every stage has inputs, transformations, outputs, and measurable signals. Claims are only allowed when they attach to signals and disproof conditions.",u:["Stage boundaries are explicit.","Inputs/outputs are named.","Signals attach to claims.","Disproof is mandatory."]},
          b2:{h:"Disclosure boundary",p:"This is a public-safe surface. We describe structure, constraints, and evaluation rules without sharing recipes, schematics, or hazardous procedures. The goal is legibility and serious interest without unsafe replication.",u:["No recipes or blueprints.","No setpoints or procedures.","No apparatus internals.","Safety boundary enforced."]},
          b3:{h:"Loss accounting",p:"Every conversion chain fails through losses. We treat loss mechanisms as first-class constraints, not footnotes. This prevents ‘miracle jumps’ and keeps the story engineering-grounded.",u:["Losses are named per stage.","Noise vs signal is separated.","Failure modes are listed.","Alternatives are allowed."]},
          b4:{h:"What makes it frontier",p:"The chain becomes a map that can be tested, challenged, and expanded without shifting meaning. Same contract, deeper content. That stability is the platform advantage.",u:["Stable semantics.","Repeatable evaluation.","Upgradeable depth.","No drift under scale."]}
        },
        informal:{title:"CHAIN · Concept (Direct)",
          b1:{h:"What it is",p:"Input → stage → output, with checks.",u:["Stages.","Bounds.","Signals.","Fails."]},
          b2:{h:"What we share",p:"Signals + falsifiers, not recipes.",u:["Signals yes.","Falsifiers yes.","Recipes no.","Blueprints no."]},
          b3:{h:"What keeps it real",p:"Every stage must stand on its own.",u:["Measure.","Repeat.","Name failures.","Don’t mix claims."]},
          b4:{h:"Why it’s special",p:"It’s built to be tested, not believed.",u:["Test-ready.","Bounded.","Clear.","Safe."]}
        }
      },
      now:{
        formal:{title:"CHAIN · Live (Formal)",
          b1:{h:"Live posture",p:"Live view is the operational reading layer. It reflects what is currently written and enforced: stable lens semantics, stable navigation, stable state propagation. It does not promise outcomes.",u:["gd_* persists.","URL hydration works.","Modal-first reading.","Return is deterministic."]},
          b2:{h:"Stage framing",p:"Stages are described by role and boundary: what must be achieved, what can go wrong, what signals matter, and what would disprove progress. This is written to be legible without being a build guide.",u:["Role per stage.","Signals per stage.","Fails per stage.","Disproof conditions."]},
          b3:{h:"Evidence posture",p:"Live writing uses bounded language. It explicitly separates signal, noise, proxies, and artefacts. If a claim cannot be operationally checked, it is labeled conceptual.",u:["Bounded claims only.","Noise controls referenced.","Artefacts acknowledged.","No silent inference."]},
          b4:{h:"Safety posture",p:"We publish evaluation rules and safe summaries while keeping implementation details private. The public surface is designed for collaboration interest, not replication.",u:["Rules public.","Templates public.","Recipes private.","No hazardous how-to."]}
        },
        informal:{title:"CHAIN · Live (Direct)",
          b1:{h:"Now",p:"Stable reference surface.",u:["Consistent.","Safe.","Bounded.","Predictable."]},
          b2:{h:"Included",p:"Roles + signals + fails.",u:["Roles.","Signals.","Fails.","Limits."]},
          b3:{h:"Rule",p:"If it can’t be checked, it stays concept.",u:["Measure first.","Repeat.","Log conditions.","Name falsifiers."]},
          b4:{h:"Boundary",p:"No recipes here.",u:["No steps.","No numbers.","No schematics.","No hazards."]}
        }
      },
      post:{
        formal:{title:"CHAIN · Roadmap (Formal)",
          b1:{h:"Depth expansion",p:"Roadmap adds depth without changing topology. Each stage gains sharper definitions, tighter constraints, and more explicit falsifiers. The map stays stable so readers can compare versions over time.",u:["Sharper definitions.","More constraints.","More falsifiers.","Same map."]},
          b2:{h:"Evidence bundles",p:"We add standardized reporting templates: conditions, signals, noise controls, limits, and disproof logic in one coherent object. That turns ‘progress’ into a reproducible artifact.",u:["Condition log format.","Signal log format.","Noise control list.","Disproof list."]},
          b3:{h:"Adversarial tests",p:"Roadmap includes stress tests that distinguish signal from artefact and prevent narrative inflation. Each stage gets kill conditions that keep the system honest.",u:["Artefact checks.","Cross-checks.","Alternatives.","Kill conditions."]},
          b4:{h:"End-state",p:"A public frontier reference surface that compels by rigor, stays safe, and scales by contract cloning—not by reinventing UX.",u:["Disciplined.","Public-safe.","Audit-friendly.","Upgradeable."]}
        },
        informal:{title:"CHAIN · Roadmap (Direct)",
          b1:{h:"Next",p:"More depth per stage.",u:["More definition.","More signals.","More fails.","Same map."]},
          b2:{h:"Proof format",p:"Templates and logs.",u:["Logs.","Checks.","Repeat.","Audit."]},
          b3:{h:"Stress tests",p:"Signal vs artefact.",u:["Cross-checks.","Alternatives.","Kill conditions.","No hype."]},
          b4:{h:"Result",p:"Rigor scales.",u:["Disciplined.","Clear.","Safe.","Upgradeable."]}
        }
      }
    },

    plasma:{
      origin:{
        formal:{title:"PLASMA · Concept (Formal)",
          b1:{h:"Bridge state",p:"Plasma is the bridge state where energy density, stability, and loss control dominate. The engineering question becomes bounded behavior under disturbance, not just ‘make plasma’.",u:["Bridge state defined.","Instabilities acknowledged.","Loss channels acknowledged.","Diagnostics required."]},
          b2:{h:"Stability definition",p:"Stability is defined as bounded response and repeatability under stated conditions. Stability claims must name failure modes and measurable markers.",u:["Bounded response.","Repeatability.","Failure markers.","Loss accounting."]},
          b3:{h:"Signal taxonomy",p:"Signals are grouped by meaning so interpretation stays coherent: stability markers, loss markers, proxies, and noise controls.",u:["Stability signals.","Loss signals.","Proxy signals.","Noise/artefact controls."]},
          b4:{h:"Public-safe boundary",p:"We publish categories and evaluation logic, not actuation recipes or apparatus internals. The aim is serious interest without unsafe replication.",u:["Categories public.","Rules public.","Recipes private.","Safety preserved."]}
        },
        informal:{title:"PLASMA · Concept (Direct)",
          b1:{h:"What it is",p:"Plasma you can stabilize.",u:["Stability.","Loss.","Modes.","Measure."]},
          b2:{h:"Stable means",p:"Bounded + repeatable.",u:["Bounded.","Repeatable.","Measured.","No runaway."]},
          b3:{h:"Signals",p:"Signals + falsifiers.",u:["Signals.","Fails.","Limits.","Noise controls."]},
          b4:{h:"Boundary",p:"No recipes.",u:["No steps.","No numbers.","No schematics.","No hazards."]}
        }
      },
      now:{
        formal:{title:"PLASMA · Live (Formal)",
          b1:{h:"Live deliverable",p:"Live content is a stability primer: mode language, loss language, and diagnostic minimums so readers can talk precisely about behavior.",u:["Mode catalog.","Loss catalog.","Signal groups.","Bounded posture."]},
          b2:{h:"Measurement discipline",p:"Baselines and repeatability are mandatory for separating signal from noise. Live text explicitly acknowledges artefact risks.",u:["Baselines required.","Repeat checks.","Artefact checks.","Bounded interpretation."]},
          b3:{h:"Failure-first honesty",p:"Failure modes are listed as first-class constraints: instability growth, loss dominance, non-repeatability, proxy mismatch.",u:["Instability growth.","Loss dominance.","Non-repeatability.","Proxy mismatch."]},
          b4:{h:"Safety boundary",p:"No procedural build steps or hazardous guidance are published. This stays at the measurement-and-language layer.",u:["No steps.","No setpoints.","No schematics.","No hazards."]}
        },
        informal:{title:"PLASMA · Live (Direct)",
          b1:{h:"Now",p:"Stability primer.",u:["Modes.","Losses.","Signals.","Bounds."]},
          b2:{h:"Rule",p:"Baseline + repeat.",u:["Baseline.","Repeat.","Noise.","Checks."]},
          b3:{h:"Failures",p:"Named clearly.",u:["Instability.","Loss.","Artefacts.","Not repeatable."]},
          b4:{h:"Safety",p:"No recipes.",u:["No steps.","No numbers.","No schematics.","No hazards."]}
        }
      },
      post:{
        formal:{title:"PLASMA · Roadmap (Formal)",
          b1:{h:"Stability ladder",p:"Roadmap publishes stable/drift/fail markers designed to be observer-invariant so interpretation doesn’t drift as the project grows.",u:["Stable marker.","Drift marker.","Fail marker.","Noise marker."]},
          b2:{h:"Loss accounting",p:"Loss categories map to signal signatures so comparisons remain honest across time and across prototypes.",u:["Loss types.","Signatures.","Bounds.","Audit posture."]},
          b3:{h:"Replication-safe reports",p:"Evidence templates expand without revealing apparatus internals. Reports emphasize conditions, signals, falsifiers, and limits.",u:["Templates.","Condition logs.","Repeat checks.","Public-safe."]},
          b4:{h:"Outcome",p:"A plasma surface that invites serious readers by rigor while maintaining safety boundaries.",u:["Serious.","Bounded.","Safe.","Upgradeable."]}
        },
        informal:{title:"PLASMA · Roadmap (Direct)",
          b1:{h:"Markers",p:"Stable / drift / fail.",u:["Stable.","Drift.","Fail.","Noise."]},
          b2:{h:"Loss map",p:"Loss signatures.",u:["Types.","Signals.","Bounds.","Checks."]},
          b3:{h:"Templates",p:"Better reports.",u:["Logs.","Formats.","Repeat.","Audit."]},
          b4:{h:"Result",p:"Serious + safe.",u:["Disciplined.","Clear.","Safe.","Upgradeable."]}
        }
      }
    },

    fusion:{
      origin:{
        formal:{title:"FUSION · Concept (Formal)",
          b1:{h:"Fusion as criteria",p:"Fusion is framed as criteria under constraint: confinement, energy density, time, and controlled loss. The key is criteria clarity, not slogans.",u:["Criteria explicit.","Loss explicit.","Time explicit.","Measured."]},
          b2:{h:"Confinement framing",p:"Confinement is defined by what it must accomplish (hold conditions, suppress loss, resist instabilities) rather than a device promise.",u:["Hold conditions.","Suppress loss.","Resist modes.","Be measurable."]},
          b3:{h:"Test boundaries",p:"We publish progress markers and failure markers without recipes. This keeps the public layer safe and test-ready.",u:["Progress markers.","Failure markers.","Falsifiers.","Limits."]},
          b4:{h:"Public-safe posture",p:"This is a criteria/evidence map, not a build guide. Implementation details stay private.",u:["No recipes.","No schematics.","No setpoints.","No hazards."]}
        },
        informal:{title:"FUSION · Concept (Direct)",
          b1:{h:"Checklist",p:"Criteria, signals, fails, limits.",u:["Criteria.","Signals.","Fails.","Bounds."]},
          b2:{h:"Confinement",p:"Hold long enough.",u:["Hold.","Stabilize.","Measure.","Repeat."]},
          b3:{h:"Judge by",p:"Falsifiers.",u:["Falsifiers.","Limits.","Alternatives.","No hype."]},
          b4:{h:"Boundary",p:"No recipes.",u:["No steps.","No numbers.","No schematics.","No hazards."]}
        }
      },
      now:{
        formal:{title:"FUSION · Live (Formal)",
          b1:{h:"Live surface",p:"Live view presents definitions, constraints, signals, and failure language without mystique. Roadmap remains separated to prevent overclaiming.",u:["Definitions.","Constraints.","Signals.","Fails."]},
          b2:{h:"No mixed claims",p:"Live describes what is currently framed and measurable, not what is promised. Future depth stays in Roadmap.",u:["Live ≠ Roadmap.","Bounded language.","No narrative leaps.","Stable semantics."]},
          b3:{h:"Validation posture",p:"We emphasize what-to-measure lists and disproof conditions so readers can evaluate seriousness.",u:["Signals listed.","Noise controls.","Disproof conditions.","Alternatives."]},
          b4:{h:"Safety boundary",p:"No apparatus specifics or hazardous procedures are published. Public framing stays measurement-level.",u:["No steps.","No recipes.","No specs.","No hazards."]}
        },
        informal:{title:"FUSION · Live (Direct)",
          b1:{h:"Now",p:"Criteria + signals.",u:["Criteria.","Signals.","Fails.","Bounds."]},
          b2:{h:"Separated",p:"Live ≠ Roadmap.",u:["Separated.","Honest.","Stable.","Clear."]},
          b3:{h:"Rule",p:"Measure first.",u:["Signals.","Noise.","Repeat.","Bounds."]},
          b4:{h:"Safety",p:"No recipes.",u:["No steps.","No numbers.","No schematics.","No hazards."]}
        }
      },
      post:{
        formal:{title:"FUSION · Roadmap (Formal)",
          b1:{h:"Criteria tightening",p:"Roadmap sharpens the boundary between ‘interesting plasma’ and ‘fusion-relevant plasma’ with bounded thresholds and explicit failure conditions.",u:["Stronger definitions.","Boundary clarity.","Bounded thresholds.","Failure conditions."]},
          b2:{h:"Stepwise proof",p:"Milestones are falsifiable steps, not timelines. Each step includes disproof logic and kill conditions.",u:["Steps.","Falsifiers.","Kill conditions.","Alternatives."]},
          b3:{h:"Adversarial tests",p:"Stress tests separate signal from artefact and prevent narrative inflation. Evidence stays public-safe.",u:["Artefact checks.","Cross-checks.","Alternatives.","Disproof focus."]},
          b4:{h:"Outcome",p:"A compelling frontier surface that scales by discipline without leaking recipes.",u:["Disciplined.","Public-safe.","Test-ready.","Upgradeable."]}
        },
        informal:{title:"FUSION · Roadmap (Direct)",
          b1:{h:"Tighter",p:"Sharper criteria.",u:["Definitions.","Signals.","Fails.","Bounds."]},
          b2:{h:"Steps",p:"Steps, not promises.",u:["Steps.","Falsifiers.","Kill conditions.","Alternatives."]},
          b3:{h:"Stress tests",p:"Signal vs artefact.",u:["Checks.","Cross-checks.","Noise.","Fails."]},
          b4:{h:"Result",p:"Rigor scales.",u:["Disciplined.","Clear.","Safe.","Upgradeable."]}
        }
      }
    },

    validation:{
      origin:{
        formal:{title:"VALIDATION · Concept (Formal)",
          b1:{h:"Validation principle",p:"Validation is measurement + falsification. Claims that cannot be tested remain conceptual. This preserves falsifiability across the entire chain.",u:["Define claim.","Define measure.","Define falsifier.","Define limit."]},
          b2:{h:"Evidence format",p:"Evidence includes conditions, time anchors, signal definitions, and bounded interpretation so results compare across observers.",u:["Conditions logged.","Time anchored.","Signals defined.","Interpretation bounded."]},
          b3:{h:"Failure-first honesty",p:"Failure modes are explicit to prevent narrative inflation and reduce ambiguity gaming.",u:["Instability growth.","Loss dominance.","Artefacts.","Non-repeatability."]},
          b4:{h:"Public-safe boundary",p:"Rules and templates can be public; build recipes cannot. Safety is enforced structurally in the writing.",u:["Rules public.","Templates public.","Recipes private.","Safety preserved."]}
        },
        informal:{title:"VALIDATION · Concept (Direct)",
          b1:{h:"Rules",p:"Measure and falsify.",u:["Measure.","Test.","Falsify.","Repeat."]},
          b2:{h:"Evidence",p:"Conditions + signals + bounds.",u:["Conditions.","Signals.","Bounds.","Fails."]},
          b3:{h:"Failures",p:"Name failures.",u:["Instability.","Loss.","Artefacts.","Not repeatable."]},
          b4:{h:"Result",p:"Proof becomes checkable.",u:["Checkable.","Bounded.","Clear.","Honest."]}
        }
      },
      now:{
        formal:{title:"VALIDATION · Live (Formal)",
          b1:{h:"Live scaffold",p:"Claims, evidence conditions, disproof conditions, and limits are explicit. This creates a defensible layer for serious readers.",u:["Claims bounded.","Evidence defined.","Disproof defined.","Limits stated."]},
          b2:{h:"Reader evaluation",p:"Readers evaluate coherence by checking signal alignment, falsifier meaning, and repeatability under stated conditions.",u:["Signal alignment.","Bound checks.","Falsifier meaning.","Repeatability."]},
          b3:{h:"Adversarial posture",p:"Alternative explanations are allowed and paired with what would disprove them. This prevents ‘hand-waving’ progress claims.",u:["Alternatives allowed.","Disproof conditions.","Noise controls.","Kill conditions."]},
          b4:{h:"Outcome",p:"Trust is earned through stable definitions and stable validation logic over time.",u:["Stable terms.","Stable tests.","Stable bounds.","Traceable change."]}
        },
        informal:{title:"VALIDATION · Live (Direct)",
          b1:{h:"Now",p:"Proof scaffold.",u:["Claims.","Evidence.","Disproof.","Limits."]},
          b2:{h:"Judge",p:"Signals + falsifiers.",u:["Signals.","Bounds.","Fails.","Checks."]},
          b3:{h:"Allow alternatives",p:"Then test them.",u:["Alternatives.","Controls.","Repeat.","Disproof."]},
          b4:{h:"Result",p:"Checkable trust.",u:["Checkable.","Bounded.","Clear.","Honest."]}
        }
      },
      post:{
        formal:{title:"VALIDATION · Roadmap (Formal)",
          b1:{h:"Evidence bundles",p:"Templates define what a ‘good report’ contains and how it compares across time.",u:["Templates.","Condition logs.","Noise controls.","Repeat checks."]},
          b2:{h:"Stress tests",p:"Methods separate signal from artefact without exposing internals. This keeps the public layer safe.",u:["Artefact checks.","Cross-checks.","Alternative hypotheses.","Falsifiers."]},
          b3:{h:"Registry posture",p:"Lookupable validation status with reason codes and history supports auditability.",u:["Status.","Reasons.","History.","Rules."]},
          b4:{h:"Outcome",p:"A durable verification spine that scales with the project.",u:["Durable.","Public-safe.","Audit-friendly.","Upgradeable."]}
        },
        informal:{title:"VALIDATION · Roadmap (Direct)",
          b1:{h:"Templates",p:"Proof templates.",u:["Templates.","Logs.","Repeat.","Audit."]},
          b2:{h:"Stress",p:"Signal vs artefact.",u:["Checks.","Cross-checks.","Noise.","Fails."]},
          b3:{h:"Registry",p:"Status lookup.",u:["Status.","Reasons.","History.","Rules."]},
          b4:{h:"Result",p:"Verification spine.",u:["Durable.","Clear.","Safe.","Upgradeable."]}
        }
      }
    }
  };

  const ZH = {
    chain: EN.chain,
    plasma: EN.plasma,
    fusion: EN.fusion,
    validation: EN.validation
  };

  const CONTENT = (lang==="zh") ? ZH : EN;

  let activeKey=null;

  function render(){
    persist(); setLinks(); setLensLabels();
    if(!activeKey) return;
    const view = ((((CONTENT[activeKey]||{})[time]||{})[style]) || FALLBACK);
    mTitle.textContent = view.title || FALLBACK.title;
    fill(h1,p1,u1,view.b1);
    fill(h2,p2,u2,view.b2);
    fill(h3,p3,u3,view.b3);
    fill(h4,p4,u4,view.b4);
  }

  function open(key){
    activeKey=key;
    bd.classList.add("show");
    modal.classList.add("show");
    render();
  }
  function close(){
    bd.classList.remove("show");
    modal.classList.remove("show");
    activeKey=null;
  }

  window.__openEnergy=function(key){
    dbg.textContent="ENERGY LIVE · vE-9005 · TAP: "+key.toUpperCase();
    open(key);
  };

  styleChip.addEventListener("click", ()=>{ style=(style==="formal")?"informal":"formal"; render(); });
  chipConcept.addEventListener("click", ()=>{ time="origin"; render(); });
  chipLive.addEventListener("click", ()=>{ time="now"; render(); });
  chipRoadmap.addEventListener("click", ()=>{ time="post"; render(); });

  bd.addEventListener("click", close);
  mClose.addEventListener("click", close);
  document.getElementById("mReturn").addEventListener("click", close);

  [["dChain","chain"],["dPlasma","plasma"],["dFusion","fusion"],["dValidation","validation"]].forEach(pair=>{
    document.getElementById(pair[0]).addEventListener("keydown",(e)=>{
      if(e.key==="Enter"||e.key===" "){ e.preventDefault(); window.__openEnergy(pair[1]); }
    });
  });

  setLensLabels();
})();
</script>

</body>
</html>
