<!-- TNT — /products/software/index.html
     PRODUCTS · SOFTWARE (ENERGY-MODEL CLONE · 72 NARRATIVES)
     STRUCTURE (IDENTICAL TO ENERGY):
       LEVEL 1 (Page): 4 glossy diamonds = ENGINE / PLATFORM / INSTRUMENTS / GOVERNANCE
       LEVEL 2 (Quadrant Modal): 4 glossy diamonds = 3 domains + RETURN
       LEVEL 3 (Domain Modal): 3 tap-to-open bubbles = CONCEPT / LIVE / ROADMAP
         Each bubble contains 2-tone toggle = FORMAL / INFORMAL
     COUNT:
       12 domains × 3 time bubbles × 2 tones = 72 narratives
     LANGUAGE:
       - lang=en => EN only
       - lang=zh => 中文 only
       - lang=es => ES only
     STATE (NO NEW KEYS):
       - gd_lang / gd_style / gd_time only (reads style/time, but page uses its own tone toggle)
       - URL: lang/style/time/depth (carried forward)
     LOCKS:
       - Uses /assets/ui.css + /assets/branch.css + /assets/instruments.js
       - Does NOT style html/body background (ui.css owns field)
       - Tap-safe (no pointer blockers)
       - No inline onclick
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · SOFTWARE</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
:root{
  --R:150px;
  --D:184px;
  --goldSoft:rgba(212,175,55,.45);
  --mut:rgba(255,255,255,.90);
  --mut2:rgba(255,255,255,.74);
}
body{margin:0;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
a{text-decoration:none;color:inherit}
body::before,body::after{pointer-events:none!important}

/* Top */
.top-left{position:fixed;left:16px;top:16px;z-index:140;display:flex;gap:10px;flex-wrap:wrap}
.brand{
  position:fixed;left:50%;top:16px;transform:translateX(-50%);
  z-index:130;text-align:center;padding:10px 18px;border-radius:999px;
  border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.18);pointer-events:none
}
.brand .t{font-weight:950;font-size:40px;letter-spacing:.25px;line-height:1.05;margin:0}
.brand .s{opacity:.86;font-size:14px;margin:6px 0 0;line-height:1.25}

/* Stage */
.stage{position:fixed;left:50%;top:56%;transform:translate(-50%,-50%);width:min(720px,94vw);height:min(720px,94vw);z-index:60}
.outer{
  position:absolute;left:50%;top:50%;
  width:min(680px,92vw);height:min(680px,92vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:60px;opacity:.62;pointer-events:none;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.14), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.42) 0%, rgba(7,11,18,.58) 70%);
  box-shadow:
    0 90px 260px rgba(0,0,0,.55),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -50px 90px rgba(0,0,0,.55)
}
.outer::after{
  content:"";position:absolute;inset:0;border-radius:60px;opacity:.12;pointer-events:none;
  background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 6deg, transparent 6deg 18deg)
}

/* Pearlescent glossy diamond (LOCK) */
.d{
  width:var(--D);height:var(--D);
  position:absolute;left:50%;top:50%;
  transform-origin:center;border-radius:28px;
  cursor:pointer;pointer-events:auto;touch-action:manipulation;
  -webkit-tap-highlight-color:transparent;
  background:
    radial-gradient(circle at 30% 22%, rgba(255,255,255,.55), transparent 45%),
    radial-gradient(circle at 70% 78%, rgba(0,120,255,.30), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.96), rgba(7,11,18,.98));
  border:1px solid rgba(255,255,255,.16);
  box-shadow:
    0 38px 120px rgba(0,0,0,.85),
    0 0 32px rgba(212,175,55,.28),
    inset 0 2px 0 rgba(255,255,255,.25),
    inset 0 -42px 78px rgba(0,0,0,.80);
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.d::before{
  content:"";position:absolute;inset:0;border-radius:28px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.65;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  pointer-events:none
}
.d::after{
  content:"";position:absolute;left:10%;right:10%;top:10%;
  height:28%;border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.25), rgba(255,255,255,0));
  transform:rotate(-10deg);pointer-events:none
}
.d:hover{
  transform:translate(-50%,-50%) rotate(45deg) scale(1.02);
  border-color:rgba(212,175,55,.35);
  box-shadow:
    0 44px 140px rgba(0,0,0,.92),
    0 0 44px rgba(212,175,55,.32),
    inset 0 2px 0 rgba(255,255,255,.28),
    inset 0 -46px 86px rgba(0,0,0,.84)
}
.d-n{transform:translate(-50%,-50%) translate(0, calc(var(--R)*-1)) rotate(45deg)}
.d-e{transform:translate(-50%,-50%) translate(var(--R),0) rotate(45deg)}
.d-s{transform:translate(-50%,-50%) translate(0,var(--R)) rotate(45deg)}
.d-w{transform:translate(-50%,-50%) translate(calc(var(--R)*-1),0) rotate(45deg)}
.inner{
  transform:rotate(-45deg) translateY(-3px);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  text-align:center;height:100%;padding:14px;gap:8px;
  pointer-events:none;user-select:none
}
.lab{font-weight:950;font-size:18px;letter-spacing:.6px;text-shadow:0 0 16px rgba(255,255,255,.14)}
.sub{font-size:13px;opacity:.88;line-height:1.25;max-width:18em}

/* Core */
.core{
  position:absolute;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:60px;height:60px;border-radius:18px;
  background:rgba(0,0,0,.20);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 18px 44px rgba(0,0,0,.55), inset 0 2px 0 rgba(255,255,255,.10);
  display:grid;place-items:center;
  pointer-events:none
}

/* Dock */
.dock{
  position:fixed;left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:120;width:min(980px,94vw);
  display:flex;justify-content:center;gap:10px;flex-wrap:wrap;
  padding:10px 12px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.18);
  pointer-events:none
}
.dock .btn{pointer-events:auto}

/* Modals */
.bd{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.72);backdrop-filter:blur(10px);display:none}
.bd.show{display:block}
.modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:min(1180px,96vw);height:90vh;display:none;z-index:210}
.modal.show{display:block}
.shell{
  height:90vh;border-radius:22px;border:1px solid rgba(255,255,255,.14);
  background:linear-gradient(160deg, rgba(10,18,30,.96), rgba(6,10,16,.98));
  overflow:hidden;display:flex;flex-direction:column
}
.mhead{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
.mtitle{margin:0;font-weight:950;letter-spacing:.3px;font-size:16px}
.mclose{border:0;background:transparent;color:#fff;font-size:18px;cursor:pointer;padding:8px 10px}
.mbody{padding:16px;overflow:auto;-webkit-overflow-scrolling:touch;flex:1 1 auto}

/* Domain grid inside quadrant modal */
.qgrid{display:grid;gap:14px;grid-template-columns:1fr}
@media (min-width:760px){.qgrid{grid-template-columns:1fr 1fr}}
.smallDiamond{
  width:100%;height:140px;position:relative;border-radius:22px;
  cursor:pointer;pointer-events:auto;touch-action:manipulation;
  background:
    radial-gradient(circle at 30% 22%, rgba(255,255,255,.50), transparent 52%),
    radial-gradient(circle at 70% 78%, rgba(0,120,255,.26), transparent 62%),
    linear-gradient(160deg, rgba(14,24,40,.96), rgba(7,11,18,.98));
  border:1px solid rgba(255,255,255,.16);
  box-shadow:0 22px 70px rgba(0,0,0,.70), inset 0 2px 0 rgba(255,255,255,.22), inset 0 -34px 60px rgba(0,0,0,.70)
}
.smallDiamond::before{
  content:"";position:absolute;inset:0;border-radius:22px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  pointer-events:none
}
.sdInner{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:14px;pointer-events:none}
.sdT{font-weight:950;letter-spacing:.25px}
.sdS{font-size:12.5px;opacity:.82;margin-top:6px}

/* Domain narrative modal */
.lensbar{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:0 0 14px}
.pill{
  padding:10px 14px;border-radius:999px;
  background:linear-gradient(145deg, rgba(17,22,28,.92), rgba(11,15,20,.96));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 14px 36px rgba(0,0,0,.65);
  cursor:pointer;font-weight:900;letter-spacing:.2px;color:#fff;
  user-select:none;-webkit-tap-highlight-color:transparent
}
.pill.active{border-color:rgba(212,175,55,.60);box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px rgba(212,175,55,.22)}
.bubble{
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;background:rgba(255,255,255,.05);
  padding:14px 14px 12px;margin:0 0 12px;
  cursor:pointer;-webkit-tap-highlight-color:transparent
}
.bubble h4{margin:0 0 8px;font-weight:950;letter-spacing:.15px}
.bubble p{margin:0;color:var(--mut2);line-height:1.65;display:none}
.bubble.open p{display:block}
.hint{
  max-width:980px;margin:0 auto 12px;
  padding:10px 12px;border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);
  color:rgba(255,255,255,.80);
  font-size:12.5px;line-height:1.45
}

@media (max-width:560px){
  :root{--R:136px}
  .d{width:158px;height:158px}
  .stage{top:54%}
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" id="btnBack" href="/products/">BACK</a>
  <a class="btn" id="btnExit" href="/index.html">EXIT</a>
</div>

<div class="brand" aria-hidden="true">
  <div class="t" id="hdrT">Software</div>
  <div class="s" id="hdrS">72 Narratives · 4→12→36→72</div>
</div>

<div class="stage" aria-label="Software quadrants">
  <div class="outer"></div>

  <div class="d d-n" id="qEngine" role="button" tabindex="0" aria-label="Engine">
    <div class="inner"><div class="lab" id="labEngine">ENGINE</div><div class="sub" id="subEngine">Runtime · state · determinism</div></div>
  </div>

  <div class="d d-e" id="qPlatform" role="button" tabindex="0" aria-label="Platform">
    <div class="inner"><div class="lab" id="labPlatform">PLATFORM</div><div class="sub" id="subPlatform">Surfaces · routing · adoption</div></div>
  </div>

  <div class="d d-s" id="qInstruments" role="button" tabindex="0" aria-label="Instruments">
    <div class="inner"><div class="lab" id="labInstruments">INSTRUMENTS</div><div class="sub" id="subInstruments">Gauges · scoring · exports</div></div>
  </div>

  <div class="d d-w" id="qGovernance" role="button" tabindex="0" aria-label="Governance">
    <div class="inner"><div class="lab" id="labGovernance">GOVERNANCE</div><div class="sub" id="subGovernance">Rules · gates · integrity</div></div>
  </div>

  <div class="core">◆</div>
</div>

<nav class="dock" aria-label="Bottom navigation">
  <a class="btn" id="dockTerminal" href="/index.html">TERMINAL</a>
  <a class="btn" id="dockHub" href="/home/">HUB</a>
  <a class="btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="btn" id="dockLinks" href="/links/">LINKS</a>
</nav>

<div class="bd" id="bd"></div>

<!-- Quadrant Modal -->
<div class="modal" id="quadModal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="quadTitle">Quadrant</h3>
      <button class="mclose" id="quadClose" aria-label="Close" type="button">✕</button>
    </div>
    <div class="mbody">
      <div class="hint" id="quadHint">Tap a domain diamond to enter its narrative. Return closes this layer.</div>
      <div class="qgrid" id="quadGrid"></div>
    </div>
  </div>
</div>

<!-- Domain Modal -->
<div class="modal" id="domainModal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="domainTitle">Domain</h3>
      <button class="mclose" id="domainClose" aria-label="Close" type="button">✕</button>
    </div>

    <div class="mbody" id="domainBody">
      <div class="lensbar">
        <div class="pill active" id="toneFormal">FORMAL</div>
        <div class="pill" id="toneInformal">INFORMAL</div>
      </div>

      <div class="hint" id="claimHint">This page describes software posture only. Proof lives under Laws; measurement lives under Gauges.</div>

      <div class="bubble" id="bConcept"><h4 id="hConcept">Concept</h4><p id="pConcept"></p></div>
      <div class="bubble" id="bLive"><h4 id="hLive">Live</h4><p id="pLive"></p></div>
      <div class="bubble" id="bRoadmap"><h4 id="hRoadmap">Roadmap</h4><p id="pRoadmap"></p></div>
    </div>
  </div>
</div>

<script>
(function(){
  // state hydration
  var qs=new URLSearchParams(location.search);
  var lang=qs.get("lang")||localStorage.getItem("gd_lang")||"en";
  var style=qs.get("style")||localStorage.getItem("gd_style")||"formal";
  var time=qs.get("time")||localStorage.getItem("gd_time")||"now";
  var depth=qs.get("depth")||localStorage.getItem("gd_depth")||"explore";
  if(time==="trajectory") time="post";
  if(lang!=="en"&&lang!=="zh"&&lang!=="es") lang="en";
  if(style!=="formal"&&style!=="informal") style="formal";
  if(time!=="origin"&&time!=="now"&&time!=="post") time="now";
  if(depth!=="explore"&&depth!=="learn") depth="explore";
  try{
    localStorage.setItem("gd_lang",lang);
    localStorage.setItem("gd_style",style);
    localStorage.setItem("gd_time",time);
    localStorage.setItem("gd_depth",depth);
  }catch(e){}
  document.documentElement.lang=(lang==="zh")?"zh":(lang==="es")?"es":"en";

  function q(){
    var p=new URLSearchParams();
    p.set("lang",lang); p.set("style",style); p.set("time",time); p.set("depth",depth);
    return "?"+p.toString();
  }

  // nav links
  document.getElementById("btnBack").href="/products/"+q();
  document.getElementById("btnExit").href="/index.html"+q();
  document.getElementById("dockTerminal").href="/index.html"+q();
  document.getElementById("dockHub").href="/home/"+q();
  document.getElementById("dockProducts").href="/products/"+q();
  document.getElementById("dockLaws").href="/laws/"+q();
  document.getElementById("dockLinks").href="/links/"+q();

  // i18n (single language)
  var UI={
    en:{
      hdrT:"Software",
      hdrS:"72 Narratives · 4→12→36→72",
      q:{
        engine:{lab:"ENGINE", sub:"Runtime · state · determinism"},
        platform:{lab:"PLATFORM", sub:"Surfaces · routing · adoption"},
        instruments:{lab:"INSTRUMENTS", sub:"Gauges · scoring · exports"},
        governance:{lab:"GOVERNANCE", sub:"Rules · gates · integrity"}
      },
      quadHint:"Tap a domain diamond to enter its narrative. Return closes this layer.",
      claim:"This page describes software posture only. Proof lives under Laws; measurement lives under Gauges.",
      concept:"Concept", live:"Live", roadmap:"Roadmap",
      formal:"FORMAL", informal:"INFORMAL",
      ret:"RETURN", domSub:"Concept · Live · Roadmap"
    },
    zh:{
      hdrT:"软件",
      hdrS:"72段叙事 · 4→12→36→72",
      q:{
        engine:{lab:"引擎", sub:"运行时 · 状态 · 确定性"},
        platform:{lab:"平台", sub:"界面 · 路由 · 采纳"},
        instruments:{lab:"量具", sub:"仪表 · 评分 · 导出"},
        governance:{lab:"治理", sub:"规则 · 闸门 · 纪律"}
      },
      quadHint:"点选一个域进入叙事。RETURN 将关闭本层。",
      claim:"本页只描述软件姿态。证明在法则；测量在量规。",
      concept:"概念", live:"上线", roadmap:"路线图",
      formal:"正式", informal:"通俗",
      ret:"RETURN", domSub:"概念 · 上线 · 路线图"
    },
    es:{
      hdrT:"Software",
      hdrS:"72 Narrativas · 4→12→36→72",
      q:{
        engine:{lab:"MOTOR", sub:"Runtime · estado · determinismo"},
        platform:{lab:"PLATAFORMA", sub:"Superficies · rutas · adopción"},
        instruments:{lab:"INSTRUMENTOS", sub:"Medidores · puntuación · exportación"},
        governance:{lab:"GOBIERNO", sub:"Reglas · compuertas · integridad"}
      },
      quadHint:"Toca un dominio para ver su narrativa. RETURN cierra esta capa.",
      claim:"Esta página describe postura de software. La prueba vive en Leyes; la medición en Medidores.",
      concept:"Concepto", live:"En vivo", roadmap:"Hoja de ruta",
      formal:"FORMAL", informal:"INFORMAL",
      ret:"RETURN", domSub:"Concepto · En vivo · Hoja de ruta"
    }
  };
  var T=(lang==="zh")?UI.zh:(lang==="es")?UI.es:UI.en;

  document.getElementById("hdrT").textContent=T.hdrT;
  document.getElementById("hdrS").textContent=T.hdrS;

  document.getElementById("labEngine").textContent=T.q.engine.lab;
  document.getElementById("subEngine").textContent=T.q.engine.sub;
  document.getElementById("labPlatform").textContent=T.q.platform.lab;
  document.getElementById("subPlatform").textContent=T.q.platform.sub;
  document.getElementById("labInstruments").textContent=T.q.instruments.lab;
  document.getElementById("subInstruments").textContent=T.q.instruments.sub;
  document.getElementById("labGovernance").textContent=T.q.governance.lab;
  document.getElementById("subGovernance").textContent=T.q.governance.sub;

  document.getElementById("quadHint").textContent=T.quadHint;
  document.getElementById("claimHint").textContent=T.claim;
  document.getElementById("hConcept").textContent=T.concept;
  document.getElementById("hLive").textContent=T.live;
  document.getElementById("hRoadmap").textContent=T.roadmap;
  document.getElementById("toneFormal").textContent=T.formal;
  document.getElementById("toneInformal").textContent=T.informal;

  // Quadrant -> domains mapping (4 quadrants × 3 domains = 12)
  var QUADS = {
    "ENGINE": ["State Runtime","Deterministic Gates","Receipt Progression"],
    "PLATFORM": ["Navigation Surfaces","Product Packaging","Enterprise Deployment"],
    "INSTRUMENTS": ["Dot.Grid Sweeps","Scoring Outputs","Registry Lookups"],
    "GOVERNANCE": ["Admissibility Doctrine","Audit Discipline","Change Control"]
  };

  // 72 narratives (unique per domain / time / tone)
  var N = {
    "State Runtime":{
      concept:{
        formal:"The runtime is a constrained state machine: declared keys define the coordinate, and transitions are atomic. State is not a vibe; it is an admissible snapshot produced under the same rules for every observer. The purpose is repeatable execution without semantic drift.",
        informal:"The runtime is the part that keeps things from turning into chaos. It’s a simple rule: you’re always in a state, and every move changes state cleanly. No magic. No guessing."
      },
      live:{
        formal:"Live operation emphasizes stability and recoverability: state must survive refresh, navigation, and device variance. A valid move produces the same next state regardless of user path. When drift appears, rollback is deterministic.",
        informal:"Live means it doesn’t break when you tap around. If you leave and come back, the system remembers the right thing. If something goes weird, it resets cleanly."
      },
      roadmap:{
        formal:"Roadmap extends the runtime into domain adapters and exported receipts: every transition can emit a small proof bundle (inputs, decision, result). The contract remains invariant while coverage expands.",
        informal:"Next, the runtime learns new domains without changing the rules. More surfaces, same discipline. And you can export what happened so people can verify it."
      }
    },
    "Deterministic Gates":{
      concept:{
        formal:"Gates are binary admissibility checks applied under declared scope. They prevent escalation without receipts and suppress narrative inflation. A gate is not persuasion; it is a rule that yields pass or fail given inputs.",
        informal:"Gates are the ‘yes/no’ switches that keep the system honest. If the proof isn’t there, you don’t get to level up. Simple."
      },
      live:{
        formal:"In live mode, gates are enforced under load: no timers-as-gates, no hidden shortcuts, no silent overrides. Failures are contained and logged; success advances with a receipt.",
        informal:"Live gating means no sneaky passes. You either meet the requirement or you don’t. If you fail, it tells you and stops the drift."
      },
      roadmap:{
        formal:"Roadmap adds standardized reason codes and replay: any gate decision can be reproduced by independent observers from the same receipt set. This upgrades trust while keeping the logic minimal.",
        informal:"Next, gate decisions come with ‘why’ in a clean, checkable way. Same inputs, same result—anyone can rerun it."
      }
    },
    "Receipt Progression":{
      concept:{
        formal:"Progression is receipt-gated: advancement requires evidence that survives scope locks. This eliminates time-based advancement and replaces it with measurable completion. Progress becomes audit-friendly by default.",
        informal:"You don’t progress because time passed—you progress because you did the thing. Receipts are the proof that you earned the next step."
      },
      live:{
        formal:"Live progression preserves position across navigation and language toggles. Back-navigation can invalidate downstream receipts; forward movement requires fresh confirmation. The system favors safety over momentum when conflict appears.",
        informal:"Live progression means you can’t accidentally ‘skip’ into a future state. If you back out, the system knows what becomes invalid and keeps you honest."
      },
      roadmap:{
        formal:"Roadmap adds registrable receipts (hashable bundles) so progress can be recognized across products without leaking private data. This enables scalable verification without central trust.",
        informal:"Next, your receipts can become portable—so progress can be verified elsewhere without exposing your whole life. Proof scales; privacy stays."
      }
    },
    "Navigation Surfaces":{
      concept:{
        formal:"Surfaces are the user-facing contracts that present options without altering invariants. A surface may simplify choices, but it must not change what is admissible. UX is subordinate to the engine rules.",
        informal:"The surface is the clean interface. It’s allowed to look simple, but it can’t lie. Pretty doesn’t get to override the rules."
      },
      live:{
        formal:"Live surfaces emphasize tap reliability and isolation: no overlays intercept actions, no competing UI stacks, no accidental double routes. Each tap yields one deterministic outcome.",
        informal:"Live means every tap works the first time. No ghost layers. No weird overlaps. You touch it, and it does exactly one thing."
      },
      roadmap:{
        formal:"Roadmap introduces reusable surface templates across products so the same interactions feel identical everywhere. Consistency reduces cognitive load and improves adoption velocity.",
        informal:"Next, every product page feels like the same ‘machine.’ Once you learn one, you can use them all without relearning the UI."
      }
    },
    "Product Packaging":{
      concept:{
        formal:"Packaging binds engines to sellable surfaces without mixing doctrine into marketing. A product page explains what it does, while proof pages explain what is true. This separation prevents claim inflation.",
        informal:"Packaging means: ‘Here’s what you can use’ without turning the proof into sales copy. Products do the job. Laws prove the boundaries."
      },
      live:{
        formal:"Live packaging maintains stable routes and eliminates dead ends: every product card opens, every open has a return, and state is preserved across jumps. The product spine stays navigable under pressure.",
        informal:"Live packaging means you can actually find things and get back. No 404s. No loops. Just clean routes and clean returns."
      },
      roadmap:{
        formal:"Roadmap adds tiering (SaaS/Enterprise/Government) and registry status so users can understand access level without reading internal doctrine. The packaging stays human-first.",
        informal:"Next, products get clear tiers and access signals—so anyone can understand what’s available without digging into the technical weeds."
      }
    },
    "Enterprise Deployment":{
      concept:{
        formal:"Enterprise deployment is defined as staged rollout with segmentation and rollback. Claims remain bounded to what is measured. Governance interfaces are explicit: who can deploy, who can audit, who can tune thresholds.",
        informal:"Enterprise is ‘scale without breaking.’ You roll out in waves, keep zones independent, and always have rollback ready. No hero moves."
      },
      live:{
        formal:"Live enterprise posture tracks correlated exposure and adoption gates. Deployment decisions reference receipts, not urgency. Any instability triggers containment and a return to last stable state.",
        informal:"Live enterprise means: if it wobbles, you stop. If it clusters, you split. If it drifts, you roll back. Stability wins."
      },
      roadmap:{
        formal:"Roadmap builds audit bundles and API exports so third parties can verify posture without privileged access. This enables external trust at scale.",
        informal:"Next, enterprise gets ‘proof packages’ you can hand to auditors and partners. They can verify without needing your whole stack."
      }
    },
    "Dot.Grid Sweeps":{
      concept:{
        formal:"Dot.Grid is a traversal-friendly indexing sweep: it enumerates states under fixed definitions and creates comparable evidence windows. The value is repeatable classification under constraint.",
        informal:"Dot.Grid is the scanner. It lets you sweep through states the same way every time so results don’t depend on mood or narrative."
      },
      live:{
        formal:"Live sweeps enforce window discipline and consistent naming so comparisons remain valid across time. Outputs are routed to Gauges for display and to Laws for interpretation bounds.",
        informal:"Live sweeps mean you can compare today to yesterday without tricking yourself. Same window, same labels, same output."
      },
      roadmap:{
        formal:"Roadmap adds adapter packs so sweeps apply to multiple domains (software, energy, governance) while preserving the same 256-style stability contract when used.",
        informal:"Next, Dot.Grid plugs into more domains—same sweep logic, more places to use it. You learn it once and reuse it."
      }
    },
    "Scoring Outputs":{
      concept:{
        formal:"Scoring converts gate vectors and exposure into a bounded metric with reason codes. The score is subordinate to admissibility: it cannot override a fail state. Its purpose is decision compression, not persuasion.",
        informal:"Scoring makes the signal easy to read. It doesn’t let you cheat a fail. It just tells you where you stand and why."
      },
      live:{
        formal:"Live scoring produces stable summaries and exports. Any threshold change requires a new epoch; silent tuning is disallowed. This keeps comparisons honest and prevents retroactive narrative edits.",
        informal:"Live scoring means you can’t quietly move the goalposts. If the rule changes, it’s obvious. If you compare scores, it’s a fair comparison."
      },
      roadmap:{
        formal:"Roadmap integrates underwriting and portfolio views while keeping raw evidence traceable. Scores become shareable without exposing private telemetry, via hashed receipts.",
        informal:"Next, you can share a score with proof attached—without dumping private data. Trust gets easier when the evidence travels with the number."
      }
    },
    "Registry Lookups":{
      concept:{
        formal:"Registry provides lookupable status for packages, tiers, and validity windows. It is designed to publish the minimum necessary truth without leaking sensitive internals. Status is time-anchored and reason-coded.",
        informal:"Registry is the ‘check the status’ screen. It tells you what’s active, what’s revoked, and why—without drama and without leaks."
      },
      live:{
        formal:"Live registry enforces non-silent revocation and deterministic renewal rules. Any suspension or reinstatement is logged and can be audited. This prevents capture and hidden exceptions.",
        informal:"Live registry means nobody can quietly flip things behind the scenes. If it changes, you can see it. If it’s revoked, there’s a reason."
      },
      roadmap:{
        formal:"Roadmap adds third-party attestations and replay bundles so claims become verifiable across organizations. The registry becomes the bridge between internal execution and external trust.",
        informal:"Next, registry turns into real-world credibility. Outside groups can verify status without taking your word for it."
      }
    },
    "Admissibility Doctrine":{
      concept:{
        formal:"Doctrine defines what may be claimed and what must remain conditional. It prevents upgrades beyond receipts and locks language to measured scope. Software must obey this to avoid becoming narrative-driven.",
        informal:"Doctrine is the rule: don’t say more than you can prove. Software is dangerous when it starts selling stories. This keeps it honest."
      },
      live:{
        formal:"Live doctrine enforces posture: concept stays concept, live stays measured, roadmap stays gated. If evidence is missing, the system must say so and refuse escalation.",
        informal:"Live doctrine means: call things what they are. If it’s not measured, you don’t hype it. If it’s only a plan, you label it as a plan."
      },
      roadmap:{
        formal:"Roadmap expands doctrine into standardized templates across products so the same claim discipline holds everywhere. This reduces drift and accelerates safe adoption.",
        informal:"Next, every product page speaks the same ‘honest language.’ No surprises. No inflated claims. Just clear posture everywhere."
      }
    },
    "Audit Discipline":{
      concept:{
        formal:"Audit discipline requires observer-invariant evaluation: outputs must be judged by receipts, not intent. This is implemented as logging, replay, and fixed rule application under declared scope.",
        informal:"Audit discipline means: show what happened. Not what you meant. Not what you hoped. Receipts decide."
      },
      live:{
        formal:"Live audit mode produces bundles that can be re-run. Any disagreement must be resolved by scope or missing receipts, not by arguing interpretations.",
        informal:"Live auditing makes fights boring. If you disagree, you look at the receipt. If it’s missing, you log it and move on."
      },
      roadmap:{
        formal:"Roadmap adds audit automation with strict separation of tuning authority. Builders cannot silently adjust thresholds; auditors cannot silently relax rules.",
        informal:"Next, audits get faster without getting weaker. And nobody gets to secretly ‘tune’ outcomes to make themselves look good."
      }
    },
    "Change Control":{
      concept:{
        formal:"Change control defines how updates occur without corrupting comparability. A change that affects outcomes creates a new epoch. Old results remain interpretable under their original rules.",
        informal:"Change control is how you upgrade without rewriting history. If you change the rules, you stamp it. Then comparisons stay honest."
      },
      live:{
        formal:"Live control requires staged rollout, rollback readiness, and documented reason for change. Hot fixes must not act as hidden policy changes. Stability is treated as primary.",
        informal:"Live change control means: don’t push chaos to production. Roll out in waves, keep rollback ready, and don’t pretend a ‘hotfix’ is harmless."
      },
      roadmap:{
        formal:"Roadmap introduces policy registries and signed releases so changes become verifiable events. This strengthens external trust while maintaining internal speed.",
        informal:"Next, updates become ‘signed events’ you can point to. People trust systems that don’t quietly change under their feet."
      }
    }
  };

  // UI refs
  var bd=document.getElementById("bd");
  var quadModal=document.getElementById("quadModal");
  var domainModal=document.getElementById("domainModal");
  var quadClose=document.getElementById("quadClose");
  var domainClose=document.getElementById("domainClose");
  var quadTitle=document.getElementById("quadTitle");
  var quadGrid=document.getElementById("quadGrid");
  var domainTitle=document.getElementById("domainTitle");
  var toneFormal=document.getElementById("toneFormal");
  var toneInformal=document.getElementById("toneInformal");
  var bConcept=document.getElementById("bConcept");
  var bLive=document.getElementById("bLive");
  var bRoadmap=document.getElementById("bRoadmap");
  var pConcept=document.getElementById("pConcept");
  var pLive=document.getElementById("pLive");
  var pRoadmap=document.getElementById("pRoadmap");

  var currentQuad=null;
  var currentDomain=null;
  var tone="formal";

  function showBD(){ bd.classList.add("show"); }
  function hideBD(){ bd.classList.remove("show"); }

  function openQuad(qname){
    currentQuad=qname;
    quadTitle.textContent = (lang==="zh" ? "软件 · " : (lang==="es" ? "Software · " : "SOFTWARE · ")) + qname;
    quadGrid.innerHTML="";

    var domains = QUADS[qname] || [];
    domains.forEach(function(d){
      var tile=document.createElement("div");
      tile.className="smallDiamond";
      tile.setAttribute("role","button");
      tile.tabIndex=0;
      tile.innerHTML='<div class="sdInner"><div class="sdT">'+d+'</div><div class="sdS">'+T.domSub+'</div></div>';
      tile.addEventListener("click", function(){ openDomain(d); });
      tile.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); openDomain(d);} });
      quadGrid.appendChild(tile);
    });

    // Return tile
    var ret=document.createElement("div");
    ret.className="smallDiamond";
    ret.setAttribute("role","button");
    ret.tabIndex=0;
    ret.innerHTML='<div class="sdInner"><div class="sdT">'+T.ret+'</div><div class="sdS">Back to quadrants</div></div>';
    ret.addEventListener("click", closeQuad);
    ret.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); closeQuad(); }});
    quadGrid.appendChild(ret);

    showBD();
    quadModal.classList.add("show");
  }

  function closeQuad(){
    quadModal.classList.remove("show");
    if(!domainModal.classList.contains("show")) hideBD();
  }

  function openDomain(dname){
    currentDomain=dname;
    domainTitle.textContent = (lang==="zh" ? "软件 · " : (lang==="es" ? "Software · " : "SOFTWARE · ")) + dname;

    [bConcept,bLive,bRoadmap].forEach(function(b){ b.classList.remove("open"); });

    applyTone(tone);

    quadModal.classList.remove("show");
    showBD();
    domainModal.classList.add("show");
  }

  function applyTone(t){
    tone=t;
    toneFormal.classList.toggle("active", tone==="formal");
    toneInformal.classList.toggle("active", tone==="informal");

    var pack=N[currentDomain] || null;
    if(!pack){
      pConcept.textContent="NOT MEASURED";
      pLive.textContent="NOT MEASURED";
      pRoadmap.textContent="NOT MEASURED";
      return;
    }
    pConcept.textContent = pack.concept[tone];
    pLive.textContent = pack.live[tone];
    pRoadmap.textContent = pack.roadmap[tone];
  }

  function bindBubble(box){
    box.addEventListener("click", function(){ box.classList.toggle("open"); });
    box.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); box.classList.toggle("open"); }});
    box.tabIndex=0; box.setAttribute("role","button");
  }
  bindBubble(bConcept); bindBubble(bLive); bindBubble(bRoadmap);

  toneFormal.addEventListener("click", function(){ applyTone("formal"); });
  toneInformal.addEventListener("click", function(){ applyTone("informal"); });

  // backdrop click closes both
  bd.addEventListener("click", function(){
    domainModal.classList.remove("show");
    quadModal.classList.remove("show");
    hideBD();
  });
  quadClose.addEventListener("click", function(){ quadModal.classList.remove("show"); hideBD(); });
  domainClose.addEventListener("click", function(){ domainModal.classList.remove("show"); quadModal.classList.remove("show"); hideBD(); });

  // quadrants
  function bindQuad(id,name){
    var el=document.getElementById(id);
    el.addEventListener("click", function(){ openQuad(name); });
    el.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); openQuad(name);} });
  }
  bindQuad("qEngine","ENGINE");
  bindQuad("qPlatform","PLATFORM");
  bindQuad("qInstruments","INSTRUMENTS");
  bindQuad("qGovernance","GOVERNANCE");

})();
</script>

</body>
</html>
