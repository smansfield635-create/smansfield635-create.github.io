<!-- TNT — /index.html  (NEW TERMINAL PAGE)
     This is now the page you hit AFTER /door/ (language).
     Keeps the 3D diamond layout you loved. -->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>TERMINAL · Geodiametrics</title>

  <link rel="stylesheet" href="/assets/ui.css?v=TERMINAL_3D_1"/>
  <link rel="stylesheet" href="/assets/branch.css?v=TERMINAL_3D_1"/>
  <script defer src="/assets/instrument.js?v=TERMINAL_3D_1"></script>

  <style>
    .frame{
      min-height:100vh;
      width:100%;
      position:relative;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:120px 16px 160px;
    }

    .terminal-card{
      width:min(980px,100%);
      text-align:center;
    }

    .terminal-title{
      font-size:clamp(40px,6vw,72px);
      font-weight:900;
      letter-spacing:.5px;
      margin-bottom:12px;
    }

    .terminal-sub{
      opacity:.85;
      margin-bottom:38px;
      font-size:18px;
    }

    /* 3D Diamond Cluster */
    .diamond-cluster{
      position:relative;
      width:520px;
      height:520px;
      margin:0 auto;
    }

    .diamond-btn{
      position:absolute;
      width:180px;
      height:180px;
      border-radius:26px;
      transform:rotate(45deg);
      background:linear-gradient(145deg,#0b0f18,#111827);
      box-shadow:
        inset -10px -12px 20px rgba(0,0,0,.6),
        inset 8px 8px 18px rgba(255,255,255,.04),
        0 20px 40px rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.08);
      display:flex;
      justify-content:center;
      align-items:center;
      transition:.25s ease;
      cursor:pointer;
    }

    .diamond-btn span{
      transform:rotate(-45deg);
      font-weight:800;
      font-size:18px;
      letter-spacing:.3px;
    }

    .diamond-btn:hover{
      box-shadow:
        inset -10px -12px 20px rgba(0,0,0,.6),
        inset 8px 8px 18px rgba(255,255,255,.06),
        0 0 24px rgba(255,204,0,.8);
    }

    /* Positions */
    .d-top   { top:0; left:50%; transform:translateX(-50%) rotate(45deg); }
    .d-left  { top:50%; left:0; transform:translateY(-50%) rotate(45deg); }
    .d-right { top:50%; right:0; transform:translateY(-50%) rotate(45deg); }
    .d-bot   { bottom:0; left:50%; transform:translateX(-50%) rotate(45deg); }

    /* Dock */
    .dock{
      position:fixed;
      left:50%;
      bottom:max(16px, env(safe-area-inset-bottom));
      transform:translateX(-50%);
      width:min(900px,94vw);
      display:flex;
      justify-content:center;
      gap:12px;
      flex-wrap:wrap;
      padding:12px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.20);
      backdrop-filter:blur(8px);
    }
  </style>
</head>

<body>
<div class="frame">

  <section class="terminal-card">

    <div class="terminal-title">TERMINAL</div>
    <div class="terminal-sub">Choose your route.</div>

    <div class="diamond-cluster">

      <div class="diamond-btn d-top"   onclick="route('explore')"><span>EXPLORE</span></div>
      <div class="diamond-btn d-left"  onclick="route('links')"><span>LINKS</span></div>
      <div class="diamond-btn d-right" onclick="route('learn')"><span>LEARN</span></div>
      <div class="diamond-btn d-bot"   onclick="route('home')"><span>HOME</span></div>

    </div>

  </section>

  <nav class="dock">
    <a class="crp-btn" href="/door/">LANGUAGE</a>
    <button class="crp-btn" onclick="resetDepth()">RESET DEPTH</button>
  </nav>

</div>

<script>
(function(){
  "use strict";

  var K_LANG="gd_lang";
  var K_DEPTH="gd_depth";
  var K_STYLE="gd_style";
  var K_TIME="gd_time";

  function lsGet(k){ try{return localStorage.getItem(k);}catch(e){return null;} }
  function lsSet(k,v){ try{localStorage.setItem(k,v);}catch(e){} }

  var params = new URLSearchParams(location.search);
  var qLang = params.get("lang");
  if(qLang==="en" || qLang==="zh"){
    lsSet(K_LANG,qLang);
  }

  function route(page){
    var lang  = lsGet(K_LANG)  || "en";
    var depth = lsGet(K_DEPTH) || "explore";
    var style = lsGet(K_STYLE) || "formal";
    var time  = lsGet(K_TIME)  || "now";

    location.href = "/" + page + "/?lang=" + lang +
                    "&depth=" + depth +
                    "&style=" + style +
                    "&time=" + time;
  }

  function resetDepth(){
    lsSet(K_DEPTH,"explore");
    lsSet(K_STYLE,"formal");
    lsSet(K_TIME,"now");
    location.reload();
  }

  window.route = route;
  window.resetDepth = resetDepth;
})();
</script>

</body>
</html>
