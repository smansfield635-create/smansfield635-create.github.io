<!-- TNT — /prelude/index.html
     PRELUDE · WISHBONE INDEX (FIXED)
     FIXES (STRUCTURE/GEOMETRY ONLY):
       - Diamonds ALWAYS clickable (header no longer blocks taps)
       - Diamonds scale down on mobile (no oversized overlap)
       - Smooth scroll lands correctly (scroll-margin for fixed header)
       - No visual redesign beyond sizing/stacking safety
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRELUDE</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
a{text-decoration:none;color:inherit}

:root{
  /* responsive sizing (prevents “too big” on phone) */
  --D:clamp(190px, 34vw, 250px);
  --R:clamp(130px, 18vw, 170px);

  --goldSoft:rgba(212,175,55,.45);
  --obsA:rgba(12,22,38,.95);
  --obsB:rgba(6,10,16,.98);
}

/* ===== TOP ===== */
.top-left{
  position:fixed;
  left:16px;
  top:16px;
  z-index:220;
  display:flex;
  gap:10px;
}

/* ===== TITLE (NEVER BLOCK TAPS) ===== */
.header{
  position:fixed;
  top:78px;
  left:50%;
  transform:translateX(-50%);
  text-align:center;
  z-index:200;
  pointer-events:none; /* ✅ critical: header can’t steal clicks */
}
.header h1{
  margin:0;
  font-weight:950;
  font-size:38px;
  letter-spacing:2px;
}
.header p{
  margin-top:10px;
  opacity:.85;
  font-size:14px;
}

/* ===== WISHBONE STAGE ===== */
.stage{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:min(700px,94vw);
  height:420px;
  z-index:140;
}

/* ===== DIAMONDS ===== */
.d{
  width:var(--D);
  height:var(--D);
  position:absolute;
  left:50%;
  top:50%;
  transform-origin:center;
  border-radius:28px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  touch-action:manipulation;

  background:
    radial-gradient(circle at 30% 22%, rgba(255,255,255,.55), transparent 45%),
    radial-gradient(circle at 70% 78%, rgba(0,120,255,.30), transparent 60%),
    linear-gradient(160deg, var(--obsA), var(--obsB));

  border:1px solid rgba(255,255,255,.18);

  box-shadow:
    0 38px 120px rgba(0,0,0,.85),
    0 0 30px rgba(212,175,55,.25),
    inset 0 2px 0 rgba(255,255,255,.25),
    inset 0 -42px 78px rgba(0,0,0,.80);

  transition:transform .2s ease, box-shadow .2s ease;
}

.d::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:28px;
  padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.65;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
  pointer-events:none;
}

.d::after{
  content:"";
  position:absolute;
  left:12%;
  right:12%;
  top:10%;
  height:30%;
  border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.25), rgba(255,255,255,0));
  transform:rotate(-10deg);
  pointer-events:none;
}

.d:hover{ transform:translate(-50%,-50%) rotate(45deg) scale(1.03); }
.d:active{ transform:translate(-50%,-50%) rotate(45deg) scale(.99); }

.d-left{  transform:translate(-50%,-50%) translate(calc(var(--R)*-1),0) rotate(45deg); }
.d-right{ transform:translate(-50%,-50%) translate(var(--R),0) rotate(45deg); }

.inner{
  transform:rotate(-45deg);
  height:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:18px;
  pointer-events:none; /* click stays on .d */
}

.lab{
  font-weight:950;
  font-size:20px;
  letter-spacing:.6px;
}

.sub{
  margin-top:8px;
  font-size:13px;
  opacity:.85;
}

/* ===== SECTIONS ===== */
.section{
  width:min(1000px,92vw);
  margin:520px auto 80px;
  padding:24px;
  border-radius:20px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.20);
  backdrop-filter:blur(10px);
  scroll-margin-top:140px; /* ✅ smooth scroll lands below fixed header */
}

.section h2{
  margin-top:0;
  font-weight:950;
  letter-spacing:1px;
}

.footer{
  text-align:center;
  margin-bottom:40px;
  opacity:.7;
  font-size:13px;
}

/* mobile: reduce stage height so diamonds don’t collide with header */
@media (max-width:520px){
  .stage{height:360px; top:52%;}
  .section{margin-top:480px;}
  .header h1{font-size:34px;}
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" href="/index.html">RETURN</a>
  <a class="btn" href="/home/">ENTER</a>
</div>

<div class="header">
  <h1>PRELUDE</h1>
  <p>Choose your entry posture.</p>
</div>

<div class="stage" aria-label="Prelude wishbone">

  <div class="d d-left" id="claimDiamond" role="button" tabindex="0" aria-label="Claim">
    <div class="inner">
      <div class="lab">CLAIM</div>
      <div class="sub">Products & Services</div>
    </div>
  </div>

  <div class="d d-right" id="supportDiamond" role="button" tabindex="0" aria-label="Support">
    <div class="inner">
      <div class="lab">SUPPORT</div>
      <div class="sub">Software & Systems</div>
    </div>
  </div>

</div>

<div class="section" id="claimSection">
  <h2>Products & Services</h2>
  <p>What we offer. Deployable surfaces. Energy, Education, Commercial, Advisory, etc.</p>
</div>

<div class="section" id="supportSection">
  <h2>Software & Systems</h2>
  <p>The engines behind the claims. SSG, .DOTGrid, UCI, Registry, and measurement layers.</p>
</div>

<div class="footer">
  CLAIM must be supported. SUPPORT must be verifiable.
</div>

<script>
(function(){
  function go(id){
    var el=document.getElementById(id);
    if(el) el.scrollIntoView({behavior:"smooth", block:"start"});
  }

  var claim=document.getElementById("claimDiamond");
  var support=document.getElementById("supportDiamond");

  if(claim){
    claim.addEventListener("click", function(){ go("claimSection"); });
    claim.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); go("claimSection"); }});
  }
  if(support){
    support.addEventListener("click", function(){ go("supportSection"); });
    support.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); go("supportSection"); }});
  }
})();
</script>

</body>
</html>
