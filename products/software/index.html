<!-- TNT — /products/software/index.html
     UPGRADES (per your screenshots):
     1) Modal gets a BIG diamond/opal “core” so it visually covers more of the page.
     2) Modal content fills the space (no big empty void): 4 internal bubbles + bullet points.
     3) Keeps your current working behavior: click a bubble → centered modal; lens chips change content.
     4) Dual language (EN + 中文) always.
     5) Lenses stay INSIDE the modal only (STYLE + TIME: Concept/Live/Roadmap).
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · SOFTWARE</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>

<style>
:root{
  --gold:rgba(212,175,55,.9);
  --goldSoft:rgba(212,175,55,.35);
  --obs1:#070b12;
  --obs2:#0c1626;
  --mut:rgba(255,255,255,.84);
  --mut2:rgba(255,255,255,.68);
}

body{
  margin:0;
  min-height:100vh;
  background:
    radial-gradient(circle at 50% 40%, rgba(90,140,255,.10), transparent 60%),
    repeating-linear-gradient(45deg, rgba(255,255,255,.02) 0 1px, transparent 1px 100px),
    linear-gradient(180deg,#b00000 0%,#7a0000 60%,#550000 100%);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:#fff;
}

/* Buttons */
.btn{
  padding:10px 16px;
  border-radius:14px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  color:white;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.7);
  cursor:pointer;
  font-weight:900;
  letter-spacing:.2px;
  text-decoration:none;
}
.btn:hover{ box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px var(--goldSoft); }

/* Top-left */
.top-left{
  position:fixed;left:16px;top:16px;z-index:90;
  display:flex;gap:10px;flex-wrap:wrap;align-items:center;
}

/* Title pill */
.brand{
  position:fixed;
  left:50%;
  top:16px;
  transform:translateX(-50%);
  z-index:80;
  text-align:center;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);
  backdrop-filter:blur(8px);
}
.brand .name{ font-weight:950; letter-spacing:1.2px; font-size:12px; opacity:.95; }
.brand .tag{ font-size:11px; letter-spacing:.6px; opacity:.70; margin-top:2px; }

/* Grid */
.wrap{
  width:min(960px, 92vw);
  margin:110px auto 120px;
}
.grid{
  display:grid;
  gap:14px;
}
@media (min-width:760px){ .grid{ grid-template-columns:1fr 1fr; } }

.bubble{
  padding:16px 18px;
  border-radius:20px;
  cursor:pointer;
  background:
    radial-gradient(circle at 30% 30%, rgba(120,160,255,.08), transparent 55%),
    linear-gradient(145deg,var(--obs2),var(--obs1));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 18px 55px rgba(0,0,0,.78), inset 0 2px 0 rgba(255,255,255,.06);
  position:relative;
}
.bubble::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:20px;
  padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
  pointer-events:none;
}
.bubble:hover{ box-shadow:0 22px 65px rgba(0,0,0,.86), 0 0 14px rgba(212,175,55,.16); border-color:rgba(212,175,55,.16); }
.bt{ font-weight:950; margin:0 0 6px; letter-spacing:.2px; }
.bs{ margin:0; color:var(--mut2); line-height:1.45; }

/* Dock */
.dock{
  position:fixed;
  left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:90;
  width:min(900px,94vw);
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.20);
  backdrop-filter:blur(8px);
}

/* Modal */
.bd{
  position:fixed;inset:0;z-index:200;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(10px);
  display:none;
}
.bd.show{display:block;}

.modal{
  position:fixed;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:min(980px,94vw);
  max-height:88vh;
  display:none;
  z-index:210;
}
.modal.show{display:block;}

.shell{
  height:88vh;
  border-radius:26px;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 50% 18%, rgba(176,0,0,.20), transparent 55%),
    radial-gradient(circle at 40% 25%, rgba(90,140,255,.12), transparent 55%),
    linear-gradient(160deg,var(--obs2) 0%, var(--obs1) 65%);
  box-shadow:0 60px 180px rgba(0,0,0,.92);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  position:relative;
}

/* BIG DIAMOND CORE (covers more of the page) */
.shell::before{
  content:"";
  position:absolute;
  left:50%;
  top:56%;
  width:min(900px, 92vw);
  height:min(900px, 92vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:60px;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.10), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.18), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.55) 0%, rgba(7,11,18,.70) 70%);
  box-shadow:
    0 80px 220px rgba(0,0,0,.75),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -40px 70px rgba(0,0,0,.55);
  opacity:.70;
  pointer-events:none;
}
.shell::after{
  content:"";
  position:absolute;
  left:50%;
  top:56%;
  width:min(900px, 92vw);
  height:min(900px, 92vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:60px;
  background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 6deg, transparent 6deg 18deg);
  opacity:.18;
  pointer-events:none;
}

.mhead{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  padding:14px 16px;
  border-bottom:1px solid rgba(255,255,255,.08);
  position:relative;
  z-index:2;
}
.mtitle{ margin:0; font-weight:950; letter-spacing:.3px; font-size:16px; }
.mclose{ border:0; background:transparent; color:#fff; font-size:18px; cursor:pointer; padding:8px 10px; }

.mbody{
  padding:14px 16px 18px;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
  flex:1 1 auto;
  position:relative;
  z-index:2;
}

/* Lens chips */
.lensbar{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:center;
  padding:10px 10px 14px;
  border-bottom:1px solid rgba(255,255,255,.08);
  margin:-6px -6px 14px;
}
.chip{
  padding:10px 16px;
  border-radius:999px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.65);
  cursor:pointer;
  font-weight:900;
  letter-spacing:.2px;
  color:#fff;
}
.chip.active{
  border-color:rgba(212,175,55,.35);
  box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 16px rgba(212,175,55,.30);
}

/* Inside-modal bubbles (to fill space) */
.mgrid{
  display:grid;
  gap:14px;
}
@media (min-width:900px){ .mgrid{ grid-template-columns:1fr 1fr; } }

.mbox{
  padding:16px 18px;
  border-radius:22px;
  background:
    radial-gradient(circle at 30% 30%, rgba(120,160,255,.08), transparent 55%),
    linear-gradient(145deg, rgba(12,22,38,.92), rgba(7,11,18,.95));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 18px 60px rgba(0,0,0,.70), inset 0 2px 0 rgba(255,255,255,.06);
  position:relative;
}
.mbox::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:22px;
  padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
  pointer-events:none;
}
.mh{ margin:0 0 8px; font-weight:950; letter-spacing:.2px; }
.mp{ margin:0 0 10px; color:var(--mut); line-height:1.55; }
.ul{ margin:0 0 0 18px; padding:0; color:var(--mut2); }
.ul li{ margin:6px 0; }

/* footer actions inside modal */
.mact{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:14px;
}
.sbtn{
  padding:12px 18px;
  border-radius:14px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  color:white;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.7);
  cursor:pointer;
  font-weight:900;
  letter-spacing:.2px;
}
.sbtn:hover{ box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px var(--goldSoft); }

@media (max-width:520px){
  .wrap{ margin:98px auto 120px; }
  .shell{ height:90vh; }
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" href="/products/">BACK</a>
  <a class="btn" href="/door/">EXIT</a>
</div>

<div class="brand">
  <div class="name" id="brandName">PRODUCTS</div>
  <div class="tag" id="brandTag">SOFTWARE SYSTEMS</div>
</div>

<main class="wrap">
  <div class="grid" id="grid"></div>
</main>

<nav class="dock">
  <a class="btn" id="dockHub" href="/home/">HUB</a>
  <a class="btn" id="dockTerminal" href="/index.html">TERMINAL</a>
  <a class="btn" id="dockLinks" href="/links/">LINKS</a>
  <a class="btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="btn" id="dockGauges" href="/gauges/">GAUGES</a>
</nav>

<div class="bd" id="bd"></div>

<div class="modal" id="modal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="mTitle">DETAIL</h3>
      <button class="mclose" id="mClose" aria-label="Close">✕</button>
    </div>

    <div class="mbody">
      <div class="lensbar">
        <button class="chip" id="styleChip">STYLE: FORMAL</button>
        <button class="chip" data-time="origin" id="chipConcept">CONCEPT</button>
        <button class="chip" data-time="now" id="chipLive">LIVE</button>
        <button class="chip" data-time="post" id="chipRoadmap">ROADMAP</button>
      </div>

      <div class="mgrid" id="mgrid">
        <div class="mbox">
          <h4 class="mh" id="h1"></h4>
          <p class="mp" id="p1"></p>
          <ul class="ul" id="u1"></ul>
        </div>

        <div class="mbox">
          <h4 class="mh" id="h2"></h4>
          <p class="mp" id="p2"></p>
          <ul class="ul" id="u2"></ul>
        </div>

        <div class="mbox">
          <h4 class="mh" id="h3"></h4>
          <p class="mp" id="p3"></p>
          <ul class="ul" id="u3"></ul>
        </div>

        <div class="mbox">
          <h4 class="mh" id="h4"></h4>
          <p class="mp" id="p4"></p>
          <ul class="ul" id="u4"></ul>
        </div>
      </div>

      <div class="mact">
        <button class="sbtn" id="mBack">RETURN</button>
        <a class="sbtn" id="mJumpProducts" href="/products/">JUMP PRODUCTS</a>
        <a class="sbtn" id="mJumpHub" href="/home/">JUMP HUB</a>
      </div>

    </div>
  </div>
</div>

<script>
(function(){
  const qs = new URLSearchParams(location.search);
  const qLang = qs.get("lang");
  let lang = (qLang==="zh"||qLang==="en") ? qLang : (localStorage.getItem("gd_lang")==="zh" ? "zh" : "en");
  try{ localStorage.setItem("gd_lang", lang); }catch(e){}

  let style = localStorage.getItem("gd_style") || "formal";
  let time  = localStorage.getItem("gd_time")  || "now";
  if(time==="trajectory") time="post";
  if(!["origin","now","post"].includes(time)) time="now";
  if(!["formal","informal"].includes(style)) style="formal";

  const L = {
    en:{
      title:"PRODUCTS",
      tag:"SOFTWARE SYSTEMS",
      s:{formal:"FORMAL",informal:"INFORMAL"},
      t:{origin:"CONCEPT",now:"LIVE",post:"ROADMAP"},
      buttons:{return:"RETURN",jp:"JUMP PRODUCTS",jh:"JUMP HUB"},
      items:[
        {
          key:"hub",
          cardTitle:"Compass Hub Platform",
          cardSentence:"A gem-compass hub that routes across the full architecture.",
          blocks:{
            origin:{
              formal:{
                b1:{h:"What it is",p:"A traversal hub that preserves meaning while you move.",u:["Topology is explicit.","State is canonical (gd_*).","Routes are deterministic.","UI remains stable."]},
                b2:{h:"Why it exists",p:"Traversal replaces linear reading with navigable structure.",u:["You don’t “read.”","You traverse nodes.","You preserve lenses.","You compound context."]},
                b3:{h:"What it unlocks",p:"A stable core for all domain hubs (Products/Laws/Gauges).",u:["Single geometry.","Multiple domains.","Unified state.","Upgradeable content."]},
                b4:{h:"How to use",p:"Pick lenses in-node, then move via diamonds.",u:["Formal/Informal.","Concept/Live/Roadmap.","Open a direction.","Return cleanly."]}
              },
              informal:{
                b1:{h:"What it is",p:"A hub that keeps everything reachable.",u:["You don’t get lost.","State stays with you.","It feels consistent.","It stays clean."]},
                b2:{h:"Why it exists",p:"Because linear study is slow.",u:["Traversal is faster.","Structure teaches.","You move by meaning.","Not by scrolling."]},
                b3:{h:"What it unlocks",p:"Everything hangs off the hub.",u:["Products.","Laws.","Gauges.","Links."]},
                b4:{h:"How to use",p:"Tap a node. Change lenses inside.",u:["Tap diamonds.","Open bubbles.","Flip lenses.","Return."]}
              }
            },
            now:{
              formal:{
                b1:{h:"Current status",p:"The hub is operational and state-consistent.",u:["Routes work.","State propagates.","Dual language works.","Modal discipline holds."]},
                b2:{h:"Core guarantees",p:"What you see must change when lenses change.",u:["Text changes.","Bullets change.","Meaning changes.","No stale frames."]},
                b3:{h:"Execution surfaces",p:"The hub is the gateway to execution domains.",u:["Software systems.","Commercial systems.","Energy systems.","Education systems."]},
                b4:{h:"Operator note",p:"This is live-built and safe to explore.",u:["Unfinished = placeholder.","Not broken flow.","Return paths stable.","No drift allowed."]}
              },
              informal:{
                b1:{h:"Status",p:"It works right now.",u:["Buttons work.","State sticks.","Feels smooth.","Looks aligned."]},
                b2:{h:"Rule",p:"If you change a lens, content changes.",u:["Not just highlights.","Real content flips.","No confusion.","Always coherent."]},
                b3:{h:"Where it goes",p:"It routes to everything.",u:["Products.","Laws.","Gauges.","Links."]},
                b4:{h:"Safety",p:"Safe to explore even while building.",u:["Placeholders appear.","No broken loops.","Back works.","Exit works."]}
              }
            },
            post:{
              formal:{
                b1:{h:"Roadmap",p:"The hub becomes a full traversal encyclopedia.",u:["Deeper recursion.","More nodes.","More lenses.","More audits."]},
                b2:{h:"Scaling",p:"Each domain gets sub-hubs with the same contract.",u:["Software sub-hub.","Energy sub-hub.","Commercial sub-hub.","Education sub-hub."]},
                b3:{h:"Verification",p:"Everything becomes evidence-addressable.",u:["Hashes.","Registry entries.","Replay windows.","Audit exports."]},
                b4:{h:"Outcome",p:"Nonlinear study becomes institutional navigation.",u:["Fast learning.","Stable meaning.","Coherent growth.","Public readiness."]}
              },
              informal:{
                b1:{h:"Next",p:"It expands without losing structure.",u:["More pages.","More depth.","Same rules.","Same feel."]},
                b2:{h:"Scale",p:"We add sub-hubs.",u:["Software.","Energy.","Commercial.","Education."]},
                b3:{h:"Proof",p:"We add verification layers.",u:["Registry.","Replay.","Audits.","Exports."]},
                b4:{h:"Result",p:"Traversal study becomes the default.",u:["Faster learning.","Less drift.","More clarity.","More control."]}
              }
            }
          }
        },
        {
          key:"uci",
          cardTitle:"Universal Coherence Instrument (UCI)",
          cardSentence:"A measurement core that standardizes ρ/TC and HIP gate checks.",
          blocks:{
            origin:{
              formal:{
                b1:{h:"What it is",p:"A universal measurement spec and engine interface.",u:["Input schema.","ρ / TC primitives.","Δ acceleration.","Gate vectors."]},
                b2:{h:"Why it exists",p:"Correlation kills systems when unmanaged.",u:["Detect common-mode.","Bound rollout exposure.","Track drift.","Enforce gates."]},
                b3:{h:"What it outputs",p:"Auditable metrics and operator actions.",u:["Dashboards.","Alerts.","Reports.","Exports."]},
                b4:{h:"How to use",p:"Feed events; compute; gate changes.",u:["Capture events.","Compute metrics.","Check gates.","Act."]}
              },
              informal:{
                b1:{h:"What it is",p:"A way to measure correlation risk.",u:["It measures ρ.","It measures TC.","It watches drift.","It checks gates."]},
                b2:{h:"Why",p:"So things don’t break together.",u:["Catch clusters.","Reduce blast radius.","Stop drift early.","Stay safe."]},
                b3:{h:"Outputs",p:"What you can read fast.",u:["Alerts.","Scores.","Summaries.","Exports."]},
                b4:{h:"Use",p:"Send it events and read the result.",u:["Input events.","Read output.","Fix issues.","Repeat."]}
              }
            },
            now:{
              formal:{
                b1:{h:"Current role",p:"UCI is the measurement core behind certification logic.",u:["Score components.","Gate flags.","Reason codes.","Evidence bundles."]},
                b2:{h:"Operator value",p:"It turns chaos into bounded signals.",u:["Early warnings.","Guardrails.","Comparability.","Audit trails."]},
                b3:{h:"Deployment discipline",p:"It pairs with staged rollout enforcement.",u:["Wave caps.","Segmentation.","Rollback readiness.","Audit latency."]},
                b4:{h:"Output bundle",p:"Outputs are exportable and replayable.",u:["JSON summary.","CSV metrics.","Hash log.","Window record."]}
              },
              informal:{
                b1:{h:"What it does now",p:"It gives you the signal.",u:["Risk up/down.","Gates pass/fail.","Drift trending.","What to fix."]},
                b2:{h:"Why it helps",p:"It’s hard to see correlation.",u:["Now you can.","Early warnings.","Clear flags.","Less guessing."]},
                b3:{h:"How it pairs",p:"Use it with staged rollouts.",u:["Small waves.","Rollback ready.","Zones independent.","Audit quick."]},
                b4:{h:"What you get",p:"Outputs you can share.",u:["Export file.","Report.","Hash.","Proof."]}
              }
            },
            post:{
              formal:{
                b1:{h:"Roadmap",p:"Domain adapters become a public library.",u:["Water.","Energy.","HVAC.","District.","Planetary."]},
                b2:{h:"Anti-gaming",p:"Red-team harnesses become default.",u:["Synthetic injections.","Divergence checks.","Reliability tests.","Audit triggers."]},
                b3:{h:"Enterprise",p:"Connectors and underwriting interfaces expand.",u:["Insurance.","Capital.","Regulators.","Operators."]},
                b4:{h:"Public",p:"Registry-backed certification becomes lookupable.",u:["Serials.","Tiers.","Revocations.","History."]}
              },
              informal:{
                b1:{h:"Next",p:"More domains plug in cleanly.",u:["More adapters.","Same engine.","Same keys.","Same outputs."]},
                b2:{h:"Defense",p:"It becomes hard to game.",u:["Red-team tests.","Checks.","Audits.","Proof."]},
                b3:{h:"Scale",p:"It connects to real-world systems.",u:["Enterprise.","Insurance.","Capital.","Regulators."]},
                b4:{h:"Public",p:"It becomes lookupable.",u:["Serials.","Status.","Reasons.","History."]}
              }
            }
          }
        }
      ]
    },
    zh:{
      title:"产品",
      tag:"软件系统",
      s:{formal:"正式",informal:"非正式"},
      t:{origin:"概念",now:"上线",post:"路线图"},
      buttons:{return:"返回",jp:"跳转产品",jh:"跳转枢纽"},
      items:[
        {
          key:"hub",
          cardTitle:"指南针枢纽平台",
          cardSentence:"一个宝石指南针枢纽，用于遍历全套架构。",
          blocks:{
            origin:{
              formal:{
                b1:{h:"它是什么",p:"一个遍历枢纽：移动时仍保持含义稳定。",u:["拓扑明确。","状态键规范（gd_*）。","路由确定。","界面稳定。"]},
                b2:{h:"它为什么存在",p:"遍历取代线性阅读：用结构获得全景。",u:["不是“读完”。","而是“穿行”。","透镜可保持。","上下文可叠加。"]},
                b3:{h:"它解锁什么",p:"所有域枢纽（产品/法则/量规）都挂在核心上。",u:["单一几何。","多个领域。","统一状态。","可升级内容。"]},
                b4:{h:"如何使用",p:"在节点内选择透镜，再用菱形移动。",u:["正式/非正式。","概念/上线/路线图。","打开方向。","干净返回。"]}
              },
              informal:{
                b1:{h:"它是什么",p:"一个让所有东西都可达的枢纽。",u:["不迷路。","状态跟随。","感觉一致。","保持简洁。"]},
                b2:{h:"它为什么",p:"线性学习太慢。",u:["遍历更快。","结构会教你。","按含义移动。","不用狂滚。"]},
                b3:{h:"它解锁什么",p:"一切都从枢纽分支出去。",u:["产品。","法则。","量规。","链接。"]},
                b4:{h:"怎么用",p:"点节点，在气泡里改透镜。",u:["点菱形。","开气泡。","切透镜。","返回。"]}
              }
            },
            now:{
              formal:{
                b1:{h:"当前状态",p:"枢纽已可用且状态一致。",u:["路由可用。","状态传播。","双语可用。","模态纪律成立。"]},
                b2:{h:"核心保证",p:"透镜切换时内容必须切换。",u:["文本变化。","要点变化。","含义变化。","不允许旧画面。"]},
                b3:{h:"执行面",p:"枢纽连接到执行领域。",u:["软件系统。","商业系统。","能源系统。","教育系统。"]},
                b4:{h:"操作提示",p:"这是边建边跑，浏览是安全的。",u:["未完成=占位。","不是断链。","返回稳定。","不允许漂移。"]}
              },
              informal:{
                b1:{h:"状态",p:"现在就能用。",u:["按钮可用。","状态不丢。","很顺滑。","很一致。"]},
                b2:{h:"规则",p:"透镜变，内容就变。",u:["不只是高亮。","是真内容变化。","不混乱。","始终一致。"]},
                b3:{h:"去哪",p:"它能去所有地方。",u:["产品。","法则。","量规。","链接。"]},
                b4:{h:"安全",p:"施工中也可安全浏览。",u:["占位会出现。","循环不坏。","返回可用。","退出可用。"]}
              }
            },
            post:{
              formal:{
                b1:{h:"路线图",p:"枢纽会变成完整遍历百科。",u:["更深递归。","更多节点。","更多透镜。","更多审计。"]},
                b2:{h:"扩展",p:"每个领域都有子枢纽且契约一致。",u:["软件子枢纽。","能源子枢纽。","商业子枢纽。","教育子枢纽。"]},
                b3:{h:"验证",p:"所有内容都可证据寻址。",u:["哈希。","登记条目。","回放窗口。","审计导出。"]},
                b4:{h:"结果",p:"非线性学习变为机构化导航。",u:["更快学习。","含义稳定。","一致增长。","对公众就绪。"]}
              },
              informal:{
                b1:{h:"下一步",p:"扩展但不丢结构。",u:["更多页面。","更多深度。","同样规则。","同样感觉。"]},
                b2:{h:"规模",p:"增加子枢纽。",u:["软件。","能源。","商业。","教育。"]},
                b3:{h:"证明",p:"加验证层。",u:["登记。","回放。","审计。","导出。"]},
                b4:{h:"结果",p:"遍历学习成为默认。",u:["学得更快。","更少漂移。","更清晰。","更可控。"]}
              }
            }
          }
        },
        {
          key:"uci",
          cardTitle:"通用一致性仪器（UCI）",
          cardSentence:"一个测量核心，用于标准化 ρ/TC 与 HIP 门控检查。",
          blocks:{
            origin:{
              formal:{
                b1:{h:"它是什么",p:"一个通用测量规范与引擎接口。",u:["输入格式。","ρ/TC 原语。","Δ 加速度。","门控向量。"]},
                b2:{h:"它为什么存在",p:"相关性不管理会导致系统一起崩。",u:["发现共因暴露。","限制发布暴露。","追踪漂移。","执行门控。"]},
                b3:{h:"它输出什么",p:"可审计指标与操作动作。",u:["仪表盘。","告警。","报告。","导出。"]},
                b4:{h:"如何使用",p:"输入事件→计算→门控变更。",u:["采集事件。","计算指标。","检查门控。","执行动作。"]}
              },
              informal:{
                b1:{h:"它是什么",p:"一种测相关风险的方法。",u:["测 ρ。","测 TC。","看漂移。","查门控。"]},
                b2:{h:"为什么",p:"避免“一起坏”。",u:["抓集群。","减爆炸半径。","提前止漂移。","更安全。"]},
                b3:{h:"输出",p:"你能快速读懂的结果。",u:["告警。","评分。","摘要。","导出。"]},
                b4:{h:"用法",p:"给它事件，读结果。",u:["输入事件。","读输出。","修问题。","重复。"]}
              }
            },
            now:{
              formal:{
                b1:{h:"当前角色",p:"UCI 是认证逻辑背后的测量核心。",u:["评分组件。","门控标志。","原因码。","证据包。"]},
                b2:{h:"操作价值",p:"把混乱变成有界信号。",u:["早预警。","护栏。","可比较。","审计轨迹。"]},
                b3:{h:"发布纪律",p:"与分阶段发布约束配套。",u:["波次上限。","分区独立。","可回滚。","审计延迟。"]},
                b4:{h:"输出包",p:"输出可导出且可回放。",u:["JSON 摘要。","CSV 指标。","哈希日志。","窗口记录。"]}
              },
              informal:{
                b1:{h:"现在能做",p:"给你信号。",u:["风险升降。","门控通过/失败。","漂移趋势。","要修什么。"]},
                b2:{h:"为什么好用",p:"相关性很难靠直觉看。",u:["现在能看。","早预警。","清晰标志。","少猜。"]},
                b3:{h:"怎么配",p:"搭配分阶段发布。",u:["小波次。","随时回滚。","分区独立。","审计快。"]},
                b4:{h:"你得到",p:"可分享的输出。",u:["导出文件。","报告。","哈希。","证明。"]}
              }
            },
            post:{
              formal:{
                b1:{h:"路线图",p:"领域适配器会变成公开库。",u:["水。","能源。","HVAC。","区域。","行星。"]},
                b2:{h:"防作弊",p:"红队测试成为默认。",u:["注入测试。","分歧检查。","可靠性测试。","审计触发。"]},
                b3:{h:"企业",p:"连接器与承保接口扩展。",u:["保险。","资本。","监管。","运营。"]},
                b4:{h:"公开",p:"登记驱动的认证可查询。",u:["序列号。","分层。","撤销。","历史。"]}
              },
              informal:{
                b1:{h:"下一步",p:"更多领域能干净接入。",u:["更多适配器。","同一引擎。","同样键。","同样输出。"]},
                b2:{h:"防守",p:"更难被操纵。",u:["红队。","检查。","审计。","证明。"]},
                b3:{h:"扩展",p:"连接到真实世界系统。",u:["企业。","保险。","资本。","监管。"]},
                b4:{h:"公开",p:"可查询。",u:["序列。","状态。","原因。","历史。"]}
              }
            }
          }
        }
      ]
    }
  };

  const pack = L[lang] || L.en;

  document.documentElement.lang = (lang==="zh") ? "zh" : "en";
  document.getElementById("brandName").textContent = pack.title;
  document.getElementById("brandTag").textContent = pack.tag;

  // Dock propagate lenses
  function linkQ(){ return "lang="+encodeURIComponent(lang)+"&style="+encodeURIComponent(style)+"&time="+encodeURIComponent(time); }
  function setDock(){
    const q=linkQ();
    document.getElementById("dockHub").href="/home/?"+q;
    document.getElementById("dockTerminal").href="/index.html?"+q;
    document.getElementById("dockLinks").href="/links/?"+q;
    document.getElementById("dockProducts").href="/products/?"+q;
    document.getElementById("dockLaws").href="/laws/?"+q;
    document.getElementById("dockGauges").href="/gauges/?"+q;
    document.getElementById("mJumpProducts").href="/products/?"+q;
    document.getElementById("mJumpHub").href="/home/?"+q;
  }

  // UI refs
  const bd=document.getElementById("bd");
  const modal=document.getElementById("modal");
  const mClose=document.getElementById("mClose");
  const mTitle=document.getElementById("mTitle");
  const styleChip=document.getElementById("styleChip");
  const chipConcept=document.getElementById("chipConcept");
  const chipLive=document.getElementById("chipLive");
  const chipRoadmap=document.getElementById("chipRoadmap");

  const h1=document.getElementById("h1"), p1=document.getElementById("p1"), u1=document.getElementById("u1");
  const h2=document.getElementById("h2"), p2=document.getElementById("p2"), u2=document.getElementById("u2");
  const h3=document.getElementById("h3"), p3=document.getElementById("p3"), u3=document.getElementById("u3");
  const h4=document.getElementById("h4"), p4=document.getElementById("p4"), u4=document.getElementById("u4");

  const mBack=document.getElementById("mBack");
  mBack.textContent = pack.buttons.return;
  document.getElementById("mJumpProducts").textContent = pack.buttons.jp;
  document.getElementById("mJumpHub").textContent = pack.buttons.jh;

  function persist(){
    try{ localStorage.setItem("gd_style", style); localStorage.setItem("gd_time", time); }catch(e){}
  }

  function setLensLabels(){
    styleChip.textContent = "STYLE: " + (style==="formal" ? pack.s.formal : pack.s.informal);
    chipConcept.textContent = pack.t.origin;
    chipLive.textContent = pack.t.now;
    chipRoadmap.textContent = pack.t.post;

    chipConcept.classList.toggle("active", time==="origin");
    chipLive.classList.toggle("active", time==="now");
    chipRoadmap.classList.toggle("active", time==="post");
  }

  let activeItem = null;

  function fillBox(hEl,pEl,uEl,block){
    hEl.textContent = block.h;
    pEl.textContent = block.p;
    uEl.innerHTML = "";
    (block.u||[]).forEach(x=>{
      const li=document.createElement("li");
      li.textContent=x;
      uEl.appendChild(li);
    });
  }

  function renderModal(){
    if(!activeItem) return;
    setLensLabels();
    persist();
    setDock();

    const b = activeItem.blocks[time][style];
    fillBox(h1,p1,u1,b.b1);
    fillBox(h2,p2,u2,b.b2);
    fillBox(h3,p3,u3,b.b3);
    fillBox(h4,p4,u4,b.b4);
  }

  function openItem(it){
    activeItem = it;
    mTitle.textContent = it.cardTitle;
    renderModal();
    bd.classList.add("show");
    modal.classList.add("show");
  }

  function close(){
    bd.classList.remove("show");
    modal.classList.remove("show");
    activeItem = null;
  }

  // Build the software grid (starter 4)
  const grid=document.getElementById("grid");
  pack.items.forEach(it=>{
    const el=document.createElement("div");
    el.className="bubble";
    el.innerHTML = `<div class="bt">${it.cardTitle}</div><p class="bs">${it.cardSentence}</p>`;
    el.addEventListener("click", ()=>openItem(it));
    grid.appendChild(el);
  });

  // Lens handlers
  styleChip.addEventListener("click", ()=>{ style = (style==="formal") ? "informal" : "formal"; renderModal(); });
  chipConcept.addEventListener("click", ()=>{ time="origin"; renderModal(); });
  chipLive.addEventListener("click", ()=>{ time="now"; renderModal(); });
  chipRoadmap.addEventListener("click", ()=>{ time="post"; renderModal(); });

  // Close handlers
  bd.addEventListener("click", close);
  mClose.addEventListener("click", close);
  mBack.addEventListener("click", close);

  // init
  setDock();
  setLensLabels();
  persist();
})();
</script>

</body>
</html>
