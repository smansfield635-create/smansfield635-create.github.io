<!-- TNT — /door/index.html
     DOOR · INTRO (DIAMOND GATE BRIDGE) · 3 LANG (EN/中文/ES) · CONTRAST LOCK
     PURPOSE:
       - This replaces the current /door/ compass.
       - It is the canonical introductory page (Diamond Gate Bridge).
       - It orients so well that Prelude becomes optional, not required.
     ROUTES (AFTER YOUR SHIFT-DOWN):
       - COMPASS (old door)   → /index.html
       - PRELUDE (gateway)    → /prelude/
       - ENTER (hub)          → /home/
       - ROOT (return)        → /
     RULES:
       - 3 language toggle (EN/中文/ES)
       - High contrast (no red-on-red readability failures)
       - No modals. No overlays. No onclick. Tap-safe.
       - Preserves gd_* state via URL + localStorage
       - Uses ui.css/branch.css/instruments.js only
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DIAMOND GATE BRIDGE</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
a{color:inherit;text-decoration:none}

/* keep ui.css field overlays behind */
body{position:relative;z-index:0}
body::before, body::after{z-index:0 !important;pointer-events:none !important}
#root{position:relative;z-index:10}

:root{
  --obsA:rgba(12,22,38,.95);
  --obsB:rgba(6,10,16,.98);
  --panel:rgba(0,0,0,.22);
  --stroke:rgba(255,255,255,.12);
  --stroke2:rgba(255,255,255,.10);
}

/* top (no wrap) */
.top{
  position:fixed;top:16px;left:0;right:0;
  padding:0 16px;
  display:flex;align-items:center;justify-content:space-between;
  gap:12px;
  z-index:240;
  pointer-events:none;
}
.top .left,.top .right{
  display:flex;align-items:center;gap:10px;
  flex-wrap:nowrap;white-space:nowrap;
  pointer-events:auto;
}
.top .btn{white-space:nowrap}

/* page */
.page{
  width:min(1100px,94vw);
  margin:0 auto;
  padding:84px 0 26px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

/* hero */
.hero{
  border-radius:26px;
  border:1px solid rgba(255,255,255,.14);
  background:
    radial-gradient(circle at 20% 30%, rgba(210,190,255,.18), transparent 72%),
    radial-gradient(circle at 82% 66%, rgba(120,70,255,.14), transparent 74%),
    linear-gradient(160deg, rgba(0,0,0,.34), rgba(0,0,0,.16));
  backdrop-filter:blur(12px);
  box-shadow:0 34px 120px rgba(0,0,0,.55);
  padding:18px 18px 16px;
}

.k{
  margin:0 0 6px;
  font-size:11px;
  letter-spacing:4px;
  text-transform:uppercase;
  opacity:.78;
}
.h1{
  margin:0;
  font-weight:950;
  font-size:30px;
  letter-spacing:1.2px;
  line-height:1.12;
}
.p{
  margin:10px 0 0;
  font-size:14px;
  opacity:.90;
  line-height:1.5;
  max-width:980px;
}
.rule{
  margin:12px 0 0;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.14);
  font-size:12.75px;
  color:rgba(255,255,255,.84);
  line-height:1.45;
}

/* three choice cards */
.grid{
  display:grid;
  grid-template-columns:repeat(3, minmax(0,1fr));
  gap:14px;
}
@media (max-width:920px){
  .grid{grid-template-columns:1fr}
}

.card{
  border-radius:22px;
  border:1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(circle at 22% 18%, rgba(255,255,255,.10), transparent 58%),
    linear-gradient(160deg, rgba(12,22,38,.88), rgba(6,10,16,.92));
  box-shadow:0 22px 72px rgba(0,0,0,.55), inset 0 2px 0 rgba(255,255,255,.06);
  padding:16px 16px 14px;
}

.card .ct{
  margin:0;
  font-weight:950;
  letter-spacing:.6px;
  font-size:18px;
}
.card .cs{
  margin:8px 0 0;
  font-size:13.25px;
  line-height:1.45;
  color:rgba(255,255,255,.86);
}
.card .mini{
  margin:10px 0 0;
  font-size:12.25px;
  line-height:1.45;
  color:rgba(255,255,255,.74);
}
.card .actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
  margin-top:12px;
}
.card .actions .btn{
  border-radius:999px;
  padding:10px 14px;
}

/* how-it-works blocks */
.band{
  padding:10px 12px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.12);
  font-weight:950;
  letter-spacing:.2px;
  color:rgba(255,255,255,.88);
}
.block{
  border-radius:22px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.18);
  backdrop-filter:blur(10px);
  box-shadow:0 18px 60px rgba(0,0,0,.40);
  padding:14px 14px 12px;
}
.block .bh{
  margin:0;
  font-weight:950;
  font-size:15.5px;
  letter-spacing:.4px;
}
.block .bp{
  margin:10px 0 0;
  font-size:13.25px;
  line-height:1.55;
  color:rgba(255,255,255,.86);
}
.block .jump{
  margin-top:10px;
  display:flex;
  justify-content:flex-end;
}

.footer{
  margin-top:8px;
  text-align:center;
  font-size:12.5px;
  opacity:.78;
}
.sig{
  margin-top:6px;
  font-size:11px;
  letter-spacing:3px;
  opacity:.65;
}
</style>
</head>

<body>
<div id="root">

  <div class="top" aria-label="Top controls">
    <div class="left">
      <a class="btn" id="btnRoot" href="/">ROOT</a>
    </div>
    <div class="right" aria-label="Language">
      <button class="btn" id="btnEN" type="button">EN</button>
      <button class="btn" id="btnZH" type="button">中文</button>
      <button class="btn" id="btnES" type="button">ES</button>
    </div>
  </div>

  <div class="page">

    <div class="hero">
      <p class="k" id="k0">DIAMOND GATE BRIDGE</p>
      <h1 class="h1" id="h0">INTRO</h1>
      <p class="p" id="p0">
        This site is a structural interface. It does not sell belief.
        It keeps claims bounded and support checkable.
      </p>
      <div class="rule" id="r0">
        Rule: Claim must be supported. Support must be verifiable. Navigation preserves gd_* state.
      </div>
    </div>

    <div class="grid" aria-label="Entry choices">
      <div class="card">
        <h2 class="ct" id="c1t">PRELUDE</h2>
        <p class="cs" id="c1s">Gateway posture. Calm entry before traversal.</p>
        <p class="mini" id="c1m">Use this when you want an explanation-first start.</p>
        <div class="actions">
          <a class="btn" id="goPrelude" href="/prelude/">OPEN</a>
        </div>
      </div>

      <div class="card">
        <h2 class="ct" id="c2t">COMPASS</h2>
        <p class="cs" id="c2s">Choose a direction. Then enter.</p>
        <p class="mini" id="c2m">Use this when you want structured traversal (N/E/S/W).</p>
        <div class="actions">
          <a class="btn" id="goCompass" href="/index.html">OPEN</a>
        </div>
      </div>

      <div class="card">
        <h2 class="ct" id="c3t">ENTER</h2>
        <p class="cs" id="c3s">Primary hub. Move by function.</p>
        <p class="mini" id="c3m">Use this when you already know where you’re going.</p>
        <div class="actions">
          <a class="btn" id="goEnter" href="/home/">OPEN</a>
        </div>
      </div>
    </div>

    <div class="band" id="b1">HOW THIS WORKS</div>

    <div class="block">
      <div class="bh" id="bh1">Purpose definition</div>
      <div class="bp" id="bp1">
        Claims remain bounded to meaning. Support remains checkable. If a lens switch does not change content, it is a failure.
      </div>
      <div class="jump">
        <a class="btn" id="jumpCompassA" href="/index.html">JUMP: COMPASS</a>
      </div>
    </div>

    <div class="block">
      <div class="bh" id="bh2">Fast navigation</div>
      <div class="bp" id="bp2">
        Prelude → Compass → Direction. Enter bypasses Prelude. Everything preserves state.
      </div>
      <div class="jump">
        <a class="btn" id="jumpPreludeA" href="/prelude/">JUMP: PRELUDE</a>
      </div>
    </div>

    <div class="block">
      <div class="bh" id="bh3">Claim vs support</div>
      <div class="bp" id="bp3">
        Claim includes problem and offer. Support includes assistance and verification. The interface keeps them distinct on purpose.
      </div>
      <div class="jump">
        <a class="btn" id="jumpEnterA" href="/home/">JUMP: ENTER</a>
      </div>
    </div>

    <div class="footer">
      <span id="f0">Orientation is the product.</span>
      <div class="sig">DIAMONDGATEBRIDGE.COM</div>
    </div>

  </div>
</div>

<script>
(function(){
  // ----- state -----
  var qs=new URLSearchParams(location.search);
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var style = qs.get("style") || localStorage.getItem("gd_style") || "formal";
  var time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  var depth = qs.get("depth") || localStorage.getItem("gd_depth") || "explore";

  if(lang!=="en" && lang!=="zh" && lang!=="es") lang="en";
  if(style!=="formal" && style!=="informal") style="formal";
  if(time==="trajectory") time="post";
  if(time!=="origin" && time!=="now" && time!=="post") time="now";
  if(depth!=="explore" && depth!=="learn") depth="explore";

  try{
    localStorage.setItem("gd_lang",lang);
    localStorage.setItem("gd_style",style);
    localStorage.setItem("gd_time",time);
    localStorage.setItem("gd_depth",depth);
  }catch(e){}

  document.documentElement.lang=(lang==="zh")?"zh":(lang==="es")?"es":"en";

  function q(){
    return "?lang="+encodeURIComponent(lang)+
           "&style="+encodeURIComponent(style)+
           "&time="+encodeURIComponent(time)+
           "&depth="+encodeURIComponent(depth);
  }

  // wire links with state
  function wire(id, path){
    var el=document.getElementById(id);
    if(el) el.href = path + q();
  }
  wire("btnRoot","/");
  wire("goPrelude","/prelude/");
  wire("goCompass","/index.html");
  wire("goEnter","/home/");
  wire("jumpCompassA","/index.html");
  wire("jumpPreludeA","/prelude/");
  wire("jumpEnterA","/home/");

  // language buttons
  var btnEN=document.getElementById("btnEN");
  var btnZH=document.getElementById("btnZH");
  var btnES=document.getElementById("btnES");

  function paintLang(){
    btnEN.classList.toggle("active", lang==="en");
    btnZH.classList.toggle("active", lang==="zh");
    btnES.classList.toggle("active", lang==="es");
  }
  paintLang();

  function setLang(next){
    if(next!=="en" && next!=="zh" && next!=="es") next="en";
    lang=next;
    try{ localStorage.setItem("gd_lang",lang); }catch(e){}
    location.href="/door/"+q();
  }
  btnEN.addEventListener("click", function(){ setLang("en"); });
  btnZH.addEventListener("click", function(){ setLang("zh"); });
  btnES.addEventListener("click", function(){ setLang("es"); });

  // i18n (page-only; no external file dependency)
  function T(en, zh, es){ return (lang==="zh")?zh:(lang==="es")?es:en; }

  document.getElementById("h0").textContent = T("INTRO","介绍","INTRO");
  document.getElementById("p0").textContent = T(
    "This site is a structural interface. It does not sell belief. It keeps claims bounded and support checkable.",
    "这是一个结构型界面。它不出售信仰。它让主张有界、让支撑可核查。",
    "Este es un interfaz estructural. No vende creencias. Mantiene las afirmaciones acotadas y el soporte verificable."
  );
  document.getElementById("r0").textContent = T(
    "Rule: Claim must be supported. Support must be verifiable. Navigation preserves gd_* state.",
    "规则：主张必须有支撑。支撑必须可验证。导航会保留 gd_* 状态。",
    "Regla: la afirmación debe estar respaldada. El soporte debe ser verificable. La navegación preserva el estado gd_*."
  );

  document.getElementById("c1t").textContent = T("PRELUDE","前置页","PRELUDIO");
  document.getElementById("c1s").textContent = T(
    "Gateway posture. Calm entry before traversal.",
    "入口姿态：先导览，再进入遍历。",
    "Postura de entrada. Entrada tranquila antes del recorrido."
  );
  document.getElementById("c1m").textContent = T(
    "Use this when you want an explanation-first start.",
    "想先看解释就从这里开始。",
    "Úsalo si quieres empezar con explicación."
  );

  document.getElementById("c2t").textContent = T("COMPASS","指南针","BRÚJULA");
  document.getElementById("c2s").textContent = T(
    "Choose a direction. Then enter.",
    "先选方向，再进入。",
    "Elige una dirección. Luego entra."
  );
  document.getElementById("c2m").textContent = T(
    "Use this when you want structured traversal (N/E/S/W).",
    "想按结构遍历（N/E/S/W）就用这个。",
    "Úsalo si quieres recorrido estructurado (N/E/S/O)."
  );

  document.getElementById("c3t").textContent = T("ENTER","进入","ENTRAR");
  document.getElementById("c3s").textContent = T(
    "Primary hub. Move by function.",
    "主枢纽：按功能移动。",
    "Hub principal. Muévete por función."
  );
  document.getElementById("c3m").textContent = T(
    "Use this when you already know where you’re going.",
    "已经知道去哪里就直接进。",
    "Úsalo si ya sabes a dónde vas."
  );

  document.getElementById("b1").textContent = T("HOW THIS WORKS","这个网站怎么用","CÓMO FUNCIONA");

  document.getElementById("bh1").textContent = T("Purpose definition","目的定义","Definición de propósito");
  document.getElementById("bp1").textContent = T(
    "Claims remain bounded to meaning. Support remains checkable. If a lens switch does not change content, it is a failure.",
    "主张必须绑定含义。支撑必须可核查。若切换透镜内容不变，则失败。",
    "Las afirmaciones quedan acotadas al significado. El soporte es verificable. Si cambiar lente no cambia contenido, es un fallo."
  );

  document.getElementById("bh2").textContent = T("Fast navigation","快速导航","Navegación rápida");
  document.getElementById("bp2").textContent = T(
    "Prelude → Compass → Direction. Enter bypasses Prelude. Everything preserves state.",
    "前置页 → 指南针 → 方向。进入可跳过前置页。所有跳转保留状态。",
    "Preludio → Brújula → Dirección. Entrar evita el preludio. Todo preserva el estado."
  );

  document.getElementById("bh3").textContent = T("Claim vs support","主张 vs 支撑","Afirmación vs soporte");
  document.getElementById("bp3").textContent = T(
    "Claim includes problem and offer. Support includes assistance and verification. The interface keeps them distinct on purpose.",
    "主张包含问题与提供。支撑包含协助与验证。界面刻意保持区分。",
    "La afirmación incluye problema y oferta. El soporte incluye asistencia y verificación. El interfaz los separa a propósito."
  );

  document.getElementById("jumpCompassA").textContent = T("JUMP: COMPASS","跳转：指南针","SALTAR: BRÚJULA");
  document.getElementById("jumpPreludeA").textContent = T("JUMP: PRELUDE","跳转：前置页","SALTAR: PRELUDIO");
  document.getElementById("jumpEnterA").textContent = T("JUMP: ENTER","跳转：进入","SALTAR: ENTRAR");

  document.getElementById("f0").textContent = T("Orientation is the product.","导览就是产品。","La orientación es el producto.");

})();
</script>

</body>
</html>
