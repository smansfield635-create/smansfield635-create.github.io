<!-- TNT FILE: /home/index.html  (FULL REPLACEMENT)
     HOME = Engine
     - Language: single-language rendering only
     - Depth (from storage): explore shows Experience Compass; learn shows Hub Compass
     - Lenses (shown only on Home):
         SCOPE256: Origin / Now / Trajectory
         EXPRESSION: Formal / Informal (1001)
         CONTRAST: Standard / Collapse
     - No depth toggle here (depth is chosen earlier)
     - No language toggle here (chosen earlier)
-->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>CRP ¬∑ SCOPE256</title>

<link rel="stylesheet" href="/assets/ui.css?v=9500"/>
<link rel="stylesheet" href="/assets/branch.css?v=9500"/>

<style>
body{
  background:
    radial-gradient(1400px 900px at 50% 12%, rgba(150,0,0,.38) 0%, rgba(20,0,0,.20) 42%, rgba(5,7,12,1) 100%),
    radial-gradient(1400px 900px at 50% 18%, #152532 0%, #0b1620 50%, #05070c 100%);
}

.page{padding:40px 16px 88px}
.wrap{width:min(980px,94vw);margin:0 auto;display:flex;flex-direction:column;gap:14px}

.hero{position:relative;z-index:20;text-align:left}
.hero h1{font-size:clamp(34px,5.8vw,54px);margin:0;font-weight:950;letter-spacing:.02em;text-transform:uppercase}
.hero h2{margin:10px 0 0;opacity:.85;font-size:14px;letter-spacing:.22em;text-transform:uppercase}
.hero p{margin:12px 0 0;opacity:.80;font-size:15px;line-height:1.45;max-width:72ch}

.lensbar{position:relative;z-index:20;display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
.pill{
  border-radius:999px;
  padding:10px 14px;
  background:rgba(255,255,255,.06);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);
  font-weight:900;
  letter-spacing:.10em;
  text-transform:uppercase;
  font-size:12px;
  opacity:.92;
  color:inherit;
  text-decoration:none;
  user-select:none;
  -webkit-tap-highlight-color:transparent;
  display:inline-flex;
  align-items:center;
  gap:10px;
}
.pill .label{opacity:.70;letter-spacing:.14em}
.pill.btn{cursor:pointer}
.pill.btn:hover{background:rgba(255,255,255,.08)}
.pill.active{background:rgba(255,255,255,.12);box-shadow:inset 0 0 0 1px rgba(255,255,255,.16)}
.pill.readonly{cursor:default;opacity:.88}

.section-title{margin-top:10px;font-weight:900;letter-spacing:.18em;opacity:.72;font-size:12px;text-transform:uppercase}

/* Compass experience plate (Explore) */
.experience{
  border-radius:22px;
  background:rgba(255,255,255,.05);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.10),0 20px 60px rgba(0,0,0,.45);
  backdrop-filter:blur(12px);
  overflow:hidden;
  padding:16px;
}
.exp-grid{display:grid;grid-template-columns:1fr;gap:10px}
@media(min-width:720px){.exp-grid{grid-template-columns:1fr 1fr}}
.exp-card{
  border-radius:18px;
  background:rgba(0,0,0,.22);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
  padding:14px;
}
.exp-card b{display:block;letter-spacing:.14em;text-transform:uppercase}
.exp-card p{margin:10px 0 0;opacity:.82;line-height:1.55}
.exp-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.btnlink{
  border-radius:999px;
  padding:12px 16px;
  background:rgba(255,255,255,.06);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);
  font-weight:900;letter-spacing:.12em;text-transform:uppercase;font-size:12px;
  text-decoration:none;color:inherit;
}
.btnlink.primary{
  background:rgba(150,0,0,.25);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.14),0 18px 50px rgba(0,0,0,.35);
}

/* Learn Hub (quadrants) */
details.quad{
  border-radius:22px;
  background:rgba(255,255,255,.05);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.10),0 20px 60px rgba(0,0,0,.45);
  backdrop-filter:blur(12px);
  overflow:hidden;
}
details.quad + details.quad{margin-top:12px}
details.quad summary{
  list-style:none;cursor:pointer;padding:16px;
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  -webkit-tap-highlight-color:transparent;
}
details.quad summary::-webkit-details-marker{display:none}
.q-left{display:flex;align-items:center;gap:12px;min-width:0}
.q-badge{width:64px;height:44px;border-radius:18px;background:rgba(150,0,0,.22);box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);display:flex;align-items:center;justify-content:center;font-weight:950;letter-spacing:.12em;flex:0 0 auto}
.q-badge .sym{opacity:.9;margin-right:6px}
.q-text{min-width:0}
.q-text b{display:block;font-size:18px;letter-spacing:.14em;text-transform:uppercase}
.q-text span{display:block;opacity:.72;margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.q-arrow{width:42px;height:42px;border-radius:999px;background:rgba(255,255,255,.06);box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);display:flex;align-items:center;justify-content:center;opacity:.9;font-weight:900}
.inside{padding:0 16px 16px}

.bubble-row{display:grid;grid-template-columns:1fr;gap:10px;margin-top:4px}
@media(min-width:720px){.bubble-row{grid-template-columns:1fr 1fr}}
.bubble-btn{border-radius:18px;background:rgba(0,0,0,.22);box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);padding:12px;display:flex;align-items:center;justify-content:space-between;gap:12px;cursor:pointer;user-select:none}
.bubble-btn b{display:block;font-size:13px;letter-spacing:.14em;text-transform:uppercase}
.bubble-btn i{display:block;font-style:normal;opacity:.72;font-size:12px;margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.bubble-btn .go{width:40px;height:40px;border-radius:999px;background:rgba(255,255,255,.06);box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);display:flex;align-items:center;justify-content:center;opacity:.9;font-weight:900}
.blockmap{margin-top:12px;border-radius:20px;background:rgba(255,255,255,.04);box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);padding:14px}
.bm-title{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
.bm-title b{font-size:12px;letter-spacing:.18em;text-transform:uppercase;opacity:.85}
.bm-title span{font-size:12px;opacity:.65;letter-spacing:.10em;text-transform:uppercase}
.block{display:none;border-radius:18px;background:rgba(0,0,0,.22);box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);padding:14px}
.block.active{display:block}
.block h3{margin:0;font-size:16px;letter-spacing:.10em;text-transform:uppercase}
.block p{margin:10px 0 0;opacity:.82;line-height:1.55}

.pane{display:none;margin-top:10px}
.pane.active{display:block}
.scopePane{display:none;margin-top:10px}
.scopePane.active{display:block}
.contrastPane{display:none;margin-top:10px}
.contrastPane.active{display:block}

.jump-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.jump{border-radius:999px;padding:12px 16px;background:rgba(255,255,255,.06);box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);font-weight:900;letter-spacing:.12em;text-transform:uppercase;font-size:12px;color:inherit;text-decoration:none}

.plate-wrap{margin-top:16px;display:flex;flex-direction:column;align-items:center;gap:10px}
.plate-title{text-align:center;font-weight:900;letter-spacing:.18em;opacity:.72;font-size:12px;text-transform:uppercase}
.ink{margin-top:10px;text-align:center;letter-spacing:.22em;font-weight:900;opacity:.38;font-size:12px;text-transform:uppercase}
footer{margin-top:18px;text-align:center;opacity:.55;letter-spacing:3px;font-size:12px}
</style>
</head>

<body data-lang="en" data-depth="explore" data-scope="now" data-expr="formal" data-contrast="standard">
<div class="shooting-stars"></div>

<div class="page">
  <div class="wrap">

    <div class="hero">
      <h1 id="T_H1">COHERENT RESOLUTION PLATFORM</h1>
      <h2 id="T_H2">SCOPE256 ¬∑ ENGINE</h2>
      <p id="T_H3">Explore is the surface. Learn is the structure.</p>

      <div class="lensbar">
        <span class="pill readonly"><span class="label" id="L1">LANG</span> <span id="LANG_READ">EN</span></span>
        <span class="pill readonly"><span class="label" id="L2">DEPTH</span> <span id="DEPTH_READ">EXPLORE</span></span>

        <span class="pill"><span class="label" id="L3">SCOPE256</span>
          <button class="pill btn" type="button" data-scope-set="origin">ORIGIN</button>
          <button class="pill btn active" type="button" data-scope-set="now">NOW</button>
          <button class="pill btn" type="button" data-scope-set="trajectory">TRAJECTORY</button>
        </span>

        <span class="pill"><span class="label" id="L4">EXPR</span>
          <button class="pill btn active" type="button" data-expr-set="formal">FORMAL</button>
          <button class="pill btn" type="button" data-expr-set="informal">INFORMAL</button>
        </span>

        <span class="pill"><span class="label" id="L5">CONTRAST</span>
          <button class="pill btn active" type="button" data-contrast-set="standard">STANDARD</button>
          <button class="pill btn" type="button" data-contrast-set="collapse">COLLAPSE</button>
        </span>

        <a class="pill btn" href="/" id="BTN_TERM">TERMINAL</a>
        <a class="pill btn" href="/door/" id="BTN_DOOR">DOOR</a>
      </div>
    </div>

    <!-- EXPLORE SURFACE -->
    <div id="EXPLORE_VIEW">
      <div class="section-title" id="EXP_TITLE">Compass Field (Explore)</div>
      <div class="experience">
        <div class="exp-grid">
          <div class="exp-card"><b>‚≠ê NORTH</b><p id="EX_N">Define where you stand. Identify the anchor.</p></div>
          <div class="exp-card"><b>‚òÄ EAST</b><p id="EX_E">Name what you are doing. Identify the action.</p></div>
          <div class="exp-card"><b>üåÖ SOUTH</b><p id="EX_S">Check what happened. Identify the result.</p></div>
          <div class="exp-card"><b>üåá WEST</b><p id="EX_W">Record what accumulated. Identify the memory.</p></div>
        </div>
        <div class="exp-actions">
          <a class="btnlink" href="/rgsc/" id="EX_TRY">TRY RGSC</a>
          <a class="btnlink primary" href="#" id="EX_GO_DEEPER">GO DEEPER</a>
        </div>
      </div>
    </div>

    <!-- LEARN HUB -->
    <div id="LEARN_VIEW" style="display:none">
      <div class="section-title" id="LEARN_TITLE">Compass Hub (Learn)</div>

      <!-- One quadrant example (NW) to keep it stable; you can replicate later -->
      <details class="quad" id="Q_NW">
        <summary>
          <div class="q-left">
            <div class="q-badge"><span class="sym">‚≠ê</span><span>NW</span></div>
            <div class="q-text"><b>Northwest</b><span>Anchor ¬∑ language ¬∑ structure</span></div>
          </div>
          <div class="q-arrow">‚ñæ</div>
        </summary>
        <div class="inside">
          <div class="bubble-row">
            <div class="bubble-btn" data-block="nw-ssg"><div><b>SSG</b><i>constraint language</i></div><div class="go">‚ñ∏</div></div>
            <div class="bubble-btn" data-block="nw-grammar"><div><b>Grammar</b><i>4 routes</i></div><div class="go">‚ñ∏</div></div>
            <div class="bubble-btn" data-block="nw-dot"><div><b>DOT.GRID</b><i>256 indexing</i></div><div class="go">‚ñ∏</div></div>
            <div class="bubble-btn" data-block="nw-abc"><div><b>Acronyms</b><i>term map</i></div><div class="go">‚ñ∏</div></div>
          </div>

          <div class="blockmap">
            <div class="bm-title"><b>Block Map</b><span>Tap a bubble to load</span></div>

            <div class="block active" id="nw-ssg">
              <h3>SSG</h3>
              <div class="pane" data-pane="formal"><p>Formal: Resources/Stores/Constraints/Goals/Guards; receipt-gated advancement.</p></div>
              <div class="pane" data-pane="informal"><p>Informal: say it in simple words; keep meaning fixed.</p></div>

              <div class="scopePane" data-scope="origin"><p>Origin: without constraints, meaning drifts.</p></div>
              <div class="scopePane" data-scope="now"><p>Now: receipts + constraints make execution replay-safe.</p></div>
              <div class="scopePane" data-scope="trajectory"><p>Trajectory: constraint-native specs scale without reinterpretation.</p></div>

              <div class="contrastPane" data-contrast="standard"><p>Standard: coherence preserved under load.</p></div>
              <div class="contrastPane" data-contrast="collapse"><p>Collapse: hidden acceleration + hidden accumulation crosses threshold.</p></div>
            </div>

            <div class="block" id="nw-grammar"><h3>Grammar</h3><div class="pane" data-pane="formal"><p>Formal: one choice; hub-first return.</p></div><div class="pane" data-pane="informal"><p>Informal: pick one path, finish, return.</p></div><div class="scopePane" data-scope="now"><p>Now: navigation prevents drift.</p></div><div class="contrastPane" data-contrast="collapse"><p>Collapse: stacked paths amplify fragmentation.</p></div></div>
            <div class="block" id="nw-dot"><h3>DOT.GRID</h3><div class="pane" data-pane="formal"><p>Formal: deterministic state indexing.</p></div><div class="pane" data-pane="informal"><p>Informal: label where you are so others can replay.</p></div><div class="scopePane" data-scope="now"><p>Now: stable IDs enable agreement.</p></div><div class="contrastPane" data-contrast="collapse"><p>Collapse: ambiguous labels block reproduction.</p></div></div>
            <div class="block" id="nw-abc"><h3>Acronyms</h3><div class="pane" data-pane="formal"><p>Formal: pillarized glossary.</p></div><div class="pane" data-pane="informal"><p>Informal: same word, same meaning.</p></div><div class="scopePane" data-scope="now"><p>Now: canonical terms reduce confusion.</p></div><div class="contrastPane" data-contrast="collapse"><p>Collapse: definitional drift breaks coordination.</p></div></div>
          </div>

          <div class="jump-row">
            <a class="jump" href="/laws/">JUMP ¬∑ LAWS</a>
            <a class="jump" href="/laws/categories/">JUMP ¬∑ CATEGORIES</a>
          </div>
        </div>
      </details>
    </div>

    <div class="plate-wrap">
      <div class="plate-title">Cardinal Plate (N / E / S / W)</div>
      <div class="stage">
        <div class="platform">
          <a class="diamond top" href="/laws/"><span>N<small>LAWS</small></span></a>
          <a class="diamond right" href="/products/"><span>E<small>PRODUCTS</small></span></a>
          <a class="diamond bottom" href="/gauges/"><span>S<small>GAUGES</small></span></a>
          <a class="diamond left" href="/links/"><span>W<small>LINKS</small></span></a>
          <a class="diamond mini mini-left" href="/"><span><small>TERMINAL</small></span></a>
          <a class="diamond mini mini-right" href="/rgsc/"><span><small>RGSC</small></span></a>
        </div>
      </div>
      <div class="ink">GEODIAMETRICS</div>
    </div>

    <footer>CANONICAL ¬∑ STABLE ¬∑ ¬© GEODIAMETRICS</footer>

  </div>
</div>

<script>
(function(){
  const K_LANG="gd_lang", K_DEPTH="gd_depth", K_SCOPE="gd_scope", K_EXPR="gd_expr", K_CONTRAST="gd_contrast";

  function read(k,d){ try{ return (localStorage.getItem(k) || d); }catch(e){ return d; } }
  function write(k,v){ try{ localStorage.setItem(k,v); }catch(e){} }

  const st = {
    lang: (read(K_LANG,"en").toLowerCase()==="zh") ? "zh" : "en",
    depth: (function(){ let v=read(K_DEPTH,"explore").toLowerCase(); if(v==="shop") v="explore"; return (v==="learn")?"learn":"explore"; })(),
    scope: (function(){ let v=read(K_SCOPE,"now").toLowerCase(); return (v==="origin"||v==="now"||v==="trajectory")?v:"now"; })(),
    expr: (function(){ let v=read(K_EXPR,"formal").toLowerCase(); return (v==="informal")?"informal":"formal"; })(),
    contrast: (function(){ let v=read(K_CONTRAST,"standard").toLowerCase(); return (v==="collapse")?"collapse":"standard"; })()
  };

  function singleLanguage(){
    // Swap UI copy strictly; no mixed language on screen
    document.documentElement.lang = (st.lang==="zh") ? "zh-Hans" : "en";
    document.getElementById("LANG_READ").textContent = (st.lang==="zh") ? "‰∏≠Êñá" : "EN";
    document.getElementById("DEPTH_READ").textContent = st.depth.toUpperCase();

    if(st.lang==="zh"){
      document.getElementById("T_H2").textContent = "SCOPE256 ¬∑ ÂºïÊìé";
      document.getElementById("T_H3").textContent = "ÊµèËßà‰∏∫Ë°®Â±Ç„ÄÇÊ∑±Êåñ‰∏∫ÁªìÊûÑ„ÄÇ";
      document.getElementById("BTN_TERM").textContent = "ÁªàÁ´Ø";
      document.getElementById("BTN_DOOR").textContent = "ÂÖ•Âè£";
      document.getElementById("EXP_TITLE").textContent = "ÁΩóÁõòÂú∫ÔºàÊµèËßàÔºâ";
      document.getElementById("LEARN_TITLE").textContent = "ÁΩóÁõòÊû¢Á∫ΩÔºàÊ∑±ÊåñÔºâ";
      document.getElementById("EX_N").textContent = "ÂÆö‰πâ‰Ω†Á´ôÂú®Âì™Èáå„ÄÇÁ°ÆÂÆöÈîöÁÇπ„ÄÇ";
      document.getElementById("EX_E").textContent = "ÂëΩÂêç‰Ω†Âú®ÂÅö‰ªÄ‰πà„ÄÇÁ°ÆÂÆöË°åÂä®„ÄÇ";
      document.getElementById("EX_S").textContent = "Ê£ÄÊü•ÂèëÁîü‰∫Ü‰ªÄ‰πà„ÄÇÁ°ÆÂÆöÁªìÊûú„ÄÇ";
      document.getElementById("EX_W").textContent = "ËÆ∞ÂΩïÁ¥ØÁßØ‰∫Ü‰ªÄ‰πà„ÄÇÁ°ÆÂÆöËÆ∞ÂøÜ„ÄÇ";
      document.getElementById("EX_TRY").textContent = "ËØïÁî® RGSC";
      document.getElementById("EX_GO_DEEPER").textContent = "ÂéªÊ∑±Êåñ";
      document.getElementById("L1").textContent = "ËØ≠Ë®Ä";
      document.getElementById("L2").textContent = "Ê∑±Â∫¶";
      document.getElementById("L4").textContent = "Ë°®Ëææ";
      document.getElementById("L5").textContent = "ÂØπÊØî";
      document.querySelectorAll('[data-scope-set="origin"]')[0].textContent="Ê∫ê";
      document.querySelectorAll('[data-scope-set="now"]')[0].textContent="Áé∞";
      document.querySelectorAll('[data-scope-set="trajectory"]')[0].textContent="Âêë";
      document.querySelectorAll('[data-expr-set="formal"]')[0].textContent="Ê≠£Âºè";
      document.querySelectorAll('[data-expr-set="informal"]')[0].textContent="1001";
      document.querySelectorAll('[data-contrast-set="standard"]')[0].textContent="Á®≥ÂÆö";
      document.querySelectorAll('[data-contrast-set="collapse"]')[0].textContent="ÈòàÂÄº";
    }
  }

  function applyDepth(){
    // Explore shows Experience; Learn shows Hub
    const explore = document.getElementById("EXPLORE_VIEW");
    const learn = document.getElementById("LEARN_VIEW");
    if(st.depth==="learn"){ explore.style.display="none"; learn.style.display="block"; }
    else { explore.style.display="block"; learn.style.display="none"; }
  }

  function applyLensButtons(){
    document.querySelectorAll("[data-scope-set]").forEach(b=>b.classList.toggle("active", b.getAttribute("data-scope-set")===st.scope));
    document.querySelectorAll("[data-expr-set]").forEach(b=>b.classList.toggle("active", b.getAttribute("data-expr-set")===st.expr));
    document.querySelectorAll("[data-contrast-set]").forEach(b=>b.classList.toggle("active", b.getAttribute("data-contrast-set")===st.contrast));
  }

  function applyToActiveBlocks(){
    document.querySelectorAll(".block.active").forEach(block=>{
      block.querySelectorAll(".pane").forEach(p=>p.classList.toggle("active", p.getAttribute("data-pane")===st.expr));
      block.querySelectorAll(".scopePane").forEach(p=>p.classList.toggle("active", p.getAttribute("data-scope")===st.scope));
      block.querySelectorAll(".contrastPane").forEach(p=>p.classList.toggle("active", p.getAttribute("data-contrast")===st.contrast));
    });
  }

  function sync(){
    write(K_LANG, st.lang);
    write(K_DEPTH, st.depth);
    write(K_SCOPE, st.scope);
    write(K_EXPR, st.expr);
    write(K_CONTRAST, st.contrast);
    document.body.setAttribute("data-depth", st.depth);
    document.body.setAttribute("data-lang", st.lang);
    applyDepth();
    applyLensButtons();
    applyToActiveBlocks();
    singleLanguage();
  }

  document.querySelectorAll("[data-scope-set]").forEach(btn=>{
    btn.addEventListener("click", ()=>{ st.scope = btn.getAttribute("data-scope-set"); sync(); });
  });
  document.querySelectorAll("[data-expr-set]").forEach(btn=>{
    btn.addEventListener("click", ()=>{ st.expr = btn.getAttribute("data-expr-set"); sync(); });
  });
  document.querySelectorAll("[data-contrast-set]").forEach(btn=>{
    btn.addEventListener("click", ()=>{ st.contrast = btn.getAttribute("data-contrast-set"); sync(); });
  });

  // Explore ‚Üí Learn escalation
  document.getElementById("EX_GO_DEEPER").addEventListener("click", (e)=>{
    e.preventDefault();
    st.depth = "learn";
    sync();
    // open the first learn quadrant for convenience? NO. keep closed.
  });

  // Bubble -> block switching (learn hub)
  document.querySelectorAll(".bubble-btn").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const id = btn.getAttribute("data-block");
      const quad = btn.closest("details.quad");
      if(!quad) return;
      const map = quad.querySelector(".blockmap");
      if(!map) return;
      map.querySelectorAll(".block").forEach(b=>b.classList.remove("active"));
      const target = map.querySelector("#"+CSS.escape(id));
      if(target) target.classList.add("active");
      // apply lenses to new block
      applyToActiveBlocks();
      quad.open = true;
      if(window.innerWidth < 720) map.scrollIntoView({behavior:"smooth", block:"start"});
    });
  });

  // Initialize defaults if missing
  if(!localStorage.getItem(K_DEPTH)) write(K_DEPTH, "explore");
  if(!localStorage.getItem(K_SCOPE)) write(K_SCOPE, "now");
  if(!localStorage.getItem(K_EXPR)) write(K_EXPR, "formal");
  if(!localStorage.getItem(K_CONTRAST)) write(K_CONTRAST, "standard");

  // Close learn quadrants by default (no auto-open)
  document.querySelectorAll("details.quad").forEach(d=>d.open=false);

  sync();
})();
</script>
</body>
</html>
