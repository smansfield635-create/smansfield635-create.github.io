<!-- TNT — /explore/frontier/index.html  (EXPLORE · FRONTIER · 4 QUESTIONS · VERTICAL DIAMONDS · MODAL LENSES)
     PURPOSE:
       - Frontier hub that DOES NOT overload the face.
       - 4 vertical diamonds (tap-safe) = 4 questions:
           1) IF (Is it possible?)
           2) HOW (How could it be possible without cheating?)
           3) WHEN (What must be true before it becomes possible?)
           4) FIRST (What must be built first?)
       - Tap a diamond → ONE modal opens (no stacked doors).
       - Modal lenses ONLY inside modal:
           STYLE (gd_style): formal / informal
           TIME  (gd_time):  origin / now / post   (Concept / Live / Roadmap)
       - Modal content = 4 “jump cards” (no raw links): each card is a jump surface.
       - Bilingual:
           lang=en => EN only
           lang=zh => 中文 only
       - State propagation via ?lang=&style=&time= + localStorage gd_*
     LOCKS:
       - Uses /assets/ui.css + /assets/branch.css only
       - DOES NOT style html/body background (ui.css owns field)
       - No new state keys beyond gd_lang/gd_style/gd_time
       - Tap-safe: bind FIRST; overlay never blocks modal; no inline onclick reliance
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>EXPLORE · FRONTIER</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instrument.js"></script>

<style>
:root{
  --R:132px;
  --D:188px;

  /* Pearlescent lacquer (aligned with your good builds) */
  --goldSoft:rgba(212,175,55,.45);
  --obsA:rgba(12,22,38,.95);
  --obsB:rgba(6,10,16,.98);

  --mut: rgba(255,255,255,.90);
  --mut2: rgba(255,255,255,.74);
}

/* Base (no field paint) */
body{margin:0;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
a{color:inherit;text-decoration:none}

/* Top-left */
.top-left{
  position:fixed;left:16px;top:16px;z-index:120;
  display:flex;gap:10px;flex-wrap:wrap;align-items:center
}

/* Brand */
.brand{
  position:fixed;left:50%;top:16px;transform:translateX(-50%);
  z-index:110;text-align:center;
  padding:10px 18px;border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.18);
  pointer-events:none;
}
.brand .k{font-size:12px;letter-spacing:3px;text-transform:uppercase;opacity:.78;margin:0 0 6px 0}
.brand .t{font-weight:950;font-size:40px;letter-spacing:.3px;margin:0;line-height:1.02}
.brand .s{opacity:.85;font-size:13.5px;margin:6px 0 0}

/* Stage */
.stage{
  position:fixed;left:50%;top:54%;
  transform:translate(-50%,-50%);
  width:min(720px,94vw);
  height:min(720px,94vw);
  z-index:60;
  pointer-events:none;
}

/* Diamonds */
.d{
  width:var(--D);height:var(--D);
  position:absolute;left:50%;top:50%;
  transform-origin:center;
  border-radius:28px;
  cursor:pointer;
  pointer-events:auto;
  touch-action:manipulation;
  -webkit-tap-highlight-color:transparent;

  background:
    radial-gradient(circle at 30% 22%, rgba(255,255,255,.45), transparent 48%),
    radial-gradient(circle at 70% 78%, rgba(0,120,255,.25), transparent 60%),
    linear-gradient(160deg, var(--obsA), var(--obsB));

  border:1px solid rgba(255,255,255,.16);
  box-shadow:
    0 38px 120px rgba(0,0,0,.85),
    0 0 32px rgba(212,175,55,.22),
    inset 0 2px 0 rgba(255,255,255,.22),
    inset 0 -40px 72px rgba(0,0,0,.78);

  transition:transform .2s ease, box-shadow .2s ease, border-color .2s ease;
  overflow:hidden;
}
.d::before{
  content:"";
  position:absolute;inset:0;border-radius:28px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.60;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
  pointer-events:none;
}
.d::after{
  content:"";
  position:absolute;left:10%;right:10%;top:10%;height:28%;
  border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.22), rgba(255,255,255,0));
  transform:rotate(-10deg);
  pointer-events:none;
}
.d:hover{
  transform:translate(-50%,-50%) rotate(45deg) scale(1.02);
  border-color:rgba(212,175,55,.28);
}
.d:active{ transform:translate(-50%,-50%) rotate(45deg) scale(.99); }

/* vertical placement */
.d1{transform:translate(-50%,-50%) translate(0, calc(var(--R) * -1.30)) rotate(45deg)}
.d2{transform:translate(-50%,-50%) translate(0, calc(var(--R) * -0.43)) rotate(45deg)}
.d3{transform:translate(-50%,-50%) translate(0, calc(var(--R) *  0.43)) rotate(45deg)}
.d4{transform:translate(-50%,-50%) translate(0, calc(var(--R) *  1.30)) rotate(45deg)}

.inner{
  width:100%;height:100%;
  transform:rotate(-45deg);
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  text-align:center;
  padding:14px;
  gap:8px;
  pointer-events:none;
  user-select:none;
}
.lab{font-weight:950;font-size:18px;letter-spacing:.6px;text-shadow:0 0 18px rgba(255,255,255,.10)}
.sub{font-size:12.5px;opacity:.86;line-height:1.25;max-width:20em}

/* Dock */
.dock{
  position:fixed;left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:120;width:min(980px,94vw);
  display:flex;justify-content:center;gap:10px;flex-wrap:wrap;
  padding:10px 12px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.20);
  pointer-events:none;
}
.dock .crp-btn, .dock .btn{pointer-events:auto}

/* Overlay + modal */
.bd{
  position:fixed;inset:0;z-index:200;
  background:rgba(0,0,0,.70);
  display:none;
}
.bd.show{display:block}

.modal{
  position:fixed;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:min(1100px,96vw);
  max-height:90vh;
  z-index:210;
  display:none;
}
.modal.show{display:block}

.shell{
  background:linear-gradient(160deg, rgba(10,18,30,.96), rgba(6,10,16,.98));
  border:1px solid rgba(255,255,255,.12);
  border-radius:24px;
  box-shadow:0 60px 180px rgba(0,0,0,.85);
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

.mhead{
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 16px;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.mtitle{margin:0;font-weight:950;letter-spacing:.2px;font-size:16px}
.mclose{border:0;background:transparent;color:#fff;font-size:20px;cursor:pointer;padding:6px 10px}

.mbody{
  padding:14px 16px 18px;
  overflow:auto;-webkit-overflow-scrolling:touch;
}

/* Lenses INSIDE modal only */
.lensRow{
  max-width:980px;margin:0 auto 14px;
  display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center;
}
.pill{
  padding:10px 16px;border-radius:999px;
  background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.12);
  cursor:pointer;
  font-weight:900;
  letter-spacing:.2px;
  color:#fff;
  user-select:none;
}
.pill.active{
  border-color:rgba(212,175,55,.55);
  box-shadow:0 0 22px rgba(212,175,55,.18);
}

/* Header card */
.hcard{
  max-width:980px;margin:0 auto 14px;
  padding:12px 14px;border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.14);
  color:rgba(255,255,255,.86);
  line-height:1.35;
}
.hcard .h1{margin:0 0 4px;font-weight:950;font-size:14px}
.hcard .h2{margin:0;color:rgba(255,255,255,.86);line-height:1.45;font-size:12.5px}
.hcard .h3{margin:8px 0 0;color:rgba(255,255,255,.70);font-size:12px;line-height:1.35}

/* Jump cards */
.grid{
  max-width:980px;
  margin:0 auto;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:14px;
}
@media (max-width:720px){ .grid{grid-template-columns:1fr;} }

.card{
  position:relative;
  border-radius:20px;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,.18), transparent 48%),
    radial-gradient(circle at 70% 80%, rgba(0,120,255,.12), transparent 60%),
    linear-gradient(160deg, rgba(12,22,38,.88), rgba(6,10,16,.92));
  box-shadow:0 22px 72px rgba(0,0,0,.55), inset 0 2px 0 rgba(255,255,255,.06);
  padding:18px 16px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}
.card::before{
  content:"";
  position:absolute;inset:0;border-radius:20px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, rgba(212,175,55,.28) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude;
  pointer-events:none;
}
.ct{margin:0 0 6px;font-weight:950;letter-spacing:.2px;font-size:18px}
.cs{margin:0;opacity:.82;font-size:13px;line-height:1.35}

/* Footer */
.mact{
  max-width:980px;margin:16px auto 0;
  display:flex;gap:10px;flex-wrap:wrap;justify-content:center;
}

@media (max-width:560px){
  :root{--D:176px; --R:124px}
  .stage{top:55%}
}
</style>
</head>

<body>

<div class="top-left">
  <a class="crp-btn" id="btnExplore" href="/explore/">EXPLORE</a>
  <a class="crp-btn" id="btnExit" href="/door/">EXIT</a>
</div>

<div class="brand" aria-hidden="true">
  <p class="k" id="bk">CARDINAL AXIS</p>
  <h1 class="t" id="bt">FRONTIER</h1>
  <p class="s" id="bs">Bounded ambition · Jump surfaces</p>
</div>

<div class="stage" aria-label="Frontier questions">
  <div class="d d1" id="dIf" role="button" tabindex="0">
    <div class="inner">
      <div class="lab" id="labIf">IF</div>
      <div class="sub" id="subIf">Is it possible?</div>
    </div>
  </div>

  <div class="d d2" id="dHow" role="button" tabindex="0">
    <div class="inner">
      <div class="lab" id="labHow">HOW</div>
      <div class="sub" id="subHow">How could it be possible without cheating?</div>
    </div>
  </div>

  <div class="d d3" id="dWhen" role="button" tabindex="0">
    <div class="inner">
      <div class="lab" id="labWhen">WHEN</div>
      <div class="sub" id="subWhen">What must be true before it becomes possible?</div>
    </div>
  </div>

  <div class="d d4" id="dFirst" role="button" tabindex="0">
    <div class="inner">
      <div class="lab" id="labFirst">FIRST</div>
      <div class="sub" id="subFirst">What must be built first?</div>
    </div>
  </div>
</div>

<nav class="dock" aria-label="Bottom navigation">
  <a class="crp-btn" id="dockTerminal" href="/index.html">TERMINAL</a>
  <a class="crp-btn" id="dockHub" href="/home/">HUB</a>
  <a class="crp-btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="crp-btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="crp-btn" id="dockGauges" href="/gauges/">GAUGES</a>
</nav>

<div class="bd" id="bd"></div>

<div class="modal" id="modal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="mTitle">FRONTIER</h3>
      <button class="mclose" id="mClose" aria-label="Close" type="button">✕</button>
    </div>

    <div class="mbody">
      <div class="lensRow">
        <div class="pill" id="pillFormal">FORMAL</div>
        <div class="pill" id="pillInformal">INFORMAL</div>
        <div class="pill" id="pillConcept">CONCEPT</div>
        <div class="pill" id="pillLive">LIVE</div>
        <div class="pill" id="pillRoadmap">ROADMAP</div>
      </div>

      <div class="hcard">
        <div class="h1" id="h1">—</div>
        <div class="h2" id="h2">—</div>
        <div class="h3" id="h3">—</div>
      </div>

      <div class="grid" id="grid"></div>

      <div class="mact">
        <button class="crp-btn" id="mReturn" type="button">RETURN</button>
        <a class="crp-btn" id="mJumpExplore" href="/explore/">JUMP EXPLORE</a>
        <a class="crp-btn" id="mJumpEnergy" href="/products/energy/">JUMP ENERGY</a>
        <a class="crp-btn" id="mJumpReadiness" href="/explore/fusion-readiness/">FUSION READINESS</a>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  // ===== State hydration (gd_* only) =====
  var qs = new URLSearchParams(location.search);
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var gdStyle = qs.get("style") || localStorage.getItem("gd_style") || "formal";
  var gdTime  = qs.get("time")  || localStorage.getItem("gd_time")  || "origin";
  if(lang!=="en" && lang!=="zh") lang="en";
  if(gdStyle!=="formal" && gdStyle!=="informal") gdStyle="formal";
  if(gdTime==="trajectory") gdTime="post";
  if(gdTime!=="origin" && gdTime!=="now" && gdTime!=="post") gdTime="origin";
  try{ localStorage.setItem("gd_lang",lang); localStorage.setItem("gd_style",gdStyle); localStorage.setItem("gd_time",gdTime);}catch(e){}
  document.documentElement.lang = (lang==="zh") ? "zh" : "en";

  function q(){
    var p=new URLSearchParams();
    p.set("lang",lang); p.set("style",gdStyle); p.set("time",gdTime);
    return "?"+p.toString();
  }

  // wire nav
  document.getElementById("btnExplore").href="/explore/"+q();
  document.getElementById("btnExit").href="/door/"+q();
  document.getElementById("dockTerminal").href="/index.html"+q();
  document.getElementById("dockHub").href="/home/"+q();
  document.getElementById("dockProducts").href="/products/"+q();
  document.getElementById("dockLaws").href="/laws/"+q();
  document.getElementById("dockGauges").href="/gauges/"+q();

  document.getElementById("mJumpExplore").href="/explore/"+q();
  document.getElementById("mJumpEnergy").href="/products/energy/"+q();
  document.getElementById("mJumpReadiness").href="/explore/fusion-readiness/"+q();

  // i18n
  var UI = {
    en:{
      brand:{k:"CARDINAL AXIS", t:"FRONTIER", s:"Bounded ambition · Jump surfaces"},
      diamonds:{
        if:{lab:"IF", sub:"Is it possible?"},
        how:{lab:"HOW", sub:"How could it be possible without cheating?"},
        when:{lab:"WHEN", sub:"What must be true before it becomes possible?"},
        first:{lab:"FIRST", sub:"What must be built first?"}
      },
      lens:{formal:"FORMAL", informal:"INFORMAL", concept:"CONCEPT", live:"LIVE", roadmap:"ROADMAP"},
      buttons:{ret:"RETURN", ex:"JUMP EXPLORE", en:"JUMP ENERGY", fr:"FUSION READINESS"}
    },
    zh:{
      brand:{k:"基轴体系", t:"前沿", s:"有界雄心 · 跳转面"},
      diamonds:{
        if:{lab:"是否", sub:"它是否可能？"},
        how:{lab:"如何", sub:"如何在不作弊的前提下可能？"},
        when:{lab:"何时", sub:"在何种条件下才可能？"},
        first:{lab:"先做", sub:"必须先建什么？"}
      },
      lens:{formal:"正式", informal:"通俗", concept:"概念", live:"现况", roadmap:"路线图"},
      buttons:{ret:"返回", ex:"跳转探索", en:"跳转能源", fr:"聚变就绪"}
    }
  };
  var T = (lang==="zh") ? UI.zh : UI.en;

  document.getElementById("bk").textContent=T.brand.k;
  document.getElementById("bt").textContent=T.brand.t;
  document.getElementById("bs").textContent=T.brand.s;

  document.getElementById("labIf").textContent=T.diamonds.if.lab;
  document.getElementById("subIf").textContent=T.diamonds.if.sub;
  document.getElementById("labHow").textContent=T.diamonds.how.lab;
  document.getElementById("subHow").textContent=T.diamonds.how.sub;
  document.getElementById("labWhen").textContent=T.diamonds.when.lab;
  document.getElementById("subWhen").textContent=T.diamonds.when.sub;
  document.getElementById("labFirst").textContent=T.diamonds.first.lab;
  document.getElementById("subFirst").textContent=T.diamonds.first.sub;

  // modal refs
  var bd=document.getElementById("bd");
  var modal=document.getElementById("modal");
  var mClose=document.getElementById("mClose");
  var mReturn=document.getElementById("mReturn");
  var mTitle=document.getElementById("mTitle");

  var pillFormal=document.getElementById("pillFormal");
  var pillInformal=document.getElementById("pillInformal");
  var pillConcept=document.getElementById("pillConcept");
  var pillLive=document.getElementById("pillLive");
  var pillRoadmap=document.getElementById("pillRoadmap");

  var h1=document.getElementById("h1");
  var h2=document.getElementById("h2");
  var h3=document.getElementById("h3");
  var grid=document.getElementById("grid");

  pillFormal.textContent=T.lens.formal;
  pillInformal.textContent=T.lens.informal;
  pillConcept.textContent=T.lens.concept;
  pillLive.textContent=T.lens.live;
  pillRoadmap.textContent=T.lens.roadmap;

  mReturn.textContent=T.buttons.ret;
  document.getElementById("mJumpExplore").textContent=T.buttons.ex;
  document.getElementById("mJumpEnergy").textContent=T.buttons.en;
  document.getElementById("mJumpReadiness").textContent=T.buttons.fr;

  var active = "if";

  function setLensUI(){
    pillFormal.classList.toggle("active", gdStyle==="formal");
    pillInformal.classList.toggle("active", gdStyle==="informal");
    pillConcept.classList.toggle("active", gdTime==="origin");
    pillLive.classList.toggle("active", gdTime==="now");
    pillRoadmap.classList.toggle("active", gdTime==="post");
  }

  function card(title, sub, href){
    var el=document.createElement("div");
    el.className="card";
    el.setAttribute("role","button");
    el.setAttribute("tabindex","0");

    var t=document.createElement("div");
    t.className="ct";
    t.textContent=title;

    var s=document.createElement("div");
    s.className="cs";
    s.textContent=sub;

    el.appendChild(t); el.appendChild(s);

    function go(){
      if(!href) return;
      location.href = href + q();
    }
    el.addEventListener("click", go);
    el.addEventListener("keydown", function(e){
      if(e.key==="Enter"||e.key===" "){ e.preventDefault(); go(); }
    });

    return el;
  }

  function headerCopy(){
    var timeLab = (gdTime==="origin") ? T.lens.concept : (gdTime==="now") ? T.lens.live : T.lens.roadmap;
    var styleLab = (gdStyle==="formal") ? T.lens.formal : T.lens.informal;

    var map = {
      if: (lang==="zh")?("是否 · "+timeLab+" · "+styleLab):("IF · "+timeLab+" · "+styleLab),
      how:(lang==="zh")?("如何 · "+timeLab+" · "+styleLab):("HOW · "+timeLab+" · "+styleLab),
      when:(lang==="zh")?("何时 · "+timeLab+" · "+styleLab):("WHEN · "+timeLab+" · "+styleLab),
      first:(lang==="zh")?("先做 · "+timeLab+" · "+styleLab):("FIRST · "+timeLab+" · "+styleLab)
    };
    h1.textContent = map[active] || "FRONTIER";

    if(active==="if"){
      h2.textContent = (lang==="zh")
        ? "先判定“可不可能”。可行性不靠口号，而靠约束、证据与接口边界。"
        : "Start with possibility. Feasibility is not a slogan; it is constraints, evidence, and boundary interfaces.";
      h3.textContent = (lang==="zh")
        ? "前沿不等于承诺。它是有界的跳转与结构化路线。"
        : "Frontier is not a promise. It is bounded jump surfaces and structured routes.";
      return;
    }
    if(active==="how"){
      h2.textContent = (lang==="zh")
        ? "再问“怎么可能”。答案必须避免作弊：禁止凭叙事升级，必须可审计、可证伪、可回放。"
        : "Then ask how. The answer must avoid cheating: no narrative upgrades, auditability, falsifiers, and replayability.";
      h3.textContent = (lang==="zh")
        ? "如果不能被独立复算，就只能停留在概念层。"
        : "If it cannot be independently recomputed, it stays conceptual.";
      return;
    }
    if(active==="when"){
      h2.textContent = (lang==="zh")
        ? "再问“何时可能”。时间不是日期，而是一组必须先成立的门槛：仪器、收据、稳定性与治理。"
        : "Then ask when. ‘When’ is not a date; it is prerequisites: instruments, receipts, stability, governance.";
      h3.textContent = (lang==="zh")
        ? "门槛没过，就不允许把愿景写成现实。"
        : "If gates are not passed, vision cannot be written as reality.";
      return;
    }
    h2.textContent = (lang==="zh")
      ? "最后问“先做什么”。先建基底：语言与一致性标准，然后才有产品执行与前沿扩展。"
      : "Finally ask what comes first. Build substrate: language + coherence standards, then products, then frontier expansion.";
    h3.textContent = (lang==="zh")
      ? "先把“可执行”做出来，再把“宏大”带上去。"
      : "Make it executable first, then carry the ambition forward.";
  }

  function render(){
    setLensUI();
    headerCopy();
    grid.innerHTML="";

    if(active==="if"){
      grid.appendChild(card(
        (lang==="zh")?"能源：工业可行面":"Energy: industrial feasibility",
        (lang==="zh")?"工业等离子热替代（C）是可测的现实入口。":"Industrial plasma thermal substitution (C) is the measurable entry point.",
        "/products/energy/"
      ));
      grid.appendChild(card(
        (lang==="zh")?"聚变：就绪门槛":"Fusion: readiness gates",
        (lang==="zh")?"仅需求：仪器、收据、证伪、独立审计。":"Requirements-only: instruments, receipts, falsifiers, independent audit.",
        "/explore/fusion-readiness/"
      ));
      grid.appendChild(card(
        (lang==="zh")?"规则：标准与治理":"Rules: laws & governance",
        (lang==="zh")?"约束先行，防止规模化后才发现风险。":"Constraints first to prevent scale-before-safety.",
        "/laws/"
      ));
      grid.appendChild(card(
        (lang==="zh")?"测量：量规":"Measurement: gauges",
        (lang==="zh")?"让状态与变化可见，避免凭感觉升级。":"Make state and change visible; avoid ‘feel-based’ upgrades.",
        "/gauges/"
      ));
      return;
    }

    if(active==="how"){
      grid.appendChild(card(
        (lang==="zh")?"基底：语言创新枢纽":"Substrate: language hub",
        (lang==="zh")?"语法、SSG、DOT.GRID、缩略语：把执行写成结构。":"Grammar, SSG, DOT.GRID, acronyms: execution as structure.",
        "/explore/innovation/language/"
      ));
      grid.appendChild(card(
        (lang==="zh")?"DOT.GRID":"DOT.GRID",
        (lang==="zh")?"256态编码与扫掠，让证据可重放。":"256-state encoding and sweeps for replayable evidence.",
        "/explore/innovation/language/dot-grid/"
      ));
      grid.appendChild(card(
        (lang==="zh")?"SSG":"SSG",
        (lang==="zh")?"约束语法几何：把规则压缩成可执行文本。":"Constraint syntax geometry for executable rules.",
        "/explore/innovation/language/ssg/"
      ));
      grid.appendChild(card(
        (lang==="zh")?"能源：链路表达":"Energy: chain expression",
        (lang==="zh")?"把太阳→等离子→工业热替代写成可审计链路。":"Write solar→plasma→industrial heat as an auditable chain.",
        "/products/energy/"
      ));
      return;
    }

    if(active==="when"){
      grid.appendChild(card(
        (lang==="zh")?"门槛：聚变就绪":"Gate: fusion readiness",
        (lang==="zh")?"“何时”由门槛决定，不由日期决定。":"‘When’ is gate-dependent, not date-dependent.",
        "/explore/fusion-readiness/"
      ));
      grid.appendChild(card(
        (lang==="zh")?"治理：标准页":"Governance: laws",
        (lang==="zh")?"门槛必须写成规则：可证伪、可审计、可回滚。":"Gates must be rules: falsifiable, auditable, rollback-safe.",
        "/laws/"
      ));
      grid.appendChild(card(
        (lang==="zh")?"测量：量规":"Measurement: gauges",
        (lang==="zh")?"门槛必须可测，且噪声/伪象必须被压制。":"Gates must be measurable; noise/artifacts must be suppressed.",
        "/gauges/"
      ));
      grid.appendChild(card(
        (lang==="zh")?"产品：工业执行":"Products: industrial execution",
        (lang==="zh")?"可行性先在工业场景落地，再谈更远的前沿。":"Land feasibility in industrial reality before farther frontier.",
        "/products/"
      ));
      return;
    }

    // first
    grid.appendChild(card(
      (lang==="zh")?"第一步：基底":"Step 1: substrate",
      (lang==="zh")?"语言+一致性标准让系统可教、可复用、可审计。":"Language + coherence standards make the system teachable and auditable.",
      "/explore/innovation/language/"
    ));
    grid.appendChild(card(
      (lang==="zh")?"第二步：产品执行":"Step 2: products",
      (lang==="zh")?"把结构做成可用产品面：能源/教育/软件/商业。":"Turn structure into products: Energy/Education/Software/Commercial.",
      "/products/"
    ));
    grid.appendChild(card(
      (lang==="zh")?"第三步：工业能源":"Step 3: energy",
      (lang==="zh")?"工业等离子替代（C）是公开、可测、可部署的起点。":"Industrial plasma substitution (C) is the public measurable start.",
      "/products/energy/"
    ));
    grid.appendChild(card(
      (lang==="zh")?"第四步：前沿扩展":"Step 4: frontier",
      (lang==="zh")?"前沿作为跳转面存在：愿景与约束保持连接。":"Frontier exists as bounded jump surfaces tied to constraints.",
      "/explore/"
    ));
  }

  function openModal(which){
    active = which;
    mTitle.textContent = (lang==="zh") ? "前沿" : "FRONTIER";
    bd.classList.add("show");
    modal.classList.add("show");
    render();
  }
  function closeModal(){
    modal.classList.remove("show");
    bd.classList.remove("show");
  }

  // bind FIRST (tap-safe)
  function bind(id, which){
    var el=document.getElementById(id);
    if(!el) return;
    function go(){ openModal(which); }
    el.addEventListener("click", go);
    el.addEventListener("keydown", function(e){
      if(e.key==="Enter"||e.key===" "){ e.preventDefault(); go(); }
    });
  }
  bind("dIf","if");
  bind("dHow","how");
  bind("dWhen","when");
  bind("dFirst","first");

  // lens toggles
  function persist(){
    try{ localStorage.setItem("gd_style",gdStyle); localStorage.setItem("gd_time",gdTime);}catch(e){}
  }
  pillFormal.addEventListener("click", function(){ gdStyle="formal"; persist(); render(); });
  pillInformal.addEventListener("click", function(){ gdStyle="informal"; persist(); render(); });
  pillConcept.addEventListener("click", function(){ gdTime="origin"; persist(); render(); });
  pillLive.addEventListener("click", function(){ gdTime="now"; persist(); render(); });
  pillRoadmap.addEventListener("click", function(){ gdTime="post"; persist(); render(); });

  // initialize lens UI
  setLensUI();

  // close
  bd.addEventListener("click", closeModal);
  mClose.addEventListener("click", closeModal);
  mReturn.addEventListener("click", closeModal);

  // stop overlay click-through (modal should be tappable)
  modal.addEventListener("click", function(e){ e.stopPropagation(); });

})();
</script>

</body>
</html>
