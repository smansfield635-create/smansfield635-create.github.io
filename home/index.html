<!-- TNT — /home/index.html
     HUB A · 12-DIRECTION INDEX
     MODE: INDEX / JUMP / DUAL LENS / DUAL LANGUAGE
     LOCKS:
       - 12 bubbles (N, NNE, ENE, E, ESE, SSE, S, SSW, WSW, W, WNW, NNW)
       - Click bubble → expand → show 1 paragraph per lens
       - Formal / Informal toggle (single paragraph visible at a time)
       - EN / 中文 toggle (single language visible)
       - No structural drift
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>HUB · Index</title>

<link rel="stylesheet" href="/assets/ui.css"/>

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:#fff;
}

/* ===== TOP CONTROLS ===== */

.controls{
  display:flex;
  justify-content:center;
  gap:12px;
  padding:20px;
  position:sticky;
  top:0;
  backdrop-filter:blur(12px);
  z-index:100;
}

.toggle{
  padding:10px 18px;
  border-radius:20px;
  background:rgba(0,0,0,.4);
  border:1px solid rgba(255,255,255,.15);
  cursor:pointer;
  font-weight:600;
  letter-spacing:.5px;
}

.toggle.active{
  background:#fff;
  color:#000;
}

/* ===== INDEX STACK ===== */

.wrap{
  width:min(900px,92vw);
  margin:0 auto;
  padding-bottom:100px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

.node{
  border-radius:22px;
  background:linear-gradient(145deg,#121a2c,#0b1018);
  border:1px solid rgba(255,255,255,.1);
  overflow:hidden;
  transition:all .25s ease;
}

.node-header{
  padding:16px 20px;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:800;
  letter-spacing:.5px;
}

.node-header:hover{
  background:rgba(255,255,255,.05);
}

.node-body{
  display:none;
  padding:16px 20px 22px 20px;
  border-top:1px solid rgba(255,255,255,.08);
}

.node.open .node-body{
  display:block;
}

.node p{
  margin:0;
  line-height:1.6;
  font-size:14px;
  opacity:.92;
}

.jump{
  margin-top:14px;
}

.jump a{
  text-decoration:none;
  font-weight:700;
  letter-spacing:.4px;
  color:#4ea3ff;
}
</style>
</head>

<body>

<div class="controls">
  <div id="informalBtn" class="toggle active">INFORMAL</div>
  <div id="formalBtn" class="toggle">FORMAL</div>
  <div id="enBtn" class="toggle active">EN</div>
  <div id="zhBtn" class="toggle">中文</div>
</div>

<div class="wrap" id="indexStack"></div>

<script>
(function(){

let lens="informal";
let lang="en";

const nodes=[
"N","NNE","ENE","E","ESE","SSE","S","SSW","WSW","W","WNW","NNW"
];

const content={
  N:{
    en:{
      informal:"North anchors meaning before motion. Collapse begins when language drifts and teams argue semantics instead of solving problems. Precision stabilizes scale.",
      formal:"Scope precedes authority. Definitions constrain interpretation and verification inherits boundary conditions."
    },
    zh:{
      informal:"北方先固定含义再行动。系统崩溃往往始于语义漂移。精确性稳定规模。",
      formal:"范围先于权力。定义约束解释，验证继承边界条件。"
    }
  },
  E:{
    en:{
      informal:"East turns doctrine into surface. Execution without boundary becomes theater. Products must carry constraint visibly.",
      formal:"Deployment inherits structural limits. Execution surfaces must preserve navigation contracts."
    },
    zh:{
      informal:"东方把原则转为执行面。没有边界的执行只是表演。产品必须携带约束。",
      formal:"部署继承结构限制。执行面必须保持导航契约。"
    }
  },
  S:{
    en:{
      informal:"South enforces gates. Most failure spreads because refusal comes too late. Constraint prevents drift.",
      formal:"Admissibility gates precede expansion. Claims without scope are rejected."
    },
    zh:{
      informal:"南方执行闸门。失败扩散因为拒绝太晚。约束防止漂移。",
      formal:"可采信闸门先于扩张。无范围主张被拒绝。"
    }
  },
  W:{
    en:{
      informal:"West isolates fracture. Damage grows when segmentation fails. Containment preserves coherence.",
      formal:"Failure remains local. Segmentation prevents cascade under scale."
    },
    zh:{
      informal:"西方隔离裂缝。分段失败会放大损伤。隔离维持一致性。",
      formal:"失败必须局部化。分段防止规模级联。"
    }
  }
};

/* fallback for secondary nodes */
nodes.forEach(n=>{
  if(!content[n]){
    content[n]={
      en:{
        informal:n+" functions as a transitional vector within the compass.",
        formal:n+" expresses relational movement between primary directions."
      },
      zh:{
        informal:n+" 是罗盘中的过渡向量。",
        formal:n+" 表达主方向之间的关系运动。"
      }
    }
  }
});

const stack=document.getElementById("indexStack");

function render(){
  stack.innerHTML="";
  nodes.forEach(n=>{
    const node=document.createElement("div");
    node.className="node";

    const header=document.createElement("div");
    header.className="node-header";
    header.innerHTML=`<span>${n}</span><span>▸</span>`;

    const body=document.createElement("div");
    body.className="node-body";

    const p=document.createElement("p");
    p.textContent=content[n][lang][lens];

    const jump=document.createElement("div");
    jump.className="jump";
    jump.innerHTML=`<a href="#">Jump → ${n}</a>`;

    body.appendChild(p);
    body.appendChild(jump);

    header.addEventListener("click",()=>{
      node.classList.toggle("open");
    });

    node.appendChild(header);
    node.appendChild(body);
    stack.appendChild(node);
  });
}

document.getElementById("informalBtn").onclick=()=>{
  lens="informal";
  document.getElementById("informalBtn").classList.add("active");
  document.getElementById("formalBtn").classList.remove("active");
  render();
};

document.getElementById("formalBtn").onclick=()=>{
  lens="formal";
  document.getElementById("formalBtn").classList.add("active");
  document.getElementById("informalBtn").classList.remove("active");
  render();
};

document.getElementById("enBtn").onclick=()=>{
  lang="en";
  document.getElementById("enBtn").classList.add("active");
  document.getElementById("zhBtn").classList.remove("active");
  render();
};

document.getElementById("zhBtn").onclick=()=>{
  lang="zh";
  document.getElementById("zhBtn").classList.add("active");
  document.getElementById("enBtn").classList.remove("active");
  render();
};

render();

})();
</script>

</body>
</html>
