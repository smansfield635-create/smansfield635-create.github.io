<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Engine Sync (v1) · Geodiametrics</title>

  <style>
    :root{
      --fg:#e9eefc;
      --muted:rgba(233,238,252,.68);
      --panel:rgba(12,16,34,.55);
      --stroke:rgba(233,238,252,.12);
      --shadow:0 30px 90px rgba(0,0,0,.55);
      --radius:22px;
      --btnbg:rgba(255,255,255,.08);
      --btnbd:rgba(233,238,252,.14);
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;height:100%}

    body{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      color:var(--fg);
      background:
        radial-gradient(1200px 600px at 50% -200px, rgba(120,140,255,.25), transparent 60%),
        radial-gradient(900px 520px at 75% 18%, rgba(180,120,255,.18), transparent 55%),
        radial-gradient(700px 520px at 20% 55%, rgba(120,255,230,.10), transparent 60%),
        linear-gradient(#05070f,#070b18 60%, #05070f);
      overflow-x:hidden;
    }

    /* starfield */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.55;
      background:
        radial-gradient(1px 1px at 12% 18%, rgba(255,255,255,.9), transparent 60%),
        radial-gradient(1px 1px at 22% 72%, rgba(255,255,255,.7), transparent 60%),
        radial-gradient(1px 1px at 35% 30%, rgba(255,255,255,.6), transparent 60%),
        radial-gradient(1px 1px at 48% 80%, rgba(255,255,255,.75), transparent 60%),
        radial-gradient(1px 1px at 58% 20%, rgba(255,255,255,.55), transparent 60%),
        radial-gradient(1px 1px at 70% 62%, rgba(255,255,255,.8), transparent 60%),
        radial-gradient(1px 1px at 82% 35%, rgba(255,255,255,.65), transparent 60%),
        radial-gradient(1px 1px at 92% 74%, rgba(255,255,255,.7), transparent 60%);
    }

    header{
      position:sticky;
      top:0;
      z-index:10;
      backdrop-filter: blur(14px);
      background: linear-gradient(to bottom, rgba(8,10,20,.78), rgba(8,10,20,.30));
      border-bottom:1px solid var(--stroke);
    }

    .bar{
      max-width:1200px;
      margin:0 auto;
      padding:18px 20px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:18px;
    }

    .brand{font-weight:700;letter-spacing:.3px}

    .bubbles{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .bubble{
      padding:10px 16px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.06);
      color:var(--fg);
      text-decoration:none;
      font-size:14px;
      box-shadow:0 10px 24px rgba(0,0,0,.35);
      white-space:nowrap;
    }

    main{
      max-width:1200px;
      margin:0 auto;
      padding:60px 20px 110px;
    }

    h1{
      font-size:clamp(34px,5vw,54px);
      margin:0 0 12px;
    }

    .lede{
      max-width:820px;
      color:var(--muted);
      font-size:18px;
      line-height:1.6;
      margin:0 0 22px;
    }

    .row{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
      gap:26px;
      margin-top:26px;
    }

    .card{
      background:var(--panel);
      border:1px solid var(--stroke);
      border-radius:var(--radius);
      padding:26px;
      box-shadow:var(--shadow);
    }

    .card h2{
      margin:0 0 8px;
      font-size:22px;
      letter-spacing:.2px;
    }

    .card p{
      margin:0 0 16px;
      color:var(--muted);
      line-height:1.6;
    }

    .pillrow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:10px;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:12px 16px;
      border-radius:999px;
      border:1px solid var(--btnbd);
      background:var(--btnbg);
      color:var(--fg);
      font-weight:650;
      min-width:160px;
      cursor:pointer;
      user-select:none;
      box-shadow:0 12px 26px rgba(0,0,0,.35);
    }

    .btn.small{min-width:auto;padding:10px 14px;font-weight:600}
    .btn:active{transform:translateY(1px)}
    .btn[disabled]{opacity:.45;cursor:not-allowed}

    .kv{
      margin-top:14px;
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      color:rgba(233,238,252,.85);
      font-weight:650;
    }
    .kv span{color:var(--muted);font-weight:600}

    .statusline{
      margin-top:10px;
      color:rgba(233,238,252,.85);
      font-weight:700;
    }
    .statusline span{color:var(--muted);font-weight:650}

    .fine{
      margin-top:14px;
      color:rgba(233,238,252,.55);
      font-size:13px;
      line-height:1.5;
    }

    footer{
      margin-top:80px;
      text-align:center;
      color:rgba(233,238,252,.45);
      font-size:14px;
    }

    code.badge{
      padding:6px 10px;
      border:1px solid var(--stroke);
      border-radius:999px;
      background:rgba(255,255,255,.06);
      color:rgba(233,238,252,.9);
      font-size:12px;
    }
  </style>
</head>

<body>
<header>
  <div class="bar">
    <div class="brand">Geodiametrics</div>
    <nav class="bubbles">
      <a class="bubble" href="/">Home</a>
      <a class="bubble" href="/methods/">Methods</a>
      <a class="bubble" href="/dashboard/">Dashboard</a>
      <a class="bubble" href="/apps/">Apps</a>
      <a class="bubble" href="/reference/">Reference</a>
      <a class="bubble" href="/problem/">Problem</a>
      <a class="bubble" href="/architecture/">Architecture</a>
    </nav>
  </div>
</header>

<main>
  <h1>Engine Sync (v1)</h1>
  <p class="lede">
    Quad-core execution surface: Selection → Resolution → Commitment → Continuation.
    Device-local only. Reload-safe. No external calls. <code class="badge" id="keyBadge">key: —</code>
  </p>

  <section class="row">

    <!-- CONTINUATION -->
    <div class="card">
      <h2>CONTINUATION</h2>
      <p>Persistent cycle state. Operator-controlled. Used to mark RUNNING / HURDLE / WALL / COMPLETE.</p>

      <div class="pillrow">
        <button class="btn small" data-cycle="RUNNING">1 · RUNNING</button>
        <button class="btn small" data-cycle="HURDLE">2 · HURDLE</button>
        <button class="btn small" data-cycle="WALL">3 · WALL</button>
        <button class="btn small" data-cycle="COMPLETE">4 · COMPLETE</button>
      </div>

      <div class="statusline">Current cycle: <span id="cycleOut">—</span></div>
      <div class="fine">
        RUNNING = executing (reduce/contrast/condense/dedup/improve).<br/>
        HURDLE = friction; continue internally; no escalation.<br/>
        WALL = proven blocker; notify; await decision.<br/>
        COMPLETE = stable minimal state; advance cycle.
      </div>
    </div>

    <!-- SELECTION -->
    <div class="card">
      <h2>SELECTION</h2>
      <p>Admissibility gate. Inputs must satisfy constraints to enter the engine.</p>

      <div class="pillrow">
        <button class="btn" id="admitBtn">Submit Admissible Input</button>
        <button class="btn" id="rejectBtn">Submit Rejected Input</button>
      </div>

      <div class="statusline">Selection: <span id="selOut">—</span></div>
      <div class="fine">Selection writes the admissibility bit. Resolution and Commitment enforce it.</div>
    </div>

    <!-- RESOLUTION -->
    <div class="card">
      <h2>RESOLUTION</h2>
      <p>Minimal structural completion. One admitted input resolves.</p>

      <div class="pillrow">
        <button class="btn" id="resolveBtn">Resolve</button>
        <button class="btn" id="resetResBtn">Reset Resolution</button>
      </div>

      <div class="statusline">Resolution: <span id="resOut">—</span></div>
      <div class="fine">Rule: Resolve is admissible only when Selection = ADMITTED.</div>
    </div>

    <!-- COMMITMENT -->
    <div class="card">
      <h2>COMMITMENT</h2>
      <p>No rollback once committed. Commit is proof-gated.</p>

      <div class="pillrow">
        <button class="btn" id="commitBtn">Commit</button>
        <button class="btn" id="resetAllBtn">Reset Engine</button>
      </div>

      <div class="statusline">Commitment: <span id="comOut">—</span></div>
      <div class="fine">Rule: Commit is admissible only when Selection = ADMITTED and Resolution = RESOLVED.</div>
    </div>

  </section>

  <footer>© 2026 Geodiametrics · Engine Sync</footer>
</main>

<script>
/* =========================
   ENGINE SYNC (v1) — DEVICE LOCAL
   TNT: full page replacement
========================= */

/*
  CHANGE THIS ONE LINE FOR v2/v3:
  v1: engine_sync_v1
  v2: engine_sync_v2
  v3: engine_sync_v3
*/
const ENGINE_KEY = "engine_sync_v1";

const nowISO = () => new Date().toISOString();

const load = () => {
  try { return JSON.parse(localStorage.getItem(ENGINE_KEY) || "{}"); }
  catch(e){ return {}; }
};

const save = (s) => localStorage.setItem(ENGINE_KEY, JSON.stringify(s));

const S = load();

if(!S.init){
  S.init = true;
  S.created_at = nowISO();
  S.cycle = "RUNNING";
  S.selection = null;     // "ADMITTED" | "REJECTED"
  S.resolution = null;    // "RESOLVED"
  S.commitment = null;    // "COMMITTED"
  S.updated_at = nowISO();
  save(S);
}

const $ = (id) => document.getElementById(id);

function render(){
  $("keyBadge").textContent = "key: " + ENGINE_KEY;

  $("cycleOut").textContent = S.cycle || "—";
  $("selOut").textContent   = S.selection || "—";
  $("resOut").textContent   = S.resolution || "—";
  $("comOut").textContent   = S.commitment || "—";

  // gating
  const selAdmitted = S.selection === "ADMITTED";
  const resResolved = S.resolution === "RESOLVED";

  $("resolveBtn").disabled = !selAdmitted;
  $("commitBtn").disabled  = !(selAdmitted && resResolved);
}

function touch(){
  S.updated_at = nowISO();
  save(S);
  render();
}

// continuation buttons
document.querySelectorAll("[data-cycle]").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    S.cycle = btn.getAttribute("data-cycle");
    touch();
  });
});

// selection
$("admitBtn").addEventListener("click", ()=>{
  S.selection = "ADMITTED";
  // selection change invalidates downstream states
  S.resolution = null;
  S.commitment = null;
  touch();
});
$("rejectBtn").addEventListener("click", ()=>{
  S.selection = "REJECTED";
  S.resolution = null;
  S.commitment = null;
  touch();
});

// resolution
$("resolveBtn").addEventListener("click", ()=>{
  if(S.selection !== "ADMITTED") return;
  S.resolution = "RESOLVED";
  S.commitment = null;
  touch();
});
$("resetResBtn").addEventListener("click", ()=>{
  S.resolution = null;
  S.commitment = null;
  touch();
});

// commitment
$("commitBtn").addEventListener("click", ()=>{
  if(!(S.selection === "ADMITTED" && S.resolution === "RESOLVED")) return;
  S.commitment = "COMMITTED";
  touch();
});
$("resetAllBtn").addEventListener("click", ()=>{
  // full reset keeps created_at but clears execution state
  S.cycle = "RUNNING";
  S.selection = null;
  S.resolution = null;
  S.commitment = null;
  touch();
});

render();
</script>
</body>
</html>
