<!-- TNT — /door/index.html
     DOOR ALIAS → ROOT
     PURPOSE:
       - Keep cogrid.net/ as the canonical Door
       - Make /door/ work for old links without duplicating UI
       - Preserve lang/style/time/depth (query + localStorage)
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Door</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
/* ui.css owns field */
.wrap{
  width:min(820px,92vw);
  margin:0 auto;
  padding:22px 0;
}
.card{
  border:1px solid rgba(255,255,255,.12);
  border-radius:22px;
  background:rgba(0,0,0,.16);
  backdrop-filter:blur(10px);
  box-shadow:0 24px 80px rgba(0,0,0,.55);
  padding:16px 16px;
}
.k{margin:0 0 6px;font-size:11px;letter-spacing:4px;text-transform:uppercase;opacity:.75}
.t{margin:0;font-weight:950;letter-spacing:.6px;font-size:18px}
.p{margin:10px 0 0;color:rgba(255,255,255,.82);line-height:1.5;font-size:13px}
</style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <p class="k">COGRID.NET</p>
      <p class="t">Redirecting…</p>
      <p class="p">If you’re not redirected, use the button below.</p>
      <p style="margin-top:12px">
        <a class="btn" id="go" href="/">GO</a>
      </p>
    </div>
  </div>

<script>
(function(){
  var qs=new URLSearchParams(location.search);

  // keep whatever is currently set (fallbacks)
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var style = qs.get("style") || localStorage.getItem("gd_style") || "formal";
  var time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  var depth = qs.get("depth") || localStorage.getItem("gd_depth") || "explore";

  if(lang!=="en" && lang!=="zh" && lang!=="es") lang="en";
  if(style!=="formal" && style!=="informal") style="formal";
  if(time==="trajectory") time="post";
  if(time!=="origin" && time!=="now" && time!=="post") time="now";
  if(depth!=="explore" && depth!=="learn") depth="explore";

  try{
    localStorage.setItem("gd_lang",lang);
    localStorage.setItem("gd_style",style);
    localStorage.setItem("gd_time",time);
    localStorage.setItem("gd_depth",depth);
  }catch(e){}

  function q(){
    return "?lang="+encodeURIComponent(lang)+
           "&style="+encodeURIComponent(style)+
           "&time="+encodeURIComponent(time)+
           "&depth="+encodeURIComponent(depth);
  }

  var target = "/" + q();
  document.getElementById("go").href = target;

  // immediate redirect (no history pollution)
  window.location.replace(target);
})();
</script>
</body>
</html>
