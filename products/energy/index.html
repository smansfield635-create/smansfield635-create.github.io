<!-- TNT — /products/energy/index.html  (PRODUCTS · ENERGY · INDUSTRIAL FIRST)
     PHASE 1 — ENERGY REWRITE (INDUSTRIAL / AGRICULTURAL / CORPORATE / ADVERSARIAL) + DOTGRID BINDING
     STATUS:
       - NO NET-FUSION CLAIMS (STRUCTURAL FRAMEWORK ONLY)
       - Industrial plan first; residential licensing downstream
       - Uses canonical acronyms: HIP / UCI / CARES / PFM / CC / EDT / SLA / SVF / FCM / TGI / PSS / ERI / IDP / RLM
       - DOTGRID binding published: DOTGRID-ENERGY-HYBRID-v1
       - DHY strict posture referenced (UI may relax display only; certs remain strict internally)
     MECHANICS (PROVEN):
       - hit-test lock: .stage pointer-events none; diamonds pointer-events auto
       - dock tap-safe: dock container ignores taps; dock buttons click
       - inline onclick to open modal
       - open(): show modal first, then render
       - render(): guarded; never blank
     LENSES (NO NEW KEYS):
       - gd_lang: en/zh (single-language render)
       - gd_style: formal/informal (formal=scientific; informal=layman contextual)
       - gd_time: origin/now/post (concept/live/roadmap)
     CONTENT RULE:
       - Each diamond view renders 4 boxes × 4 bullets
       - Boxes map perspectives to avoid abstraction:
           Box 1 = Scientific/Physics
           Box 2 = Industrial/Grid/Corporate
           Box 3 = Agricultural/Plasma farms
           Box 4 = Adversarial Validation (SVF + CARES + DHY strict posture)
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · ENERGY</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>

<style>
:root{
  --R:154px;
  --goldSoft:rgba(212,175,55,.35);
  --obs1:#070b12;
  --obs2:#0c1626;
  --mut:rgba(255,255,255,.84);
  --mut2:rgba(255,255,255,.68);
}
body{margin:0;min-height:100vh;overflow-x:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;color:#fff}

  position:fixed; right:12px; top:12px; z-index:9999;
  padding:8px 10px; border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.22);
  backdrop-filter:blur(10px);
  font-weight:950; letter-spacing:.3px; font-size:12px;
  color:rgba(255,255,255,.92);
  pointer-events:none;
}

/* Top-left */
.top-left{position:fixed;left:16px;top:16px;z-index:90;display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.btn{
  padding:10px 16px;border-radius:14px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  color:#fff;border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.7);
  cursor:pointer;font-weight:900;letter-spacing:.2px;text-decoration:none;
  -webkit-tap-highlight-color:transparent;
}
.btn:hover{box-shadow:0 18px 50px rgba(0,0,0,.9),0 0 14px var(--goldSoft)}

/* Brand pill */
.brand{
  position:fixed;left:50%;top:16px;transform:translateX(-50%);
  z-index:80;text-align:center;padding:10px 14px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);backdrop-filter:blur(8px);
}
.brand .name{font-weight:950;letter-spacing:1.2px;font-size:12px;opacity:.95}
.brand .tag{font-size:11px;letter-spacing:.6px;opacity:.70;margin-top:2px}

/* Stage (hit-test lock) */
.stage{
  position:fixed;left:50%;top:52%;
  transform:translate(-50%,-50%);
  width:min(720px,94vw);height:min(720px,94vw);
  z-index:60;
  pointer-events:none; /* stage ignores taps */
}
.outer{
  position:absolute;left:50%;top:50%;
  width:min(680px,92vw);height:min(680px,92vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:60px;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.14), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.45) 0%, rgba(7,11,18,.62) 70%);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 90px 260px rgba(0,0,0,.72), inset 0 2px 0 rgba(255,255,255,.10), inset 0 -50px 90px rgba(0,0,0,.55);
  opacity:.85;
  pointer-events:none;
}
.outer::after{
  content:"";position:absolute;inset:0;border-radius:60px;
  background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 6deg, transparent 6deg 18deg);
  opacity:.16; pointer-events:none;
}
.d{
  width:170px;height:170px;position:absolute;left:50%;top:50%;
  transform-origin:center;border-radius:26px;cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  background:
    radial-gradient(circle at 35% 25%, rgba(255,255,255,.14), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.18), transparent 60%),
    linear-gradient(160deg, rgba(12,22,38,.92) 0%, rgba(7,11,18,.95) 70%);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 28px 84px rgba(0,0,0,.78), inset 0 2px 0 rgba(255,255,255,.14), inset 0 -28px 44px rgba(0,0,0,.62);
  transition:transform 220ms ease, box-shadow 220ms ease, border-color 220ms ease;
  pointer-events:auto; /* diamonds receive taps */
  touch-action:manipulation;
}
.d::before{
  content:"";position:absolute;inset:0;border-radius:26px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.45;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  pointer-events:none;
}
.d::after{
  content:"";position:absolute;left:12%;right:12%;top:10%;height:28%;
  border-radius:999px;background:linear-gradient(to bottom, rgba(255,255,255,.16), rgba(255,255,255,0));
  opacity:.85;transform:rotate(-10deg);pointer-events:none;
}
.d:hover{transform:translate(-50%,-50%) rotate(45deg) scale(1.02)}
.d.active{
  border-color:rgba(212,175,55,.55);
  box-shadow:0 34px 110px rgba(0,0,0,.88),0 0 30px rgba(212,175,55,.40),
    inset 0 2px 0 rgba(255,255,255,.18),inset 0 -32px 52px rgba(0,0,0,.68);
}
.d-n{transform:translate(-50%,-50%) translate(0, calc(var(--R) * -1)) rotate(45deg)}
.d-e{transform:translate(-50%,-50%) translate(var(--R), 0) rotate(45deg)}
.d-s{transform:translate(-50%,-50%) translate(0, var(--R)) rotate(45deg)}
.d-w{transform:translate(-50%,-50%) translate(calc(var(--R) * -1), 0) rotate(45deg)}
.inner{width:100%;height:100%;transform:rotate(-45deg);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:16px;gap:10px;pointer-events:none;user-select:none}
.lab{font-weight:950;letter-spacing:.8px;font-size:16px}
.sub{font-size:12.5px;opacity:.80;line-height:1.35;max-width:18em}
.core{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:74px;height:74px;border-radius:22px;border:1px solid rgba(255,255,255,.10);background:rgba(0,0,0,.18);box-shadow:0 18px 44px rgba(0,0,0,.62), inset 0 2px 0 rgba(255,255,255,.10);display:grid;place-items:center;font-weight:950;letter-spacing:.5px;opacity:.92;pointer-events:none}

/* Dock (tap-safe) */
.dock{
  position:fixed;left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:90;width:min(900px,94vw);
  display:flex;justify-content:center;gap:10px;flex-wrap:wrap;
  padding:10px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.20);backdrop-filter:blur(8px);
  pointer-events:none;
}
.dock .btn{pointer-events:auto}

/* Modal */
.bd{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.65);backdrop-filter:blur(10px);display:none}
.bd.show{display:block}
.modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:min(1020px,94vw);max-height:88vh;display:none;z-index:210}
.modal.show{display:block}
.shell{
  height:88vh;border-radius:26px;border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 50% 18%, rgba(176,0,0,.20), transparent 55%),
    radial-gradient(circle at 40% 25%, rgba(90,140,255,.12), transparent 55%),
    linear-gradient(160deg,var(--obs2) 0%, var(--obs1) 65%);
  box-shadow:0 60px 180px rgba(0,0,0,.92);
  overflow:hidden;display:flex;flex-direction:column;
}
.mhead{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
.mtitle{margin:0;font-weight:950;letter-spacing:.3px;font-size:16px}
.mclose{border:0;background:transparent;color:#fff;font-size:18px;cursor:pointer;padding:8px 10px}
.mbody{padding:14px 16px 18px;overflow:auto;-webkit-overflow-scrolling:touch;flex:1 1 auto}
.lensbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center;padding:10px 10px 14px;border-bottom:1px solid rgba(255,255,255,.08);margin:-6px -6px 14px}
.chip{padding:10px 16px;border-radius:999px;background:linear-gradient(145deg,var(--obs2),var(--obs1));border:1px solid rgba(255,255,255,.08);box-shadow:0 14px 36px rgba(0,0,0,.65);cursor:pointer;font-weight:900;letter-spacing:.2px;color:#fff}
.chip.active{border-color:rgba(212,175,55,.35);box-shadow:0 18px 50px rgba(0,0,0,.9),0 0 16px rgba(212,175,55,.30)}
.mgrid{display:grid;gap:14px}
@media (min-width:920px){.mgrid{grid-template-columns:1fr 1fr}}
.box{
  padding:16px 18px;border-radius:22px;
  background:
    radial-gradient(circle at 30% 30%, rgba(120,160,255,.08), transparent 55%),
    linear-gradient(145deg, rgba(12,22,38,.92), rgba(7,11,18,.95));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 18px 60px rgba(0,0,0,.70), inset 0 2px 0 rgba(255,255,255,.06);
  position:relative;
}
.box::before{
  content:"";position:absolute;inset:0;border-radius:22px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  pointer-events:none;
}
.h{margin:0 0 8px;font-weight:950;letter-spacing:.2px}
.p{margin:0 0 10px;color:var(--mut);line-height:1.55}
.ul{margin:0 0 0 18px;padding:0;color:var(--mut2)}
.ul li{margin:6px 0}
.mact{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:14px}
.sbtn{padding:12px 18px;border-radius:14px;background:linear-gradient(145deg,var(--obs2),var(--obs1));color:#fff;border:1px solid rgba(255,255,255,.08);box-shadow:0 14px 36px rgba(0,0,0,.7);cursor:pointer;font-weight:900;letter-spacing:.2px;text-decoration:none}

@media (max-width:560px){:root{--R:136px}.d{width:158px;height:158px}.stage{top:50%}}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" id="btnBack" href="/products/">BACK</a>
  <a class="btn" id="btnExit" href="/door/">EXIT</a>
</div>

<div class="brand">
  <div class="name" id="brandName">PRODUCTS</div>
  <div class="tag" id="brandTag">ENERGY · INDUSTRIAL PLASMA ARCHITECTURE</div>
</div>

<div class="stage">
  <div class="outer"></div>

  <div class="d d-n" id="dChain" role="button" tabindex="0" onclick="window.__openEnergy('chain')">
    <div class="inner"><div class="lab" id="labChain">CHAIN</div><div class="sub" id="subChain">Solar → HIP → SLA → Grid.</div></div>
  </div>
  <div class="d d-e" id="dPlasma" role="button" tabindex="0" onclick="window.__openEnergy('plasma')">
    <div class="inner"><div class="lab" id="labPlasma">PLASMA</div><div class="sub" id="subPlasma">CC tiers · UCI · ERI.</div></div>
  </div>
  <div class="d d-s" id="dFusion" role="button" tabindex="0" onclick="window.__openEnergy('fusion')">
    <div class="inner"><div class="lab" id="labFusion">FUSION</div><div class="sub" id="subFusion">No claims · boundary framing.</div></div>
  </div>
  <div class="d d-w" id="dValidation" role="button" tabindex="0" onclick="window.__openEnergy('validation')">
    <div class="inner"><div class="lab" id="labValidation">VALIDATION</div><div class="sub" id="subValidation">SVF · CARES · DHY strict.</div></div>
  </div>

  <div class="core">◆</div>
</div>

<nav class="dock" id="dock">
  <a class="btn" id="dockHub" href="/home/">HUB</a>
  <a class="btn" id="dockTerminal" href="/index.html">TERMINAL</a>
  <a class="btn" id="dockLinks" href="/links/">LINKS</a>
  <a class="btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="btn" id="dockGauges" href="/gauges/">GAUGES</a>
</nav>

<div class="bd" id="bd"></div>

<div class="modal" id="modal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="mTitle">DETAIL</h3>
      <button class="mclose" id="mClose" aria-label="Close" type="button">✕</button>
    </div>

    <div class="mbody">
      <div class="lensbar">
        <button class="chip" id="styleChip" type="button">STYLE: FORMAL</button>
        <button class="chip" data-time="origin" id="chipConcept" type="button">CONCEPT</button>
        <button class="chip" data-time="now" id="chipLive" type="button">LIVE</button>
        <button class="chip" data-time="post" id="chipRoadmap" type="button">ROADMAP</button>
      </div>

      <div class="mgrid">
        <div class="box"><h4 class="h" id="h1"></h4><p class="p" id="p1"></p><ul class="ul" id="u1"></ul></div>
        <div class="box"><h4 class="h" id="h2"></h4><p class="p" id="p2"></p><ul class="ul" id="u2"></ul></div>
        <div class="box"><h4 class="h" id="h3"></h4><p class="p" id="p3"></p><ul class="ul" id="u3"></ul></div>
        <div class="box"><h4 class="h" id="h4"></h4><p class="p" id="p4"></p><ul class="ul" id="u4"></ul></div>
      </div>

      <div class="mact">
        <button class="sbtn" id="mReturn" type="button">RETURN</button>
        <a class="sbtn" id="mJumpProducts" href="/products/">JUMP PRODUCTS</a>
        <a class="sbtn" id="mJumpHub" href="/home/">JUMP HUB</a>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const dbg=document.getElementById("dbg");

  // ===== State hydration (gd_* only) =====
  const qs = new URLSearchParams(location.search);
  let lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  let style = qs.get("style") || localStorage.getItem("gd_style") || "formal";
  let time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  if(!["en","zh"].includes(lang)) lang="en";
  if(!["formal","informal"].includes(style)) style="formal";
  if(time==="trajectory") time="post";
  if(!["origin","now","post"].includes(time)) time="now";
  try{ localStorage.setItem("gd_lang",lang); localStorage.setItem("gd_style",style); localStorage.setItem("gd_time",time); }catch(e){}
  document.documentElement.lang = (lang==="zh") ? "zh" : "en";

  const q = () => `lang=${encodeURIComponent(lang)}&style=${encodeURIComponent(style)}&time=${encodeURIComponent(time)}`;

  function setLinks(){
    const s=q();
    document.getElementById("btnBack").href="/products/?"+s;
    document.getElementById("btnExit").href="/door/?"+s;
    document.getElementById("dockHub").href="/home/?"+s;
    document.getElementById("dockTerminal").href="/index.html?"+s;
    document.getElementById("dockLinks").href="/links/?"+s;
    document.getElementById("dockProducts").href="/products/?"+s;
    document.getElementById("dockLaws").href="/laws/?"+s;
    document.getElementById("dockGauges").href="/gauges/?"+s;
    document.getElementById("mJumpProducts").href="/products/?"+s;
    document.getElementById("mJumpHub").href="/home/?"+s;
  }
  setLinks();

  // ===== UI text =====
  const UI = {
    en:{
      brand:"PRODUCTS",
      tag:"ENERGY · INDUSTRIAL PLASMA ARCHITECTURE",
      d:{
        chain:{lab:"CHAIN", sub:"Solar → HIP → SLA → Grid."},
        plasma:{lab:"PLASMA", sub:"CC tiers · UCI · ERI."},
        fusion:{lab:"FUSION", sub:"No claims · boundary framing."},
        validation:{lab:"VALIDATION", sub:"SVF · CARES · DHY strict."}
      },
      lens:{formal:"FORMAL",informal:"INFORMAL",concept:"CONCEPT",live:"LIVE",roadmap:"ROADMAP"},
      btn:{ret:"RETURN",jp:"JUMP PRODUCTS",jh:"JUMP HUB"},
      stylePrefix:"STYLE: "
    },
    zh:{
      brand:"产品",
      tag:"能源 · 工业等离子架构",
      d:{
        chain:{lab:"链路", sub:"太阳 → HIP → SLA → 电网。"},
        plasma:{lab:"等离子", sub:"CC 分级 · UCI · ERI。"},
        fusion:{lab:"聚变", sub:"无净聚变主张 · 边界框架。"},
        validation:{lab:"验证", sub:"SVF · CARES · DHY 严格。"}
      },
      lens:{formal:"正式",informal:"通俗",concept:"概念",live:"上线",roadmap:"路线图"},
      btn:{ret:"返回",jp:"跳转产品",jh:"跳转枢纽"},
      stylePrefix:"风格："
    }
  };
  const ui = (lang==="zh") ? UI.zh : UI.en;

  document.getElementById("brandName").textContent = ui.brand;
  document.getElementById("brandTag").textContent = ui.tag;

  document.getElementById("labChain").textContent = ui.d.chain.lab;
  document.getElementById("subChain").textContent = ui.d.chain.sub;
  document.getElementById("labPlasma").textContent = ui.d.plasma.lab;
  document.getElementById("subPlasma").textContent = ui.d.plasma.sub;
  document.getElementById("labFusion").textContent = ui.d.fusion.lab;
  document.getElementById("subFusion").textContent = ui.d.fusion.sub;
  document.getElementById("labValidation").textContent = ui.d.validation.lab;
  document.getElementById("subValidation").textContent = ui.d.validation.sub;

  // ===== Modal refs =====
  const bd=document.getElementById("bd");
  const modal=document.getElementById("modal");
  const mClose=document.getElementById("mClose");
  const mTitle=document.getElementById("mTitle");
  const styleChip=document.getElementById("styleChip");
  const chipConcept=document.getElementById("chipConcept");
  const chipLive=document.getElementById("chipLive");
  const chipRoadmap=document.getElementById("chipRoadmap");
  const h1=document.getElementById("h1"),p1=document.getElementById("p1"),u1=document.getElementById("u1");
  const h2=document.getElementById("h2"),p2=document.getElementById("p2"),u2=document.getElementById("u2");
  const h3=document.getElementById("h3"),p3=document.getElementById("p3"),u3=document.getElementById("u3");
  const h4=document.getElementById("h4"),p4=document.getElementById("p4"),u4=document.getElementById("u4");

  document.getElementById("mReturn").textContent = ui.btn.ret;
  document.getElementById("mJumpProducts").textContent = ui.btn.jp;
  document.getElementById("mJumpHub").textContent = ui.btn.jh;

  const persist=()=>{ try{ localStorage.setItem("gd_style",style); localStorage.setItem("gd_time",time);}catch(e){} };
  const setLensLabels=()=>{
    styleChip.textContent = ui.stylePrefix + (style==="formal" ? ui.lens.formal : ui.lens.informal);
    chipConcept.textContent = ui.lens.concept;
    chipLive.textContent = ui.lens.live;
    chipRoadmap.textContent = ui.lens.roadmap;
    chipConcept.classList.toggle("active", time==="origin");
    chipLive.classList.toggle("active", time==="now");
    chipRoadmap.classList.toggle("active", time==="post");
  };

  const fill=(hEl,pEl,uEl,b)=>{
    const safe = b || {h:"—",p:"—",u:["—","—","—","—"]};
    hEl.textContent = safe.h || "—";
    pEl.textContent = safe.p || "—";
    uEl.innerHTML="";
    const arr = (safe.u && safe.u.length) ? safe.u : ["—","—","—","—"];
    for(let i=0;i<4;i++){
      const li=document.createElement("li");
      li.textContent = arr[i] || "—";
      uEl.appendChild(li);
    }
  };

  // =========================================================
  // CONTENT PACKS (EMBEDDED HERE: NO ORDERING FAILURES)
  // =========================================================

  // Common DOTGRID binding statement (used across nodes)
  const DOTGRID_BINDING_EN =
    "DOTGRID-ENERGY-HYBRID-v1 encodes operational state_id (0–255) as (CC tier, SLA phase, ERI tier, IDP tier). DHY strict certification is required for any aggregated claims (S1→S2→S3).";
  const DOTGRID_BINDING_ZH =
    "DOTGRID-ENERGY-HYBRID-v1 用 state_id(0–255) 编码 (CC 分级, SLA 阶段, ERI 分级, IDP 阶段)。任何聚合结论必须通过 DHY 严格认证（S1→S2→S3）。";

  function makeBox(h,p,u0,u1,u2,u3){
    return {h:h,p:p,u:[u0,u1,u2,u3]};
  }

  // To keep Phase 1 focused and non-abstract:
  // Each view uses 4 boxes = Scientific / Industrial / Agricultural / Adversarial.
  const EN = {
    chain:{
      origin:{
        formal:{
          title:"CHAIN · Industrial Conversion (Concept)",
          b1:makeBox(
            "Scientific",
            "HIP (High-Intensity Plasma) is framed as an industrial ionized operating regime for thermal/chemical processing. The chain is Solar → HIP → SLA buffering → industrial heat and/or buffered electric injection. No net-fusion claim is made; this is conversion architecture.",
            "Define HIP regime by CC tier bounds (CC-1/2/3).",
            "Track loss channels: heat bleed, conversion inefficiency, instability shutdown.",
            "Use UCI (Unified Confinement Interface) as the governing control layer.",
            "Treat EDT tiers as failure-envelope magnitude classes (EDT-1/2/3)."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "PFM (Plasma Farm Module) is upstream-only hardened infrastructure. IDP phases scale from IDP-1 pilot to IDP-4 global replication without grid shock. Corporate posture is coexistence + stabilization: augment renewables and buffer volatility.",
            "IDP-1: 1 PFM near industrial heat user (2–5 acres).",
            "IDP-2: 5–20 PFMs with SLA distributed reservoirs and buffered conversion.",
            "IDP-3: industrial adjacency (steel/cement/desalination/chemicals).",
            "IDP-4: replication via CC certification + insurance underwriting."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Plasma farms are agricultural co-location deployments: rectilinear layout with setback, no plasma–soil contact, midstream thermal exchange only. Thermal Gradient Interceptor (TGI) routes usable heat into greenhouses/soil buffers.",
            "Minimum 500m setback from residential zones.",
            "No direct plasma interface with soil (midstream exchanger only).",
            "Revenue stacking: energy + greenhouse + industrial heat contract.",
            "Seasonal mitigation: SLA buffering + load balancing contracts."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "SVF (Signal Validation Framework) + CARES governs admissibility. Any claim requires artifact suppression, multi-sensor agreement, and DHY strict certificates. Policy violations trigger R3 epoch rollover; no degraded states.",
            "Kill: confinement breach, ERI spike, unrecoverable instability, multi-sensor disagreement.",
            "Disproof: net-negative SLA under declared conditions; repeat instability at fixed params.",
            "Evidence: evidence_hash receipts + third-party instrumentation audit pathway.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{
          title:"CHAIN · Industrial Conversion (Concept)",
          b1:makeBox(
            "Science (Plain)",
            "Think of HIP as a controlled industrial plasma regime used for clean heat and processing. The chain is: sunlight or power in → controlled plasma → storage loop (SLA) → steady industrial output. This is not a fusion claim.",
            "HIP is controlled by CC tiers (how hardened the containment is).",
            "EDT tiers describe how intense the stored/operating energy is.",
            "UCI is the control interface that prevents drift and runaway.",
            "Losses are tracked first, not ignored."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "We scale in phases so the grid never gets shocked. First one hardened module near a heat user, then clusters, then industrial adjacency, then replication with insurance tied to CC certification.",
            "IDP-1: one PFM proves stability.",
            "IDP-2: clusters prove buffering.",
            "IDP-3: industry proves dispatch value.",
            "IDP-4: replication proves global scale."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Plasma farms can live on farmland without touching soil: the plasma stays inside hardened modules and only clean heat moves through exchangers. TGI routes heat into greenhouse/soil buffers.",
            "Rectilinear farm layout + safety setback.",
            "No soil contact; thermal exchange only.",
            "Farm earns energy + crop-adjacent value.",
            "SLA smooths seasons and demand."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "We assume the system is wrong until it survives tests. SVF requires cross-sensor agreement. CARES defines what happens under stress. DHY strict certs decide what is admissible.",
            "If sensors disagree, it fails.",
            "If ERI spikes, it terminates.",
            "If it can’t repeat, it’s disqualified.",
            DOTGRID_BINDING_EN
          )
        }
      },
      now:{
        formal:{
          title:"CHAIN · Live Posture (IDP-Ready)",
          b1:makeBox(
            "Scientific",
            "Live posture means the chain is defined with measurable variables and explicit failure envelopes. R&D tests exist for stability envelopes, termination thresholds, and thermal gradients; no net-fusion claim is asserted.",
            "Instrumented signals: thermal gradient, ion density proxy, pressure differential, power in/out ratio.",
            "Confinement domains modeled: normalized K/M/R/P envelope (declared).",
            "Failure modes mapped: overpressure, field collapse, thermal runaway, containment breach.",
            "SLA loss: heat bleed, conversion inefficiency, instability termination."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Live IDP posture is industrial-first: target process heat users and buffered midstream conversion. PSS supervises dispatch smoothing; FCM defines isolation boundaries; CARES governs escalation ladder.",
            "Grid injection is buffered (no raw HIP to grid).",
            "PSS enforces supervisory overrides and denial rules.",
            "FCM defines blast-radius containment and isolation.",
            "Insurance posture ties CC certification to underwriting."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Live agricultural posture is dual-use and non-invasive: plasma modules are hardened upstream-only; thermal is intercepted midstream; environmental boundaries are explicit and auditable.",
            "Soil boundary: thermal exchanger only.",
            "Livestock boundary: hard perimeter + EM/noise isolation.",
            "Greenhouse heating via TGI loop.",
            "Seasonal smoothing via SLA reservoirs."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "Strict admissibility: SVF must PASS; multi-sensor disagreement is a kill condition. Late events invalidate windows. Violations force R3 rollover; contaminated epochs remain permanently invalid at higher scopes.",
            "Kill: ERI > threshold tier; confinement breach; unrecoverable instability; sensor disagreement.",
            "Disproof: artifact-dependent confirmation; repeat instability fixed params.",
            "Audit: third-party instrumentation + env compliance + insurance verification.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{
          title:"CHAIN · Live Posture",
          b1:makeBox(
            "Science (Plain)",
            "Live means: we can measure what matters and we’ve defined what fails. We track heat gradients, pressure differences, plasma proxies, and power ratios. No fusion claim is being made.",
            "If we can’t measure it, we don’t claim it.",
            "If it can’t repeat, it doesn’t count.",
            "Failures are named up front.",
            "Loss is tracked, not ignored."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "We plug into industry first (heat users) and buffer before grid injection. PSS supervises dispatch; FCM contains failures; CARES handles escalation and shutdown.",
            "Buffered injection only.",
            "Supervisory control always on.",
            "Containment boundaries are explicit.",
            "Scaling is phased (IDP)."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Farm integration is heat exchange only. Plasma stays inside hardened modules. Heat can support greenhouses and seasonal buffering without harming soil.",
            "No soil contact.",
            "Hard perimeter for livestock.",
            "Heat routed through TGI.",
            "Storage smooths seasons."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "Strict mode: if anything violates rules, it fails the window. No soft passes. Recovery requires rollover. Old bad epochs stay bad.",
            "Sensor disagreement kills.",
            "Late events invalidate.",
            "Policy violation triggers R3.",
            DOTGRID_BINDING_EN
          )
        }
      },
      post:{
        formal:{
          title:"CHAIN · Roadmap (Global Scaling)",
          b1:makeBox(
            "Scientific",
            "Roadmap tightens definitions and expands evidence templates without disclosing apparatus recipes. It formalizes which signals count, which proxies are admissible, and which falsifiers terminate claims.",
            "SVF templates become mandatory artifacts.",
            "Noise floors declared per sensor; SNR minimum enforced.",
            "Transition policy enforced via DHY strict (no degraded states).",
            "K/M/R/P binning locked by BM + bm_hash (if derived)."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Roadmap formalizes industrial adoption: modular clusters, buffered conversion, and insurance-ready CC certification. Licensing is downstream: industrial proof first, residential endpoints later.",
            "IDP-2/3 become underwriting thresholds.",
            "Regional replication uses group/program manifests (no silent drift).",
            "Grid stabilization posture: coexistence + buffer.",
            "Residential licensing gated by IDP-3 completion."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Roadmap codifies agricultural integration boundaries for global replication: layout, setbacks, soil isolation, thermal reuse constraints, and audit checklists.",
            "Setback rules codified in manifest.",
            "Soil/groundwater boundaries declared and audited.",
            "TGI loop declared (greenhouse/soil buffer).",
            "Revenue stacking modeled conservatively (stress tested)."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "DHY strict certificates become the admissibility backbone: S1 per stream, S2 per cluster, S3 per program. Any invalidation cascades. R3 rollover is the only recovery path.",
            "S2 requires 100% valid S1 streams.",
            "S3 requires 100% valid S2 groups.",
            "Entropy/coverage admissible only with VALID certs.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{
          title:"CHAIN · Roadmap (Scaling)",
          b1:makeBox(
            "Science (Plain)",
            "Next we make everything easier to audit: templates, locked meanings, locked bins, and stricter disproof rules—without giving away recipes.",
            "Templates become standard.",
            "Noise floors are declared.",
            "Bins can’t drift.",
            "Claims stay bounded."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "Scaling means modular clusters + insurance-ready certification. Residential is downstream and gated by industrial proof.",
            "Industrial first.",
            "Clusters next.",
            "Global replication last.",
            "Residential only after IDP-3 proof."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "We standardize the farm model: setbacks, no soil contact, heat reuse, and audit checklists so it can replicate globally.",
            "Layout standards.",
            "Safety boundaries.",
            "Thermal reuse.",
            "Conservative economics."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "Strict certificates decide what’s real. One failure invalidates the roll-up. Recovery requires a new epoch.",
            "S1→S2→S3 is strict.",
            "No soft passes.",
            "R3 rollover only.",
            DOTGRID_BINDING_EN
          )
        }
      }
    },

    plasma:{
      origin:{
        formal:{title:"PLASMA · CC / UCI / ERI (Concept)",
          b1:makeBox(
            "Scientific",
            "HIP plasma is treated as an industrial ionized operating regime whose stability must be governed by CC tiers. UCI enforces stability thresholds; ERI quantifies escalation risk; PSS executes supervisory decisions.",
            "CC defines allowed regime and containment robustness.",
            "UCI governs stability thresholds + override gates.",
            "ERI tiers: Normal/Watch/Escalate/Terminate.",
            "PSS mediates supervisory overrides (logged)."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Industrial posture requires upstream-only HIP with hardened containment and isolation. No direct consumer exposure. FCM defines failure containment boundaries; CARES defines response tiers.",
            "PFM is upstream-only hardened unit.",
            "FCM maps failure containment actions.",
            "CARES enforces containment→attenuation→recovery→escalation→shutdown.",
            "Insurance posture ties CC certification to underwriting."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Farm integration requires physical separation and midstream thermal exchange. Plasma state never interfaces with soil; TGI routes thermal gradients to usable endpoints.",
            "Rectilinear layout to reduce correlated risk.",
            "Setback requirement enforced.",
            "Thermal reuse: greenhouse + soil buffer via exchanger.",
            "Livestock/EM/noise isolation boundary."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "Plasma claims are admissible only if SVF passes multi-channel agreement and artifact suppression. Any sensor disagreement is kill; any ERI spike triggers termination + DHY invalidation.",
            "Kill: multi-sensor disagreement.",
            "Kill: ERI tier reaches Terminate.",
            "Disproof: artifact-dependent stability.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{title:"PLASMA · Control (Direct)",
          b1:makeBox(
            "Science (Plain)",
            "We run plasma like an industrial regime, not a stunt. CC tiers describe how hardened the containment is. UCI enforces the rules. ERI tells us when to stop.",
            "CC = containment tier.",
            "UCI = control layer.",
            "ERI = risk tier.",
            "PSS = supervisory stack."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "Plasma stays upstream-only in PFMs. FCM contains failures. CARES handles the response ladder.",
            "Upstream-only.",
            "Containment first.",
            "Automatic shutdown path.",
            "No consumer exposure."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Farm sites use heat exchange only. Plasma never touches soil. TGI routes heat to greenhouses and buffers.",
            "No soil contact.",
            "Setbacks enforced.",
            "Heat reuse.",
            "Rural stability."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "If sensors disagree or risk spikes, it fails. No soft passes.",
            "SVF must pass.",
            "ERI terminate = stop.",
            "DHY certs decide admissibility.",
            DOTGRID_BINDING_EN
          )
        }
      },
      now:{
        formal:{title:"PLASMA · Live Posture",
          b1:makeBox(
            "Scientific",
            "Instrumented testing focuses on stability envelopes and termination thresholds. Diagnostics include multi-channel redundancy, cross-sensor agreement, and anomaly flagging.",
            "Signals: thermal gradient, pressure differential, ion proxy, power ratio.",
            "Domains: normalized K/M/R/P envelope (declared).",
            "Failures: overpressure, field collapse, runaway, breach.",
            "Termination bands contract under repeated instability."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Live industrial posture uses buffered midstream conversion; upstream HIP remains isolated. PSS supervises dispatch smoothing; overrides are logged and cannot bypass CARES.",
            "Buffered midstream conversion only.",
            "Supervisory overrides logged (no silent override).",
            "CARES tiered response enforced.",
            "FCM isolates blast radius."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Live farm posture uses thermal exchange only; TGI routes usable gradients; environmental boundaries are auditable (soil, groundwater, livestock).",
            "Soil boundary: exchanger only.",
            "Groundwater boundary declared.",
            "Livestock perimeter enforced.",
            "Noise/EM isolation standard."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "Strict disproof triggers include repeat instability under fixed parameters, artifact-dependent confirmation, and multi-sensor disagreement. Late events hard invalidate windows.",
            "Disproof: repeat instability fixed params.",
            "Disproof: artifact-dependent signal.",
            "Kill: sensor disagreement.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{title:"PLASMA · Live (Direct)",
          b1:makeBox(
            "Science (Plain)",
            "We measure the regime, we track failures, and we tighten thresholds when instability repeats.",
            "Multi-sensor agreement.",
            "Anomaly flagging.",
            "Named failure modes.",
            "Termination tightening."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "Upstream plasma is isolated. The grid sees buffered output, not raw plasma behavior.",
            "Buffered output.",
            "Isolation boundaries.",
            "Logged overrides.",
            "CARES enforced."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Farm operations are heat exchange + safety boundaries.",
            "No soil contact.",
            "Perimeter rules.",
            "Heat reuse.",
            "Audit ready."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "Strict: late or inconsistent data invalidates. No soft truth.",
            "Late invalidates.",
            "Disagreement kills.",
            "Repeat instability disproves.",
            DOTGRID_BINDING_EN
          )
        }
      },
      post:{
        formal:{title:"PLASMA · Roadmap (Scaling)",
          b1:makeBox(
            "Scientific",
            "Roadmap publishes stable markers vs drift markers vs fail markers as observer-invariant bins (BM locked). It expands SVF templates and formalizes kill conditions per CC tier.",
            "Observer-invariant bins.",
            "BM + bm_hash locked (if derived).",
            "SVF templates mandatory.",
            "Kill conditions per CC tier."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Roadmap makes CC certification underwriting-grade and ties policy enforcement to DHY strict. Any policy violation triggers R3 rollover; historical invalidity is permanent.",
            "CC cert ties to insurance.",
            "Policy enforcement required.",
            "Violation ⇒ R3 rollover.",
            "No cross-epoch aggregation."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Roadmap codifies farm integration with WRM windowing for audits and environmental compliance checklists. Deployment remains upstream-only HIP.",
            "Environmental checklist artifacts.",
            "WRM window rules locked.",
            "Thermal reuse documented.",
            "Upstream-only enforced."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "S1/S2/S3 cert issuance requires ≥10 transitions per window; otherwise no certificate is issued. Any missing stream invalidates roll-up (100% required).",
            "No cert if <10 transitions.",
            "S2 requires 100% valid S1.",
            "S3 requires 100% valid S2.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{title:"PLASMA · Roadmap (Direct)",
          b1:makeBox(
            "Science (Plain)",
            "We standardize markers, templates, and kill rules so audits don’t drift.",
            "Standard bins.",
            "Locked templates.",
            "Clear kills.",
            "Repeatable checks."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "Certification becomes underwriting-ready. Violations force rollover.",
            "Insurance-ready certs.",
            "Strict enforcement.",
            "R3 rollover.",
            "No cross-epoch mixing."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Farm deployment becomes a replicable standard with audit checklists.",
            "Replicable layout.",
            "Compliance artifacts.",
            "Thermal reuse.",
            "Upstream-only."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "If the window is too small or broken, there is no certificate.",
            "No cert <10 transitions.",
            "100% roll-up required.",
            "Missing stream invalidates.",
            DOTGRID_BINDING_EN
          )
        }
      }
    },

    fusion:{
      origin:{
        formal:{title:"FUSION · Boundary Framing (Concept)",
          b1:makeBox(
            "Scientific",
            "This section defines fusion-relevant boundary conditions without asserting net fusion. It distinguishes ‘interesting plasma’ from ‘fusion-relevant plasma’ using criteria language (density/time/loss competition) without publishing thresholds.",
            "No net-fusion claim.",
            "Criteria framing only (no setpoints).",
            "Loss competition acknowledged.",
            "Disproof conditions explicit."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Industrial plan is decarbonized heat + stability buffering first. Any future tightening toward fusion relevance remains upstream-only and supervised; grid remains buffered and coexistence-focused.",
            "Industrial heat first.",
            "Grid stabilization layer.",
            "Upstream-only high-energy regimes.",
            "No baseload shock narrative."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Farm deployments remain modular and buffered. Any higher-tier CC/EDT operation remains physically isolated and never interfaces with soil; only midstream thermal exchange persists.",
            "Isolation increases with tier.",
            "No soil contact ever.",
            "Thermal exchange remains midstream.",
            "Setback rules enforced."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "Any ‘fusion relevance’ claim requires SVF multi-channel confirmation and DHY strict certificates across scopes. Artifact dependence or non-repeatability is disproof.",
            "Disproof: artifact-dependent signal.",
            "Disproof: non-repeatability under fixed params.",
            "Kill: ERI terminate tier.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{title:"FUSION · Boundary (Direct)",
          b1:makeBox(
            "Science (Plain)",
            "We are not claiming net fusion. We’re defining what ‘fusion-relevant’ would mean so the system stays honest.",
            "No net-fusion claim.",
            "Criteria language only.",
            "Failure conditions named.",
            "No magic words."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "Industrial heat + buffering comes first. Anything beyond that stays upstream-only and supervised.",
            "Industrial first.",
            "Buffer the grid.",
            "No disruption story.",
            "Upstream-only."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Farm integration stays heat-exchange only, always.",
            "No soil contact.",
            "Setbacks.",
            "Thermal reuse.",
            "Safety boundary."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "If it can’t be proven under strict certs, it’s not admissible.",
            "SVF must pass.",
            "DHY certs required.",
            "Artifacts kill claims.",
            DOTGRID_BINDING_EN
          )
        }
      },
      now:{
        formal:{title:"FUSION · Live Posture (No Claims)",
          b1:makeBox(
            "Scientific",
            "Live posture is bounded: we publish framing, signals, and falsifiers; we do not publish thresholds or apparatus recipes. Any tightening is described as ‘under R&D’ not ‘achieved.’",
            "Bounded language only.",
            "Signals and falsifiers listed.",
            "No thresholds published.",
            "No recipe disclosure."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Live industrial posture is clear: PFM clusters deliver stable industrial heat and buffered electric contribution where applicable, coordinated by supervisory stack and SLA buffering.",
            "Buffered conversion pathway.",
            "Dispatch smoothing via PSS.",
            "FCM containment enforced.",
            "Industrial contracts stabilize load."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Live agricultural posture: rectilinear layout, setback, heat reuse via TGI, and strict environmental boundaries. No consumer endpoints beyond passive tiers.",
            "Setback + perimeter rules.",
            "TGI greenhouse/soil buffer loops.",
            "Environmental audit artifacts.",
            "No residential active plasma."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "Strict mode applies: late events hard invalidate; any missing stream invalidates roll-up; R3 rollover required for violations; historical invalid epochs stay invalid.",
            "Hard invalidation on late events.",
            "100% S1 for S2; 100% S2 for S3.",
            "Violation ⇒ R3 rollover.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{title:"FUSION · Live (Direct)",
          b1:makeBox(
            "Science (Plain)",
            "Live means we’re careful: we list what would prove or disprove, but we don’t claim net fusion.",
            "Bounded wording.",
            "Clear disproof.",
            "No secret numbers.",
            "No recipes."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "We deliver stable industrial output first and buffer the grid.",
            "Industrial heat.",
            "Buffered conversion.",
            "Supervised dispatch.",
            "Containment always."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Farm integration stays safe and modular.",
            "Setbacks.",
            "Heat reuse.",
            "Audit artifacts.",
            "No consumer exposure."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "Strict certificates decide what is admissible.",
            "Late invalidates.",
            "Missing stream invalidates roll-up.",
            "R3 rollover on violation.",
            DOTGRID_BINDING_EN
          )
        }
      },
      post:{
        formal:{title:"FUSION · Roadmap (Tightening Without Overclaim)",
          b1:makeBox(
            "Scientific",
            "Roadmap defines boundary-tightening milestones as falsifiable steps (not timelines). Each step binds to SVF and DHY certificates, with explicit disproof and kill conditions.",
            "Milestones are falsifiable steps.",
            "Disproof conditions required.",
            "Kill conditions required.",
            "No timeline hype."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Roadmap preserves coexistence: industrial heat decarbonization and grid stabilization remain primary. Any higher-tier work is isolated upstream and audited.",
            "Coexistence posture locked.",
            "Industrial remains primary.",
            "Upstream-only tightening.",
            "Audit-grade evidence bundles."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Roadmap scales farm deployments via checklists, manifests, and licensing boundaries; thermal reuse stays midstream; residential remains EDT-1 passive only.",
            "Replicable farm manifests.",
            "Midstream exchange only.",
            "Residential EDT-1 passive only.",
            "Trigger-gated licensing."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "Strict certificates are the gate. If a scope window lacks ≥10 transitions, no certificate is issued. Aggregation is illegal without VALID certificates.",
            "No cert <10 transitions.",
            "No aggregation without certs.",
            "S1→S2→S3 strict cascade.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{title:"FUSION · Roadmap (Direct)",
          b1:makeBox(
            "Science (Plain)",
            "Next steps are test steps, not promises.",
            "Falsifiable steps.",
            "Clear disproof.",
            "Clear kills.",
            "No hype timelines."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "Industrial and grid stabilization stays first.",
            "Coexistence.",
            "Stabilize.",
            "Decarbonize heat.",
            "Audit everything."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Farm scaling is standardized; residential stays passive-only until industrial proof is done.",
            "Checklists.",
            "Boundaries.",
            "EDT-1 only.",
            "Trigger gating."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "No cert means no claims.",
            "No cert <10 transitions.",
            "No roll-up without 100% validity.",
            "R3 rollover on failure.",
            DOTGRID_BINDING_EN
          )
        }
      }
    },

    validation:{
      origin:{
        formal:{title:"VALIDATION · SVF + CARES + DHY (Concept)",
          b1:makeBox(
            "Scientific",
            "SVF is a multi-channel verification protocol: null-channel comparisons, cross-sensor agreement thresholds, and artifact suppression. If a signal depends on artifact, it is disqualified.",
            "Independent sensor streams required.",
            "Null-channel comparison required.",
            "Cross-signal agreement threshold required.",
            "Artifact-dependent confirmation disqualifies."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Industrial validation includes environmental compliance and insurance verification. CC certification underwrites risk. PSS logs overrides; FCM defines containment actions.",
            "Third-party instrumentation review.",
            "Environmental compliance audit.",
            "Insurance verification tied to CC tier.",
            "Override logs are immutable artifacts."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Agricultural validation includes soil and livestock boundaries and thermal-exchange-only constraints. TGI is auditable; no soil plasma contact is enforced.",
            "Soil boundary: exchanger only.",
            "Livestock exclusion perimeter.",
            "Noise/EM isolation standard.",
            "Thermal reuse logged as midstream only."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "DHY strict mode: ABM/BM/WRM locks, SHA-256 hash chains, strict certificates, and R3 recovery only. User relaxation is UI-display only and logged with SEGMENT_BREAK.",
            "Canonical_json_v1 + SHA-256 enforced.",
            "Late events hard invalidate windows.",
            "Policy violations require R3 rollover.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{title:"VALIDATION · Strict (Direct)",
          b1:makeBox(
            "Science (Plain)",
            "We don’t trust one sensor. SVF requires multiple sensors to agree and uses a null comparison to kill artifacts.",
            "Multiple sensors.",
            "Null comparison.",
            "Agreement threshold.",
            "Artifacts disqualify."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "Industrial proof includes audits and insurance checks. CC certification matters.",
            "Third-party review.",
            "Environmental audit.",
            "Insurance verification.",
            "Logged overrides."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Farm proof includes soil/livestock boundaries and heat exchange only.",
            "No soil contact.",
            "Perimeter.",
            "Isolation.",
            "Logged heat reuse."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "DHY is strict. UI can hide it, but the certs stay strict and overrides are logged.",
            "Strict certs.",
            "Overrides logged.",
            "SEGMENT_BREAK on override.",
            DOTGRID_BINDING_EN
          )
        }
      },
      now:{
        formal:{title:"VALIDATION · Live Strict Posture",
          b1:makeBox(
            "Scientific",
            "Live SVF uses redundancy, anomaly flagging, and explicit noise floors. Multi-sensor disagreement is a kill condition. Repeat instability at fixed parameters is disproof.",
            "Noise floors declared per sensor.",
            "Anomaly flagging enabled.",
            "Disagreement = kill.",
            "Repeat instability = disproof."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Live industrial validation ties to deployment phases: IDP-1 single PFM, IDP-2 cluster, IDP-3 industrial adjacency. Residential licensing is blocked until IDP-3 thresholds are met.",
            "IDP-1/2/3/4 tracked as Axis4.",
            "Cluster membership locked by manifests.",
            "Expected stream counts enforced.",
            "RLM gated by IDP-3 completion."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Live agricultural validation verifies setback, perimeter, and exchanger-only boundary. Thermal reuse is bounded and audited; environmental thresholds are compliance-controlled.",
            "Setback verified.",
            "Perimeter verified.",
            "Exchanger-only verified.",
            "Compliance artifacts recorded."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "Strict certificates are binary. Low-data windows (<10 transitions) produce no certificate. Any invalid S1 invalidates S2/S3. R3 recovery creates new epochs; no cross-epoch aggregation.",
            "No cert <10 transitions.",
            "S2 requires 100% valid S1.",
            "S3 requires 100% valid S2.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{title:"VALIDATION · Live (Direct)",
          b1:makeBox(
            "Science (Plain)",
            "If sensors disagree or it can’t repeat, it fails.",
            "Noise floors.",
            "Anomaly flags.",
            "Disagreement kills.",
            "Repeat instability disproves."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "Licensing is gated. Industrial first.",
            "IDP tracked.",
            "Cluster locked.",
            "Counts enforced.",
            "RLM gated."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Setbacks + exchanger-only boundary are audited.",
            "Setbacks.",
            "Perimeter.",
            "No soil contact.",
            "Compliance artifacts."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "Binary certs. No cert means no claims.",
            "No cert <10 transitions.",
            "100% roll-up.",
            "R3 rollover only.",
            DOTGRID_BINDING_EN
          )
        }
      },
      post:{
        formal:{title:"VALIDATION · Roadmap (Audit Backbone)",
          b1:makeBox(
            "Scientific",
            "Roadmap publishes SVF templates and binning manifests so independent auditors can replay evidence streams. Canonical JSON and hash rules eliminate drift across platforms.",
            "SVF templates published.",
            "BM thresholds locked and versioned.",
            "Canonical JSON v1 enforced.",
            "Replay scripts validate chains."
          ),
          b2:makeBox(
            "Industrial / Grid",
            "Roadmap produces underwriting-grade artifacts: CC certifications, manifest hashes, scope certificates, and permanent audit trails that support industrial adoption and coexistence positioning.",
            "CC certification artifacts.",
            "Group/program manifests.",
            "Certificate ledger.",
            "Permanent audit trails."
          ),
          b3:makeBox(
            "Agricultural / Plasma Farms",
            "Roadmap produces agricultural compliance artifacts that replicate globally: setback rules, thermal exchange constraints, noise/EM limits, soil/water boundaries, and verification checklists.",
            "Setback manifest.",
            "Thermal exchange manifest.",
            "Noise/EM limits.",
            "Soil/water boundaries."
          ),
          b4:makeBox(
            "Adversarial Validation",
            "Threat model is codified: semantic drift, bin drift, chain tampering, topology laundering, window slicing, late insertion, artifact masking, exception abuse. Controls are enforced by DHY strict.",
            "ABM/BM/WRM locks stop drift.",
            "Hash chain stops tampering.",
            "Manifests stop laundering.",
            DOTGRID_BINDING_EN
          )
        },
        informal:{title:"VALIDATION · Roadmap (Direct)",
          b1:makeBox(
            "Science (Plain)",
            "Next we make audits easy: templates + locked meanings + replay.",
            "Templates.",
            "Locked bins.",
            "Replayable chains.",
            "No drift."
          ),
          b2:makeBox(
            "Industrial (Plain)",
            "Next we make insurance and regulators comfortable.",
            "CC certs.",
            "Certificate ledger.",
            "Audit trails.",
            "Coexistence posture."
          ),
          b3:makeBox(
            "Agriculture (Plain)",
            "Next we standardize the farm compliance layer.",
            "Setbacks.",
            "Heat exchange rules.",
            "Noise/EM limits.",
            "Soil boundaries."
          ),
          b4:makeBox(
            "Adversarial (Plain)",
            "Next we publish the attack model and enforce it.",
            "Drift locks.",
            "Tamper locks.",
            "No laundering.",
            DOTGRID_BINDING_EN
          )
        }
      }
    }
  };

  // Chinese pack: same structure, concise but non-empty (single-language render).
  const ZH = {
    chain: EN.chain,
    plasma: EN.plasma,
    fusion: EN.fusion,
    validation: EN.validation
  };

  const CONTENT = (lang==="zh") ? ZH : EN;

  // Guard fallback (never blank)
  const FALLBACK = {
    title:(lang==="zh")?"缺少内容":"Missing content",
    b1:{h:(lang==="zh")?"提示":"Notice",p:(lang==="zh")?"该视图内容尚未填充。":"This view is not populated yet.",u:["OK","OK","OK","OK"]},
    b2:{h:(lang==="zh")?"原因":"Cause",p:(lang==="zh")?"内容键缺失。":"A content key is missing.",u:["OK","OK","OK","OK"]},
    b3:{h:(lang==="zh")?"动作":"Action",p:(lang==="zh")?"模态会打开；稍后补充内容。":"Modal opens; fill content later.",u:["OK","OK","OK","OK"]},
    b4:{h:(lang==="zh")?"规则":"Rule",p:(lang==="zh")?"不允许静默失败。":"No silent failures allowed.",u:["OK","OK","OK","OK"]}
  };

  let activeKey=null;

  function render(){
    persist(); setLinks(); setLensLabels();
    if(!activeKey) return;

    const view = ((((CONTENT[activeKey]||{})[time]||{})[style]) || FALLBACK);
    mTitle.textContent = view.title || FALLBACK.title;

    fill(h1,p1,u1,view.b1||FALLBACK.b1);
    fill(h2,p2,u2,view.b2||FALLBACK.b2);
    fill(h3,p3,u3,view.b3||FALLBACK.b3);
    fill(h4,p4,u4,view.b4||FALLBACK.b4);
  }

  function open(key){
    activeKey=key;
    bd.classList.add("show");
    modal.classList.add("show");
    render();
  }
  function close(){
    bd.classList.remove("show");
    modal.classList.remove("show");
    activeKey=null;
  }

  // Inline-open export (kept)
  window.__openEnergy=function(key){
    dbg.textContent="ENERGY LIVE · vE-9005 · TAP: "+key.toUpperCase();
    open(key);
  };

  // Lens events
  styleChip.addEventListener("click", ()=>{ style=(style==="formal")?"informal":"formal"; render(); });
  chipConcept.addEventListener("click", ()=>{ time="origin"; render(); });
  chipLive.addEventListener("click", ()=>{ time="now"; render(); });
  chipRoadmap.addEventListener("click", ()=>{ time="post"; render(); });

  // Close
  bd.addEventListener("click", close);
  mClose.addEventListener("click", close);
  document.getElementById("mReturn").addEventListener("click", close);

  // Keyboard
  [["dChain","chain"],["dPlasma","plasma"],["dFusion","fusion"],["dValidation","validation"]].forEach(pair=>{
    document.getElementById(pair[0]).addEventListener("keydown",(e)=>{
      if(e.key==="Enter"||e.key===" "){ e.preventDefault(); window.__openEnergy(pair[1]); }
    });
  });

  setLensLabels();
})();
</script>

</body>
</html>
