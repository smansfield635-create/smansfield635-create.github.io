<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Control · Geodiametrics</title>
  <link rel="stylesheet" href="/assets/ui.css"/>
</head>

<body class="bg-gradient">
<main class="page">

  <!-- HERO -->
  <section class="panel hero">
    <h1>Control</h1>
    <p class="subtle">Read-only system state.</p>
  </section>

  <!-- BUILD STAMP -->
  <section class="panel">
    <p class="subtle">
      <strong>Build:</strong> 2026-02-01a ·
      <strong>Canonical:</strong> smansfield635-create.github.io
    </p>
  </section>

  <!-- LIVE GAUGE -->
  <section class="panel">
    <h2>Live Gauge</h2>
    <p class="subtle">Pulled from the canonical Truth Service.</p>
    <pre id="gauge" class="subtle">Loading…</pre>
  </section>

  <!-- NAV -->
  <section class="panel nav">
    <a class="btn block" href="/">Home</a>
    <a class="btn block" href="/engine/">Engine</a>
    <a class="btn block" href="/principles/">Laws</a>
    <a class="btn block" href="/reference/">Reference</a>
    <a class="btn block" href="/about/">About</a>
  </section>

</main>

<script>
  // SET THIS to your deployed Worker base URL (no trailing slash)
  const TRUTH_BASE = "https://geodiametrics-aggregator.smansfield635.workers.dev";

  async function loadGauge(){
    try{
      const res = await fetch(TRUTH_BASE + "/metrics", { cache: "no-store" });
      if(!res.ok) throw new Error(res.status);
      const data = await res.json();
      document.getElementById("gauge").textContent =
        JSON.stringify(data, null, 2);
    }catch(e){
      document.getElementById("gauge").textContent =
        "Unavailable";
    }
  }
  loadGauge();
</script>

</body>
</html>
