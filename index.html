<!-- TNT: /index.html -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Coherent Resolution Platform</title>

<link rel="stylesheet" href="/assets/ui.css?v=9100"/>

<style>
  :root{
    --ink:#05070c;--ink-deep:#070b12;
    --red:#7a0b14;--red-soft:rgba(122,11,20,.28);
    --gold:#caa04a;--gold-soft:rgba(202,160,74,.22);
    --text:#eaf2f6;--muted:rgba(234,242,246,.72);
    --glass:rgba(255,255,255,.06);--stroke:rgba(255,255,255,.10);
  }
  html,body{margin:0;padding:0;width:100%;height:100%;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;color:var(--text);background:var(--ink)}
  body{
    background:
      radial-gradient(1200px 900px at 15% 15%, var(--gold-soft) 0%, transparent 60%),
      radial-gradient(1400px 1000px at 85% 20%, var(--red-soft) 0%, transparent 65%),
      radial-gradient(1800px 1200px at 50% 0%, rgba(122,11,20,.18) 0%, transparent 70%),
      linear-gradient(to bottom, var(--ink-deep), var(--ink));
  }
  body::before{
    content:"";position:fixed;inset:-10%;pointer-events:none;z-index:-1;
    background:
      radial-gradient(520px 520px at 18% 10%, rgba(202,160,74,.16) 0%, transparent 65%),
      radial-gradient(640px 640px at 84% 14%, rgba(161,13,28,.20) 0%, transparent 70%),
      radial-gradient(760px 760px at 50% 5%, rgba(202,160,74,.10) 0%, transparent 75%);
    opacity:.62;filter:blur(6px);
    animation:fireworkPulse 6s ease-in-out infinite alternate;
  }
  @keyframes fireworkPulse{0%{opacity:.45;filter:blur(7px) brightness(.98)}100%{opacity:.75;filter:blur(6px) brightness(1.06)}}

  .page{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:26px 16px}
  .card{
    width:min(860px,96vw);
    border-radius:28px;
    background:linear-gradient(180deg, rgba(122,11,20,.20), rgba(0,0,0,.20));
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.12),0 35px 120px rgba(0,0,0,.75);
    backdrop-filter:blur(12px);
    padding:24px 18px 18px;
  }

  .title{
    text-align:center;
    padding:6px 8px 0;
  }
  .title h1{
    margin:0;
    font-weight:950;
    letter-spacing:.06em;
    text-transform:uppercase;
    font-size:clamp(34px,7vw,62px);
    line-height:1.02;
  }
  .title p{margin:10px 0 0;color:var(--muted);font-size:18px;line-height:1.35}

  .panel{
    margin-top:18px;
    border-radius:22px;
    background:rgba(0,0,0,.18);
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);
    padding:16px;
  }
  .panel .label{
    text-align:center;
    letter-spacing:.22em;
    text-transform:uppercase;
    font-weight:900;
    opacity:.7;
    font-size:12px;
    margin-bottom:12px;
  }

  .choice{
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  .btn{
    border:0;
    cursor:pointer;
    width:100%;
    border-radius:18px;
    padding:16px 16px;
    text-align:left;
    background:rgba(255,255,255,.08);
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.12);
    color:var(--text);
    font-weight:900;
    letter-spacing:.10em;
    text-transform:uppercase;
    font-size:16px;
    position:relative;
    -webkit-tap-highlight-color:transparent;
  }
  .btn small{
    display:block;
    font-size:12px;
    letter-spacing:.14em;
    opacity:.70;
    margin-top:8px;
    text-transform:none;
    font-weight:700;
  }
  .btn .tag{
    position:absolute;
    right:14px;
    top:50%;
    transform:translateY(-50%);
    width:46px;
    height:46px;
    border-radius:999px;
    background:rgba(0,0,0,.18);
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:950;
    letter-spacing:.10em;
    font-size:12px;
    opacity:.92;
  }

  .btn.active{
    background:rgba(202,160,74,.18);
    box-shadow:inset 0 0 0 1px rgba(255,255,255,.14),0 18px 70px rgba(0,0,0,.55);
  }

  .hint{
    margin-top:12px;
    text-align:center;
    color:rgba(234,242,246,.70);
    font-size:14px;
    line-height:1.35;
  }

  .ink{
    margin-top:14px;
    text-align:center;
    letter-spacing:.22em;
    font-weight:900;
    opacity:.40;
    font-size:12px;
    text-transform:uppercase;
  }
  footer{
    margin-top:10px;
    text-align:center;
    opacity:.55;
    letter-spacing:3px;
    font-size:12px;
  }
</style>
</head>

<body>
<div class="page">
  <div class="card">
    <div class="title">
      <h1>COHERENT<br/>RESOLUTION<br/>PLATFORM</h1>
      <p>Choose your language once. Everything adapts from there.</p>
    </div>

    <div class="panel">
      <div class="label">Language</div>

      <div class="choice">
        <button class="btn" id="btnEN" type="button">
          ENGLISH
          <small>Proceed in English.</small>
          <span class="tag">EN</span>
        </button>

        <button class="btn" id="btnZH" type="button">
          中文
          <small>以中文为主（少量基础英文词）。</small>
          <span class="tag">ZH</span>
        </button>
      </div>

      <div class="hint" id="hint">
        This selection sets the interface language. You can change it later from the Door.
      </div>
    </div>

    <div class="ink">GEODIAMETRICS</div>
    <footer>CANONICAL · STABLE · © GEODIAMETRICS</footer>
  </div>
</div>

<script>
(() => {
  const KEY_LANG = "crp_lang";   // MUST MATCH Door/Home
  const KEY_DEPTH = "crp_depth"; // used later

  // Default if none picked
  function getLang(){
    return (localStorage.getItem(KEY_LANG) || "EN").toUpperCase();
  }

  function setLang(lang){
    const v = (lang || "EN").toUpperCase();
    localStorage.setItem(KEY_LANG, v);
    // Keep compatibility if you had older keys floating around:
    localStorage.setItem("lang", v);
  }

  function highlight(){
    const lang = getLang();
    document.getElementById("btnEN").classList.toggle("active", lang === "EN");
    document.getElementById("btnZH").classList.toggle("active", lang === "ZH");
  }

  function goNext(){
    // Next hop is Door (depth select + route select)
    location.href = "/door/";
  }

  document.getElementById("btnEN").addEventListener("click", () => {
    setLang("EN");
    highlight();
    goNext();
  });

  document.getElementById("btnZH").addEventListener("click", () => {
    setLang("ZH");
    highlight();
    goNext();
  });

  // If user comes back here, show current selection
  highlight();

  // Ensure there is always a depth default
  if (!localStorage.getItem(KEY_DEPTH)) localStorage.setItem(KEY_DEPTH, "EXPLORE");
})();
</script>
</body>
</html>
