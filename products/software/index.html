<!-- TNT — /products/software/index.html
     PRODUCTS · SOFTWARE (MOBILE-SAFE · LONG BUBBLE FORMAT · NO MODALS)
     DESIGN INTENT (LOCKED):
       - Dark opal + red (NO washed-out blue)
       - Long accordion bubbles (like Laws/Products)
       - 2-point selector (ENGINE / PLATFORM) filters the domain list (no overlay)
       - Each domain expands → shows Concept / Live / Roadmap sub-bubbles (tap-to-open)
       - Tone toggle (INFORMAL / FORMAL) switches copy (real split)
       - EN/中文/ES page-level language toggle
       - Canon state carry: lang/style/time/depth (URL + LS gd_*), preserved on every jump
       - Back buttons: BACK (Products) + DOOR + EXIT (Index)
     LOCKS:
       - Uses /assets/ui.css + /assets/branch.css + /assets/instruments.js only
       - Does NOT style html/body background (ui.css owns field)
       - Tap-safe (no inline onclick)
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · SOFTWARE</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
a{color:inherit;text-decoration:none}
:root{
  --dockH:88px;

  /* Dark opal (NO blue wash) */
  --opalA:rgba(210,190,255,.14);
  --opalB:rgba(120,70,255,.10);
  --opalC:rgba(255,80,80,.08);

  --inkA:rgba(12,22,38,.92);
  --inkB:rgba(6,10,16,.96);
  --goldSoft:rgba(212,175,55,.35);

  --mut:rgba(255,255,255,.90);
  --mut2:rgba(255,255,255,.74);

  --redGlow:rgba(255,70,70,.18);
}

/* Top controls */
.top-left{
  position:fixed;left:16px;top:16px;z-index:240;
  display:flex;gap:10px;flex-wrap:nowrap;white-space:nowrap;align-items:center;
}
.top-right{
  position:fixed;right:16px;top:16px;z-index:240;
  display:flex;gap:10px;flex-wrap:nowrap;white-space:nowrap;align-items:center;
}
.top-left .btn,.top-right .btn{white-space:nowrap}

/* Page */
.page{
  width:min(1100px,94vw);
  margin:0 auto;
  padding:90px 0 calc(var(--dockH) + 18px);
  display:flex;
  flex-direction:column;
  gap:12px;
  position:relative;
  z-index:10;
}

/* Header */
.header{
  border:1px solid rgba(255,255,255,.10);
  border-radius:22px;
  background:
    radial-gradient(circle at 22% 18%, var(--opalA), transparent 62%),
    radial-gradient(circle at 78% 30%, var(--opalB), transparent 66%),
    radial-gradient(circle at 62% 92%, var(--opalC), transparent 64%),
    rgba(0,0,0,.14);
  backdrop-filter:blur(10px);
  padding:14px 16px;
  box-shadow:0 24px 80px rgba(0,0,0,.55);
}
.k{font-size:11px;letter-spacing:4px;text-transform:uppercase;opacity:.72;margin:0 0 6px}
.t{font-weight:950;font-size:26px;letter-spacing:.6px;margin:0 0 6px}
.s{font-size:13.5px;opacity:.86;line-height:1.5;margin:0;max-width:980px}
.fine{margin-top:10px;font-size:12.25px;opacity:.70;line-height:1.45}

/* Selector row */
.selector{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:space-between;
  align-items:center;
}
.pills{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
}
.pill{
  padding:10px 14px;
  border-radius:999px;
  background:linear-gradient(145deg, rgba(17,22,28,.92), rgba(11,15,20,.96));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 14px 36px rgba(0,0,0,.65);
  cursor:pointer;
  font-weight:900;
  letter-spacing:.2px;
  color:#fff;
  user-select:none;
  -webkit-tap-highlight-color:transparent;
}
.pill.active{
  border-color:rgba(212,175,55,.55);
  box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px rgba(212,175,55,.18);
}
.pill.red.active{
  border-color:rgba(255,90,90,.55);
  box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 16px var(--redGlow);
}

/* Band */
.band{
  padding:10px 12px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.12);
  font-weight:950;
  letter-spacing:.2px;
  color:rgba(255,255,255,.86);
}

/* Accordion list (long bubbles) */
.list{display:flex;flex-direction:column;gap:12px}

.row{
  border:1px solid rgba(255,255,255,.10);
  border-radius:22px;
  background:linear-gradient(145deg, rgba(17,22,28,.86), rgba(11,15,20,.92));
  box-shadow:0 16px 52px rgba(0,0,0,.60);
  overflow:hidden;
}
.head{
  display:flex;align-items:flex-start;justify-content:space-between;
  gap:10px;
  padding:14px 16px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  touch-action:manipulation;
}
.left{
  display:flex;
  align-items:flex-start;
  gap:12px;
  min-width:0;
}
.barWrap{display:flex;align-items:flex-start;gap:10px;flex:0 0 auto;margin-top:2px}
.diamond{
  width:10px;height:10px;
  transform:rotate(45deg);
  border-radius:3px;
  background:var(--c);
  box-shadow:0 0 0 1px rgba(255,255,255,.14), 0 0 14px rgba(0,0,0,.35);
}
.bar{
  width:6px;height:22px;border-radius:99px;background:var(--c);
  box-shadow:0 0 18px rgba(0,0,0,.25);
}
.titleBlock{min-width:0}
.title{
  font-weight:950;
  letter-spacing:.2px;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}
.sub{
  margin-top:6px;
  font-size:12.75px;
  opacity:.80;
  line-height:1.35;
  max-width:92ch;
}
.chev{font-size:16px;opacity:.75;flex:0 0 auto;margin-top:2px}

.body{
  display:none;
  padding:14px 16px 16px;
  border-top:1px solid rgba(255,255,255,.08);
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.06), transparent 55%),
    linear-gradient(145deg, rgba(12,22,38,.86), rgba(7,11,18,.92));
}
.row.open .body{display:block}

.pdesc{
  margin:0;
  color:rgba(255,255,255,.86);
  line-height:1.55;
  font-size:13.25px;
}

/* Sub-bubbles inside row: Concept / Live / Roadmap */
.subBubbles{margin-top:12px;display:flex;flex-direction:column;gap:10px}
.bubble{
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  background:rgba(255,255,255,.05);
  padding:14px 14px 12px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}
.bubble h4{margin:0 0 8px;font-weight:950;letter-spacing:.15px}
.bubble p{margin:0;color:rgba(255,255,255,.78);line-height:1.65;display:none}
.bubble.open p{display:block}

.actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
  margin-top:12px;
}
.actions .btn{
  padding:10px 12px;
  border-radius:999px;
  white-space:nowrap;
}

/* Dock */
.dock{
  position:fixed;left:50%;
  bottom:max(10px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:220;
  width:min(980px,94vw);
  padding:10px 12px;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.22);
  backdrop-filter:blur(10px);
  box-shadow:0 18px 60px rgba(0,0,0,.55);
  display:grid;
  grid-template-columns:repeat(4, minmax(0,1fr));
  gap:10px;
}
.dock .btn{width:100%;padding:10px 10px;border-radius:999px;white-space:nowrap}
@media (max-width:520px){
  :root{--dockH:98px}
  .dock{grid-template-columns:repeat(3, minmax(0,1fr))}
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" id="btnBack" href="/products/">BACK</a>
  <a class="btn" id="btnDoor" href="/door/">DOOR</a>
  <a class="btn" id="btnExit" href="/index.html">EXIT</a>
</div>

<div class="top-right" aria-label="Language">
  <button class="btn" id="btnEN" type="button">EN</button>
  <button class="btn" id="btnZH" type="button">中文</button>
  <button class="btn" id="btnES" type="button">ES</button>
</div>

<div class="page">

  <div class="header">
    <p class="k" id="hk">SOFTWARE</p>
    <h1 class="t" id="ht">THE MACHINE BEHIND THE PAGES</h1>
    <p class="s" id="hs">Pick a side. Open one domain. Then open Concept / Live / Roadmap.</p>
    <div class="fine" id="fine">Rule: big ideas are allowed, but every claim stays support-bounded.</div>

    <div class="selector" style="margin-top:12px">
      <div class="pills" aria-label="Side">
        <button class="pill red active" id="pillEngine" type="button">ENGINE</button>
        <button class="pill red" id="pillPlatform" type="button">PLATFORM</button>
      </div>
      <div class="pills" aria-label="Tone">
        <button class="pill active" id="pillInformal" type="button">INFORMAL</button>
        <button class="pill" id="pillFormal" type="button">FORMAL</button>
      </div>
    </div>
  </div>

  <div class="band" id="band">ENGINE DOMAINS</div>
  <div class="list" id="list"></div>

</div>

<nav class="dock" aria-label="Bottom navigation">
  <a class="btn" id="dockHome" href="/home/">HOME</a>
  <a class="btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="btn" id="dockGauges" href="/gauges/">GAUGES</a>
</nav>

<script>
(function(){
  // ===== canonical state =====
  var qs=new URLSearchParams(location.search);
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var style = qs.get("style") || localStorage.getItem("gd_style") || "informal";
  var time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  var depth = qs.get("depth") || localStorage.getItem("gd_depth") || "explore";

  if(lang!=="en" && lang!=="zh" && lang!=="es") lang="en";
  if(style!=="formal" && style!=="informal") style="informal";
  if(time==="trajectory") time="post";
  if(time!=="origin" && time!=="now" && time!=="post") time="now";
  if(depth!=="explore" && depth!=="learn") depth="explore";

  try{
    localStorage.setItem("gd_lang",lang);
    localStorage.setItem("gd_style",style);
    localStorage.setItem("gd_time",time);
    localStorage.setItem("gd_depth",depth);
  }catch(e){}

  document.documentElement.lang=(lang==="zh")?"zh":(lang==="es")?"es":"en";

  function q(over){
    var L=(over&&over.lang)?over.lang:lang;
    var S=(over&&over.style)?over.style:style;
    var T=(over&&over.time)?over.time:time;
    var D=(over&&over.depth)?over.depth:depth;
    return "?lang="+encodeURIComponent(L)+
           "&style="+encodeURIComponent(S)+
           "&time="+encodeURIComponent(T)+
           "&depth="+encodeURIComponent(D);
  }

  // wire nav
  function wire(id, path){
    var el=document.getElementById(id);
    if(el) el.href = path + q();
  }
  wire("btnBack","/products/");
  wire("btnDoor","/door/");
  wire("btnExit","/index.html");
  wire("dockHome","/home/");
  wire("dockProducts","/products/");
  wire("dockLaws","/laws/");
  wire("dockGauges","/gauges/");

  // language toggle (reload same path)
  var btnEN=document.getElementById("btnEN");
  var btnZH=document.getElementById("btnZH");
  var btnES=document.getElementById("btnES");
  function paintLang(){
    btnEN.classList.toggle("active", lang==="en");
    btnZH.classList.toggle("active", lang==="zh");
    btnES.classList.toggle("active", lang==="es");
  }
  paintLang();
  function setLang(next){
    if(next!=="en" && next!=="zh" && next!=="es") next="en";
    lang=next;
    try{ localStorage.setItem("gd_lang",lang); }catch(e){}
    window.location.href = window.location.pathname + q({lang:lang});
  }
  btnEN.addEventListener("click", function(){ setLang("en"); });
  btnZH.addEventListener("click", function(){ setLang("zh"); });
  btnES.addEventListener("click", function(){ setLang("es"); });

  // ===== i18n for header labels (kept light; content is per-domain packs below) =====
  function setText(id, v){ var el=document.getElementById(id); if(el) el.textContent=v; }

  if(lang==="zh"){
    setText("hk","软件");
    setText("ht","页面背后的机器");
    setText("hs","先选侧面，再开一个域，然后打开：概念 / 上线 / 路线图。");
    setText("fine","规则：允许大想法，但任何主张必须有支撑边界。");
    setText("btnBack","返回");
    setText("btnDoor","门");
    setText("btnExit","退出");
    setText("dockHome","主页");
    setText("dockProducts","产品");
    setText("dockLaws","法则");
    setText("dockGauges","量规");
    setText("pillEngine","引擎");
    setText("pillPlatform","平台");
    setText("pillInformal","通俗");
    setText("pillFormal","正式");
  }else if(lang==="es"){
    setText("hk","SOFTWARE");
    setText("ht","LA MÁQUINA DETRÁS DE LAS PÁGINAS");
    setText("hs","Elige lado. Abre un dominio. Luego abre: Concepto / En vivo / Hoja de ruta.");
    setText("fine","Regla: se permiten ideas grandes, pero toda afirmación queda acotada por soporte.");
    setText("btnBack","VOLVER");
    setText("btnDoor","PUERTA");
    setText("btnExit","SALIR");
    setText("dockHome","INICIO");
    setText("dockProducts","PRODUCTOS");
    setText("dockLaws","LEYES");
    setText("dockGauges","MEDIDORES");
    setText("pillEngine","MOTOR");
    setText("pillPlatform","PLATAFORMA");
    setText("pillInformal","INFORMAL");
    setText("pillFormal","FORMAL");
  }

  // ===== side + tone =====
  var side="engine"; // engine|platform
  var tone=style;    // informal|formal

  var pillEngine=document.getElementById("pillEngine");
  var pillPlatform=document.getElementById("pillPlatform");
  var pillInformal=document.getElementById("pillInformal");
  var pillFormal=document.getElementById("pillFormal");
  var band=document.getElementById("band");
  var list=document.getElementById("list");

  function paintPills(){
    pillEngine.classList.toggle("active", side==="engine");
    pillPlatform.classList.toggle("active", side==="platform");
    pillInformal.classList.toggle("active", tone==="informal");
    pillFormal.classList.toggle("active", tone==="formal");
  }

  pillEngine.addEventListener("click", function(){ side="engine"; paintPills(); render(); });
  pillPlatform.addEventListener("click", function(){ side="platform"; paintPills(); render(); });
  pillInformal.addEventListener("click", function(){ tone="informal"; try{localStorage.setItem("gd_style","informal");}catch(e){} paintPills(); render(); });
  pillFormal.addEventListener("click", function(){ tone="formal"; try{localStorage.setItem("gd_style","formal");}catch(e){} paintPills(); render(); });

  // ===== content packs (TED-style informal + spec formal; 72 narratives present) =====
  function P(en,zh,es){ return {en:en, zh:zh, es:es}; }
  function pick(o){ return (lang==="zh")?o.zh:(lang==="es")?(o.es||o.en):o.en; }

  // Domain labels + color tokens (diamond + bar)
  var DOM = {
    state_runtime:{c:"#60A5FA", t:P("State Runtime","状态运行时","Runtime de estado"), s:P("Your app’s ‘physics’—what is true right now.","应用的“物理学”——现在什么是真的。","La ‘física’ de tu app: qué es verdad ahora.")},
    deterministic_gates:{c:"#F59E0B", t:P("Deterministic Gates","确定性闸门","Compuertas deterministas"), s:P("Pass/fail rules that don’t change with mood.","不会随情绪变化的通过/失败规则。","Reglas pasa/falla sin ‘vibras’.")},
    receipt_progression:{c:"#93C5FD", t:P("Receipt Progression","收据式推进","Progresión por recibos"), s:P("You move forward because you proved it.","你前进是因为你证明了。","Avanzas porque lo probaste.")},
    audit_discipline:{c:"#34D399", t:P("Audit Discipline","审计纪律","Disciplina de auditoría"), s:P("How you stay honest under pressure.","压力下保持诚实的方法。","Cómo mantenerse honesto bajo presión.")},
    change_control:{c:"#A3A3A3", t:P("Change Control","变更控制","Control de cambios"), s:P("Upgrade without rewriting history.","升级但不改写历史。","Actualizar sin reescribir historia.")},
    admissibility_doctrine:{c:"#EF4444", t:P("Admissibility Doctrine","可采信教义","Doctrina de admisibilidad"), s:P("Don’t claim more than receipts allow.","别说超过收据允许的东西。","No afirmes más de lo que permiten los recibos.")},

    navigation_surfaces:{c:"#60A5FA", t:P("Navigation Surfaces","导航界面","Superficies de navegación"), s:P("Tap should do one clean thing.","一次点击只做一件干净的事。","Un toque = una acción limpia.")},
    product_packaging:{c:"#F59E0B", t:P("Product Packaging","产品封装","Empaquetado de producto"), s:P("Make tools usable without inflating claims.","让工具可用但不膨胀主张。","Hacer usable sin inflar afirmaciones.")},
    enterprise_deployment:{c:"#93C5FD", t:P("Enterprise Deployment","企业部署","Despliegue empresarial"), s:P("Scale in waves, with rollback ready.","分波次扩张，随时可回滚。","Escalar en olas con rollback listo.")},
    dotgrid_sweeps:{c:"#34D399", t:P("Dot.Grid Sweeps","Dot.Grid 扫掠","Barridos Dot.Grid"), s:P("Index & sweep: compare reality across time.","索引+扫掠：跨时间比较现实。","Indexar y barrer: comparar en el tiempo.")},
    scoring_outputs:{c:"#A3A3A3", t:P("Scoring Outputs","评分输出","Salidas de puntuación"), s:P("Readable signals with reason codes.","带原因码的可读信号。","Señales legibles con razones.")},
    registry_lookups:{c:"#EF4444", t:P("Registry Lookups","登记查询","Consultas de registro"), s:P("Status you can check without ‘trust me’.","无需‘信我’也能核查的状态。","Estado verificable sin ‘créeme’.")}
  };

  // 12 × (concept/live/roadmap) × (formal/informal)
  var TEXT = {
    state_runtime:{
      concept:{
        informal:P(
          "Think of runtime as the app’s gravity. It decides what counts as ‘now’ and what the next tap is allowed to do. If the runtime is fuzzy, every page becomes an argument. If it’s crisp, the whole system feels calm.",
          "把运行时当作应用的重力：它决定什么算“现在”，以及下一次点击允许做什么。运行时模糊，页面就会变成争论；运行时清晰，系统就会变得安静稳定。",
          "El runtime es la gravedad de la app: define qué es ‘ahora’ y qué permite el siguiente toque. Si es difuso, todo se vuelve discusión; si es nítido, todo se vuelve calmado."
        ),
        formal:P(
          "Runtime is a constrained state machine under declared keys and scope. Atomic transitions produce reproducible next states from identical evidence, preventing semantic drift under navigation and refresh.",
          "运行时是受约束的状态机：在声明键与范围下，原子化转移从同证据得到可复现下一状态，阻断导航/刷新下的语义漂移。",
          "El runtime es una máquina de estados acotada: transiciones atómicas producen estados siguientes reproducibles a partir de la misma evidencia, evitando deriva bajo navegación/recarga."
        )
      },
      live:{
        informal:P(
          "Live runtime means: you can bounce around, change language, refresh the page, and it still remembers what’s true. If something conflicts, it doesn’t improvise—it rolls back to the last stable place.",
          "上线运行时意味着：你随便跳、切语言、刷新，系统仍记得什么是真的。出现冲突时不临场发挥，而是回滚到最后稳定位置。",
          "En vivo: puedes navegar, cambiar idioma, recargar, y el sistema sigue correcto. Si hay conflicto, no improvisa: hace rollback al último estado estable."
        ),
        formal:P(
          "Live posture requires refresh-safe persistence, deterministic back-nav invalidation, and receipt-gated forward moves. Conflicts resolve by containment and rollback, not reinterpretation.",
          "上线姿态要求：刷新安全持久化、确定性回退失效、收据闸门式前进。冲突通过隔离与回滚解决，而非事后换义。",
          "En vivo requiere persistencia segura, invalidación determinista al volver y avance con recibos. Conflictos se resuelven con contención/rollback, no reinterpretación."
        )
      },
      roadmap:{
        informal:P(
          "Next, runtime becomes portable: it can emit tiny ‘what happened’ receipts you can carry across pages and products. That’s how you build a platform that stays honest while it grows.",
          "下一步是运行时可携带：它能输出小型“发生了什么”的收据，跨页面/跨产品带着走。平台想长大又不漂移，就靠这个。",
          "Luego el runtime se vuelve portátil: emite recibos pequeños de ‘qué pasó’ que viajan entre páginas y productos. Así crece una plataforma sin perder honestidad."
        ),
        formal:P(
          "Roadmap adds exportable receipt bundles (inputs/decision/result) and domain adapters while preserving the state contract. Coverage expands without changing invariants.",
          "路线图加入可导出收据包（输入/决策/结果）与领域适配器，同时保持状态契约不变；覆盖面扩大但不变量不变。",
          "La hoja de ruta añade paquetes de recibos exportables (entradas/decisión/resultado) y adaptadores por dominio, preservando el contrato de estado e invariantes."
        )
      }
    },

    deterministic_gates:{
      concept:{
        informal:P(
          "A gate is a friendly bouncer. It doesn’t care who you are—only what you brought. If the proof isn’t there, you don’t get in. That’s how you stop drift before it becomes drama.",
          "闸门像友好的门卫：不看你是谁，只看你带了什么。没证明就不放行。漂移在变成闹剧前就被止住。",
          "Una compuerta es un portero justo: no le importa quién eres, solo qué trajiste. Sin prueba no entras. Así detienes la deriva antes del drama."
        ),
        formal:P(
          "Gates are binary admissibility checks under declared scope. Given inputs, the outcome is deterministic (pass/fail) and cannot be overridden by narrative.",
          "闸门是在声明范围内的二元可采信检查：给定输入，结果确定（通过/失败），不能被叙事覆盖。",
          "Las compuertas son checks binarios de admisibilidad: con inputs dados, el resultado es determinista (pasa/falla) y no se anula con narrativa."
        )
      },
      live:{
        informal:P(
          "Live gating means no ‘timer tricks’ and no secret exceptions. Failures get contained and explained. Passes move forward with a receipt so you can replay the decision later.",
          "上线闸门意味着没有“计时花招”、没有暗例外。失败会被隔离并解释；通过则带收据前进，之后还能复跑验证。",
          "En vivo no hay trucos de tiempo ni excepciones secretas. Fallos se contienen y se explican; pases avanzan con recibo para poder re-ejecutar la decisión."
        ),
        formal:P(
          "Live gates forbid timers-as-gates, hidden shortcuts, and silent overrides. Decisions emit reason codes and are logged for replay under identical rules.",
          "上线闸门禁止计时作闸门、暗捷径、静默覆盖。决策带原因码并记录，可在同规则下回放。",
          "En vivo se prohíben temporizadores como compuertas, atajos ocultos y overrides silenciosos. Las decisiones llevan códigos de razón y quedan registradas para replay."
        )
      },
      roadmap:{
        informal:P(
          "Next, gates become shareable. Two people can look at the same receipt and land on the same answer—no arguing. That’s what scalable trust feels like.",
          "下一步闸门可分享：两个人看同一份收据会得到同一个答案——不用吵。这就是可规模化信任。",
          "Luego, las compuertas se vuelven compartibles: dos personas ven el mismo recibo y llegan a la misma respuesta. Eso es confianza escalable."
        ),
        formal:P(
          "Roadmap adds standardized reason codes and independent replay so gate outcomes are observer-invariant from the same receipt set.",
          "路线图加入标准原因码与独立回放，使闸门结果在同收据集下对观察者不变。",
          "La hoja de ruta añade códigos de razón estandarizados y replay independiente para que los resultados sean invariantes entre observadores con el mismo set de recibos."
        )
      }
    },

    receipt_progression:{
      concept:{
        informal:P(
          "Progress here is earned, not assumed. You don’t get ‘advanced’ because you waited—you advance because you produced something real. Receipts turn learning and building into proof, not vibes.",
          "这里的进步是挣来的，不是默认的。不是等一等就升级，而是因为你产出了真实结果。收据把学习和构建变成证明，而不是感觉。",
          "Aquí el progreso se gana, no se asume. No avanzas por esperar; avanzas por producir algo real. Los recibos convierten aprendizaje y construcción en prueba, no ‘vibras’."
        ),
        formal:P(
          "Progression is receipt-gated: advancement requires evidence that survives scope locks. Time does not grant progression; outputs do.",
          "推进是收据闸门式：升级必须有在范围锁下仍成立的证据。时间不授予推进，输出才授予推进。",
          "La progresión está acotada por recibos: avanzar requiere evidencia que sobreviva a bloqueos de alcance. El tiempo no otorga progreso; las salidas sí."
        )
      },
      live:{
        informal:P(
          "Live progression keeps you honest across navigation. If you go back, downstream steps can become invalid—and the system tells you cleanly. That’s how you prevent accidental ‘skip into the future.’",
          "上线推进会在导航中保持诚实：你一回退，下游步骤可能失效，系统会干净地告诉你。这能防止“误闯未来”。",
          "En vivo, la progresión se mantiene honesta al navegar. Si vuelves atrás, pasos posteriores pueden invalidarse y el sistema te lo indica. Evita ‘saltar al futuro’ por accidente."
        ),
        formal:P(
          "Live progression preserves state across navigation/language toggles. Back-nav invalidates downstream receipts deterministically; forward movement requires confirmation under the same rubric.",
          "上线推进在导航/语言切换中保持状态；回退确定性地使下游收据失效；前进需在同评分规下确认。",
          "En vivo, la progresión preserva estado al navegar/cambiar idioma. Volver invalida recibos de forma determinista; avanzar requiere confirmación con la misma rúbrica."
        )
      },
      roadmap:{
        informal:P(
          "Next, receipts become portable: you can prove progress across products without exposing private details. Proof scales, privacy stays.",
          "下一步收据可携带：你能在不同产品间证明进度，而不暴露隐私细节。证明能扩展，隐私不牺牲。",
          "Luego, los recibos se vuelven portátiles: puedes probar progreso entre productos sin exponer detalles privados. La prueba escala, la privacidad permanece."
        ),
        formal:P(
          "Roadmap enables registrable, hashable receipt bundles for cross-product recognition without centralized trust.",
          "路线图实现可登记、可哈希的收据包，支持跨产品认可且不依赖中心信任。",
          "La hoja de ruta habilita paquetes de recibos registrables/hasheables para reconocimiento entre productos sin confianza centralizada."
        )
      }
    },

    audit_discipline:{
      concept:{
        informal:P(
          "Audit discipline is how you keep your story from changing under pressure. You don’t argue intent—you show what happened. Receipts decide. That’s the difference between ‘trust me’ and ‘check me.’",
          "审计纪律让你的故事在压力下不变形：不争论意图，只展示发生了什么。收据裁决。这就是“信我”和“核查我”的区别。",
          "La auditoría evita que la historia cambie bajo presión: no discutes intención, muestras lo ocurrido. Los recibos deciden. Es la diferencia entre ‘créeme’ y ‘verifícame’."
        ),
        formal:P(
          "Audit discipline requires observer-invariant evaluation: outputs are judged by receipts under declared scope, not intent.",
          "审计纪律要求观察者不变：在声明范围内用收据评判输出，而非意图。",
          "La disciplina de auditoría exige evaluación invariante: se juzga por recibos bajo alcance declarado, no por intención."
        )
      },
      live:{
        informal:P(
          "Live audits make disputes boring. If we disagree, we pull the receipt. If it’s missing, we log the gap and stop escalation. Cheap conflict. Clean resolution.",
          "上线审计让争执变无聊：不一致就拿收据；缺收据就记缺口并停止升级。冲突成本变低，解决变干净。",
          "En vivo, las auditorías vuelven las disputas aburridas: si discrepamos, vemos el recibo. Si falta, registramos el hueco y paramos la escalación."
        ),
        formal:P(
          "Live audit mode produces replayable bundles. Disagreements resolve through scope constraints or missing receipts, not interpretation battles.",
          "上线审计产出可回放包；分歧通过范围约束或缺失收据解决，而不是解释之争。",
          "En vivo, el modo auditoría produce paquetes re-ejecutables. Desacuerdos se resuelven por alcance o recibos faltantes, no por interpretaciones."
        )
      },
      roadmap:{
        informal:P(
          "Next, auditing gets fast without getting weak. Builders can’t secretly tune outcomes, and auditors can’t quietly relax rules. That’s how trust survives scale.",
          "下一步审计更快但不更弱：开发者不能暗调结果，审计者也不能暗放宽规则。信任才能经受规模。",
          "Luego, auditorías más rápidas sin volverse débiles: quien construye no puede ‘tunear’ resultados en secreto, y quien audita no puede relajar reglas en silencio."
        ),
        formal:P(
          "Roadmap adds audit automation with separation of tuning authority: thresholds are versioned, changes create new epochs, and results remain comparable.",
          "路线图加入自动审计并分离调参权：阈值版本化，变更开新纪元，结果保持可比。",
          "La hoja de ruta añade automatización con separación de autoridad: umbrales versionados, cambios crean nuevas épocas y los resultados siguen comparables."
        )
      }
    },

    change_control:{
      concept:{
        informal:P(
          "Change control is how you upgrade without rewriting history. If a change affects outcomes, you stamp a new epoch. Old results keep their meaning. That’s rare—and powerful.",
          "变更控制让你升级但不改历史：只要影响结果就盖新纪元章。旧结果仍保留含义。这很少见，但很强大。",
          "Control de cambios es actualizar sin reescribir historia: si afecta resultados, marcas una nueva época. Lo anterior conserva significado."
        ),
        formal:P(
          "Change control preserves comparability: outcome-affecting changes create new epochs; past results remain interpretable under original rules.",
          "变更控制保持可比性：影响结果的变更开启新纪元；旧结果按旧规则可解释。",
          "El control de cambios preserva comparabilidad: cambios que afectan resultados crean nuevas épocas; resultados previos siguen interpretables con reglas originales."
        )
      },
      live:{
        informal:P(
          "Live means no chaos pushes. Roll out in waves, keep rollback ready, and never hide a policy change inside a ‘hotfix.’",
          "上线意味着别把混乱推到生产：分波次发布，随时可回滚，别把政策变更塞进“热修”。",
          "En vivo: no empujes caos. Rollout por olas, rollback listo, y nunca escondas un cambio de política en un ‘hotfix’."
        ),
        formal:P(
          "Live control requires staged rollout, rollback readiness, and documented reasons. Silent tuning is disallowed.",
          "上线控制要求分阶段发布、可回滚准备、理由可追溯；禁止静默调参。",
          "En vivo requiere rollout por fases, rollback listo y razones documentadas. Ajuste silencioso prohibido."
        )
      },
      roadmap:{
        informal:P(
          "Next, updates become signed events you can point to. People trust systems that don’t quietly change under their feet.",
          "下一步更新变成可指认的签名事件：人们信任不会悄悄换地板的系统。",
          "Luego, las actualizaciones son eventos firmados verificables. La gente confía en sistemas que no cambian en silencio bajo sus pies."
        ),
        formal:P(
          "Roadmap introduces signed releases and policy registries so changes become verifiable events while maintaining internal speed.",
          "路线图引入签名发布与策略登记，使变更成为可验证事件，同时保持内部速度。",
          "La hoja de ruta introduce releases firmados y registros de política para que los cambios sean eventos verificables, manteniendo velocidad interna."
        )
      }
    },

    admissibility_doctrine:{
      concept:{
        informal:P(
          "Doctrine is the guardrail: don’t say more than you can prove. The moment software starts selling stories, it becomes dangerous. Doctrine keeps the system calm and checkable.",
          "教义是护栏：别说超过你能证明的东西。软件一卖故事就危险；教义让系统保持安静可核查。",
          "La doctrina es el guardarraíl: no digas más de lo que puedes probar. Cuando el software vende historias, se vuelve peligroso. La doctrina lo mantiene verificable."
        ),
        formal:P(
          "Doctrine defines what may be claimed and what must remain conditional. It prevents upgrades beyond receipts and locks language to measured scope.",
          "教义规定可主张与必须条件化的边界：防止超收据升级，并把语言锁在可测范围。",
          "La doctrina define qué se puede afirmar y qué debe ser condicional. Evita upgrades sin recibos y ata el lenguaje al alcance medido."
        )
      },
      live:{
        informal:P(
          "Live doctrine is labeling discipline: concept stays concept, live stays measured, roadmap stays gated. If evidence is missing, the system says so and refuses escalation.",
          "上线教义就是标注纪律：概念就是概念；上线必须可测；路线图必须有闸门。证据缺失就明说并拒绝升级。",
          "En vivo es disciplina de etiquetas: concepto es concepto, en vivo es medido, roadmap tiene compuertas. Si falta evidencia, se declara y no se escala."
        ),
        formal:P(
          "Live enforcement keeps posture separated: concept/live/roadmap remain distinct classes; missing receipts block escalation and require explicit 'NOT MEASURED' status.",
          "上线执行保持姿态分离：概念/上线/路线图是不同类别；缺收据阻断升级并要求显式“未测量”状态。",
          "En vivo se separan clases: concepto/en vivo/roadmap. Sin recibos no hay escalación; se exige estado explícito de ‘NO MEDIDO’."
        )
      },
      roadmap:{
        informal:P(
          "Next, every page speaks the same honest language. No inflated claims. No surprises. That’s how adoption stays calm.",
          "下一步每一页都说同一种诚实语言：不膨胀、不惊喜，采纳才能安静稳定。",
          "Luego, cada página habla el mismo lenguaje honesto: sin inflación, sin sorpresas. Así la adopción se mantiene calmada."
        ),
        formal:P(
          "Roadmap standardizes doctrine templates across products so claim discipline holds everywhere, reducing drift and accelerating safe adoption.",
          "路线图把教义模板标准化到全产品：主张纪律处处一致，减少漂移，加速安全采纳。",
          "La hoja de ruta estandariza plantillas doctrinales entre productos para sostener disciplina de afirmaciones en todas partes, reduciendo deriva y acelerando adopción segura."
        )
      }
    },

    navigation_surfaces:{
      concept:{
        informal:P(
          "Navigation is the user’s steering wheel. It must be boringly reliable: tap once, get one outcome, always. That’s how you prevent ‘mystery bugs’ that are really UI drift.",
          "导航就是用户的方向盘：必须无聊地可靠——点一次，只发生一件事，而且每次都一样。这样才能防止所谓“神秘bug”（其实是UI漂移）。",
          "La navegación es el volante del usuario: debe ser aburridamente fiable—un toque, un resultado, siempre. Así evitas ‘bugs misteriosos’ que en realidad son deriva de UI."
        ),
        formal:P(
          "Surfaces present options without altering invariants. UX may simplify, but it must not change admissibility. Navigation-first contracts preserve deterministic behavior.",
          "界面呈现选项但不得改变不变量：体验可以简化，但不能改可采信；导航优先契约保持确定性行为。",
          "Las superficies presentan opciones sin alterar invariantes. La UX puede simplificar, pero no cambiar admisibilidad. Contratos navigation-first preservan determinismo."
        )
      },
      live:{
        informal:P(
          "Live surfaces mean no ghost layers, no overlap traps, and no double routes. If you can’t trust taps, you can’t trust anything.",
          "上线界面意味着没有幽灵层、没有重叠陷阱、没有双路由。点按不可信，其他都不可信。",
          "En vivo: sin capas fantasma, sin trampas de solapamiento, sin rutas dobles. Si no confías en el toque, no confías en nada."
        ),
        formal:P(
          "Live surfaces enforce tap reliability: overlays cannot intercept actions; each input maps to exactly one deterministic outcome. State propagation is mandatory.",
          "上线界面强制点按可靠：遮罩不得拦截；每次输入映射到且只映射到一个确定结果；必须携带状态。",
          "En vivo, se exige fiabilidad: overlays no interceptan; cada input mapea a un único resultado determinista; la propagación de estado es obligatoria."
        )
      },
      roadmap:{
        informal:P(
          "Next, every product feels like the same machine. Learn one, use them all. That’s speed without chaos.",
          "下一步每个产品都像同一台机器：学会一个就能用全部。这是无混乱的速度。",
          "Luego, cada producto se siente como la misma máquina: aprendes uno y usas todos. Velocidad sin caos."
        ),
        formal:P(
          "Roadmap introduces reusable surface templates so interactions remain identical across products, reducing cognitive load and adoption friction.",
          "路线图引入可复用界面模板，使交互跨产品一致，降低认知负担与采纳摩擦。",
          "La hoja de ruta introduce plantillas reutilizables para mantener interacciones idénticas entre productos, reduciendo carga cognitiva y fricción de adopción."
        )
      }
    },

    product_packaging:{
      concept:{
        informal:P(
          "Packaging is the promise the page makes. It tells you what you can use—without smuggling doctrine into marketing. Proof lives in Laws. Products stay usable and honest.",
          "封装就是页面的承诺：告诉你能用什么，但不把教义偷塞成营销。证明在法则里；产品保持可用且诚实。",
          "El empaquetado es la promesa de la página: qué puedes usar sin meter doctrina como marketing. La prueba vive en Leyes. El producto sigue usable y honesto."
        ),
        formal:P(
          "Packaging binds engines to deployable surfaces while keeping doctrine separate. Product pages describe capability; proof pages define admissible claims.",
          "封装把引擎绑定到可部署界面，同时保持教义分离：产品页描述能力，证明页定义可采信主张。",
          "El empaquetado une motores a superficies desplegables manteniendo doctrina separada. Producto describe capacidad; prueba define afirmaciones admisibles."
        )
      },
      live:{
        informal:P(
          "Live packaging means no dead ends: every card opens, every open has a return, and every jump preserves state. If navigation collapses into the wrong page, packaging failed.",
          "上线封装意味着没有死路：卡片都能打开，打开都有返回，跳转都带状态。路由坍缩到错误页，就算封装失败。",
          "En vivo: sin callejones. Cada tarjeta abre, cada abrir tiene retorno, y cada salto preserva estado. Si colapsa a la página equivocada, el empaquetado falló."
        ),
        formal:P(
          "Live packaging enforces stable routes, explicit returns, and mandatory state carry. No catch-all destinations; each surface routes to its own hub.",
          "上线封装强制稳定路由、显式返回、强制携带状态；禁止“总汇页”坍缩，每个面路由到各自枢纽。",
          "En vivo, el empaquetado exige rutas estables, retornos explícitos y propagación obligatoria de estado. Sin destinos ‘universales’; cada superficie rutea a su propio hub."
        )
      },
      roadmap:{
        informal:P(
          "Next, packaging becomes scalable: clear tiers, clear access, and clear ‘not built yet’ shells that still route correctly. That’s how you grow without breaking trust.",
          "下一步封装可规模化：分级清晰、访问清晰、未建也有“壳”且路由正确。信任不会在扩张中破裂。",
          "Luego, el empaquetado escala: niveles claros, acceso claro y ‘carcasas’ para lo no construido que igual rutean bien. Así creces sin romper confianza."
        ),
        formal:P(
          "Roadmap adds tiering and registry status for access legibility while preserving neutrality and claim discipline.",
          "路线图加入分级与登记状态，让访问级别可读，同时保持中立与主张纪律。",
          "La hoja de ruta añade niveles y estado de registro para legibilidad de acceso, preservando neutralidad y disciplina de afirmaciones."
        )
      }
    },

    enterprise_deployment:{
      concept:{
        informal:P(
          "Enterprise is ‘scale without heroics.’ You deploy in waves, keep systems segmented, and always have rollback ready. That’s how you avoid spectacular failures that destroy adoption.",
          "企业就是“无英雄主义的规模化”：分波次部署、分区隔离、随时可回滚。这样才能避免摧毁采纳的灾难性失败。",
          "Empresa es ‘escalar sin heroísmos’: despliegas en olas, segmentas sistemas y mantienes rollback listo. Así evitas fallos espectaculares que destruyen adopción."
        ),
        formal:P(
          "Enterprise deployment is staged rollout with segmentation and rollback readiness. Claims remain bounded to measured bands; governance authority is explicit.",
          "企业部署是分阶段发布+分区隔离+回滚准备。主张限制在可测区间；治理权责明确。",
          "Despliegue empresarial: rollout por fases con segmentación y rollback listo. Afirmaciones acotadas a bandas medidas; autoridad de gobernanza explícita."
        )
      },
      live:{
        informal:P(
          "Live enterprise posture: if it wobbles, stop. If it clusters, split. If it drifts, roll back. Stability beats speed when trust is on the line.",
          "上线企业姿态：一晃就停；一聚就拆；一漂就回滚。信任在场时，稳定胜过速度。",
          "En vivo: si tiembla, paras. Si se agrupa, separas. Si deriva, rollback. La estabilidad vence a la velocidad cuando la confianza está en juego."
        ),
        formal:P(
          "Live posture monitors correlated exposure and gate compliance. Deployment decisions reference receipts; instability triggers containment and reversion to last stable state.",
          "上线姿态监测相关暴露与闸门合规；部署决策依据收据；不稳触发隔离并回到上一稳定态。",
          "En vivo, se monitorea exposición correlacionada y compuertas. Decisiones se basan en recibos; inestabilidad dispara contención y retorno al último estado estable."
        )
      },
      roadmap:{
        informal:P(
          "Next, enterprise gets ‘proof packages’ for auditors and partners. They can verify posture without needing your whole stack. That’s adoption at scale.",
          "下一步企业拥有可交给审计和合作方的“证明包”：无需整套系统也能核查姿态。这就是规模化采纳。",
          "Luego, la empresa tiene ‘paquetes de prueba’ para auditores y socios: verifican postura sin tu stack completo. Eso es adopción a escala."
        ),
        formal:P(
          "Roadmap adds audit bundles and exports enabling third-party verification without privileged access, improving underwriting and adoption stability.",
          "路线图加入审计包与导出，使第三方无需特权也能核查，提升承保与采纳稳定性。",
          "La hoja de ruta añade paquetes de auditoría y exports para verificación de terceros sin acceso privilegiado, mejorando underwriting y estabilidad de adopción."
        )
      }
    },

    dotgrid_sweeps:{
      concept:{
        informal:P(
          "Dot.Grid is the scanner that keeps comparisons fair. Same sweep, same labels, same window—so ‘today vs yesterday’ means something. No story needed.",
          "Dot.Grid 是让比较公平的扫描器：同扫掠、同标签、同窗口，所以“今天 vs 昨天”才有意义。不需要故事。",
          "Dot.Grid es el escáner que hace comparaciones justas: mismo barrido, mismas etiquetas, misma ventana. Así ‘hoy vs ayer’ significa algo."
        ),
        formal:P(
          "Dot.Grid provides traversal-friendly indexing sweeps that enumerate states under fixed definitions, producing comparable evidence windows for classification under constraint.",
          "Dot.Grid 提供面向遍历的索引扫掠：在固定定义下枚举状态，产出可比较证据窗口，用于约束下分类。",
          "Dot.Grid ofrece barridos de indexación para recorrido: enumera estados bajo definiciones fijas y produce ventanas comparables para clasificación bajo restricción."
        )
      },
      live:{
        informal:P(
          "Live sweeps make drift loud. If naming changes or windows change, your results stop being comparable—and the system should treat that like a failure, not a ‘small tweak.’",
          "上线扫掠让漂移变响亮：命名或窗口一变，结果就不可比——系统应把这当失败，而不是“小调整”。",
          "En vivo, los barridos hacen la deriva ruidosa: si cambian nombres o ventanas, los resultados dejan de ser comparables—eso debe tratarse como fallo, no como ‘ajuste menor’."
        ),
        formal:P(
          "Live sweeps enforce window discipline and stable naming; outputs route to Gauges for display and to Laws for interpretation bounds.",
          "上线扫掠强制窗口纪律与稳定命名；输出去量规展示，去法则约束解释。",
          "En vivo se exige disciplina de ventana y nombres estables; las salidas van a Medidores (visual) y Leyes (límites de interpretación)."
        )
      },
      roadmap:{
        informal:P(
          "Next, Dot.Grid becomes reusable across domains: software, water, waste, energy. Learn one sweep method and you get a whole library of stable comparisons.",
          "下一步 Dot.Grid 跨领域复用：软件、水、废弃物、能源。学会一种扫掠方法，就得到一整套稳定比较库。",
          "Luego, Dot.Grid se reutiliza en dominios: software, agua, residuos, energía. Aprendes un método de barrido y obtienes una biblioteca de comparaciones estables."
        ),
        formal:P(
          "Roadmap adds adapter packs so sweeps apply across domains while preserving stability contracts when 256-style indexing is used.",
          "路线图加入适配包，使扫掠可跨领域，同时在使用256式索引时保持稳定契约。",
          "La hoja de ruta añade adaptadores para aplicar barridos a múltiples dominios preservando el contrato de estabilidad cuando se usa indexación estilo 256."
        )
      }
    },

    scoring_outputs:{
      concept:{
        informal:P(
          "Scoring is the dashboard version of truth: readable, reason-coded, and bounded. It never lets you ‘average away’ a failure. It compresses decisions, not reality.",
          "评分是“真相的仪表盘版本”：可读、带原因码、有边界。它不允许你把失败“平均掉”。它压缩决策，不改现实。",
          "La puntuación es la versión tablero de la verdad: legible, con razones y acotada. Nunca te deja ‘promediar’ un fallo. Comprime decisiones, no la realidad."
        ),
        formal:P(
          "Scoring converts gate vectors and exposure into bounded metrics with reason codes. Scores are subordinate to admissibility and cannot override fail states.",
          "评分把闸门向量与暴露转成带原因码的有界指标。分数服从可采信，不得覆盖失败态。",
          "La puntuación convierte vectores de compuertas y exposición en métricas acotadas con códigos de razón. Es subordinada a admisibilidad y no puede anular fallos."
        )
      },
      live:{
        informal:P(
          "Live scoring means no moving goalposts. If thresholds change, you stamp a new epoch. That’s how you keep comparisons honest and trustable.",
          "上线评分不允许挪球门：阈值变更必须新纪元盖章。比较因此诚实可信。",
          "En vivo no se mueven los postes: si cambian umbrales, marcas nueva época. Comparaciones honestas y confiables."
        ),
        formal:P(
          "Live scoring produces stable summaries and exports; silent tuning is disallowed. Threshold changes require epoch rollover to preserve comparability.",
          "上线评分产出稳定摘要与导出；禁止静默调参。阈值变更需新纪元，以保持可比性。",
          "En vivo, la puntuación produce resúmenes y exports estables; se prohíbe ajuste silencioso. Cambios de umbral requieren nueva época."
        )
      },
      roadmap:{
        informal:P(
          "Next, you can share a score with proof attached—without dumping private telemetry. Evidence travels with the number. That’s the trust unlock.",
          "下一步你能分享“带证明的分数”，而不倾倒隐私遥测。证据跟着数字走，信任就被解锁。",
          "Luego compartes una puntuación con prueba adjunta sin volcar telemetría privada. La evidencia viaja con el número. Eso desbloquea confianza."
        ),
        formal:P(
          "Roadmap integrates portfolio/underwriting views while keeping raw evidence traceable via hashed receipts, enabling shareable metrics without exposing private telemetry.",
          "路线图接入组合/承保视图，同时用哈希收据保持证据可追溯，从而在不泄露隐私遥测的前提下分享指标。",
          "La hoja de ruta integra vistas de portafolio/underwriting manteniendo evidencia trazable con recibos hasheados, permitiendo métricas compartibles sin exponer telemetría privada."
        )
      }
    },

    registry_lookups:{
      concept:{
        informal:P(
          "Registry is the ‘status check’ layer: active, suspended, revoked—plus the reason. It’s how you keep verification separate from persuasion.",
          "登记系统是“状态核查层”：启用/暂停/撤销+原因。它让验证与说服分离。",
          "El registro es la capa de ‘chequeo de estado’: activo, suspendido, revocado—con razón. Mantiene verificación separada de persuasión."
        ),
        formal:P(
          "Registry publishes minimum necessary truth: status, time anchoring, and reason codes for packages/tiers/validity windows without leaking sensitive internals.",
          "登记系统发布最小必要真相：包/分层/有效窗口的状态、时间锚与原因码，不泄露敏感内部。",
          "El registro publica la verdad mínima necesaria: estado, anclaje temporal y códigos de razón para paquetes/niveles/ventanas de validez sin filtrar internos sensibles."
        )
      },
      live:{
        informal:P(
          "Live registry means nobody can quietly flip status behind the scenes. If it changes, it’s visible—and that visibility is what scales trust.",
          "上线登记意味着没人能背地里悄悄翻转状态：变化可见，而“可见性”就是信任规模化的基础。",
          "En vivo, nadie puede cambiar el estado en secreto: si cambia, es visible. Esa visibilidad es lo que escala la confianza."
        ),
        formal:P(
          "Live registry forbids silent revocation and enforces deterministic renewal. Suspensions and reinstatements are logged and auditable to prevent capture and hidden exceptions.",
          "上线登记禁止静默撤销并强制确定性续期；暂停/恢复都必须有日志可审计，以防捕获与暗例外。",
          "En vivo, prohíbe revocación silenciosa y exige renovación determinista. Suspensiones/reintegros quedan registrados y auditables para evitar captura y excepciones ocultas."
        )
      },
      roadmap:{
        informal:P(
          "Next, registry becomes real-world credibility: partners and institutions can verify status without taking your word for it.",
          "下一步登记系统成为现实可信度：合作方与机构无需听你说，就能核查状态。",
          "Luego, el registro se vuelve credibilidad real: socios e instituciones verifican estado sin depender de tu palabra."
        ),
        formal:P(
          "Roadmap adds third-party attestations and replay bundles so status becomes verifiable across organizations, bridging internal execution to external trust.",
          "路线图加入第三方证明与回放包，使状态能跨组织核查，成为内部执行到外部信任的桥梁。",
          "La hoja de ruta añade atestaciones de terceros y paquetes de replay para verificar estado entre organizaciones, conectando ejecución interna con confianza externa."
        )
      }
    }
  };

  var ENGINE = ["state_runtime","deterministic_gates","receipt_progression","audit_discipline","change_control","admissibility_doctrine"];
  var PLATFORM = ["navigation_surfaces","product_packaging","enterprise_deployment","dotgrid_sweeps","scoring_outputs","registry_lookups"];

  function titleOf(id){ return pick(DOM[id].t); }
  function subOf(id){ return pick(DOM[id].s); }

  function bandLabel(){
    if(lang==="zh") return (side==="engine") ? "引擎域" : "平台域";
    if(lang==="es") return (side==="engine") ? "DOMINIOS · MOTOR" : "DOMINIOS · PLATAFORMA";
    return (side==="engine") ? "ENGINE DOMAINS" : "PLATFORM DOMAINS";
  }

  function bubbleLabel(which){
    if(lang==="zh") return (which==="concept")?"概念":(which==="live")?"上线":"路线图";
    if(lang==="es") return (which==="concept")?"Concepto":(which==="live")?"En vivo":"Hoja de ruta";
    return (which==="concept")?"Concept":(which==="live")?"Live":"Roadmap";
  }

  function openLabel(){
    if(lang==="zh") return "打开";
    if(lang==="es") return "ABRIR";
    return "OPEN";
  }

  function render(){
    band.textContent = bandLabel();
    list.innerHTML="";

    var ids = (side==="engine") ? ENGINE : PLATFORM;

    ids.forEach(function(id, idx){
      var row=document.createElement("div");
      row.className="row";
      row.style.setProperty("--c", DOM[id].c);

      var head=document.createElement("div");
      head.className="head";

      var left=document.createElement("div");
      left.className="left";

      var barWrap=document.createElement("div");
      barWrap.className="barWrap";
      var diamond=document.createElement("div");
      diamond.className="diamond";
      diamond.style.background=DOM[id].c;
      var bar=document.createElement("div");
      bar.className="bar";
      bar.style.background=DOM[id].c;
      barWrap.appendChild(bar);
      barWrap.appendChild(diamond);

      var titleBlock=document.createElement("div");
      titleBlock.className="titleBlock";
      var title=document.createElement("div");
      title.className="title";
      title.textContent=titleOf(id);
      var sub=document.createElement("div");
      sub.className="sub";
      sub.textContent=subOf(id);
      titleBlock.appendChild(title);
      titleBlock.appendChild(sub);

      left.appendChild(barWrap);
      left.appendChild(titleBlock);

      var chev=document.createElement("div");
      chev.className="chev";
      chev.textContent="▸";

      head.appendChild(left);
      head.appendChild(chev);

      var body=document.createElement("div");
      body.className="body";

      var p=document.createElement("p");
      p.className="pdesc";
      p.textContent = (tone==="informal")
        ? (lang==="zh"
            ? "打开下面三段：概念（为什么）、上线（怎么用）、路线图（下一步）。"
            : (lang==="es"
                ? "Abre las tres secciones: Concepto (por qué), En vivo (cómo usar), Hoja de ruta (qué sigue)."
                : "Open the three sections: Concept (why), Live (how you use it), Roadmap (what’s next)."))
        : (lang==="zh"
            ? "该域内容按：概念 / 上线 / 路线图组织；语气切换为正式规格表述。"
            : (lang==="es"
                ? "Contenido por: Concepto / En vivo / Hoja de ruta; el tono cambia a formulación formal."
                : "Content is organized as Concept / Live / Roadmap; tone switch yields formal spec wording."));

      var subB=document.createElement("div");
      subB.className="subBubbles";

      function makeBubble(which){
        var b=document.createElement("div");
        b.className="bubble";
        b.setAttribute("role","button");
        b.tabIndex=0;

        var h=document.createElement("h4");
        h.textContent = bubbleLabel(which);

        var pp=document.createElement("p");
        var pack=TEXT[id][which][tone];
        pp.textContent = pick(pack);

        b.appendChild(h);
        b.appendChild(pp);

        function act(){ b.classList.toggle("open"); }
        b.addEventListener("click", act);
        b.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); act(); }});

        return b;
      }

      subB.appendChild(makeBubble("concept"));
      subB.appendChild(makeBubble("live"));
      subB.appendChild(makeBubble("roadmap"));

      var actions=document.createElement("div");
      actions.className="actions";
      var open=document.createElement("a");
      open.className="btn";
      open.textContent = openLabel() + ": " + (lang==="zh" ? "DOOR" : (lang==="es" ? "PUERTA" : "DOOR"));
      open.href="/door/"+q();
      actions.appendChild(open);

      body.appendChild(p);
      body.appendChild(subB);
      body.appendChild(actions);

      head.addEventListener("click", function(){
        var openNow = !row.classList.contains("open");
        // single-open
        list.querySelectorAll(".row").forEach(function(x){
          x.classList.remove("open");
          var c=x.querySelector(".chev");
          if(c) c.textContent="▸";
        });
        row.classList.toggle("open", openNow);
        chev.textContent = openNow ? "▾" : "▸";
      });

      row.appendChild(head);
      row.appendChild(body);
      list.appendChild(row);

      if(idx===0){
        row.classList.add("open");
        chev.textContent="▾";
      }
    });
  }

  paintPills();
  render();
})();
</script>

</body>
</html>
