<!-- TNT — /prelude/index.html
     PRELUDE · ORIENTATION LAYER (NO LENSES · NO MODALS)
     ROLE:
       - Calm entry before traversal
       - Define the problem clearly
       - Define the posture clearly
       - Route cleanly to Compass or Enter
     ROUTES (LOCKED):
       - BACK → /index.html (Compass)
       - ENTER → /home/
       - NORTH → /laws/
       - EAST  → /products/
       - SOUTH → /gauges/
     STATE:
       - Full carry: lang/style/time/depth (URL + gd_* LS)
     LOCKS:
       - Uses /assets/ui.css + /assets/branch.css + /assets/instruments.js
       - ui.css owns html/body background (NO overrides)
       - No tone lenses here (single unified voice)
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRELUDE · Orientation</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
a{color:inherit;text-decoration:none}
body{margin:0;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
body::before,body::after{pointer-events:none!important}

:root{
  --dockH:92px;

  --opalA:rgba(210,190,255,.16);
  --opalB:rgba(120,70,255,.10);
  --opalC:rgba(255,70,70,.10);

  --inkA:rgba(12,22,38,.92);
  --inkB:rgba(6,10,16,.96);
}

/* Top */
.top-left{
  position:fixed;left:16px;top:16px;z-index:240;
  display:flex;gap:10px;white-space:nowrap;align-items:center;
}
.top-right{
  position:fixed;right:16px;top:16px;z-index:240;
  display:flex;gap:10px;white-space:nowrap;align-items:center;
}
.top-left .btn,.top-right .btn{white-space:nowrap}

/* Page */
.page{
  width:min(1000px,94vw);
  margin:0 auto;
  padding:90px 0 calc(var(--dockH) + 24px);
  display:flex;
  flex-direction:column;
  gap:16px;
  position:relative;
  z-index:10;
}

/* Header bubble */
.header{
  border:1px solid rgba(255,255,255,.12);
  border-radius:26px;
  background:
    radial-gradient(circle at 22% 18%, var(--opalA), transparent 62%),
    radial-gradient(circle at 78% 30%, var(--opalB), transparent 66%),
    radial-gradient(circle at 62% 92%, var(--opalC), transparent 64%),
    rgba(0,0,0,.16);
  backdrop-filter:blur(10px);
  box-shadow:0 30px 100px rgba(0,0,0,.55);
  padding:18px 18px 16px;
}
.k{font-size:11px;letter-spacing:4px;text-transform:uppercase;opacity:.72;margin:0 0 8px}
.t{margin:0;font-weight:950;font-size:30px;letter-spacing:.6px}
.s{margin:12px 0 0;font-size:14px;line-height:1.6;opacity:.92}

/* Long bubbles */
.block{
  border:1px solid rgba(255,255,255,.10);
  border-radius:22px;
  background:linear-gradient(145deg, rgba(17,22,28,.88), rgba(11,15,20,.94));
  box-shadow:0 22px 72px rgba(0,0,0,.60);
  padding:16px 16px 14px;
}
.block h3{
  margin:0 0 8px;
  font-weight:950;
  letter-spacing:.3px;
}
.block p{
  margin:0;
  line-height:1.65;
  opacity:.86;
  font-size:14px;
}
.block p + p{margin-top:10px}

/* Action row */
.actions{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  justify-content:flex-end;
  margin-top:10px;
}
.actions .btn{
  padding:10px 16px;
  border-radius:999px;
  white-space:nowrap;
}

/* Dock */
.dock{
  position:fixed;left:50%;
  bottom:max(10px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:220;
  width:min(980px,94vw);
  padding:10px 12px;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.22);
  backdrop-filter:blur(10px);
  box-shadow:0 18px 60px rgba(0,0,0,.55);
  display:grid;
  grid-template-columns:repeat(4, minmax(0,1fr));
  gap:10px;
}
.dock .btn{width:100%;padding:10px;border-radius:999px;white-space:nowrap}
@media (max-width:520px){
  :root{--dockH:98px}
  .dock{grid-template-columns:repeat(3, minmax(0,1fr))}
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" id="btnCompass" href="/index.html">COMPASS</a>
  <a class="btn" id="btnEnter" href="/home/">ENTER</a>
</div>

<div class="top-right" aria-label="Language">
  <button class="btn" id="btnEN" type="button">EN</button>
  <button class="btn" id="btnZH" type="button">中文</button>
  <button class="btn" id="btnES" type="button">ES</button>
</div>

<div class="page">

  <div class="header">
    <p class="k" id="hk">PRELUDE</p>
    <h1 class="t" id="ht">Before You Move</h1>
    <p class="s" id="hs">
      This is not a belief site.  
      It is a structural interface.  
      It exists because drift is real, correlation is invisible, and scale amplifies small errors.
    </p>
  </div>

  <div class="block">
    <h3 id="hProblem">The Problem</h3>
    <p id="pProblem1">
      Systems fail quietly long before they fail publicly.
      Meaning shifts. Assumptions stack. Dependencies overlap.
      Small misalignments compound until they look like “sudden collapse.”
    </p>
    <p id="pProblem2">
      Most people try to fix this with motivation, ideology, or speed.
      None of those solve structural drift.
    </p>
  </div>

  <div class="block">
    <h3 id="hMapping">What We Did</h3>
    <p id="pMapping1">
      We mapped the problem into a finite lattice.
      We defined boundaries, state transitions, and measurement surfaces.
      We separated concept, live execution, and roadmap.
    </p>
    <p id="pMapping2">
      Every claim is bounded.
      Every upgrade requires receipts.
      Every navigation move preserves state.
    </p>
  </div>

  <div class="block">
    <h3 id="hSolution">The Solution Posture</h3>
    <p id="pSolution1">
      If meaning is unstable, go to Laws.
      If execution is unclear, go to Products.
      If you need verification, go to Gauges.
      If you need direction first, use Compass.
    </p>
    <p id="pSolution2">
      You are here because something needs alignment.
      There is a surface for that.
    </p>

    <div class="actions">
      <a class="btn" id="goNorth" href="/laws/">NORTH</a>
      <a class="btn" id="goEast" href="/products/">EAST</a>
      <a class="btn" id="goSouth" href="/gauges/">SOUTH</a>
      <a class="btn" id="goCompass" href="/index.html">COMPASS</a>
    </div>
  </div>

</div>

<nav class="dock" aria-label="Bottom navigation">
  <a class="btn" id="dockHome" href="/home/">HOME</a>
  <a class="btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="btn" id="dockGauges" href="/gauges/">GAUGES</a>
</nav>

<script>
(function(){
  var qs=new URLSearchParams(location.search);
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var style = qs.get("style") || localStorage.getItem("gd_style") || "informal";
  var time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  var depth = qs.get("depth") || localStorage.getItem("gd_depth") || "explore";

  if(lang!=="en" && lang!=="zh" && lang!=="es") lang="en";
  try{
    localStorage.setItem("gd_lang",lang);
  }catch(e){}

  document.documentElement.lang=(lang==="zh")?"zh":(lang==="es")?"es":"en";

  function q(){
    return "?lang="+encodeURIComponent(lang)+
           "&style="+encodeURIComponent(style)+
           "&time="+encodeURIComponent(time)+
           "&depth="+encodeURIComponent(depth);
  }

  function wire(id,path){
    var el=document.getElementById(id);
    if(el) el.href=path+q();
  }

  wire("btnCompass","/index.html");
  wire("btnEnter","/home/");
  wire("dockHome","/home/");
  wire("dockProducts","/products/");
  wire("dockLaws","/laws/");
  wire("dockGauges","/gauges/");
  wire("goNorth","/laws/");
  wire("goEast","/products/");
  wire("goSouth","/gauges/");
  wire("goCompass","/index.html");

  // language toggle
  var btnEN=document.getElementById("btnEN");
  var btnZH=document.getElementById("btnZH");
  var btnES=document.getElementById("btnES");

  function paint(){
    btnEN.classList.toggle("active", lang==="en");
    btnZH.classList.toggle("active", lang==="zh");
    btnES.classList.toggle("active", lang==="es");
  }
  paint();

  function setLang(next){
    if(next!=="en"&&next!=="zh"&&next!=="es") next="en";
    localStorage.setItem("gd_lang",next);
    window.location.href=window.location.pathname+"?lang="+next;
  }
  btnEN.onclick=function(){setLang("en");};
  btnZH.onclick=function(){setLang("zh");};
  btnES.onclick=function(){setLang("es");};

  if(lang==="zh"){
    document.getElementById("hk").textContent="前言";
    document.getElementById("ht").textContent="行动之前";
    document.getElementById("hs").textContent="这不是信仰站点。这是结构界面。漂移真实存在，相关性不可见，规模会放大小错误。";
    document.getElementById("hProblem").textContent="问题";
    document.getElementById("pProblem1").textContent="系统往往在公开失败前就已悄悄失稳。含义漂移，假设叠加，依赖重叠。";
    document.getElementById("pProblem2").textContent="用激情或速度无法修复结构性漂移。";
    document.getElementById("hMapping").textContent="我们做了什么";
    document.getElementById("pMapping1").textContent="我们将问题映射到有限晶格，定义边界与测量面。";
    document.getElementById("pMapping2").textContent="每个主张有界，每次升级需收据，每次跳转保留状态。";
    document.getElementById("hSolution").textContent="解决姿态";
    document.getElementById("pSolution1").textContent="含义不稳去法则；执行不清去产品；要验证去量规；要方向用罗盘。";
    document.getElementById("pSolution2").textContent="你在这里，是因为某个度量需要答案。这里有对应的界面。";
  }else if(lang==="es"){
    document.getElementById("hk").textContent="PRELUDIO";
    document.getElementById("ht").textContent="Antes de Moverte";
    document.getElementById("hs").textContent="No es un sitio de creencias. Es una interfaz estructural. La deriva es real y la escala amplifica errores.";
  }
})();
</script>

</body>
</html>
