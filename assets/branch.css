/* TNT FILE: /assets/branch.css
   CRP AUTUMN FIELD — Branch layer (Diamonds + Route tiles + Hub cards)
   Works with: /assets/ui.css
   Purpose:
     - Diamond visuals (index/door/links)
     - “Quadrant → Vine → Fruit → Resolution” hub styling
     - NO background overrides (ui.css is the only field source of truth)
*/

/* =========================
   DIAMOND FIELD (visual)
========================= */
.diamond-field{
  position:absolute;
  inset:-12%;
  pointer-events:none;
  z-index:0;
  opacity:.38;
  filter:blur(.2px);
}
.diamond-field::before,
.diamond-field::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(900px 700px at 50% 20%, rgba(122,11,20,.26) 0%, transparent 70%),
    radial-gradient(800px 600px at 20% 10%, rgba(202,160,74,.20) 0%, transparent 72%),
    radial-gradient(900px 650px at 80% 12%, rgba(122,11,20,.18) 0%, transparent 74%);
}
.diamond-field::after{
  opacity:.55;
  filter:blur(10px);
}

/* =========================
   DIAMOND PLATE (big)
========================= */
.diamond-plate{
  position:relative;
  width:min(520px,92vw);
  height:min(520px,92vw);
  margin:0 auto;
  transform:rotate(45deg);
  border-radius:46px;
  background:rgba(255,255,255,.04);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.08),
    0 50px 140px rgba(0,0,0,.80);
  backdrop-filter:blur(12px);
}
.diamond-plate::before{
  content:"";
  position:absolute;
  inset:10%;
  border-radius:40px;
  background:rgba(0,0,0,.22);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.06);
}
.diamond-plate::after{
  content:"";
  position:absolute;
  inset:-6%;
  border-radius:58px;
  background:
    radial-gradient(900px 700px at 50% 18%, rgba(122,11,20,.26) 0%, transparent 70%),
    radial-gradient(760px 620px at 50% 10%, rgba(202,160,74,.18) 0%, transparent 74%);
  opacity:.55;
  filter:blur(8px);
  z-index:-1;
}

/* =========================
   DIAMOND NODE (clickable)
   - Used on Door (Explore/Learn/Links/Home)
========================= */
.diamond-node{
  position:absolute;
  width:42%;
  height:42%;
  border-radius:24px;
  background:rgba(0,0,0,.30);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.10),
    0 18px 60px rgba(0,0,0,.55);
  display:flex;
  align-items:center;
  justify-content:center;
  text-decoration:none;
  color:inherit;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  user-select:none;
  z-index:2;
}
.diamond-node:hover{filter:brightness(1.06)}
.diamond-node:active{transform:translateY(1px)}
.diamond-node span{
  transform:rotate(-45deg);
  display:block;
  text-align:center;
  padding:10px 12px;
  line-height:1.1;
  font-weight:950;
  letter-spacing:.14em;
  text-transform:uppercase;
}
.diamond-node span b{
  display:block;
  font-size:16px;
}
.diamond-node span small{
  display:block;
  margin-top:8px;
  font-size:12px;
  opacity:.72;
  letter-spacing:.18em;
}

/* Node positions */
.dn-top{top:6%;left:29%}
.dn-right{top:29%;right:6%}
.dn-bottom{bottom:6%;left:29%}
.dn-left{top:29%;left:6%}

/* Highlight (gold rim) */
.diamond-node.gold{
  box-shadow:
    inset 0 0 0 1px rgba(202,160,74,.55),
    0 18px 70px rgba(0,0,0,.55);
}
.diamond-node.gold::after{
  content:"";
  position:absolute;
  inset:-10px;
  border-radius:30px;
  background:radial-gradient(220px 220px at 50% 40%, rgba(202,160,74,.20) 0%, transparent 70%);
  filter:blur(8px);
  opacity:.85;
  z-index:-1;
}

/* =========================
   DOOR HEADER STRIP
========================= */
.door-meta{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
  align-items:center;
  margin:10px 0 18px;
}
.door-meta .pill{opacity:.95}
.door-meta .pill.active{
  background:rgba(202,160,74,.18);
  box-shadow:inset 0 0 0 1px rgba(202,160,74,.55);
}

/* =========================
   HUB CARDS (Home)
   (ui.css already defines details.quad etc; we add small upgrades)
========================= */
details.quad summary{position:relative}
details.quad summary .q-arrow{transition:transform .15s ease}
details.quad[open] summary .q-arrow{transform:rotate(180deg)}
details.quad .inside{padding-top:2px}

/* Vine tiles inside quadrant (4) */
.vine-grid{
  display:grid;
  grid-template-columns:1fr;
  gap:10px;
  margin-top:6px;
}
@media(min-width:720px){.vine-grid{grid-template-columns:1fr 1fr}}
.vine-tile{
  border-radius:18px;
  background:rgba(0,0,0,.22);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
  padding:12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  cursor:pointer;
  user-select:none;
  -webkit-tap-highlight-color:transparent;
}
.vine-tile:hover{background:rgba(0,0,0,.28)}
.vine-tile .lbl{min-width:0}
.vine-tile .lbl b{
  display:block;
  font-size:13px;
  letter-spacing:.14em;
  text-transform:uppercase;
  font-weight:950;
}
.vine-tile .lbl i{
  display:block;
  font-style:normal;
  opacity:.72;
  font-size:12px;
  margin-top:3px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.vine-tile .go{
  width:40px;height:40px;
  border-radius:999px;
  background:rgba(255,255,255,.06);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);
  display:flex;align-items:center;justify-content:center;
  opacity:.92;
  flex:0 0 auto;
}

/* Modal (detail popover) upgrades (ui.css provides .modal; keep consistent) */
.modal .chiprow{
  display:flex;flex-wrap:wrap;gap:10px;align-items:center;
  margin-top:10px;
}
.modal .chiprow .pill{cursor:pointer}
.modal .chiprow .pill.active{
  background:rgba(202,160,74,.18);
  box-shadow:inset 0 0 0 1px rgba(202,160,74,.55);
}

/* Fruit list (4) */
.fruit-grid{
  margin-top:14px;
}
.fruit-grid .vine-grid{margin-top:10px}

/* Resolution chamber */
.resolution{
  margin-top:16px;
  padding:16px;
  border-radius:22px;
  background:linear-gradient(180deg, rgba(202,160,74,.14), rgba(0,0,0,.30));
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.10),
    0 22px 80px rgba(0,0,0,.65);
}
.resolution h4{
  margin:0 0 10px;
  font-size:16px;
  letter-spacing:.14em;
  text-transform:uppercase;
  font-weight:950;
}
.resolution .para{
  margin:0 0 12px;
  font-size:15px;
  line-height:1.75;
  opacity:.92;
}
.resolution ul{
  margin:0 0 12px 18px;
  padding:0;
  line-height:1.65;
  opacity:.86;
}
.resolution .imp{
  font-weight:950;
  letter-spacing:.06em;
  opacity:.92;
}
.resolution .back{
  margin-top:14px;
  display:inline-block;
  border-radius:18px;
  padding:10px 14px;
  background:rgba(255,255,255,.08);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.12);
  font-weight:900;
  letter-spacing:.12em;
  text-transform:uppercase;
  font-size:12px;
  cursor:pointer;
}
.resolution .back:hover{background:rgba(255,255,255,.12)}
