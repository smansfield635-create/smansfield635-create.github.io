<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Explore Â· Diamond 2</title>

  <link rel="stylesheet" href="/assets/ui.css?v=EXPLORE_D2_1"/>
  <link rel="stylesheet" href="/assets/branch.css?v=EXPLORE_D2_1"/>
  <script defer src="/assets/instrument.js?v=EXPLORE_D2_1"></script>

  <style>
    .d2-wrap{max-width:980px;margin:0 auto;}
    .d2-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;margin-top:12px}
    @media (max-width:820px){ .d2-grid{grid-template-columns:1fr;} }
    .d2-tile{min-height:104px;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 16px}
    .d2-left{display:flex;flex-direction:column;gap:4px;text-align:left}
    .d2-code{font-weight:950;letter-spacing:.3px}
    .d2-desc{opacity:.82;line-height:1.25}
    .d2-tags{opacity:.70;font-size:12px;letter-spacing:.15px}
    .d2-go{opacity:.85;font-weight:900}
    .d2-row{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:10px}
    .d2-mini{opacity:.72;font-size:12px;line-height:1.35;text-align:center;margin-top:10px}
    .d2-section{margin-top:12px}
  </style>
</head>

<body>
<main class="crp-shell">

  <header class="crp-header" style="text-align:center">
    <div class="crp-mark" data-i18n="global.brand">GEODIAMETRICS</div>
    <h1 class="crp-title" style="margin-bottom:6px">EXPLORE</h1>
    <p class="crp-subtitle" style="margin-bottom:8px">Diamond 2 Â· Surface Map</p>

    <!-- Top lenses (operational overlay) -->
    <div class="crp-topbar" style="margin:0 auto 8px;max-width:980px">
      <div class="crp-topbar-left" style="display:flex;gap:10px;flex-wrap:wrap;justify-content:center;width:100%">
        <div class="crp-lens" role="group" aria-label="Style lens">
          <button class="crp-chip" type="button" data-style="formal">FORMAL</button>
          <button class="crp-chip" type="button" data-style="informal">INFORMAL</button>
        </div>
        <div class="crp-lens" role="group" aria-label="Time lens">
          <button class="crp-chip" type="button" data-time="origin">ORIGIN</button>
          <button class="crp-chip" type="button" data-time="now">NOW</button>
          <button class="crp-chip" type="button" data-time="trajectory">TRAJECTORY</button>
        </div>
      </div>
    </div>

    <div class="d2-row" aria-label="Quick navigation">
      <a id="go-home" class="crp-btn crp-btn-primary" href="/home/" role="button">COMPASS</a>
      <a id="go-about" class="crp-btn" href="/about/" role="button">ABOUT</a>
      <a id="go-links" class="crp-btn" href="/links/" role="button">LINKS</a>
      <a id="go-laws" class="crp-btn" href="/laws/" role="button">LAWS</a>
      <a id="go-gauges" class="crp-btn" href="/gauges/" role="button">GAUGES</a>
    </div>

    <p class="d2-mini">
      Explore is the new transition diamond. It routes into the core/spine (Compass) while preserving lenses.
    </p>
  </header>

  <section class="d2-wrap">

    <div class="d2-grid" aria-label="Diamond 2 quadrants">
      <!-- NW -->
      <a id="q-nw" class="crp-btn d2-tile" href="/home/" role="button">
        <div class="d2-left">
          <div class="d2-code">â­ NW Â· NORTHWEST</div>
          <div class="d2-desc"><b>Definition Â· Language Â· Structure</b></div>
          <div class="d2-tags">SSG Â· Grammar Â· DOT.GRID Â· Acronyms</div>
        </div>
        <div class="d2-go">â–¶</div>
      </a>

      <!-- NE -->
      <a id="q-ne" class="crp-btn d2-tile" href="/home/" role="button">
        <div class="d2-left">
          <div class="d2-code">â˜€ï¸ NE Â· NORTHEAST</div>
          <div class="d2-desc"><b>Execution Â· Surfaces Â· Examples</b></div>
          <div class="d2-tags">Products Â· Demos Â· Workflows</div>
        </div>
        <div class="d2-go">â–¶</div>
      </a>

      <!-- SW -->
      <a id="q-sw" class="crp-btn d2-tile" href="/home/" role="button">
        <div class="d2-left">
          <div class="d2-code">ğŸ”¥ SW Â· SOUTHWEST</div>
          <div class="d2-desc"><b>Measurement Â· Diagnostics Â· Rules</b></div>
          <div class="d2-tags">UCI Â· HIP Gates Â· Alerts Â· Reports</div>
        </div>
        <div class="d2-go">â–¶</div>
      </a>

      <!-- SE -->
      <a id="q-se" class="crp-btn d2-tile" href="/home/" role="button">
        <div class="d2-left">
          <div class="d2-code">ğŸŒ™ SE Â· SOUTHEAST</div>
          <div class="d2-desc"><b>Governance Â· Capital Â· Certification</b></div>
          <div class="d2-tags">CARES Â· Charter Â· Registry Â· Audit</div>
        </div>
        <div class="d2-go">â–¶</div>
      </a>
    </div>

    <div class="d2-section">
      <hr class="crp-divider"/>

      <div class="d2-row" aria-label="Core/Spine links">
        <a id="go-products" class="crp-btn" href="/products/" role="button">PRODUCTS</a>
        <a id="go-cares" class="crp-btn" href="/cares/" role="button">CARES</a>
        <a id="go-hipdemo" class="crp-btn" href="/hip-demo/" role="button">HIP DEMO</a>
        <a id="go-start" class="crp-btn" href="/" role="button">START</a>
      </div>

      <p class="d2-mini">
        BUILD: <b>EXPLORE_D2_1</b> Â· Carries: <code>gd_lang</code> <code>gd_depth</code> <code>gd_style</code> <code>gd_time</code>
      </p>
    </div>

  </section>
</main>

<script>
(function(){
  "use strict";

  var K_LANG="gd_lang", K_DEPTH="gd_depth", K_STYLE="gd_style", K_TIME="gd_time";
  var allowLang={en:1,zh:1};
  var allowDepth={explore:1,learn:1};
  var allowStyle={formal:1,informal:1};
  var allowTime={origin:1,now:1,trajectory:1};

  function qp(n){ try{return new URLSearchParams(location.search).get(n);}catch(e){return null;} }
  function lsGet(k){ try{return localStorage.getItem(k);}catch(e){return null;} }
  function lsSet(k,v){ try{localStorage.setItem(k,v);}catch(e){} }

  var state={
    lang:  qp("lang")  || lsGet(K_LANG)  || "en",
    depth: qp("depth") || lsGet(K_DEPTH) || "explore",
    style: qp("style") || lsGet(K_STYLE) || "formal",
    time:  qp("time")  || lsGet(K_TIME)  || "origin"
  };

  if(!allowLang[state.lang]) state.lang="en";
  if(!allowDepth[state.depth]) state.depth="explore";
  if(!allowStyle[state.style]) state.style="formal";
  if(!allowTime[state.time]) state.time="origin";

  lsSet(K_LANG,state.lang); lsSet(K_DEPTH,state.depth); lsSet(K_STYLE,state.style); lsSet(K_TIME,state.time);

  function setPressed(group, attr, value){
    var nodes=document.querySelectorAll(group+" .crp-chip["+attr+"]");
    for(var i=0;i<nodes.length;i++){
      var v=nodes[i].getAttribute(attr);
      nodes[i].setAttribute("aria-pressed", v===value ? "true":"false");
    }
  }
  setPressed("[aria-label='Style lens']","data-style",state.style);
  setPressed("[aria-label='Time lens']","data-time",state.time);

  // lens handlers
  var styleChips=document.querySelectorAll(".crp-chip[data-style]");
  for(var s=0;s<styleChips.length;s++){
    styleChips[s].addEventListener("click", function(e){
      var v=e.currentTarget.getAttribute("data-style");
      if(!allowStyle[v]) return;
      state.style=v; lsSet(K_STYLE,v);
      setPressed("[aria-label='Style lens']","data-style",v);
      rewrite();
    });
  }
  var timeChips=document.querySelectorAll(".crp-chip[data-time]");
  for(var t=0;t<timeChips.length;t++){
    timeChips[t].addEventListener("click", function(e){
      var v=e.currentTarget.getAttribute("data-time");
      if(!allowTime[v]) return;
      state.time=v; lsSet(K_TIME,v);
      setPressed("[aria-label='Time lens']","data-time",v);
      rewrite();
    });
  }

  function rewrite(){
    var q="lang="+encodeURIComponent(state.lang)+
          "&depth="+encodeURIComponent(state.depth)+
          "&style="+encodeURIComponent(state.style)+
          "&time="+encodeURIComponent(state.time);

    function set(id, href){
      var a=document.getElementById(id);
      if(a) a.setAttribute("href", href);
    }

    // core/spine
    set("go-home","/home/?"+q);
    set("go-about","/about/?"+q);
    set("go-links","/links/?"+q);
    set("go-laws","/laws/?"+q);
    set("go-gauges","/gauges/?"+q);
    set("go-products","/products/?"+q);
    set("go-cares","/cares/?"+q);
    set("go-hipdemo","/hip-demo/?"+q);
    set("go-start","/?"+q);

    // Diamond 2 quadrants route into Compass with an axis hint (query-only; no new storage keys)
    set("q-nw","/home/?"+q+"&axis=nw");
    set("q-ne","/home/?"+q+"&axis=ne");
    set("q-sw","/home/?"+q+"&axis=sw");
    set("q-se","/home/?"+q+"&axis=se");
  }

  rewrite();
})();
</script>

</body>
</html>
