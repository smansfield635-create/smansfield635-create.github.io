<!-- =====================================================
     TNT: /index.html
     ONE-TIME LANGUAGE CHOICE (PERMANENT)
     Then choose LEARN or SHOP.
===================================================== -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Geodiametrics</title>

<link rel="stylesheet" href="/assets/ui.css?v=20260221_0116"/>
</head>

<body>
<div class="shooting-stars"></div>

<div class="page">
  <div class="h">
    <h1>Geodiametrics</h1>
    <p>Choose language once. Then choose learn or shop.</p>
  </div>

  <!-- Permanent language choice (stored) -->
  <div class="pills">
    <button class="pill red" id="lang-en" type="button">EN</button>
    <button class="pill red" id="lang-zh" type="button">中文</button>
    <span class="pill ghost" id="lang-status">Language: not set</span>
  </div>

  <!-- Mode choice (intermittent) -->
  <div class="acc">
    <details>
      <summary>
        <div class="sum-left">
          <div class="badge">L</div>
          <div class="sum-title">
            <b id="learn-title">LEARN</b>
            <span id="learn-sub">Definitions · systems · methods</span>
          </div>
        </div>
        <div class="chev"></div>
      </summary>
      <div class="panel">
        <p id="learn-desc">Study mode uses formal structure and clear definitions.</p>
        <div class="cta-row">
          <a class="cta gold" id="go-learn" href="/learn/">Enter Learn</a>
          <a class="cta" href="/home/">Go to Home</a>
        </div>
      </div>
    </details>

    <details>
      <summary>
        <div class="sum-left">
          <div class="badge">S</div>
          <div class="sum-title">
            <b id="shop-title">SHOP</b>
            <span id="shop-sub">Products · programs · services</span>
          </div>
        </div>
        <div class="chev"></div>
      </summary>
      <div class="panel">
        <p id="shop-desc">Shop mode uses outcome language and packaged offers.</p>
        <div class="cta-row">
          <a class="cta gold" id="go-shop" href="/shop/">Enter Shop</a>
          <a class="cta" href="/home/">Go to Home</a>
        </div>
      </div>
    </details>
  </div>

  <footer>CANONICAL · STABLE · © GEODIAMETRICS</footer>
</div>

<script>
(function(){
  const KEY = "gd_lang"; // "en" | "zh"
  const $ = (id)=>document.getElementById(id);

  function setLang(lang){
    localStorage.setItem(KEY, lang);
    render();
  }

  function t(en, zh){
    return (localStorage.getItem(KEY)==="zh") ? zh : en;
  }

  function render(){
    const lang = localStorage.getItem(KEY);
    $("lang-status").textContent = "Language: " + (lang ? (lang==="zh" ? "中文" : "EN") : "not set");

    // Button emphasis
    $("lang-en").style.opacity = (lang==="en") ? "1" : ".75";
    $("lang-zh").style.opacity = (lang==="zh") ? "1" : ".75";

    // Surface copy
    document.querySelector(".h p").textContent =
      t("Choose language once. Then choose learn or shop.",
        "先选择语言（一次）。再选择学习或购买。");

    $("learn-title").textContent = t("LEARN", "学习");
    $("learn-sub").textContent   = t("Definitions · systems · methods", "定义 · 系统 · 方法");
    $("learn-desc").textContent  = t("Study mode uses formal structure and clear definitions.",
                                    "学习模式使用更正式的结构与清晰定义。");
    $("go-learn").textContent    = t("Enter Learn", "进入学习");

    $("shop-title").textContent  = t("SHOP", "购买");
    $("shop-sub").textContent    = t("Products · programs · services", "产品 · 项目 · 服务");
    $("shop-desc").textContent   = t("Shop mode uses outcome language and packaged offers.",
                                    "购买模式使用结果导向与打包产品表达。");
    $("go-shop").textContent     = t("Enter Shop", "进入购买");
  }

  $("lang-en").addEventListener("click", ()=>setLang("en"));
  $("lang-zh").addEventListener("click", ()=>setLang("zh"));

  render();
})();
</script>
</body>
</html>
