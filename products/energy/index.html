<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · ENERGY</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>

<style>
:root{
  --R:150px;
  --D:188px;
  --goldSoft:rgba(212,175,55,.45);
}

/* ---------- BASE ---------- */
body{margin:0;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
a{text-decoration:none;color:inherit}

/* ---------- HEADER ---------- */
.top-left{
  position:fixed;left:16px;top:16px;z-index:120;
  display:flex;gap:10px;
}

.brand{
  position:fixed;left:50%;top:16px;transform:translateX(-50%);
  z-index:110;text-align:center;
  padding:10px 18px;border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.18);
}
.brand .t{font-weight:950;font-size:42px;letter-spacing:.3px}
.brand .s{opacity:.85;font-size:14px;margin-top:4px}

/* ---------- DIAMOND STAGE ---------- */
.stage{
  position:fixed;left:50%;top:56%;
  transform:translate(-50%,-50%);
  width:min(720px,94vw);
  height:min(720px,94vw);
}

/* ---------- GLOSSY PEARLESCENT DIAMOND ---------- */
.d{
  width:var(--D);height:var(--D);
  position:absolute;left:50%;top:50%;
  transform-origin:center;
  border-radius:28px;
  cursor:pointer;
  pointer-events:auto;
  touch-action:manipulation;

  background:
    radial-gradient(circle at 30% 22%, rgba(255,255,255,.55), transparent 45%),
    radial-gradient(circle at 72% 78%, rgba(0,120,255,.28), transparent 60%),
    radial-gradient(circle at 40% 60%, rgba(255,255,255,.08), transparent 70%),
    linear-gradient(160deg, rgba(12,22,38,.96), rgba(6,10,16,.98));

  border:1px solid rgba(255,255,255,.18);
  box-shadow:
    0 40px 140px rgba(0,0,0,.85),
    0 0 30px rgba(212,175,55,.35),
    inset 0 2px 0 rgba(255,255,255,.25),
    inset 0 -50px 80px rgba(0,0,0,.85);

  transition:transform .2s ease, box-shadow .2s ease;
}
.d::before{
  content:"";
  position:absolute;inset:0;border-radius:28px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.65;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
}
.d::after{
  content:"";
  position:absolute;left:8%;right:8%;top:10%;height:30%;
  border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.28), rgba(255,255,255,0));
}
.d:hover{
  transform:translate(-50%,-50%) rotate(45deg) scale(1.02);
}

.d-n{transform:translate(-50%,-50%) translate(0, calc(var(--R)*-1)) rotate(45deg)}
.d-e{transform:translate(-50%,-50%) translate(var(--R),0) rotate(45deg)}
.d-s{transform:translate(-50%,-50%) translate(0,var(--R)) rotate(45deg)}
.d-w{transform:translate(-50%,-50%) translate(calc(var(--R)*-1),0) rotate(45deg)}

.inner{
  transform:rotate(-45deg);
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  text-align:center;
  height:100%;
  padding:14px;
}
.lab{font-weight:950;font-size:18px}
.sub{font-size:13px;opacity:.85}

/* ---------- MODAL ---------- */
.bd{
  position:fixed;inset:0;
  background:rgba(0,0,0,.7);
  backdrop-filter:blur(10px);
  display:none;
}
.bd.show{display:block}

.modal{
  position:fixed;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:min(1100px,96vw);
  max-height:90vh;
  display:none;
}
.modal.show{display:block}

.shell{
  background:linear-gradient(160deg, rgba(10,18,30,.96), rgba(6,10,16,.98));
  border:1px solid rgba(255,255,255,.12);
  border-radius:24px;
  padding:22px;
  overflow:auto;
}

/* ---------- DOMAIN BLOCK ---------- */
.domain{
  margin-bottom:20px;
  padding:18px;
  border-radius:18px;
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.08);
  transition:opacity .2s ease;
}

.domain h3{
  margin:0 0 10px 0;
  font-weight:900;
  font-size:18px;
}

.domain p{
  margin:6px 0;
  line-height:1.5;
  opacity:.95;
}

/* ---------- GRAYED REDUNDANT ---------- */
.domain.redundant{
  opacity:.35;
  pointer-events:none;
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" href="/products/">BACK</a>
  <a class="btn" href="/door/">EXIT</a>
</div>

<div class="brand">
  <div class="t">Energy</div>
  <div class="s">Industrial architecture · disciplined clarity</div>
</div>

<div class="stage">
  <div class="d d-n" id="openModal">
    <div class="inner">
      <div class="lab">Energy Systems</div>
      <div class="sub">Unified operational structure</div>
    </div>
  </div>
</div>

<div class="bd" id="bd"></div>

<div class="modal" id="modal">
  <div class="shell" id="shell"></div>
</div>

<script>
const domains = [
"Engineering",
"Technology",
"Industrial",
"Environmental",
"Financial",
"Governance",
"Adversarial",
"Social",
"Medical",
"Political"
];

/* ---------- LENS STATE ---------- */
let lens = {
 style:"formal",       // formal | informal
 axis:"cause",         // cause | effect
 time:"concept"        // concept | live | roadmap
};

/* ---------- UNIQUE CONTENT ENGINE ---------- */
function generateParagraph(domain, index){
  const tone = lens.style === "formal"
    ? `In ${domain.toLowerCase()} systems,`
    : `In the world of ${domain.toLowerCase()},`;

  const axis = lens.axis === "cause"
    ? "the drivers determine structure"
    : "the outcomes reveal structure";

  const time = lens.time === "concept"
    ? "at the conceptual layer"
    : lens.time === "live"
    ? "under active deployment"
    : "along projected expansion";

  return `${tone} ${axis} ${time}.`;
}

/* ---------- RENDER ---------- */
function render(){
  const shell = document.getElementById("shell");
  shell.innerHTML = "";

  domains.forEach((d,i)=>{
    const block = document.createElement("div");
    block.className="domain";
    block.innerHTML=`<h3>${d}</h3>`;

    for(let x=0;x<7;x++){
      const p=document.createElement("p");
      p.textContent = generateParagraph(d,x);
      block.appendChild(p);
    }

    shell.appendChild(block);
  });

  applyRedundancyFilter();
}

/* ---------- REDUNDANCY FILTER (40% RULE) ---------- */
function applyRedundancyFilter(){
  const blocks = document.querySelectorAll(".domain");
  const seen = new Set();

  blocks.forEach(block=>{
    const text = block.innerText.slice(0,120);
    if(seen.has(text)){
      block.classList.add("redundant");
    }else{
      seen.add(text);
    }
  });
}

/* ---------- OPEN/CLOSE ---------- */
document.getElementById("openModal").addEventListener("click", ()=>{
  document.getElementById("bd").classList.add("show");
  document.getElementById("modal").classList.add("show");
  render();
});
document.getElementById("bd").addEventListener("click", ()=>{
  document.getElementById("bd").classList.remove("show");
  document.getElementById("modal").classList.remove("show");
});
</script>

</body>
</html>
