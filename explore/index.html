<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>Explore</title>

  <!-- CSS ORDER (CANON): ui.css FIRST, branch.css SECOND -->
  <link rel="stylesheet" href="/assets/ui.css" />
  <link rel="stylesheet" href="/assets/branch.css" />

  <!-- INSTRUMENT (state normalization) -->
  <script defer src="/assets/instrument.js"></script>
</head>

<body>
  <main class="crp-shell">
    <header class="crp-topbar" aria-label="Explore header">
      <div class="crp-topbar-left">
        <div class="crp-mark" aria-hidden="true">CRP</div>
        <h1 class="crp-title">Explore</h1>
      </div>

      <div class="crp-topbar-right">
        <div class="crp-lens" role="group" aria-label="Depth lens">
          <a id="depth-explore" class="crp-chip" href="/explore/?depth=explore" role="button">Explore</a>
          <a id="depth-learn" class="crp-chip" href="/home/?depth=learn" role="button">Learn</a>
        </div>
        <a class="crp-btn" href="/door/" role="button">Terminal</a>
      </div>
    </header>

    <!-- Surface map only: no modal, no click-to-open -->
    <section class="crp-compass" aria-label="Surface map">
      <article class="crp-quadrant" data-quadrant="NW" aria-label="Northwest">
        <h2 class="crp-quadrant-title">NW</h2>
        <div class="crp-vines" role="list">
          <div class="crp-vine" role="listitem" aria-label="NW Vine 1">NW Vine 1</div>
          <div class="crp-vine" role="listitem" aria-label="NW Vine 2">NW Vine 2</div>
          <div class="crp-vine" role="listitem" aria-label="NW Vine 3">NW Vine 3</div>
          <div class="crp-vine" role="listitem" aria-label="NW Vine 4">NW Vine 4</div>
        </div>
      </article>

      <article class="crp-quadrant" data-quadrant="NE" aria-label="Northeast">
        <h2 class="crp-quadrant-title">NE</h2>
        <div class="crp-vines" role="list">
          <div class="crp-vine" role="listitem" aria-label="NE Vine 1">NE Vine 1</div>
          <div class="crp-vine" role="listitem" aria-label="NE Vine 2">NE Vine 2</div>
          <div class="crp-vine" role="listitem" aria-label="NE Vine 3">NE Vine 3</div>
          <div class="crp-vine" role="listitem" aria-label="NE Vine 4">NE Vine 4</div>
        </div>
      </article>

      <article class="crp-quadrant" data-quadrant="SW" aria-label="Southwest">
        <h2 class="crp-quadrant-title">SW</h2>
        <div class="crp-vines" role="list">
          <div class="crp-vine" role="listitem" aria-label="SW Vine 1">SW Vine 1</div>
          <div class="crp-vine" role="listitem" aria-label="SW Vine 2">SW Vine 2</div>
          <div class="crp-vine" role="listitem" aria-label="SW Vine 3">SW Vine 3</div>
          <div class="crp-vine" role="listitem" aria-label="SW Vine 4">SW Vine 4</div>
        </div>
      </article>

      <article class="crp-quadrant" data-quadrant="SE" aria-label="Southeast">
        <h2 class="crp-quadrant-title">SE</h2>
        <div class="crp-vines" role="list">
          <div class="crp-vine" role="listitem" aria-label="SE Vine 1">SE Vine 1</div>
          <div class="crp-vine" role="listitem" aria-label="SE Vine 2">SE Vine 2</div>
          <div class="crp-vine" role="listitem" aria-label="SE Vine 3">SE Vine 3</div>
          <div class="crp-vine" role="listitem" aria-label="SE Vine 4">SE Vine 4</div>
        </div>
      </article>
    </section>

    <footer class="crp-footer">
      <small class="crp-footnote">
        Surface map only (no modal). Depth is <code>gd_depth</code>.
      </small>
    </footer>
  </main>

  <script>
    (function () {
      "use strict";

      // Canonical keys only
      var K_DEPTH = "gd_depth";

      function qp(name) {
        try { return new URLSearchParams(window.location.search).get(name); }
        catch (e) { return null; }
      }

      function lsGet(k) {
        try { return localStorage.getItem(k); } catch (e) { return null; }
      }

      function setPressed(el, pressed) {
        if (!el) return;
        el.setAttribute("aria-pressed", pressed ? "true" : "false");
      }

      // Explore page forces/reflects explore density
      var depth = qp("depth") || lsGet(K_DEPTH) || "explore";
      if (depth !== "explore") depth = "explore";

      // Reflect UI
      setPressed(document.getElementById("depth-explore"), true);
      setPressed(document.getElementById("depth-learn"), false);
    })();
  </script>
</body>
</html>
