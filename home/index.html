<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Home</title>

<link rel="stylesheet" href="/assets/ui.css?v=9002"/>
<link rel="stylesheet" href="/assets/branch.css?v=9002"/>

<style>
body{
  background:
    radial-gradient(1200px 800px at 50% 0%, rgba(160,20,20,.40) 0%, rgba(40,0,0,.55) 38%, #05070c 100%);
}
.h{ position:relative; z-index:10; }
.stage{ position:relative; z-index:2; }

.topPanel{
  width:min(900px,94vw);
  border-radius:24px;
  background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 26px 70px rgba(0,0,0,.60);
  padding:14px 14px;
  margin-bottom:14px;
}
.bar{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:space-between;
}
.badge{
  padding:10px 14px;
  border-radius:999px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  font-weight:900;
  letter-spacing:.08em;
}
.actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.action{
  padding:10px 14px;
  border-radius:999px;
  background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.12);
  font-weight:900;
  cursor:pointer;
}

details.route{
  margin-top:10px;
  border-radius:18px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  overflow:hidden;
}
details.route > summary{
  list-style:none;
  cursor:pointer;
  padding:14px 14px;
  font-weight:900;
  letter-spacing:.06em;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
details.route > summary::-webkit-details-marker{display:none;}

.routeBody{
  padding:12px 14px 16px;
  opacity:.92;
  line-height:1.55;
}

.gridBtns{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:10px;
}
.qbtn{
  padding:10px 12px;
  border-radius:14px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  font-weight:900;
  cursor:pointer;
  text-decoration:none;
  color:inherit;
  display:inline-flex;
  gap:8px;
  align-items:center;
}
.qbtn:hover{ background:rgba(255,255,255,.12); }

.kv{
  margin-top:10px;
  border-radius:14px;
  padding:12px;
  background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.08);
}
.kv .k{ font-weight:900; letter-spacing:.06em; opacity:.9; }
.kv .v{ opacity:.85; margin-top:6px; }

.ul{
  margin:10px 0 0 18px;
}
.ul li{ margin:6px 0; }
.ul li ul{ margin-top:6px; margin-left:18px; opacity:.92; }
.ul li ul li{ margin:4px 0; }

.hr{
  height:1px;
  background:rgba(255,255,255,.08);
  margin:14px 0;
}
</style>
</head>

<body>
<div class="shooting-stars"></div>

<div class="page">

  <div class="h">
    <h1 id="hTitle">Home</h1>
    <p id="hSub">Compass hub · choose a route.</p>
  </div>

  <!-- Quadrant routes (NW/NE/SW/SE) -->
  <div class="topPanel" id="routesPanel">
    <div class="bar">
      <div class="badge" id="modeBadge">MODE</div>
      <div class="actions">
        <div class="action" id="toDoor">Door</div>
        <div class="action" id="toRoot">Root</div>
      </div>
    </div>

    <details class="route" id="rNW">
      <summary><span id="rNWt">NORTHWEST</span><span>▾</span></summary>
      <div class="routeBody" id="rNWb"></div>
    </details>

    <details class="route" id="rNE">
      <summary><span id="rNEt">NORTHEAST</span><span>▾</span></summary>
      <div class="routeBody" id="rNEb"></div>
    </details>

    <details class="route" id="rSW">
      <summary><span id="rSWt">SOUTHWEST</span><span>▾</span></summary>
      <div class="routeBody" id="rSWb"></div>
    </details>

    <details class="route" id="rSE">
      <summary><span id="rSEt">SOUTHEAST</span><span>▾</span></summary>
      <div class="routeBody" id="rSEb"></div>
    </details>
  </div>

  <!-- Cardinal plate (N/E/S/W) -->
  <div class="stage">
    <div class="platform">

      <a class="diamond top" href="/laws/"><span id="pN">N<small id="pN2">Laws</small></span></a>
      <a class="diamond right" href="/products/"><span id="pE">E<small id="pE2">Products</small></span></a>
      <a class="diamond bottom" href="/gauges/"><span id="pS">S<small id="pS2">Gauges</small></span></a>
      <a class="diamond left" href="/links/"><span id="pW">W<small id="pW2">Links</small></span></a>

      <a class="diamond mini mini-left" href="/"><span><small id="miniL">ROOT</small></span></a>
      <a class="diamond mini mini-right" href="/rgsc/"><span><small id="miniR">RGSC</small></span></a>

    </div>
  </div>

  <footer>CANONICAL · STABLE · © GEODIAMETRICS</footer>
</div>

<script>
(function(){
  const lang = localStorage.getItem("GD_LANG") || "en";
  const depth = localStorage.getItem("GD_DEPTH") || "shop"; // shop | learn

  const copy = {
    en:{
      home:"Home",
      sub:"Compass hub · choose a route.",
      mode:"MODE: " + (depth === "shop" ? "SHOP (surface)" : "LEARN (deep)"),
      door:"Door",
      root:"Root",

      nw:"NORTHWEST",
      ne:"NORTHEAST",
      sw:"SOUTHWEST",
      se:"SOUTHEAST",

      plate:{ n:"N", n2:"Laws", e:"E", e2:"Products", s:"S", s2:"Gauges", w:"W", w2:"Links" },
      miniL:"ROOT",
      miniR:"RGSC",

      // ROUTE CONTENT (links only to existing pages)
      routes:{
        nw:{
          shop:{
            lead:"Definitions · language · structure.",
            buttons:[
              ["Open Laws","/laws/"],
              ["Open Categories","/laws/categories/"],
              ["Open Links (glossary/IDs)","/links/"],
              ["Open RGSC","/rgsc/"]
            ]
          },
          learn:{
            lead:"Definitions · language · structure.",
            blocks:[
              ["SSG / Grammar / DOT.GRID",[
                "SSG: constraint-based structure language (spec + examples).",
                "Diamond grammar: four routes, one choice at a time.",
                "DOT.GRID: 256-state indexing & replay-safe routing."
              ]],
              ["Acronyms & glossary",[
                "Core acronyms (OSF, ORCID, RGSC, DOT.GRID, SSG).",
                "Operational terms (route, hub, return protocol, receipt).",
                "Consistency rules: same word, same meaning across the site."
              ]],
              ["Where this lives",[
                "Laws → Categories (definitions & branch grammar).",
                "Links (identity anchors, OSF/ORCID, references).",
                "RGSC (governance receipts & signed routing surfaces)."
              ]]
            ],
            buttons:[
              ["Go: Laws","/laws/"],
              ["Go: Categories","/laws/categories/"],
              ["Go: Links","/links/"],
              ["Go: RGSC","/rgsc/"]
            ]
          }
        },

        ne:{
          shop:{
            lead:"Execution · surfaces · examples.",
            buttons:[
              ["Open Products","/products/"],
              ["Open Diagnostic","/diagnostic/"],
              ["Open Gauges","/gauges/"],
              ["Open RGSC","/rgsc/"]
            ]
          },
          learn:{
            lead:"Execution · surfaces · examples.",
            blocks:[
              ["Execution surfaces",[
                "Apps / portals are the user-facing instruments.",
                "Each surface maps to a route and emits receipts/logs.",
                "Surfaces stay navigable even while content evolves."
              ]],
              ["Workflows & receipts",[
                "Receipts prove what happened (ack/resolve/reject).",
                "Replay-safe: same inputs reproduce the same outputs.",
                "Return protocol: hub-first navigation prevents drift."
              ]],
              ["Examples & outputs",[
                "Examples show how to use the system end-to-end.",
                "Packaged outputs: PDFs, drills, checklists, exports.",
                "Diagnostics are demonstrations of the rules in action."
              ]]
            ],
            buttons:[
              ["Go: Products","/products/"],
              ["Go: Diagnostic","/diagnostic/"],
              ["Go: Gauges","/gauges/"],
              ["Go: RGSC","/rgsc/"]
            ]
          }
        },

        sw:{
          shop:{
            lead:"Measurement · diagnostics · rules.",
            buttons:[
              ["Open Gauges","/gauges/"],
              ["Open Diagnostic","/diagnostic/"],
              ["Open Laws","/laws/"],
              ["Open Categories","/laws/categories/"]
            ]
          },
          learn:{
            lead:"Measurement · diagnostics · rules.",
            blocks:[
              ["Gauges (measurement instruments)",[
                "Measurement is classification under constraint.",
                "Gauges align language → evidence → outcome.",
                "Stable rules; evolving content."
              ]],
              ["Diagnostics (how to verify)",[
                "Diagnostics are quick audits of structure & coherence.",
                "They surface conflicts, gaps, and return paths.",
                "They prevent ‘multi-tab drift’ inside a branch."
              ]],
              ["Rules (navigation integrity)",[
                "One choice at a time.",
                "Return to hub if incomplete.",
                "Same grammar everywhere: predictable traversal."
              ]]
            ],
            buttons:[
              ["Go: Gauges","/gauges/"],
              ["Go: Diagnostic","/diagnostic/"],
              ["Go: Laws","/laws/"],
              ["Go: Categories","/laws/categories/"]
            ]
          }
        },

        se:{
          shop:{
            lead:"Identity · references · links.",
            buttons:[
              ["Open Links","/links/"],
              ["Open Contact","/contact/"],
              ["Open Root","/"],
              ["Open Home","/home/"]
            ]
          },
          learn:{
            lead:"Identity · references · links.",
            blocks:[
              ["Identity anchors",[
                "ORCID: researcher identity anchor.",
                "OSF: project registry & public research surface.",
                "Contact: direct channel."
              ]],
              ["Reference map",[
                "Links page holds external references (stable).",
                "Use it to verify identity & provenance.",
                "Use it to find canonical entry points."
              ]],
              ["Operational note",[
                "Identity anchors are not marketing—just verification.",
                "Everything is navigated with the same route grammar.",
                "If uncertain: return to Home and choose again."
              ]]
            ],
            buttons:[
              ["Go: Links","/links/"],
              ["Go: Contact","/contact/"],
              ["Go: Root","/"],
              ["Go: Home","/home/"]
            ]
          }
        }
      }
    },

    zh:{
      home:"主页",
      sub:"罗盘枢纽 · 选择一条路径。",
      mode:"模式：" + (depth === "shop" ? "浏览（表层）" : "学习（深入）"),
      door:"入口",
      root:"根页",

      nw:"西北",
      ne:"东北",
      sw:"西南",
      se:"东南",

      plate:{ n:"N", n2:"法则", e:"E", e2:"产品", s:"S", s2:"量表", w:"W", w2:"链接" },
      miniL:"根页",
      miniR:"RGSC",

      routes:{
        nw:{
          shop:{
            lead:"定义 · 语言 · 结构。",
            buttons:[
              ["进入：法则","/laws/"],
              ["进入：分类","/laws/categories/"],
              ["进入：链接（术语/身份）","/links/"],
              ["进入：RGSC","/rgsc/"]
            ]
          },
          learn:{
            lead:"定义 · 语言 · 结构。",
            blocks:[
              ["SSG / 语法 / DOT.GRID",[
                "SSG：用于表达结构与约束的语言（规范+示例）。",
                "菱形语法：四条路线，一次只选一条。",
                "DOT.GRID：256态索引与可回放路由。"
              ]],
              ["缩略词与术语",[
                "核心缩略词（OSF、ORCID、RGSC、DOT.GRID、SSG）。",
                "操作术语（路线、枢纽、返回协议、回执）。",
                "一致性规则：同一词在全站含义不变。"
              ]],
              ["内容位置",[
                "法则→分类（定义与分支语法）。",
                "链接（身份锚点、OSF/ORCID、参考）。",
                "RGSC（治理回执与签名路由）。"
              ]]
            ],
            buttons:[
              ["去：法则","/laws/"],
              ["去：分类","/laws/categories/"],
              ["去：链接","/links/"],
              ["去：RGSC","/rgsc/"]
            ]
          }
        },

        ne:{
          shop:{
            lead:"执行 · 界面 · 示例。",
            buttons:[
              ["进入：产品","/products/"],
              ["进入：诊断","/diagnostic/"],
              ["进入：量表","/gauges/"],
              ["进入：RGSC","/rgsc/"]
            ]
          },
          learn:{
            lead:"执行 · 界面 · 示例。",
            blocks:[
              ["执行界面",[
                "应用/门户是用户可操作的工具面。",
                "界面映射到路线，并生成回执/日志。",
                "内容更新不影响导航稳定。"
              ]],
              ["流程与回执",[
                "回执证明发生了什么（确认/解决/拒绝）。",
                "可回放：同输入→同输出。",
                "返回协议：枢纽优先，防止漂移。"
              ]],
              ["示例与输出",[
                "示例展示从头到尾怎么用。",
                "打包输出：PDF、练习、清单、导出。",
                "诊断是规则的现场演示。"
              ]]
            ],
            buttons:[
              ["去：产品","/products/"],
              ["去：诊断","/diagnostic/"],
              ["去：量表","/gauges/"],
              ["去：RGSC","/rgsc/"]
            ]
          }
        },

        sw:{
          shop:{
            lead:"测量 · 诊断 · 规则。",
            buttons:[
              ["进入：量表","/gauges/"],
              ["进入：诊断","/diagnostic/"],
              ["进入：法则","/laws/"],
              ["进入：分类","/laws/categories/"]
            ]
          },
          learn:{
            lead:"测量 · 诊断 · 规则。",
            blocks:[
              ["量表（测量工具）",[
                "测量＝在约束下做分类。",
                "量表把语言→证据→结果对齐。",
                "规则稳定，内容可迭代。"
              ]],
              ["诊断（如何验证）",[
                "诊断是结构与一致性的快速审计。",
                "暴露冲突、缺口与返回路径。",
                "防止在分支内多标签漂移。"
              ]],
              ["规则（导航完整性）",[
                "一次只选一个。",
                "不完整就回到枢纽。",
                "全站同语法：可预测 traversal。"
              ]]
            ],
            buttons:[
              ["去：量表","/gauges/"],
              ["去：诊断","/diagnostic/"],
              ["去：法则","/laws/"],
              ["去：分类","/laws/categories/"]
            ]
          }
        },

        se:{
          shop:{
            lead:"身份 · 参考 · 链接。",
            buttons:[
              ["进入：链接","/links/"],
              ["进入：联系","/contact/"],
              ["进入：根页","/"],
              ["进入：主页","/home/"]
            ]
          },
          learn:{
            lead:"身份 · 参考 · 链接。",
            blocks:[
              ["身份锚点",[
                "ORCID：研究者身份锚点。",
                "OSF：项目注册与公开研究面。",
                "联系：直达渠道。"
              ]],
              ["参考地图",[
                "链接页保存外部参考（稳定）。",
                "用于验证身份与来源。",
                "用于找到规范入口。"
              ]],
              ["操作说明",[
                "身份锚点不是营销，只是验证。",
                "全站同路线语法。",
                "不确定就回主页重新选择。"
              ]]
            ],
            buttons:[
              ["去：链接","/links/"],
              ["去：联系","/contact/"],
              ["去：根页","/"],
              ["去：主页","/home/"]
            ]
          }
        }
      }
    }
  }[lang];

  document.documentElement.lang = (lang === "zh") ? "zh-CN" : "en";
  document.title = copy.home;

  document.getElementById("hTitle").textContent = copy.home;
  document.getElementById("hSub").textContent = copy.sub;
  document.getElementById("modeBadge").textContent = copy.mode;

  document.getElementById("toDoor").textContent = copy.door;
  document.getElementById("toRoot").textContent = copy.root;
  document.getElementById("toDoor").onclick = () => window.location.href="/door/";
  document.getElementById("toRoot").onclick = () => window.location.href="/";

  document.getElementById("rNWt").textContent = copy.nw;
  document.getElementById("rNEt").textContent = copy.ne;
  document.getElementById("rSWt").textContent = copy.sw;
  document.getElementById("rSEt").textContent = copy.se;

  // Build route bodies
  function btnRow(btns){
    return '<div class="gridBtns">' + btns.map(b=>{
      const label=b[0], href=b[1];
      return '<a class="qbtn" href="'+href+'">➜ '+label+'</a>';
    }).join('') + '</div>';
  }
  function learnBlocks(blocks){
    return blocks.map(bl=>{
      const title=bl[0], items=bl[1];
      return '<div class="kv"><div class="k">'+title+'</div><div class="v"><ul class="ul">'+
        items.map(x=>'<li>'+x+'</li>').join('')+
      '</ul></div></div>';
    }).join('<div class="hr"></div>');
  }

  const modeKey = (depth === "shop") ? "shop" : "learn";

  function routeHTML(q){
    const data = copy.routes[q][modeKey];
    if(modeKey === "shop"){
      return '<div class="kv"><div class="k">'+data.lead+'</div><div class="v"></div></div>' + btnRow(data.buttons);
    }
    return '<div class="kv"><div class="k">'+data.lead+'</div><div class="v"></div></div>' +
           '<div class="hr"></div>' +
           learnBlocks(data.blocks) +
           '<div class="hr"></div>' +
           btnRow(data.buttons);
  }

  document.getElementById("rNWb").innerHTML = routeHTML("nw");
  document.getElementById("rNEb").innerHTML = routeHTML("ne");
  document.getElementById("rSWb").innerHTML = routeHTML("sw");
  document.getElementById("rSEb").innerHTML = routeHTML("se");

  // Plate
  document.getElementById("pN").childNodes[0].textContent = copy.plate.n;
  document.getElementById("pN2").textContent = copy.plate.n2;
  document.getElementById("pE").childNodes[0].textContent = copy.plate.e;
  document.getElementById("pE2").textContent = copy.plate.e2;
  document.getElementById("pS").childNodes[0].textContent = copy.plate.s;
  document.getElementById("pS2").textContent = copy.plate.s2;
  document.getElementById("pW").childNodes[0].textContent = copy.plate.w;
  document.getElementById("pW2").textContent = copy.plate.w2;

  document.getElementById("miniL").textContent = copy.miniL;
  document.getElementById("miniR").textContent = copy.miniR;
})();
</script>

</body>
</html>
