<!-- TNT: /home/index.html
     HOME (Hub)
     PURPOSE:
       - Reads lang+depth from localStorage (set by / and /door/)
       - EXPLORE = surface bubbles + quick ‚Äújump‚Äù buttons
       - LEARN   = deep nested bubbles (bubble‚Üíblock‚Üísub-bubbles), plus jump buttons
     NOTE:
       - Door sets crp_depth = "explore" | "learn"
       - Index sets crp_lang = "en" | "zh"
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Home ¬∑ Coherent Resolution Platform</title>

  <link rel="stylesheet" href="/assets/ui.css?v=9101"/>
  <link rel="stylesheet" href="/assets/branch.css?v=9101"/>

  <style>
    /* Festival palette (Red ¬∑ Gold ¬∑ Black) */
    body{
      background:
        radial-gradient(1400px 900px at 50% 10%, rgba(140,0,0,.44) 0%, rgba(30,0,0,.20) 42%, rgba(5,7,12,1) 100%),
        radial-gradient(1200px 900px at 20% 24%, rgba(210,160,60,.08) 0%, rgba(0,0,0,0) 60%),
        radial-gradient(1200px 900px at 80% 24%, rgba(210,160,60,.06) 0%, rgba(0,0,0,0) 60%);
    }

    .wrap{width:min(980px,94vw);margin:0 auto;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:28px 14px 96px;gap:14px;position:relative;z-index:2}
    .hero{width:100%;max-width:900px;position:relative;z-index:10}
    .hero h1{margin:0;font-weight:900;letter-spacing:.02em;font-size:clamp(42px,9vw,70px);line-height:1.02}
    .hero p{margin:12px 0 0;opacity:.78;font-size:18px;line-height:1.45;max-width:760px}

    /* top pills */
    .topbar{width:100%;max-width:900px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;position:relative;z-index:12}
    .pill{
      border-radius:999px;
      padding:10px 14px;
      background:rgba(255,255,255,.06);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.12);
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      font-size:12px;
      opacity:.92;
      display:inline-flex;
      align-items:center;
      gap:10px;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
    }
    .pill .v{
      padding:6px 10px;
      border-radius:999px;
      background:rgba(210,160,60,.10);
      box-shadow:inset 0 0 0 1px rgba(210,160,60,.22);
      color:rgba(255,235,185,.92);
      letter-spacing:.14em;
      font-size:12px;
    }
    .pill.btn{cursor:pointer;text-decoration:none;color:inherit}
    .pill.btn:hover{background:rgba(255,255,255,.08)}
    .pill.btn:active{transform:translateY(1px)}

    .section-title{
      width:100%;
      max-width:900px;
      margin-top:8px;
      font-weight:900;
      letter-spacing:.18em;
      opacity:.70;
      font-size:12px;
      text-transform:uppercase;
    }

    /* Quadrant details card */
    details.quad{
      width:100%;
      max-width:900px;
      border-radius:22px;
      background:rgba(255,255,255,.05);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.10),0 20px 60px rgba(0,0,0,.45);
      backdrop-filter:blur(12px);
      overflow:hidden;
    }
    details.quad + details.quad{margin-top:12px}
    details.quad summary{list-style:none;cursor:pointer;padding:16px;display:flex;align-items:center;justify-content:space-between;gap:12px;-webkit-tap-highlight-color:transparent}
    details.quad summary::-webkit-details-marker{display:none}

    .q-left{display:flex;align-items:center;gap:12px;min-width:0}
    .q-badge{
      width:62px;height:42px;border-radius:18px;
      background:rgba(140,0,0,.20);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);
      display:flex;align-items:center;justify-content:center;
      font-weight:900;letter-spacing:.10em;
      flex:0 0 auto;
      position:relative;
      color:rgba(255,235,185,.92);
      text-shadow:0 0 10px rgba(210,160,60,.18);
    }
    .q-badge .ico{position:absolute;left:10px;opacity:.9}
    .q-badge .code{opacity:.95;margin-left:14px}
    .q-text{min-width:0}
    .q-text b{display:block;font-size:18px;letter-spacing:.12em;text-transform:uppercase}
    .q-text span{display:block;opacity:.72;margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    .q-arrow{
      width:42px;height:42px;border-radius:999px;
      background:rgba(255,255,255,.06);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);
      display:flex;align-items:center;justify-content:center;
      opacity:.9;
      flex:0 0 auto;
    }

    .inside{padding:0 16px 16px}

    /* Bubble row (inside quadrant) */
    .bubble-row{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      margin-top:6px;
    }
    @media(min-width:760px){.bubble-row{grid-template-columns:1fr 1fr}}

    .bubble-btn{
      border-radius:18px;
      background:rgba(0,0,0,.22);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
      padding:12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
    }
    .bubble-btn:hover{background:rgba(0,0,0,.28)}
    .bubble-btn:active{transform:translateY(1px)}
    .bubble-btn .left{min-width:0}
    .bubble-btn b{display:block;font-size:13px;letter-spacing:.14em;text-transform:uppercase;font-weight:900}
    .bubble-btn i{display:block;font-style:normal;opacity:.72;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:3px}
    .bubble-btn .go{
      width:40px;height:40px;border-radius:999px;
      background:rgba(255,255,255,.06);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);
      display:flex;align-items:center;justify-content:center;
      opacity:.9;
      flex:0 0 auto;
    }

    /* Block map (loaded after bubble click) */
    .blockmap{
      margin-top:12px;
      border-radius:20px;
      background:rgba(0,0,0,.18);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
      overflow:hidden;
    }
    .blockmap .hdr{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px 14px;
      background:rgba(255,255,255,.04);
      box-shadow:inset 0 -1px 0 rgba(255,255,255,.06);
    }
    .blockmap .hdr b{
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:12px;
      opacity:.85;
    }
    .blockmap .hdr span{
      font-size:12px;
      opacity:.68;
      letter-spacing:.10em;
      text-transform:uppercase;
      text-align:right;
    }
    .blockmap .body{padding:14px}
    .blockmap h3{margin:0 0 10px;font-size:18px;font-weight:900;letter-spacing:.08em}
    .blockmap p{margin:0 0 12px;opacity:.86;line-height:1.6}
    .chips{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 2px}
    .chip{
      border-radius:999px;
      padding:9px 12px;
      background:rgba(255,255,255,.06);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      font-size:11px;
      opacity:.9;
      cursor:pointer;
      -webkit-tap-highlight-color:transparent;
      user-select:none;
    }
    .chip:hover{background:rgba(255,255,255,.08)}
    .chip:active{transform:translateY(1px)}

    .subblocks{margin-top:12px;display:grid;gap:10px}
    .subcard{
      border-radius:18px;
      background:rgba(0,0,0,.20);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
      padding:12px;
    }
    .subcard b{display:flex;justify-content:space-between;gap:10px;letter-spacing:.12em;text-transform:uppercase;font-size:12px}
    .subcard p{margin:8px 0 0;opacity:.85;line-height:1.55;font-size:14px}

    .jumps{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      justify-content:center;
      margin-top:14px;
    }
    .jumpbtn{
      border-radius:999px;
      padding:12px 18px;
      background:rgba(255,255,255,.07);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.12);
      color:inherit;
      font-weight:900;
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:12px;
      text-decoration:none;
      -webkit-tap-highlight-color:transparent;
    }
    .jumpbtn:hover{filter:brightness(1.05)}
    .jumpbtn:active{transform:translateY(1px)}

    /* Cardinal plate section */
    .cardinal-title{width:100%;max-width:900px;margin-top:4px;font-weight:900;letter-spacing:.18em;opacity:.70;font-size:12px;text-transform:uppercase}
    .stage{width:100%;display:flex;align-items:center;justify-content:center;margin-top:8px}

    /* Use branch.css diamonds */
    .platform{width:min(420px,88vw)}
    .diamond{cursor:pointer}

    footer{
      position:fixed;
      left:0; right:0;
      bottom:18px;
      text-align:center;
      opacity:.55;
      letter-spacing:3px;
      font-size:12px;
      z-index:3;
      pointer-events:none;
    }

    .shooting-stars{opacity:.20}
  </style>
</head>

<body>
  <div class="shooting-stars"></div>

  <div class="wrap">
    <div class="hero">
      <h1 id="t-title">HOME</h1>
      <p id="t-sub">Explore the system. Expand bubbles ‚Üí load blocks ‚Üí expand sub-bubbles ‚Üí then jump.</p>
    </div>

    <div class="topbar" aria-label="Home controls">
      <span class="pill" id="pill-lang">LANG <span class="v" id="v-lang">EN</span></span>
      <span class="pill" id="pill-depth">DEPTH <span class="v" id="v-depth">EXPLORE</span></span>

      <a class="pill btn" href="/door/" id="btn-depth">CHANGE DEPTH</a>
      <a class="pill btn" href="/" id="btn-lang">CHANGE LANGUAGE</a>

      <span class="pill" id="pill-scope">SCOPE <span class="v">256</span></span>
    </div>

    <div class="section-title" id="t-qtitle">Quadrant routes (NW / NE / SW / SE)</div>

    <!-- NW -->
    <details class="quad" id="q-nw">
      <summary>
        <div class="q-left">
          <div class="q-badge"><span class="ico">‚≠ê</span><span class="code">NW</span></div>
          <div class="q-text">
            <b id="t-nw-h">NORTHWEST</b>
            <span id="t-nw-s">Definitions ¬∑ language ¬∑ structure</span>
          </div>
        </div>
        <div class="q-arrow">‚ñæ</div>
      </summary>

      <div class="inside">
        <div class="bubble-row" id="brow-nw"></div>
        <div class="blockmap" id="block-nw" hidden>
          <div class="hdr"><b>BLOCK</b><span>TAP A BUBBLE TO LOAD DETAILS</span></div>
          <div class="body" id="block-nw-body"></div>
        </div>

        <div class="jumps">
          <a class="jumpbtn" href="/laws/">JUMP ¬∑ LAWS</a>
          <a class="jumpbtn" href="/laws/categories/">JUMP ¬∑ CATEGORIES</a>
        </div>
      </div>
    </details>

    <!-- NE -->
    <details class="quad" id="q-ne">
      <summary>
        <div class="q-left">
          <div class="q-badge"><span class="ico">‚òÄ</span><span class="code">NE</span></div>
          <div class="q-text">
            <b id="t-ne-h">NORTHEAST</b>
            <span id="t-ne-s">Execution ¬∑ surfaces ¬∑ examples</span>
          </div>
        </div>
        <div class="q-arrow">‚ñæ</div>
      </summary>

      <div class="inside">
        <div class="bubble-row" id="brow-ne"></div>
        <div class="blockmap" id="block-ne" hidden>
          <div class="hdr"><b>BLOCK</b><span>TAP A BUBBLE TO LOAD DETAILS</span></div>
          <div class="body" id="block-ne-body"></div>
        </div>

        <div class="jumps">
          <a class="jumpbtn" href="/products/">JUMP ¬∑ PRODUCTS</a>
          <a class="jumpbtn" href="/rgsc/">JUMP ¬∑ RGSC</a>
        </div>
      </div>
    </details>

    <!-- SW -->
    <details class="quad" id="q-sw">
      <summary>
        <div class="q-left">
          <div class="q-badge"><span class="ico">üåá</span><span class="code">SW</span></div>
          <div class="q-text">
            <b id="t-sw-h">SOUTHWEST</b>
            <span id="t-sw-s">Measurement ¬∑ diagnostics ¬∑ rules</span>
          </div>
        </div>
        <div class="q-arrow">‚ñæ</div>
      </summary>

      <div class="inside">
        <div class="bubble-row" id="brow-sw"></div>
        <div class="blockmap" id="block-sw" hidden>
          <div class="hdr"><b>BLOCK</b><span>TAP A BUBBLE TO LOAD DETAILS</span></div>
          <div class="body" id="block-sw-body"></div>
        </div>

        <div class="jumps">
          <a class="jumpbtn" href="/gauges/">JUMP ¬∑ GAUGES</a>
          <a class="jumpbtn" href="/diagnostic/">JUMP ¬∑ DIAGNOSTIC</a>
        </div>
      </div>
    </details>

    <!-- SE -->
    <details class="quad" id="q-se">
      <summary>
        <div class="q-left">
          <div class="q-badge"><span class="ico">üåÖ</span><span class="code">SE</span></div>
          <div class="q-text">
            <b id="t-se-h">SOUTHEAST</b>
            <span id="t-se-s">Identity ¬∑ references ¬∑ links</span>
          </div>
        </div>
        <div class="q-arrow">‚ñæ</div>
      </summary>

      <div class="inside">
        <div class="bubble-row" id="brow-se"></div>
        <div class="blockmap" id="block-se" hidden>
          <div class="hdr"><b>BLOCK</b><span>TAP A BUBBLE TO LOAD DETAILS</span></div>
          <div class="body" id="block-se-body"></div>
        </div>

        <div class="jumps">
          <a class="jumpbtn" href="/links/">JUMP ¬∑ LINKS</a>
          <a class="jumpbtn" href="/contact/">JUMP ¬∑ CONTACT</a>
        </div>
      </div>
    </details>

    <div class="cardinal-title" id="t-ctitle">Cardinal plate (N / E / S / W)</div>

    <div class="stage" aria-label="Cardinal plate">
      <div class="platform">
        <a class="diamond top" href="/laws/"><span>N<small id="t-card-n">Laws</small></span></a>
        <a class="diamond right" href="/products/"><span>E<small id="t-card-e">Products</small></span></a>
        <a class="diamond bottom" href="/gauges/"><span>S<small id="t-card-s">Gauges</small></span></a>
        <a class="diamond left" href="/links/"><span>W<small id="t-card-w">Links</small></span></a>

        <a class="diamond mini mini-left" href="/door/"><span><small id="t-mini-left">DOOR</small></span></a>
        <a class="diamond mini mini-right" href="/"><span><small id="t-mini-right">LANG</small></span></a>
      </div>
    </div>
  </div>

  <footer>CANONICAL ¬∑ STABLE ¬∑ ¬© GEODIAMETRICS</footer>

  <script>
    (function(){
      const KEY_LANG = "crp_lang";     // "en" | "zh"
      const KEY_DEPTH = "crp_depth";   // "explore" | "learn"

      const lang = (localStorage.getItem(KEY_LANG) || "en").toLowerCase();
      const depth = (localStorage.getItem(KEY_DEPTH) || "explore").toLowerCase();

      // Redirect safety: Home requires language chosen at index
      if(!localStorage.getItem(KEY_LANG)){
        location.replace("/");
        return;
      }

      // UI pills
      document.getElementById("v-lang").textContent = (lang === "zh") ? "‰∏≠Êñá" : "EN";
      document.getElementById("v-depth").textContent = (depth === "learn") ? (lang === "zh" ? "Â≠¶‰π†" : "LEARN") : (lang === "zh" ? "ÊµèËßà" : "EXPLORE");

      // Copy (EN / ZH)
      const COPY = {
        en: {
          title:"HOME",
          sub:"Explore the system. Expand bubbles ‚Üí load blocks ‚Üí expand sub-bubbles ‚Üí then jump.",
          qtitle:"Quadrant routes (NW / NE / SW / SE)",
          ctitle:"Cardinal plate (N / E / S / W)",
          nwH:"NORTHWEST", nwS:"Definitions ¬∑ language ¬∑ structure",
          neH:"NORTHEAST", neS:"Execution ¬∑ surfaces ¬∑ examples",
          swH:"SOUTHWEST", swS:"Measurement ¬∑ diagnostics ¬∑ rules",
          seH:"SOUTHEAST", seS:"Identity ¬∑ references ¬∑ links",
          cardN:"Laws", cardE:"Products", cardS:"Gauges", cardW:"Links",
          miniL:"DOOR", miniR:"LANG"
        },
        zh: {
          // 90% Chinese + 10% basic English anchors (foundation)
          title:"‰∏≠Êû¢",
          sub:"ÊµèËßàÁ≥ªÁªüÔºöÂ±ïÂºÄ bubbles ‚Üí Âä†ËΩΩ block ‚Üí Â±ïÂºÄ sub-bubbles ‚Üí ÂÜç jump„ÄÇ",
          qtitle:"Ë±°ÈôêË∑ØÁ∫ø (NW / NE / SW / SE)",
          ctitle:"Âü∫Â∫ßÊñπ‰Ωç (N / E / S / W)",
          nwH:"Ë•øÂåó", nwS:"ÂÆö‰πâ ¬∑ ËØ≠Ë®Ä ¬∑ ÁªìÊûÑ",
          neH:"‰∏úÂåó", neS:"ÊâßË°å ¬∑ ÁïåÈù¢ ¬∑ Á§∫‰æã",
          swH:"Ë•øÂçó", swS:"ÊµãÈáè ¬∑ ËØäÊñ≠ ¬∑ ËßÑÂàô",
          seH:"‰∏úÂçó", seS:"Ë∫´‰ªΩ ¬∑ ÂºïÁî® ¬∑ ÈìæÊé•",
          cardN:"Ê≥ïÂàô", cardE:"‰∫ßÂìÅ", cardS:"ÈáèË°®", cardW:"ÈìæÊé•",
          miniL:"ÂÖ•Âè£", miniR:"ËØ≠Ë®Ä"
        }
      };

      const T = COPY[lang] || COPY.en;

      document.getElementById("t-title").textContent = T.title;
      document.getElementById("t-sub").textContent = T.sub;
      document.getElementById("t-qtitle").textContent = T.qtitle;
      document.getElementById("t-ctitle").textContent = T.ctitle;

      document.getElementById("t-nw-h").textContent = T.nwH;
      document.getElementById("t-nw-s").textContent = T.nwS;
      document.getElementById("t-ne-h").textContent = T.neH;
      document.getElementById("t-ne-s").textContent = T.neS;
      document.getElementById("t-sw-h").textContent = T.swH;
      document.getElementById("t-sw-s").textContent = T.swS;
      document.getElementById("t-se-h").textContent = T.seH;
      document.getElementById("t-se-s").textContent = T.seS;

      document.getElementById("t-card-n").textContent = T.cardN;
      document.getElementById("t-card-e").textContent = T.cardE;
      document.getElementById("t-card-s").textContent = T.cardS;
      document.getElementById("t-card-w").textContent = T.cardW;
      document.getElementById("t-mini-left").textContent = T.miniL;
      document.getElementById("t-mini-right").textContent = T.miniR;

      // Data model (4 bubbles per quadrant + deep block)
      // EXPLORE = shorter blurbs, LEARN = longer blocks + subcards
      const DATA = {
        nw: [
          {
            key:"SSG",
            brief:{
              en:"Constraint language overview.",
              zh:"Á∫¶ÊùüËØ≠Ë®ÄÊ¶ÇËßà (Language)."
            },
            deep:{
              en:{
                title:"SSG ‚Äî Simplified Syntax Geometry",
                p:"A constraint language for expressing structure, execution, and state transitions. Built for compression, clarity, and replay-safe contracts.",
                chips:["Origin","Now","Trajectory"],
                sub:[
                  {h:"Primitives", r:"R/S/C/G/Guards", p:"Resource, Store, Constraint, Goal, Guard ‚Äî the minimum set for executable structure."},
                  {h:"Receipts", r:"gated flow", p:"Advance only after receipt. Back-nav invalidates downstream receipts."},
                  {h:"Invariants", r:"navigation-first", p:"No timers as gates. Unified press primitives. Atomic handoff with receipt."}
                ]
              },
              zh:{
                title:"SSG ‚Äî ÁÆÄÂåñËØ≠Ê≥ïÂá†‰Ωï",
                p:"‰∏ÄÁßçÁ∫¶ÊùüËØ≠Ë®ÄÔºåÁî®Êù•Ë°®ËææÁªìÊûÑ„ÄÅÊâßË°å‰∏éÁä∂ÊÄÅËøÅÁßª„ÄÇÁõÆÊ†áÔºöÂéãÁº©„ÄÅÊ∏ÖÊô∞„ÄÅÂèØÂ§çÁé∞ (replay-safe)„ÄÇ",
                chips:["Ëµ∑ÁÇπ","Áé∞Âú®","ËΩ®Ëøπ"],
                sub:[
                  {h:"ÂéüËØ≠", r:"R/S/C/G/Guard", p:"ËµÑÊ∫ê„ÄÅÂ≠òÂÇ®„ÄÅÁ∫¶Êùü„ÄÅÁõÆÊ†á„ÄÅÂÆàÂç´ÔºöÂèØÊâßË°åÁªìÊûÑÁöÑÊúÄÂ∞èÈõÜÂêà„ÄÇ"},
                  {h:"ÂõûÊâß", r:"Èó®Êéß", p:"ÊúâÂõûÊâßÊâçÊé®ËøõÔºõËøîÂõû‰ºö‰Ωø‰∏ãÊ∏∏ÂõûÊâßÂ§±Êïà„ÄÇ"},
                  {h:"‰∏çÂèòÈáè", r:"ÂÖàÂØºËà™", p:"‰∏ç‰ΩøÁî®ÂÆöÊó∂Âô®‰Ωú‰∏∫Èó®ÔºõÁªü‰∏ÄÁÇπÂáªÔºõÂéüÂ≠ê‰∫§Êé•„ÄÇ"}
                ]
              }
            }
          },
          {
            key:"Diamond Grammar",
            brief:{en:"Four routes, one choice.", zh:"ÂõõË∑ØËØ≠Ê≥ïÔºö‰∏ÄÊ¨°‰∏ÄÈÄâ„ÄÇ"},
            deep:{
              en:{
                title:"Diamond Grammar",
                p:"A hub-first traversal rule: choose one route, complete it, return to hub. This prevents drift and preserves coherence under load.",
                chips:["Rule","Return","Proof"],
                sub:[
                  {h:"One choice", r:"anti-drift", p:"Pick one branch at a time. Don‚Äôt multi-tab inside a branch."},
                  {h:"Return", r:"hub-first", p:"If incomplete, return to a hub and choose a different route."}
                ]
              },
              zh:{
                title:"ÈíªÁü≥ËØ≠Ê≥ï",
                p:"‰ª• Hub ‰∏∫‰∏≠ÂøÉÔºö‰∏ÄÊ¨°Âè™Ëµ∞‰∏ÄÊù°Ë∑ØÔºåËµ∞ÂÆåÂÜçËøîÂõû„ÄÇËøôÊ†∑ÈÅøÂÖçÊºÇÁßªÔºå‰øùÊåÅ‰∏ÄËá¥ÊÄß„ÄÇ",
                chips:["ËßÑÂàô","ËøîÂõû","È™åËØÅ"],
                sub:[
                  {h:"‰∏ÄÊ¨°‰∏ÄÈÄâ", r:"Èò≤ÊºÇÁßª", p:"Âêå‰∏ÄÊó∂Èó¥Âè™ÈÄâ‰∏ÄÊù°ÂàÜÊîØÔºå‰∏çÂú®ÂàÜÊîØÂÜÖÂ§öÁ∫øÂπ∂Ë°å„ÄÇ"},
                  {h:"ËøîÂõû", r:"hub-first", p:"Êú™ÂÆåÊàêÂ∞±ÂõûÂà∞ HubÔºåÊîπÈÄâÂÖ∂‰ªñË∑ØÁ∫ø„ÄÇ"}
                ]
              }
            }
          },
          {
            key:"DOT.GRID",
            brief:{en:"256-state indexing.", zh:"DOT.GRIDÔºö256 Áä∂ÊÄÅÁ¥¢Âºï„ÄÇ"},
            deep:{
              en:{
                title:"DOT.GRID",
                p:"A 256-state lattice for indexing evidence, decisions, and outcomes. Designed for replay + audit across domains.",
                chips:["State","Replay","Audit"],
                sub:[
                  {h:"State", r:"256", p:"Encode a situation into a bounded state so independent observers can agree."},
                  {h:"Replay", r:"evidence stream", p:"Re-run the same evidence stream across states to compare stability."}
                ]
              },
              zh:{
                title:"DOT.GRID",
                p:"256 Áä∂ÊÄÅÊ†ºÔºåÁî®‰∫éÁ¥¢ÂºïËØÅÊçÆ„ÄÅÂÜ≥Á≠ñ‰∏éÁªìÊûú„ÄÇÊîØÊåÅÂõûÊîæ‰∏éÂÆ°ËÆ°„ÄÇ",
                chips:["Áä∂ÊÄÅ","ÂõûÊîæ","ÂÆ°ËÆ°"],
                sub:[
                  {h:"Áä∂ÊÄÅ", r:"256", p:"ÊääÊÉÖÂ¢ÉÁºñÁ†Å‰∏∫ÊúâÈôêÁä∂ÊÄÅÔºå‰æø‰∫é‰∏çÂêåËßÇÂØüËÄÖ‰∏ÄËá¥Âà§Êñ≠„ÄÇ"},
                  {h:"ÂõûÊîæ", r:"ËØÅÊçÆÊµÅ", p:"Áî®Âêå‰∏ÄËØÅÊçÆÊµÅÈáçÂ§çËøêË°åÔºåÂØπÊØî‰∏çÂêåÁä∂ÊÄÅ‰∏ãÁöÑÁ®≥ÂÆöÊÄß„ÄÇ"}
                ]
              }
            }
          },
          {
            key:"Acronyms",
            brief:{en:"Pillar map + usage.", zh:"Áº©ÂÜôÔºöÂàÜÊü±ÂàÜÁ±ª + Áî®Ê≥ï„ÄÇ"},
            deep:{
              en:{
                title:"Acronyms & Glossary",
                p:"A categorized map of terms so the system remains readable while scaling. (Full 256 list lives on the Glossary page.)",
                chips:["Core","Pillars","Link"],
                sub:[
                  {h:"Core set", r:"first", p:"SSG, DOT.GRID, RGSC, EAI ‚Äî the minimum shared vocabulary."},
                  {h:"Pillars", r:"organized", p:"Group acronyms by function so you can search by intent, not memory."}
                ]
              },
              zh:{
                title:"Áº©ÂÜô‰∏éÊúØËØ≠Ë°®",
                p:"ÊääÊúØËØ≠ÊåâÊü±ÂàÜÁ±ªÔºåËßÑÊ®°Â¢ûÂ§ß‰πüËÉΩ‰øùÊåÅÂèØËØªÊÄß„ÄÇÔºàÂÆåÊï¥ 256 ÂàóË°®Âú® Glossary È°µ„ÄÇÔºâ",
                chips:["Ê†∏ÂøÉ","ÂàÜÊü±","ÈìæÊé•"],
                sub:[
                  {h:"Ê†∏ÂøÉÈõÜ", r:"‰ºòÂÖà", p:"SSG„ÄÅDOT.GRID„ÄÅRGSC„ÄÅEAIÔºöÊúÄÂ∞èÂÖ±‰∫´ËØçË°®„ÄÇ"},
                  {h:"ÂàÜÊü±", r:"ÁªÑÁªá", p:"ÊåâÂäüËÉΩÂàÜÁ±ªÔºåÊåâÁõÆÁöÑÊü•ÊâæÔºåËÄå‰∏çÊòØÈù†ËÆ∞ÂøÜ„ÄÇ"}
                ]
              }
            }
          }
        ],
        ne: [
          { key:"Execution surfaces", brief:{en:"Apps / portals.", zh:"ÊâßË°åÁïåÈù¢ (apps/portals)„ÄÇ"},
            deep:{
              en:{title:"Execution Surfaces", p:"Interactive portals that let you apply the system, not just read it.", chips:["Portal","Workflow","Receipt"],
                sub:[{h:"Portals", r:"UI", p:"Guided entry points to run diagnostics, routes, and captures."},
                     {h:"Workflows", r:"steps", p:"A structured sequence with receipts and replay logs."}]},
              zh:{title:"ÊâßË°åÁïåÈù¢", p:"ÂèØ‰∫§‰∫íÂÖ•Âè£ÔºöËÆ©‰Ω†‰ΩøÁî®Á≥ªÁªüÔºåËÄå‰∏çÂè™ÊòØÈòÖËØª„ÄÇ", chips:["ÂÖ•Âè£","ÊµÅÁ®ã","ÂõûÊâß"],
                sub:[{h:"ÂÖ•Âè£", r:"UI", p:"ÂºïÂØºÂºèÂÖ•Âè£ÔºöËØäÊñ≠„ÄÅË∑ØÁ∫ø„ÄÅËÆ∞ÂΩï„ÄÇ"},
                     {h:"ÊµÅÁ®ã", r:"Ê≠•È™§", p:"Â∏¶ÂõûÊâß‰∏éÂõûÊîæÊó•ÂøóÁöÑÁªìÊûÑÂåñÊ≠•È™§„ÄÇ"}]}
            }
          },
          { key:"Receipts & trails", brief:{en:"Verify, replay.", zh:"ÂõûÊâß‰∏éËΩ®ËøπÔºöÈ™åËØÅ/ÂõûÊîæ„ÄÇ"},
            deep:{
              en:{title:"Receipts & Audit Trails", p:"Every step produces a receipt so outcomes can be verified and replayed.", chips:["Receipt","Replay","Proof"],
                sub:[{h:"Receipt", r:"proof", p:"A minimal record that the step occurred under constraints."},
                     {h:"Replay", r:"compare", p:"Re-run the same path with the same evidence stream."}]},
              zh:{title:"ÂõûÊâß‰∏éÂÆ°ËÆ°ËΩ®Ëøπ", p:"ÊØè‰∏ÄÊ≠•‰∫ßÁîüÂõûÊâßÔºå‰æø‰∫éÈ™åËØÅ‰∏éÂõûÊîæ„ÄÇ", chips:["ÂõûÊâß","ÂõûÊîæ","ËØÅÊòé"],
                sub:[{h:"ÂõûÊâß", r:"ËØÅÊòé", p:"Âú®Á∫¶Êùü‰∏ãÂèëÁîüËøáËØ•Ê≠•È™§ÁöÑÊúÄÂ∞èËÆ∞ÂΩï„ÄÇ"},
                     {h:"ÂõûÊîæ", r:"ÂØπÊØî", p:"Áî®Âêå‰∏ÄË∑ØÂæÑ‰∏éËØÅÊçÆÊµÅÈáçÂ§çËøêË°åËøõË°åÂØπÊØî„ÄÇ"}]}
            }
          },
          { key:"Examples", brief:{en:"How to use.", zh:"Á§∫‰æãÔºöÊÄé‰πàÁî®„ÄÇ"},
            deep:{
              en:{title:"Examples", p:"Short examples show how the hub routes combine under real constraints.", chips:["Quick","Deep","Case"],
                sub:[{h:"Quick", r:"surface", p:"One screen, one choice."},
                     {h:"Deep", r:"nested", p:"Bubble ‚Üí block ‚Üí sub-bubbles."}]},
              zh:{title:"Á§∫‰æã", p:"Áî®Áü≠Á§∫‰æãÂ±ïÁ§∫Âú®ÁúüÂÆûÁ∫¶Êùü‰∏ãÂ¶Ç‰ΩïÁªÑÂêàË∑ØÁ∫ø„ÄÇ", chips:["Âø´ÈÄü","Ê∑±ÂÖ•","Ê°à‰æã"],
                sub:[{h:"Âø´ÈÄü", r:"Ë°®Â±Ç", p:"‰∏ÄÂ±è‰∏ÄÈÄâ„ÄÇ"},
                     {h:"Ê∑±ÂÖ•", r:"ÂµåÂ•ó", p:"bubble ‚Üí block ‚Üí sub-bubbles„ÄÇ"}]}
            }
          },
          { key:"Packaged outputs", brief:{en:"Downloadables.", zh:"ÊâìÂåÖËæìÂá∫ (downloadables)„ÄÇ"},
            deep:{
              en:{title:"Packaged Outputs", p:"Materials you can reuse: templates, checklists, playbooks.", chips:["Templates","Checklists","Packs"],
                sub:[{h:"Templates", r:"reuse", p:"Structured artifacts that reduce ambiguity."}]},
              zh:{title:"ÊâìÂåÖËæìÂá∫", p:"ÂèØÂ§çÁî®ÊùêÊñôÔºöÊ®°Êùø„ÄÅÊ∏ÖÂçï„ÄÅÊâãÂÜå„ÄÇ", chips:["Ê®°Êùø","Ê∏ÖÂçï","ÂåÖ"],
                sub:[{h:"Ê®°Êùø", r:"Â§çÁî®", p:"ÁªìÊûÑÂåñ‰∫ßÁâ©ÔºåÂáèÂ∞ëÊ≠ß‰πâ„ÄÇ"}]}
            }
          }
        ],
        sw: [
          { key:"Gauges", brief:{en:"Panels & thresholds.", zh:"ÈáèË°®ÔºöÈù¢Êùø‰∏éÈòàÂÄº„ÄÇ"},
            deep:{
              en:{title:"Gauges", p:"Measurement panels that track consistency, signal integrity, and thresholds.", chips:["Panel","Threshold","Signal"],
                sub:[{h:"Panels", r:"instruments", p:"Instrument panels for repeatable checks."},
                     {h:"Thresholds", r:"rules", p:"Clear thresholds for pass/fail states."}]},
              zh:{title:"ÈáèË°®", p:"ÊµãÈáèÈù¢ÊùøÔºö‰∏ÄËá¥ÊÄß„ÄÅ‰ø°Âè∑ÂÆåÊï¥ÊÄß„ÄÅÈòàÂÄº„ÄÇ", chips:["Èù¢Êùø","ÈòàÂÄº","‰ø°Âè∑"],
                sub:[{h:"Èù¢Êùø", r:"‰ª™Ë°®", p:"Áî®‰∫éÂèØÈáçÂ§çÊ£ÄÊü•ÁöÑ‰ª™Ë°®Èù¢Êùø„ÄÇ"},
                     {h:"ÈòàÂÄº", r:"ËßÑÂàô", p:"ÊòéÁ°ÆÈòàÂÄºÔºåÁî®‰∫éÈÄöËøá/Â§±Ë¥•Âà§Êñ≠„ÄÇ"}]}
            }
          },
          { key:"Diagnostics", brief:{en:"Coherence / drift.", zh:"ËØäÊñ≠Ôºö‰∏ÄËá¥ÊÄß/ÊºÇÁßª„ÄÇ"},
            deep:{
              en:{title:"Diagnostics", p:"Classification under constraint: coherence, drift, confusion categories.", chips:["Classify","Compare","Resolve"],
                sub:[{h:"Categories", r:"signals", p:"Coherence / drift / confusion categories from observed behavior."},
                     {h:"Observer-invariant", r:"targets", p:"Same evidence ‚Üí same classification across observers."}]},
              zh:{title:"ËØäÊñ≠", p:"Á∫¶Êùü‰∏ãÂàÜÁ±ªÔºö‰∏ÄËá¥ÊÄß„ÄÅÊºÇÁßª„ÄÅÂõ∞ÊÉë„ÄÇ", chips:["ÂàÜÁ±ª","ÂØπÊØî","‰øÆÊ≠£"],
                sub:[{h:"Á±ªÂà´", r:"‰ø°Âè∑", p:"‰ªéÂèØËßÇÂØüË°å‰∏∫ÂæóÂà∞‰∏ÄËá¥ÊÄß/ÊºÇÁßª/Âõ∞ÊÉëÂàÜÁ±ª„ÄÇ"},
                     {h:"ËßÇÂØüËÄÖ‰∏çÂèò", r:"ÁõÆÊ†á", p:"Âêå‰∏ÄËØÅÊçÆ ‚Üí ‰∏çÂêåËßÇÂØüËÄÖ‰∏ÄËá¥Âà§Êñ≠„ÄÇ"}]}
            }
          },
          { key:"Rules", brief:{en:"Navigation integrity.", zh:"ËßÑÂàôÔºöÂØºËà™ÂÆåÊï¥ÊÄß„ÄÇ"},
            deep:{
              en:{title:"Rules", p:"Navigation + integrity rules keep the system stable while it scales.", chips:["One choice","Return","Receipts"],
                sub:[{h:"Return protocol", r:"hub-first", p:"If incomplete, return to a hub and choose another route."}]},
              zh:{title:"ËßÑÂàô", p:"ÂØºËà™‰∏éÂÆåÊï¥ÊÄßËßÑÂàôÔºöËßÑÊ®°Â¢ûÂ§ß‰ªç‰øùÊåÅÁ®≥ÂÆö„ÄÇ", chips:["‰∏ÄÊ¨°‰∏ÄÈÄâ","ËøîÂõû","ÂõûÊâß"],
                sub:[{h:"ËøîÂõûÂçèËÆÆ", r:"hub-first", p:"Êú™ÂÆåÊàêÂ∞±ÂõûÂà∞ HubÔºåÊîπÈÄâË∑ØÁ∫ø„ÄÇ"}]}
            }
          },
          { key:"Protocols", brief:{en:"Operational playbook.", zh:"ÂçèËÆÆÔºöÊìç‰ΩúÊâãÂÜå„ÄÇ"},
            deep:{
              en:{title:"Protocols", p:"Operational patterns for using the system safely and repeatably.", chips:["Operate","Audit","Scale"],
                sub:[{h:"Operate", r:"repeat", p:"Repeatable sequences with clear receipts."}]},
              zh:{title:"ÂçèËÆÆ", p:"ÂÆâÂÖ®„ÄÅÂèØÈáçÂ§ç‰ΩøÁî®ÁöÑÊìç‰ΩúÊ®°Âºè„ÄÇ", chips:["Êìç‰Ωú","ÂÆ°ËÆ°","Êâ©Â±ï"],
                sub:[{h:"Êìç‰Ωú", r:"ÈáçÂ§ç", p:"Â∏¶Ê∏ÖÊô∞ÂõûÊâßÁöÑÂèØÈáçÂ§çÂ∫èÂàó„ÄÇ"}]}
            }
          }
        ],
        se: [
          { key:"OSF", brief:{en:"Project registry.", zh:"OSFÔºöÈ°πÁõÆÊ≥®ÂÜå„ÄÇ"},
            deep:{
              en:{title:"OSF", p:"Project registry, preprints, and public artifacts.", chips:["Registry","Docs","Cite"],
                sub:[{h:"Registry", r:"anchor", p:"Stable public anchoring for the project history."}]},
              zh:{title:"OSF", p:"È°πÁõÆÊ≥®ÂÜå„ÄÅÈ¢ÑÂç∞Êú¨‰∏éÂÖ¨ÂºÄÊùêÊñô„ÄÇ", chips:["Ê≥®ÂÜå","ÊñáÊ°£","ÂºïÁî®"],
                sub:[{h:"Ê≥®ÂÜå", r:"ÈîöÂÆö", p:"Á®≥ÂÆöÂÖ¨ÂÖ±ÈîöÁÇπÔºåÁî®‰∫éÈ°πÁõÆÂéÜÂè≤„ÄÇ"}]}
            }
          },
          { key:"ORCID", brief:{en:"Researcher identity.", zh:"ORCIDÔºöÁ†îÁ©∂ËÄÖË∫´‰ªΩ„ÄÇ"},
            deep:{
              en:{title:"ORCID", p:"Researcher identity anchor and attribution.", chips:["ID","Attribution","Link"],
                sub:[{h:"Attribution", r:"identity", p:"Connect outputs to a stable identity anchor."}]},
              zh:{title:"ORCID", p:"Á†îÁ©∂ËÄÖË∫´‰ªΩÈîöÁÇπ‰∏éÁΩ≤Âêç„ÄÇ", chips:["Ë∫´‰ªΩ","ÁΩ≤Âêç","ÈìæÊé•"],
                sub:[{h:"ÁΩ≤Âêç", r:"Ë∫´‰ªΩ", p:"Êää‰∫ßÂá∫ËøûÊé•Âà∞Á®≥ÂÆöË∫´‰ªΩÈîöÁÇπ„ÄÇ"}]}
            }
          },
          { key:"Contact", brief:{en:"Direct channel.", zh:"ËÅîÁ≥ªÔºöÁõ¥Êé•ÈÄöÈÅì„ÄÇ"},
            deep:{
              en:{title:"Contact", p:"Direct communication channel for collaboration and verification.", chips:["Email","Signal","Ops"],
                sub:[{h:"Channel", r:"direct", p:"A simple, direct path for contact and requests."}]},
              zh:{title:"ËÅîÁ≥ª", p:"Âçè‰Ωú‰∏éÈ™åËØÅÁöÑÁõ¥Êé•Ê≤üÈÄöÈÄöÈÅì„ÄÇ", chips:["ÈÇÆ‰ª∂","‰ø°Âè∑","ÊµÅÁ®ã"],
                sub:[{h:"ÈÄöÈÅì", r:"Áõ¥Êé•", p:"ÁÆÄÊ¥ÅÁõ¥Êé•ÁöÑËÅîÁ≥ª‰∏éËØ∑Ê±ÇÂÖ•Âè£„ÄÇ"}]}
            }
          },
          { key:"References", brief:{en:"Anchors & citations.", zh:"ÂºïÁî®ÔºöÈîöÁÇπ‰∏éÂºïÁî®„ÄÇ"},
            deep:{
              en:{title:"References", p:"Reference anchors that keep the system verifiable.", chips:["Anchor","Cite","Verify"],
                sub:[{h:"Anchor", r:"stable", p:"Stable anchors reduce ambiguity across versions."}]},
              zh:{title:"ÂºïÁî®", p:"ËÆ©Á≥ªÁªüÂèØÈ™åËØÅÁöÑÂºïÁî®ÈîöÁÇπ„ÄÇ", chips:["ÈîöÁÇπ","ÂºïÁî®","È™åËØÅ"],
                sub:[{h:"ÈîöÁÇπ", r:"Á®≥ÂÆö", p:"Á®≥ÂÆöÈîöÁÇπÂáèÂ∞ëÁâàÊú¨Èó¥Ê≠ß‰πâ„ÄÇ"}]}
            }
          }
        ]
      };

      function bubbleRowHtml(items, quadrant){
        const useShort = (depth !== "learn");
        return items.map((it, idx) => {
          const blurb = useShort ? (it.brief[lang] || it.brief.en) : (it.brief[lang] || it.brief.en);
          return `
            <div class="bubble-btn" data-q="${quadrant}" data-i="${idx}" role="button" tabindex="0">
              <div class="left">
                <b>${it.key}</b>
                <i>${blurb}</i>
              </div>
              <div class="go">‚ñ∂</div>
            </div>
          `;
        }).join("");
      }

      function renderQuadrant(q){
        document.getElementById(`brow-${q}`).innerHTML = bubbleRowHtml(DATA[q], q);

        const row = document.getElementById(`brow-${q}`);
        row.querySelectorAll(".bubble-btn").forEach(btn => {
          btn.addEventListener("click", () => openBlock(btn.dataset.q, parseInt(btn.dataset.i,10)));
          btn.addEventListener("keydown",(e)=>{
            if(e.key==="Enter"||e.key===" "){ e.preventDefault(); btn.click(); }
          });
        });
      }

      function openBlock(q, i){
        // EXPLORE mode: keep block hidden (surface only) but still allow ‚Äújump‚Äù usage.
        if(depth !== "learn") return;

        const item = DATA[q][i];
        const d = item.deep[lang] || item.deep.en;

        const subHtml = (d.sub || []).map(s => `
          <div class="subcard">
            <b>${s.h}<span style="opacity:.65;letter-spacing:.14em;text-transform:uppercase">${s.r}</span></b>
            <p>${s.p}</p>
          </div>
        `).join("");

        const chipsHtml = (d.chips || []).map(c => `<span class="chip">${c}</span>`).join("");

        const html = `
          <h3>${d.title}</h3>
          <p>${d.p}</p>

          <div class="chips">${chipsHtml}</div>

          <div class="subblocks">${subHtml}</div>
        `;

        const box = document.getElementById(`block-${q}`);
        document.getElementById(`block-${q}-body`).innerHTML = html;
        box.hidden = false;

        // scroll block into view gently
        box.scrollIntoView({behavior:"smooth", block:"nearest"});
      }

      // Render 4 quadrants
      ["nw","ne","sw","se"].forEach(renderQuadrant);

      // In EXPLORE, keep block map collapsed by default
      if(depth !== "learn"){
        ["nw","ne","sw","se"].forEach(q => { document.getElementById(`block-${q}`).hidden = true; });
      }
    })();
  </script>
</body>
</html>
