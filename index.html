<!-- TNT — /index.html
     ROOT RETURN PAGE (NOT COMPASS)
     CTAs:
       - PRELUDE -> /prelude/
       - DOOR    -> /door/
       - ENTER   -> /home/
     EN/中文/ES + state carry
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ROOT</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
a{color:inherit;text-decoration:none}
.wrap{
  width:min(980px,92vw);
  margin:0 auto;
  padding:90px 0 40px;
  text-align:center;
  position:relative;
  z-index:10;
}
.h1{margin:0;font-weight:950;letter-spacing:2px;font-size:38px}
.p{margin:12px auto 0;max-width:70ch;opacity:.86;line-height:1.5}
.row{
  margin:28px auto 0;
  display:flex;gap:12px;justify-content:center;flex-wrap:wrap;
}
.card{
  width:min(320px,92vw);
  border-radius:22px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.18);
  backdrop-filter:blur(10px);
  box-shadow:0 24px 80px rgba(0,0,0,.55);
  padding:16px 16px;
  text-align:left;
}
.card h3{margin:0;font-weight:950;letter-spacing:.4px}
.card p{margin:8px 0 0;opacity:.82;line-height:1.45}
.actions{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap}
.top-right{
  position:fixed;right:16px;top:16px;z-index:200;
  display:flex;gap:10px;flex-wrap:nowrap;white-space:nowrap;
}
</style>
</head>

<body>

<div class="top-right" aria-label="Language">
  <button class="btn" id="btnEN" type="button">EN</button>
  <button class="btn" id="btnZH" type="button">中文</button>
  <button class="btn" id="btnES" type="button">ES</button>
</div>

<div class="wrap">
  <div class="h1" id="ttl">ROOT</div>
  <div class="p" id="tag">Minimal return page. Prelude is the gateway. Door is the compass.</div>

  <div class="row">
    <div class="card">
      <h3 id="hPrelude">PRELUDE</h3>
      <p id="pPrelude">Gateway posture. Choose informal or formal entry into Door.</p>
      <div class="actions">
        <a class="btn" id="goPrelude" href="/prelude/">OPEN</a>
      </div>
    </div>

    <div class="card">
      <h3 id="hDoor">DOOR</h3>
      <p id="pDoor">Compass spine. N/E/S/W with lenses.</p>
      <div class="actions">
        <a class="btn" id="goDoor" href="/door/">OPEN</a>
      </div>
    </div>

    <div class="card">
      <h3 id="hEnter">ENTER</h3>
      <p id="pEnter">Go to the primary hub.</p>
      <div class="actions">
        <a class="btn" id="goHome" href="/home/">OPEN</a>
      </div>
    </div>
  </div>

  <div class="p" style="margin-top:22px;opacity:.72">COGRID.NET</div>
</div>

<script>
(function(){
  var qs=new URLSearchParams(location.search);
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var style = qs.get("style") || localStorage.getItem("gd_style") || "informal";
  var time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  var depth = qs.get("depth") || localStorage.getItem("gd_depth") || "explore";

  if(lang!=="en" && lang!=="zh" && lang!=="es") lang="en";
  if(style!=="formal" && style!=="informal") style="informal";
  if(time==="trajectory") time="post";
  if(time!=="origin" && time!=="now" && time!=="post") time="now";
  if(depth!=="explore" && depth!=="learn") depth="explore";

  try{
    localStorage.setItem("gd_lang",lang);
    localStorage.setItem("gd_style",style);
    localStorage.setItem("gd_time",time);
    localStorage.setItem("gd_depth",depth);
  }catch(e){}

  document.documentElement.lang=(lang==="zh")?"zh":(lang==="es")?"es":"en";

  function q(){
    return "?lang="+encodeURIComponent(lang)+
           "&style="+encodeURIComponent(style)+
           "&time="+encodeURIComponent(time)+
           "&depth="+encodeURIComponent(depth);
  }

  document.getElementById("goPrelude").href="/prelude/"+q();
  document.getElementById("goDoor").href="/door/"+q();
  document.getElementById("goHome").href="/home/"+q();

  var btnEN=document.getElementById("btnEN");
  var btnZH=document.getElementById("btnZH");
  var btnES=document.getElementById("btnES");
  function paintLang(){
    btnEN.classList.toggle("active", lang==="en");
    btnZH.classList.toggle("active", lang==="zh");
    btnES.classList.toggle("active", lang==="es");
  }
  paintLang();
  function setLang(next){
    if(next!=="en" && next!=="zh" && next!=="es") next="en";
    lang=next;
    try{ localStorage.setItem("gd_lang",lang); }catch(e){}
    location.href="/index.html"+q();
  }
  btnEN.onclick=function(){ setLang("en"); };
  btnZH.onclick=function(){ setLang("zh"); };
  btnES.onclick=function(){ setLang("es"); };

  if(lang==="zh"){
    document.getElementById("ttl").textContent="主页";
    document.getElementById("tag").textContent="最小返回页：前置页=入口姿态，门=罗盘。";
    document.getElementById("hPrelude").textContent="前置页";
    document.getElementById("pPrelude").textContent="入口姿态：通俗/正式进入门。";
    document.getElementById("hDoor").textContent="门";
    document.getElementById("pDoor").textContent="罗盘主干：N/E/S/W + 透镜。";
    document.getElementById("hEnter").textContent="进入";
    document.getElementById("pEnter").textContent="进入主枢纽。";
    document.querySelectorAll(".actions .btn").forEach(function(b){ b.textContent="打开"; });
  }else if(lang==="es"){
    document.getElementById("ttl").textContent="INICIO";
    document.getElementById("tag").textContent="Página mínima: Preludio = postura, Puerta = brújula.";
    document.getElementById("hPrelude").textContent="PRELUDIO";
    document.getElementById("pPrelude").textContent="Postura de entrada: informal/formal hacia Puerta.";
    document.getElementById("hDoor").textContent="PUERTA";
    document.getElementById("pDoor").textContent="Eje brújula: N/E/S/O con lentes.";
    document.getElementById("hEnter").textContent="ENTRAR";
    document.getElementById("pEnter").textContent="Ir al hub principal.";
    document.querySelectorAll(".actions .btn").forEach(function(b){ b.textContent="ABRIR"; });
  }
})();
</script>

</body>
</html>
