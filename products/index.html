<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · Cardinal Axis</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>

<style>
:root{
  --R:124px;
  --gold:rgba(212,175,55,.9);
  --goldSoft:rgba(212,175,55,.35);
  --obs1:#070b12;
  --obs2:#0c1626;
  --mut:rgba(255,255,255,.84);
  --mut2:rgba(255,255,255,.68);
}

body{
  margin:0;
  min-height:100vh;
  background:
    radial-gradient(circle at 50% 40%, rgba(90,140,255,.10), transparent 60%),
    repeating-linear-gradient(45deg, rgba(255,255,255,.02) 0 1px, transparent 1px 100px),
    linear-gradient(180deg,#b00000 0%,#7a0000 60%,#550000 100%);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:#fff;
  overflow-x:hidden;
}

/* Top-left */
.top-left{
  position:fixed;left:16px;top:16px;z-index:90;
  display:flex;gap:10px;flex-wrap:wrap;align-items:center;
}

/* Buttons */
.btn{
  padding:10px 16px;
  border-radius:14px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  color:white;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.7);
  cursor:pointer;
  font-weight:900;
  letter-spacing:.2px;
  text-decoration:none;
}
.btn:hover{ box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px var(--goldSoft); }
.btn.active{
  border-color:rgba(212,175,55,.25);
  box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 22px rgba(212,175,55,.30);
}

/* Brand */
.brand{
  position:fixed;
  left:50%;
  top:16px;
  transform:translateX(-50%);
  z-index:80;
  text-align:center;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);
  backdrop-filter:blur(8px);
}
.brand .name{ font-weight:950; letter-spacing:1.2px; font-size:12px; opacity:.95; }
.brand .tag{ font-size:11px; letter-spacing:.6px; opacity:.70; margin-top:2px; }

/* Stage */
.stage{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:min(560px,92vw);
  height:min(560px,92vw);
  z-index:40;
}

/* Outer diamond */
.outer{
  position:absolute;
  left:50%;top:50%;
  width:min(560px,92vw);
  height:min(560px,92vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:60px;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.14), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.45) 0%, rgba(7,11,18,.62) 70%);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:
    0 90px 260px rgba(0,0,0,.62),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -50px 90px rgba(0,0,0,.55);
  pointer-events:none;
  opacity:.55;
}
.outer::after{
  content:"";
  position:absolute; inset:0; border-radius:60px;
  background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 6deg, transparent 6deg 18deg);
  opacity:.14;
}

/* Category diamonds */
.d{
  width:160px;height:160px;
  position:absolute;
  left:50%;top:50%;
  transform-origin:center;
  border-radius:26px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;

  background:
    radial-gradient(circle at 35% 25%, rgba(255,255,255,.14), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.18), transparent 60%),
    linear-gradient(160deg, rgba(12,22,38,.92) 0%, rgba(7,11,18,.95) 70%);

  border:1px solid rgba(255,255,255,.10);
  box-shadow:
    0 28px 84px rgba(0,0,0,.78),
    inset 0 2px 0 rgba(255,255,255,.14),
    inset 0 -28px 44px rgba(0,0,0,.62);
  transition:transform 220ms ease, box-shadow 220ms ease, border-color 220ms ease;
}
.d::before{
  content:"";
  position:absolute; inset:0; border-radius:26px; padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.45;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude;
  pointer-events:none;
}
.d::after{
  content:"";
  position:absolute;
  left:12%; right:12%;
  top:10%;
  height:28%;
  border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.16), rgba(255,255,255,0));
  opacity:.85;
  transform:rotate(-10deg);
  pointer-events:none;
}
.d:hover{
  transform:translate(-50%,-50%) rotate(45deg) scale(1.02);
  box-shadow:
    0 34px 110px rgba(0,0,0,.88),
    0 0 18px rgba(212,175,55,.18),
    inset 0 2px 0 rgba(255,255,255,.18),
    inset 0 -32px 52px rgba(0,0,0,.68);
}
.d.active{
  border-color:rgba(212,175,55,.55);
  box-shadow:
    0 34px 110px rgba(0,0,0,.88),
    0 0 30px rgba(212,175,55,.40),
    inset 0 2px 0 rgba(255,255,255,.18),
    inset 0 -32px 52px rgba(0,0,0,.68);
}

.d-n{ transform:translate(-50%,-50%) translate(0, calc(var(--R) * -1)) rotate(45deg); }
.d-e{ transform:translate(-50%,-50%) translate(var(--R), 0) rotate(45deg); }
.d-s{ transform:translate(-50%,-50%) translate(0, var(--R)) rotate(45deg); }
.d-w{ transform:translate(-50%,-50%) translate(calc(var(--R) * -1), 0) rotate(45deg); }

.inner{
  width:100%; height:100%;
  transform:rotate(-45deg);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:16px;
  gap:8px;
  pointer-events:none;
  user-select:none;
}
.lab{ font-weight:950; letter-spacing:.8px; font-size:16px; }
.sub{ font-size:13px; opacity:.86; line-height:1.35; max-width:16em; }

/* Core */
.core{
  position:absolute;
  left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:64px;height:64px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.18);
  box-shadow:0 18px 44px rgba(0,0,0,.62), inset 0 2px 0 rgba(255,255,255,.10);
  display:grid; place-items:center;
  font-weight:950; letter-spacing:.5px;
  opacity:.92;
  pointer-events:none;
}

/* Dock */
.dock{
  position:fixed;
  left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:90;
  width:min(900px,94vw);
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.20);
  backdrop-filter:blur(8px);
}

/* Modal */
.bd{
  position:fixed;inset:0;z-index:200;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(10px);
  display:none;
}
.bd.show{display:block;}
.modal{
  position:fixed;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:min(1020px,94vw);
  max-height:88vh;
  display:none;
  z-index:210;
}
.modal.show{display:block;}
.shell{
  height:88vh;
  border-radius:26px;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 50% 18%, rgba(176,0,0,.20), transparent 55%),
    radial-gradient(circle at 40% 25%, rgba(90,140,255,.12), transparent 55%),
    linear-gradient(160deg,var(--obs2) 0%, var(--obs1) 65%);
  box-shadow:0 60px 180px rgba(0,0,0,.92);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  position:relative;
}
.shell::before{
  content:"";
  position:absolute;
  left:50%;
  top:58%;
  width:min(980px,94vw);
  height:min(980px,94vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:70px;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.16), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.45) 0%, rgba(7,11,18,.68) 70%);
  box-shadow:
    0 100px 280px rgba(0,0,0,.72),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -55px 100px rgba(0,0,0,.55);
  opacity:.55;
  pointer-events:none;
}
.mhead{
  display:flex;justify-content:space-between;align-items:center;
  gap:10px;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08);
  position:relative;z-index:2;
}
.mtitle{ margin:0; font-weight:950; letter-spacing:.3px; font-size:16px; }
.mclose{ border:0; background:transparent; color:#fff; font-size:18px; cursor:pointer; padding:8px 10px; }
.mbody{
  padding:14px 16px 18px;
  overflow:auto;-webkit-overflow-scrolling:touch;
  flex:1 1 auto;
  position:relative;z-index:2;
}
.lensbar{
  display:flex;gap:10px;flex-wrap:wrap;
  align-items:center;justify-content:center;
  padding:10px 10px 14px;border-bottom:1px solid rgba(255,255,255,.08);
  margin:-6px -6px 14px;
}
.chip{
  padding:10px 16px;border-radius:999px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.65);
  cursor:pointer;font-weight:900;letter-spacing:.2px;color:#fff;
}
.chip.active{
  border-color:rgba(212,175,55,.35);
  box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 16px rgba(212,175,55,.30);
}
.mgrid{ display:grid; gap:14px; }
@media (min-width:920px){ .mgrid{ grid-template-columns:1fr 1fr; } }
.box{
  padding:16px 18px;border-radius:22px;
  background:
    radial-gradient(circle at 30% 30%, rgba(120,160,255,.08), transparent 55%),
    linear-gradient(145deg, rgba(12,22,38,.92), rgba(7,11,18,.95));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 18px 60px rgba(0,0,0,.70), inset 0 2px 0 rgba(255,255,255,.06);
  position:relative;
}
.box::before{
  content:"";
  position:absolute;inset:0;border-radius:22px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude;
  pointer-events:none;
}
.h{ margin:0 0 8px; font-weight:950; letter-spacing:.2px; }
.p{ margin:0 0 10px; color:var(--mut); line-height:1.55; }
.ul{ margin:0 0 0 18px; padding:0; color:var(--mut2); }
.ul li{ margin:6px 0; }

.mact{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:14px; }
.sbtn{
  padding:12px 18px;border-radius:14px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  color:#fff;border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.7);
  cursor:pointer;font-weight:900;letter-spacing:.2px;text-decoration:none;
}
.sbtn:hover{ box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px var(--goldSoft); }

@media (max-width:520px){
  :root{ --R: 116px; }
  .stage{ width:min(520px,92vw); height:min(520px,92vw); }
  .outer{ width:min(520px,92vw); height:min(520px,92vw); }
  .core{ width:58px; height:58px; }
  .shell{ height:90vh; }
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" id="btnHub" href="/home/">HUB</a>
  <a class="btn" id="btnExit" href="/door/">EXIT</a>
</div>

<div class="brand">
  <div class="name" id="brandName">CARDINAL AXIS</div>
  <div class="tag" id="brandTag">PRODUCTS · DEPLOYED SURFACES</div>
</div>

<div class="stage" aria-label="Products category diamond">
  <div class="outer"></div>

  <div class="d d-n" id="software" role="button" tabindex="0" aria-label="Software">
    <div class="inner"><div class="lab" id="labN">SOFTWARE</div><div class="sub" id="subN">Executable tools · platforms · instruments.</div></div>
  </div>

  <div class="d d-e" id="commercial" role="button" tabindex="0" aria-label="Commercial">
    <div class="inner"><div class="lab" id="labE">COMMERCIAL</div><div class="sub" id="subE">Revenue-ready workflows · licensing · deployment.</div></div>
  </div>

  <div class="d d-s" id="energy" role="button" tabindex="0" aria-label="Energy">
    <div class="inner"><div class="lab" id="labS">ENERGY</div><div class="sub" id="subS">Infrastructure applications · conversion chains.</div></div>
  </div>

  <div class="d d-w" id="education" role="button" tabindex="0" aria-label="Education">
    <div class="inner"><div class="lab" id="labW">EDUCATION</div><div class="sub" id="subW">Traversal study programs · curricula · training.</div></div>
  </div>

  <div class="core">◆</div>
</div>

<nav class="dock" id="dock">
  <a class="btn" id="goTerminal" href="/index.html">TERMINAL</a>
  <a class="btn" id="goLinks" href="/links/">LINKS</a>
  <a class="btn active" id="goProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="goLaws" href="/laws/">LAWS</a>
  <a class="btn" id="goGauges" href="/gauges/">GAUGES</a>
</nav>

<div class="bd" id="bd"></div>

<div class="modal" id="modal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="mTitle">DETAIL</h3>
      <button class="mclose" id="mClose" aria-label="Close" type="button">✕</button>
    </div>

    <div class="mbody">
      <!-- Lenses inside bubble only -->
      <div class="lensbar">
        <button class="chip" id="styleChip" type="button">STYLE: FORMAL</button>
        <button class="chip" data-time="origin" id="chipConcept" type="button">CONCEPT</button>
        <button class="chip" data-time="now" id="chipNow" type="button">NOW</button>
        <button class="chip" data-time="post" id="chipPost" type="button">POST</button>
      </div>

      <div class="mgrid">
        <div class="box"><h4 class="h" id="h1"></h4><p class="p" id="p1"></p><ul class="ul" id="u1"></ul></div>
        <div class="box"><h4 class="h" id="h2"></h4><p class="p" id="p2"></p><ul class="ul" id="u2"></ul></div>
        <div class="box"><h4 class="h" id="h3"></h4><p class="p" id="p3"></p><ul class="ul" id="u3"></ul></div>
        <div class="box"><h4 class="h" id="h4"></h4><p class="p" id="p4"></p><ul class="ul" id="u4"></ul></div>
      </div>

      <div class="mact">
        <button class="sbtn" id="mReturn" type="button">RETURN</button>
        <a class="sbtn" id="mGoCategory" href="/products/">GO CATEGORY</a>
        <a class="sbtn" id="mGoHub" href="/home/">GO HUB</a>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  /* URL → STATE HYDRATION */
  var qs = new URLSearchParams(location.search);
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var style = qs.get("style") || localStorage.getItem("gd_style") || "formal";
  var time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";

  if(lang!=="en" && lang!=="zh") lang="en";
  if(style!=="formal" && style!=="informal") style="formal";
  if(time==="trajectory") time="post";
  if(time!=="origin" && time!=="now" && time!=="post") time="now";

  try{
    localStorage.setItem("gd_lang", lang);
    localStorage.setItem("gd_style", style);
    localStorage.setItem("gd_time", time);
  }catch(e){}

  function q(){ return "lang="+encodeURIComponent(lang)+"&style="+encodeURIComponent(style)+"&time="+encodeURIComponent(time); }
  function setLinks(){
    var s=q();
    document.getElementById("btnHub").href="/home/?"+s;
    document.getElementById("btnExit").href="/door/?"+s;

    document.getElementById("goTerminal").href="/index.html?"+s;
    document.getElementById("goLinks").href="/links/?"+s;
    document.getElementById("goProducts").href="/products/?"+s;
    document.getElementById("goLaws").href="/laws/?"+s;
    document.getElementById("goGauges").href="/gauges/?"+s;

    // category routes
    document.getElementById("software").dataset.href="/products/software/?"+s;
    document.getElementById("commercial").dataset.href="/products/commercial/?"+s;
    document.getElementById("energy").dataset.href="/products/energy/?"+s;
    document.getElementById("education").dataset.href="/products/education/?"+s;
  }

  /* Dual language packs */
  var UI={
    en:{
      brand:"CARDINAL AXIS",
      tag:"PRODUCTS · DEPLOYED SURFACES",
      lens:{formal:"FORMAL",informal:"INFORMAL",concept:"CONCEPT",now:"NOW",post:"POST"},
      cats:{
        software:{t:"SOFTWARE",s:"Executable tools · platforms · instruments."},
        commercial:{t:"COMMERCIAL",s:"Revenue-ready workflows · licensing · deployment."},
        energy:{t:"ENERGY",s:"Infrastructure applications · conversion chains."},
        education:{t:"EDUCATION",s:"Traversal study programs · curricula · training."}
      }
    },
    zh:{
      brand:"枢轴罗盘",
      tag:"产品 · 已部署执行面",
      lens:{formal:"正式",informal:"非正式",concept:"概念",now:"当前",post:"后续"},
      cats:{
        software:{t:"软件",s:"可执行工具 · 平台 · 仪器。"},
        commercial:{t:"商业",s:"可变现流程 · 许可 · 部署。"},
        energy:{t:"能源",s:"基础设施应用 · 转换链。"},
        education:{t:"教育",s:"遍历学习 · 课程 · 训练。"}
      }
    }
  };

  var pack = (lang==="zh") ? UI.zh : UI.en;
  document.documentElement.lang = (lang==="zh") ? "zh" : "en";

  document.getElementById("brandName").textContent = pack.brand;
  document.getElementById("brandTag").textContent = pack.tag;

  document.getElementById("labN").textContent = pack.cats.software.t;
  document.getElementById("subN").textContent = pack.cats.software.s;
  document.getElementById("labE").textContent = pack.cats.commercial.t;
  document.getElementById("subE").textContent = pack.cats.commercial.s;
  document.getElementById("labS").textContent = pack.cats.energy.t;
  document.getElementById("subS").textContent = pack.cats.energy.s;
  document.getElementById("labW").textContent = pack.cats.education.t;
  document.getElementById("subW").textContent = pack.cats.education.s;

  /* Modal plumbing */
  var bd=document.getElementById("bd");
  var modal=document.getElementById("modal");
  var mClose=document.getElementById("mClose");
  var mTitle=document.getElementById("mTitle");

  var styleChip=document.getElementById("styleChip");
  var chipConcept=document.getElementById("chipConcept");
  var chipNow=document.getElementById("chipNow");
  var chipPost=document.getElementById("chipPost");

  var h1=document.getElementById("h1"),p1=document.getElementById("p1"),u1=document.getElementById("u1");
  var h2=document.getElementById("h2"),p2=document.getElementById("p2"),u2=document.getElementById("u2");
  var h3=document.getElementById("h3"),p3=document.getElementById("p3"),u3=document.getElementById("u3");
  var h4=document.getElementById("h4"),p4=document.getElementById("p4"),u4=document.getElementById("u4");

  function fill(hEl,pEl,uEl,b){
    hEl.textContent=b.h; pEl.textContent=b.p; uEl.innerHTML="";
    b.u.forEach(function(x){ var li=document.createElement("li"); li.textContent=x; uEl.appendChild(li); });
  }

  function persist(){
    try{
      localStorage.setItem("gd_lang", lang);
      localStorage.setItem("gd_style", style);
      localStorage.setItem("gd_time", time);
    }catch(e){}
  }

  function setLensLabels(){
    styleChip.textContent = "STYLE: " + (style==="formal" ? pack.lens.formal : pack.lens.informal);
    chipConcept.textContent = pack.lens.concept;
    chipNow.textContent = pack.lens.now;
    chipPost.textContent = pack.lens.post;

    chipConcept.classList.toggle("active", time==="origin");
    chipNow.classList.toggle("active", time==="now");
    chipPost.classList.toggle("active", time==="post");
  }

  // Category content (4 boxes × 4 bullets) for each category, lens-aware
  function catContent(cat){
    const EN = {
      software:{
        origin:{formal:{
          title:"SOFTWARE",
          b1:{h:"What it is",p:"Executable surfaces that implement traversal, state, and audit-friendly interaction.",u:["Gem hub UI.","Deterministic routing.","Modal bulletins.","State propagation."]},
          b2:{h:"Core modules",p:"A stable software stack that expresses the architecture as a system.",u:["Compass hub platform.","UCI measurement core.","Scoring surfaces.","Registry layer."]},
          b3:{h:"How it’s used",p:"Operators navigate by structure, not linear reading, and export evidence when needed.",u:["Traverse nodes.","Select lenses in modal.","Read bulletins fast.","Export summaries."]},
          b4:{h:"Why it matters",p:"It turns correlated risk into a visible, enforceable, repeatable interface.",u:["Less drift.","Lower blast radius.","Clear governance.","Audit-ready."]}
        }, informal:{
          title:"SOFTWARE",
          b1:{h:"What it is",p:"Tools that make the architecture usable.",u:["Hub UI.","State routing.","Modals.","Bullets."]},
          b2:{h:"Modules",p:"Four core software pieces.",u:["Hub.","UCI.","Scoring.","Registry."]},
          b3:{h:"Use",p:"Tap, read, move, export.",u:["Traverse.","Lens.","Return.","Repeat."]},
          b4:{h:"Why",p:"So systems don’t break together.",u:["Catch clusters.","Stop drift.","Gate changes.","Stay safe."]}
        }},
        now:{formal:{
          title:"SOFTWARE",
          b1:{h:"Now",p:"Current deployed surfaces are live and uniform under the gem contract.",u:["Same UI.","Same modal.","Same state keys.","Same dock."]},
          b2:{h:"Determinism",p:"Every link carries language and lens state forward.",u:["lang/style/time.","LocalStorage backup.","No mixed namespaces.","No drift."]},
          b3:{h:"Quality rule",p:"No empty bubbles; every node carries bulletins.",u:["4 sections.","4 bullets each.","Lens-aware text.","Bilingual."]},
          b4:{h:"Next action",p:"Expand subpages without changing the contract.",u:["Clone pages.","Swap content.","Keep layout.","Ship."]}
        }, informal:{
          title:"SOFTWARE",
          b1:{h:"Now",p:"It’s live and consistent.",u:["Uniform UI.","Working routes.","Stable state.","Clean returns."]},
          b2:{h:"Rule",p:"State follows you.",u:["Language sticks.","Style sticks.","Time sticks.","No surprise."]},
          b3:{h:"Content",p:"No empty pages.",u:["Bullets.","Meaning.","Depth.","Bilingual."]},
          b4:{h:"Do next",p:"Clone and expand.",u:["Copy.","Edit.","Publish.","Repeat."]}
        }},
        post:{formal:{
          title:"SOFTWARE",
          b1:{h:"Post",p:"Software becomes a full decision infrastructure surface.",u:["Replayability.","Evidence bundles.","Registry verification.","Audit trails."]},
          b2:{h:"Enterprise",p:"Integrates with governance and staged deployment gates.",u:["HIP enforcement.","Rollback discipline.","Zone independence.","Audit latency."]},
          b3:{h:"Visibility",p:"Dashboards and exports become default outputs.",u:["Alerts.","Scores.","Summaries.","Exports."]},
          b4:{h:"Outcome",p:"A scalable platform for coherence-based governance.",u:["Lower correlated risk.","Higher trust.","Repeatable operations.","Defensible decisions."]}
        }, informal:{
          title:"SOFTWARE",
          b1:{h:"Next",p:"More proof and replay.",u:["Evidence.","Exports.","Registry.","Audit."]},
          b2:{h:"Enterprise",p:"Governance-ready.",u:["Gates.","Rollback.","Zones.","Audits."]},
          b3:{h:"Outputs",p:"Fast reads.",u:["Alerts.","Scores.","Summaries.","Files."]},
          b4:{h:"Result",p:"Scales safely.",u:["Less risk.","More trust.","More stability.","More adoption."]}
        }}
      },
      commercial:{
        origin:{formal:{title:"COMMERCIAL",b1:{h:"What it is",p:"Revenue-ready packaging of the architecture into deployable workflows.",u:["Licensing paths.","Services offers.","Enterprise tiers.","Partner kits."]},
                                   b2:{h:"Core modules",p:"Commercial layer maps products to contracts and adoption.",u:["Pricing surfaces.","Onboarding flows.","Support workflows.","SLA framing."]},
                                   b3:{h:"How it’s used",p:"Used to turn stable structure into repeatable revenue engines.",u:["Pilot → replicate.","Bundle → deliver.","Certify → renew.","Scale → govern."]},
                                   b4:{h:"Why it matters",p:"It creates capital efficiency without sacrificing integrity.",u:["Clear scope.","Clear gates.","Lower churn.","Higher trust."]}},
        informal:{title:"COMMERCIAL",b1:{h:"What it is",p:"How you sell it without breaking it.",u:["Packages.","Offers.","Tiers.","Kits."]},
                               b2:{h:"Pieces",p:"Commercial building blocks.",u:["Pricing.","Onboarding.","Support.","SLA."]},
                               b3:{h:"Use",p:"Pilot, then repeat.",u:["Test.","Prove.","Replicate.","Scale."]},
                               b4:{h:"Why",p:"Make money with integrity.",u:["Clear rules.","Less churn.","More trust.","Better outcomes."]}}},
        now:{formal:{title:"COMMERCIAL",b1:{h:"Now",p:"Commercial surfaces are structured for clean rollout and support.",u:["Clear packages.","Stable scope.","Deterministic demos.","Governed expansion."]},
                                b2:{h:"Propagation",p:"Commercial pages follow the same gem contract.",u:["Same modals.","Same lenses.","Same state.","Same returns."]},
                                b3:{h:"Operator rule",p:"Commercial must never override certification semantics.",u:["No threshold relaxing.","No ambiguity.","No capture.","No drift."]},
                                b4:{h:"Next action",p:"Build the commercial sub-hub pages and fill bulletins.",u:["Offer set.","Tier set.","Pilot path.","Renewal logic."]}},
        informal:{title:"COMMERCIAL",b1:{h:"Now",p:"Commercial is disciplined.",u:["Clear packages.","Stable scope.","Same UI.","Same rules."]},
                               b2:{h:"Rule",p:"No drift from standards.",u:["No relaxations.","No shortcuts.","No capture.","No ambiguity."]},
                               b3:{h:"Pattern",p:"Same gem contract.",u:["Same modal.","Same lenses.","Same state.","Same returns."]},
                               b4:{h:"Next",p:"Build subpages.",u:["Offers.","Tiers.","Pilots.","Renew."]}}},
        post:{formal:{title:"COMMERCIAL",b1:{h:"Post",p:"Commercial scales into enterprise adoption and underwriting interfaces.",u:["Contracts.","Compliance mapping.","Capital framing.","Renewal automation."]},
                                 b2:{h:"Certification",p:"Certification becomes a renewal and upsell mechanic (optional).",u:["Tier upgrades.","Status registry.","Revocation logic.","Audit proof."]},
                                 b3:{h:"Ecosystem",p:"Partners adopt via stable kits and playbooks.",u:["Partner bundles.","Templates.","Training.","Support."]},
                                 b4:{h:"Outcome",p:"Revenue scales without breaking coherence.",u:["Trust compounding.","Low chaos.","High defensibility.","Stable growth."]}},
        informal:{title:"COMMERCIAL",b1:{h:"Next",p:"Enterprise scale.",u:["Contracts.","Compliance.","Capital.","Renewals."]},
                               b2:{h:"Cert",p:"Optional upgrade path.",u:["Tiers.","Registry.","Audits.","Status."]},
                               b3:{h:"Partners",p:"Kits and playbooks.",u:["Templates.","Training.","Support.","Bundles."]},
                               b4:{h:"Result",p:"Scale without chaos.",u:["More trust.","Less churn.","Better adoption.","Stable growth."]}}}
      },
      energy:{
        origin:{formal:{title:"ENERGY",b1:{h:"What it is",p:"Infrastructure applications of the architecture to conversion chains and fleets.",u:["Microgrids.","HVAC fleets.","Water-energy link.","District systems."]},
                                   b2:{h:"Core modules",p:"Adapters map domain telemetry into universal drivers and gates.",u:["Driver vectors.","Normalization.","Window W.","Missing-data rules."]},
                                   b3:{h:"How it’s used",p:"Used to detect correlation exposure and enforce staged change control.",u:["Measure ρ.","Watch Δρ.","Enforce gates.","Contain blast radius."]},
                                   b4:{h:"Why it matters",p:"Energy systems fail in correlated cascades; this suppresses that risk.",u:["Lower common-mode exposure.","Faster detection.","Rollback discipline.","Audit readiness."]}},
        informal:{title:"ENERGY",b1:{h:"What it is",p:"Applying the system to real infrastructure.",u:["Microgrids.","Buildings.","Fleets.","Districts."]},
                               b2:{h:"Adapters",p:"Translate telemetry into the same language.",u:["Drivers.","Windows.","Rules.","Missing data."]},
                               b3:{h:"Use",p:"Measure and gate change.",u:["Measure ρ.","Watch drift.","Use gates.","Contain."]},
                               b4:{h:"Why",p:"So failures don’t spread.",u:["Less cascade.","More resilience.","Faster recovery.","Safer ops."]}}},
        now:{formal:{title:"ENERGY",b1:{h:"Now",p:"Energy products are defined as domain sub-hubs with adapters.",u:["Domain page.","Adapter appendix.","Dashboards.","Alerts."]},
                                b2:{h:"Governance",p:"Energy must remain survival-safe and anti-capture.",u:["Separation boundary.","No pay-to-prioritize.","Audit rules.","Revocation triggers."]},
                                b3:{h:"Instrumentation",p:"UCI_EVENT schema becomes the intake for energy telemetry/events.",u:["timestamp.","system_id.","unit_id.","driver vectors."]},
                                b4:{h:"Next action",p:"Create /products/energy/ and fill adapter + demo bulletins.",u:["Define drivers.","Pick window W.","Define gates.","Publish dashboards."]}},
        informal:{title:"ENERGY",b1:{h:"Now",p:"Energy is a domain sub-hub.",u:["Adapters.","Dashboards.","Alerts.","Rules."]},
                               b2:{h:"Safety",p:"Keep it survival-safe.",u:["No capture.","No pay-to-prioritize.","Audits.","Revokes."]},
                               b3:{h:"Inputs",p:"Same intake schema.",u:["Events.","Units.","Drivers.","Notes."]},
                               b4:{h:"Next",p:"Build the energy subpage.",u:["Drivers.","Windows.","Gates.","Dashboards."]}}},
        post:{formal:{title:"ENERGY",b1:{h:"Post",p:"Energy expands into multi-site, multi-zone certification.",u:["Zone independence.","Wave caps.","Rollback SLAs.","Audit latency."]},
                                 b2:{h:"Capital",p:"Outputs connect to insurance and capital allocation decisions.",u:["Δρ reduction.","Δλ reduction.","Risk pricing.","Governance maturity."]},
                                 b3:{h:"Scaling",p:"Adapters become a library across climates and infrastructures.",u:["HVAC.","Grid.","Water.","District."]},
                                 b4:{h:"Outcome",p:"A coherence-first operating layer for infrastructure.",u:["Lower cascade risk.","Higher resilience.","Better planning.","Public safety."]}},
        informal:{title:"ENERGY",b1:{h:"Next",p:"Scale by zones and waves.",u:["Zones.","Wave caps.","Rollback.","Audits."]},
                               b2:{h:"Money",p:"Risk to capital.",u:["Lower risk.","Better pricing.","More trust.","More adoption."]},
                               b3:{h:"Adapters",p:"Library expands.",u:["HVAC.","Grid.","Water.","District."]},
                               b4:{h:"Result",p:"Infrastructure stays stable.",u:["Less cascade.","More resilience.","Safer ops.","Public ready."]}}}
      },
      education:{
        origin:{formal:{title:"EDUCATION",b1:{h:"What it is",p:"Traversal encyclopedic study delivered as programs and curricula.",u:["Traversal vs linear.","Lens semantics.","Return stability.","Deep mapping."]},
                                   b2:{h:"Core modules",p:"Education products package the method into teachable sequences.",u:["Lessons.","Exercises.","Assessments.","Templates."]},
                                   b3:{h:"How it’s used",p:"Learners traverse maps, open nodes, and build understanding through structure.",u:["Tap nodes.","Read bulletins.","Flip lenses.","Repeat and retain."]},
                                   b4:{h:"Why it matters",p:"It accelerates learning without sacrificing coherence.",u:["Faster comprehension.","Lower confusion.","Better retention.","Repeatable mastery."]}},
        informal:{title:"EDUCATION",b1:{h:"What it is",p:"Teaching traversal study.",u:["Maps.","Lenses.","Nodes.","Return."]},
                               b2:{h:"Pieces",p:"Course building blocks.",u:["Lessons.","Drills.","Checks.","Templates."]},
                               b3:{h:"Use",p:"Learn by moving.",u:["Tap.","Read.","Flip.","Repeat."]},
                               b4:{h:"Why",p:"It sticks.",u:["Faster.","Clearer.","More retention.","More mastery."]}}},
        now:{formal:{title:"EDUCATION",b1:{h:"Now",p:"Education pages define programs with bilingual delivery.",u:["EN primary.","中文 canonical.","Overlay later.","Same gem contract."]},
                                b2:{h:"Method",p:"Explicitly contrasts traversal study vs linear study.",u:["Nonlinear path.","State lenses.","Deterministic returns.","Compounding context."]},
                                b3:{h:"Artifacts",p:"Produces downloadable materials (PDFs, lesson maps, vocab sets).",u:["Structured levels.","Lesson plans.","Exercises.","Checklists."]},
                                b4:{h:"Next action",p:"Create /products/education/ and publish program modules.",u:["Curriculum map.","Levels.","Outputs.","Delivery plan."]}},
        informal:{title:"EDUCATION",b1:{h:"Now",p:"Education is bilingual and uniform.",u:["EN/中文.","Same UI.","Same modal.","Same dock."]},
                               b2:{h:"Teach",p:"Traversal vs linear.",u:["Nonlinear path.","Lenses.","Returns.","Compounding."]},
                               b3:{h:"Make",p:"Materials.",u:["PDFs.","Maps.","Exercises.","Checklists."]},
                               b4:{h:"Next",p:"Build the education subpage.",u:["Modules.","Levels.","Outputs.","Delivery."]}}},
        post:{formal:{title:"EDUCATION",b1:{h:"Post",p:"Education scales into certifications and mastery pathways.",u:["Tiered mastery.","Assessments.","Credentialing.","Community."]},
                                 b2:{h:"Systems",p:"Education becomes a distribution engine for adoption.",u:["Teachers.","Programs.","Institutions.","Tooling."]},
                                 b3:{h:"Localization",p:"Overlays expand beyond EN/中文 with country mapping.",u:["Overlay packs.","Fallback rules.","No drift.","Consistency checks."]},
                                 b4:{h:"Outcome",p:"A repeatable method for teaching coherence-first traversal.",u:["Faster learning.","Less confusion.","More adoption.","Stable growth."]}},
        informal:{title:"EDUCATION",b1:{h:"Next",p:"Mastery pathways.",u:["Levels.","Checks.","Credentials.","Community."]},
                               b2:{h:"Distribution",p:"Adoption engine.",u:["Teachers.","Programs.","Schools.","Tools."]},
                               b3:{h:"Languages",p:"Overlays later.",u:["Country mapping.","Fallback safe.","EN/中文 core.","No drift."]},
                               b4:{h:"Result",p:"People learn it fast.",u:["Clear.","Repeatable.","Stable.","Scalable."]}}}
      }
    };
    return EN[cat][time][style];
  }

  var activeCat=null;

  function setActiveDiamond(id){
    ["software","commercial","energy","education"].forEach(function(x){
      document.getElementById(x).classList.toggle("active", x===id);
    });
  }

  function open(cat){
    activeCat=cat;
    setActiveDiamond(cat);
    render();
    bd.classList.add("show");
    modal.classList.add("show");
  }

  function close(){
    bd.classList.remove("show");
    modal.classList.remove("show");
    setActiveDiamond("__none__");
    activeCat=null;
  }

  function render(){
    persist();
    setLinks();
    setLensLabels();

    var v = catContent(activeCat);
    mTitle.textContent = v.title;
    fill(h1,p1,u1,v.b1);
    fill(h2,p2,u2,v.b2);
    fill(h3,p3,u3,v.b3);
    fill(h4,p4,u4,v.b4);

    // GO CATEGORY button
    var href = document.getElementById(activeCat).dataset.href;
    document.getElementById("mGoCategory").href = href;
  }

  /* Lens controls (modal only) */
  styleChip.onclick=function(){ style = (style==="formal") ? "informal" : "formal"; render(); };
  chipConcept.onclick=function(){ time="origin"; render(); };
  chipNow.onclick=function(){ time="now"; render(); };
  chipPost.onclick=function(){ time="post"; render(); };

  /* Close controls */
  bd.onclick=close;
  mClose.onclick=close;
  document.getElementById("mReturn").onclick=close;

  /* Diamond handlers */
  ["software","commercial","energy","education"].forEach(function(id){
    var el=document.getElementById(id);
    el.onclick=function(){ open(id); };
    el.onkeydown=function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); open(id);} };
  });

  setLinks();
  setLensLabels();
})();
</script>

</body>
</html>
