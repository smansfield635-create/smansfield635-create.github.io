<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Home · Geodiametrics</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>

<style>
/* ==========================================
   HOME — HUB
   - NO language choice here (language chosen once on /index.html)
   - Depth toggle (Explore/Learn) changes how much expands
   - Quadrant routes: NW/NE/SW/SE (dropdowns)
   - Cardinal plate: N/E/S/W (diamond hub)
========================================== */

:root{
  --glass: rgba(255,255,255,.07);
  --stroke: rgba(255,255,255,.14);
  --ink: rgba(234,242,246,.92);
  --muted: rgba(234,242,246,.70);
}

/* Chinese red/black theme */
html,body{height:100%;margin:0}
body{
  min-height:100vh;
  color:var(--ink);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:
    radial-gradient(1100px 760px at 50% 12%, rgba(190,10,18,.52) 0%, rgba(90,10,14,.34) 40%, rgba(6,10,14,1) 100%);
}

.page{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:34px 14px 90px;
  position:relative;
}

.h{
  text-align:center;
  margin-bottom:14px;
  position:relative;
  z-index:10;
}

.h h1{
  margin:0;
  font-size:clamp(44px,9vw,70px);
  font-weight:900;
  letter-spacing:.01em;
}

.h p{
  margin:10px 0 0;
  font-size:18px;
  color:var(--muted);
}

.topbar{
  width:min(860px,94vw);
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
  margin:14px auto 8px;
  position:relative;
  z-index:10;
}

.pill{
  padding:10px 14px;
  border-radius:999px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  color:rgba(234,242,246,.78);
  font-weight:900;
  letter-spacing:.10em;
  font-size:12px;
  text-decoration:none;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}

.pill.active{
  background:rgba(255,255,255,.10);
  border-color:rgba(255,255,255,.18);
  color:rgba(234,242,246,.92);
}

.stack{
  width:min(860px,94vw);
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:10px;
  position:relative;
  z-index:5;
}

/* Quadrant dropdown cards */
.qcard{
  border-radius:22px;
  background:rgba(0,0,0,.22);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.06),
    0 22px 60px rgba(0,0,0,.55);
  overflow:hidden;
  backdrop-filter:blur(10px);
}

.qhead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:14px 14px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}

.qleft{
  display:flex;
  align-items:center;
  gap:12px;
}

.qtag{
  min-width:56px;
  height:40px;
  border-radius:16px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  font-weight:900;
  letter-spacing:.12em;
  color:rgba(234,242,246,.88);
}

.qtitle{
  display:flex;
  flex-direction:column;
  gap:2px;
}

.qtitle b{
  font-size:16px;
  letter-spacing:.14em;
}

.qtitle span{
  font-size:13px;
  color:rgba(234,242,246,.68);
}

.qchev{
  width:40px;
  height:40px;
  border-radius:999px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  color:rgba(234,242,246,.85);
  font-weight:900;
}

.qbody{
  padding:0 14px 14px;
  display:none;
}

.qbody.open{display:block;}

.qbody .bullets{
  margin:10px 0 0;
  padding-left:18px;
  color:rgba(234,242,246,.82);
  line-height:1.6;
}

.jumpRow{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:12px;
}

.jump{
  padding:12px 14px;
  border-radius:16px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  color:rgba(234,242,246,.92);
  font-weight:900;
  letter-spacing:.10em;
  text-decoration:none;
}

/* Cardinal plate region */
.stage{
  width:100%;
  display:flex;
  justify-content:center;
  margin-top:16px;
  position:relative;
  z-index:3;
}

/* Ensure footer always visible */
footer{
  text-align:center;
  letter-spacing:3px;
  font-size:12px;
  opacity:.55;
  margin-top:18px;
  position:relative;
  z-index:10;
}
</style>
</head>

<body>
<div class="shooting-stars"></div>

<div class="page">

  <div class="h">
    <h1 id="t_home">Home</h1>
    <p id="t_tagline">Unified hub · choose a route.</p>
  </div>

  <div class="topbar">
    <span class="pill" id="pillLang">LANG · EN</span>
    <span class="pill active" id="pillExplore">EXPLORE</span>
    <span class="pill" id="pillLearn">LEARN</span>
    <a class="pill" href="/door/" id="pillBackToDoor">DOOR</a>
  </div>

  <!-- Quadrant routes (NW/NE/SW/SE) -->
  <div class="stack" id="quadStack">

    <div class="qcard" data-q="nw">
      <div class="qhead">
        <div class="qleft">
          <div class="qtag">NW</div>
          <div class="qtitle">
            <b id="t_nw">NORTHWEST</b>
            <span id="t_nw_sub">Definitions · language · structure</span>
          </div>
        </div>
        <div class="qchev">▾</div>
      </div>
      <div class="qbody">
        <ul class="bullets" id="nw_bullets"></ul>
        <div class="jumpRow">
          <a class="jump" href="/laws/" id="nw_jump1">JUMP · LAWS</a>
          <a class="jump" href="/laws/categories/" id="nw_jump2">JUMP · CATEGORIES</a>
        </div>
      </div>
    </div>

    <div class="qcard" data-q="ne">
      <div class="qhead">
        <div class="qleft">
          <div class="qtag">NE</div>
          <div class="qtitle">
            <b id="t_ne">NORTHEAST</b>
            <span id="t_ne_sub">Execution · surfaces · examples</span>
          </div>
        </div>
        <div class="qchev">▾</div>
      </div>
      <div class="qbody">
        <ul class="bullets" id="ne_bullets"></ul>
        <div class="jumpRow">
          <a class="jump" href="/products/" id="ne_jump1">JUMP · PRODUCTS</a>
          <a class="jump" href="/rgsc/" id="ne_jump2">JUMP · RGSC</a>
        </div>
      </div>
    </div>

    <div class="qcard" data-q="sw">
      <div class="qhead">
        <div class="qleft">
          <div class="qtag">SW</div>
          <div class="qtitle">
            <b id="t_sw">SOUTHWEST</b>
            <span id="t_sw_sub">Measurement · diagnostics · rules</span>
          </div>
        </div>
        <div class="qchev">▾</div>
      </div>
      <div class="qbody">
        <ul class="bullets" id="sw_bullets"></ul>
        <div class="jumpRow">
          <a class="jump" href="/gauges/" id="sw_jump1">JUMP · GAUGES</a>
          <a class="jump" href="/diagnostic/" id="sw_jump2">JUMP · DIAGNOSTIC</a>
        </div>
      </div>
    </div>

    <div class="qcard" data-q="se">
      <div class="qhead">
        <div class="qleft">
          <div class="qtag">SE</div>
          <div class="qtitle">
            <b id="t_se">SOUTHEAST</b>
            <span id="t_se_sub">Identity · references · links</span>
          </div>
        </div>
        <div class="qchev">▾</div>
      </div>
      <div class="qbody">
        <ul class="bullets" id="se_bullets"></ul>
        <div class="jumpRow">
          <a class="jump" href="/links/" id="se_jump1">JUMP · LINKS</a>
          <a class="jump" href="/contact/" id="se_jump2">JUMP · CONTACT</a>
        </div>
      </div>
    </div>

  </div>

  <!-- Cardinal plate (N/E/S/W) -->
  <div class="stage">
    <div class="platform">
      <a class="diamond top" href="/laws/"><span>N<small id="t_card_n">Laws</small></span></a>
      <a class="diamond right" href="/products/"><span>E<small id="t_card_e">Products</small></span></a>
      <a class="diamond bottom" href="/gauges/"><span>S<small id="t_card_s">Gauges</small></span></a>
      <a class="diamond left" href="/links/"><span>W<small id="t_card_w">Links</small></span></a>

      <a class="diamond mini mini-left" href="/"><span><small id="t_root">ROOT</small></span></a>
      <a class="diamond mini mini-right" href="/rgsc/"><span><small id="t_rgsc">RGSC</small></span></a>
    </div>
  </div>

  <footer>CANONICAL · STABLE · © GEODIAMETRICS</footer>
</div>

<script>
(function(){
  const $ = (id)=>document.getElementById(id);

  function getLang(){
    try{ return (localStorage.getItem("gd_lang") || "en").toLowerCase(); }catch(e){ return "en"; }
  }
  function getDepth(){
    let d="explore";
    try{ d=(localStorage.getItem("gd_depth") || "explore").toLowerCase(); }catch(e){}
    if(d==="shop") d="explore";
    if(d!=="explore" && d!=="learn") d="explore";
    return d;
  }
  function setDepth(d){
    try{ localStorage.setItem("gd_depth", d); }catch(e){}
  }

  function bulletsFor(depth, lang){
    const isZH = (lang==="zh");

    // EXPLORE = short. LEARN = deeper.
    const pack = {
      nw: isZH
        ? (depth==="learn"
            ? ["SSG（简化语法几何）", "钻石导航语法（四路一选）", "DOT.GRID（256态索引）", "缩略语/术语（按柱分类）"]
            : ["SSG", "钻石导航语法", "DOT.GRID", "缩略语/术语"])
        : (depth==="learn"
            ? ["SSG (Simplified Syntax Geometry)", "Diamond grammar (4 routes, one choice)", "DOT.GRID (256-state indexing)", "Acronyms & glossary (pillarized)"]
            : ["SSG", "Diamond grammar", "DOT.GRID", "Acronyms & glossary"]),

      ne: isZH
        ? (depth==="learn"
            ? ["执行界面（应用/门户）", "流程与回执（审计链）", "示例（如何使用系统）", "打包输出（下载/材料）"]
            : ["执行界面", "回执/审计链", "示例", "打包输出"])
        : (depth==="learn"
            ? ["Execution surfaces (apps / portals)", "Workflows & receipts (audit trails)", "Examples (how to use the system)", "Packaged outputs (downloadables)"]
            : ["Execution surfaces", "Receipts / audit trails", "Examples", "Packaged outputs"]),

      sw: isZH
        ? (depth==="learn"
            ? ["量表/仪表（测量工具）", "诊断（约束下分类）", "规则（导航 + 完整性）", "返回协议（先回枢纽）"]
            : ["量表/仪表", "诊断", "规则", "返回协议"])
        : (depth==="learn"
            ? ["Gauges (measurement instruments)", "Diagnostics (classification under constraint)", "Rules (navigation + integrity)", "Return protocol (hub-first)"]
            : ["Gauges", "Diagnostics", "Rules", "Return protocol"]),

      se: isZH
        ? (depth==="learn"
            ? ["ORCID（研究者身份）", "OSF（项目/预印本）", "联系方式（直接）", "对外链接（索引）"]
            : ["ORCID", "OSF", "联系", "对外链接"])
        : (depth==="learn"
            ? ["ORCID (researcher identity)", "OSF (project registry / preprints)", "Contact (direct)", "External links (index)"]
            : ["ORCID", "OSF", "Contact", "External links"])
    };
    return pack;
  }

  function applyI18n(lang){
    const isZH = (lang==="zh");
    document.documentElement.lang = isZH ? "zh" : "en";
    $("pillLang").textContent = "LANG · " + (isZH ? "中文" : "EN");

    if(isZH){
      $("t_home").textContent = "首页";
      $("t_tagline").textContent = "统一枢纽 · 选择路线。";
      $("pillBackToDoor").textContent = "入口";
      $("pillExplore").textContent = "浏览";
      $("pillLearn").textContent = "学习";

      $("t_nw").textContent = "西北";
      $("t_nw_sub").textContent = "定义 · 语言 · 结构";
      $("t_ne").textContent = "东北";
      $("t_ne_sub").textContent = "执行 · 界面 · 示例";
      $("t_sw").textContent = "西南";
      $("t_sw_sub").textContent = "测量 · 诊断 · 规则";
      $("t_se").textContent = "东南";
      $("t_se_sub").textContent = "身份 · 引用 · 链接";

      $("nw_jump1").textContent = "跳转 · 法则";
      $("nw_jump2").textContent = "跳转 · 分类";
      $("ne_jump1").textContent = "跳转 · 产品";
      $("ne_jump2").textContent = "跳转 · RGSC";
      $("sw_jump1").textContent = "跳转 · 仪表";
      $("sw_jump2").textContent = "跳转 · 诊断";
      $("se_jump1").textContent = "跳转 · 链接";
      $("se_jump2").textContent = "跳转 · 联系";

      $("t_card_n").textContent = "法则";
      $("t_card_e").textContent = "产品";
      $("t_card_s").textContent = "仪表";
      $("t_card_w").textContent = "链接";
      $("t_root").textContent = "根";
      $("t_rgsc").textContent = "RGSC";
    }else{
      $("t_home").textContent = "Home";
      $("t_tagline").textContent = "Unified hub · choose a route.";
      $("pillBackToDoor").textContent = "DOOR";
      $("pillExplore").textContent = "EXPLORE";
      $("pillLearn").textContent = "LEARN";

      $("t_nw").textContent = "NORTHWEST";
      $("t_nw_sub").textContent = "Definitions · language · structure";
      $("t_ne").textContent = "NORTHEAST";
      $("t_ne_sub").textContent = "Execution · surfaces · examples";
      $("t_sw").textContent = "SOUTHWEST";
      $("t_sw_sub").textContent = "Measurement · diagnostics · rules";
      $("t_se").textContent = "SOUTHEAST";
      $("t_se_sub").textContent = "Identity · references · links";

      $("nw_jump1").textContent = "JUMP · LAWS";
      $("nw_jump2").textContent = "JUMP · CATEGORIES";
      $("ne_jump1").textContent = "JUMP · PRODUCTS";
      $("ne_jump2").textContent = "JUMP · RGSC";
      $("sw_jump1").textContent = "JUMP · GAUGES";
      $("sw_jump2").textContent = "JUMP · DIAGNOSTIC";
      $("se_jump1").textContent = "JUMP · LINKS";
      $("se_jump2").textContent = "JUMP · CONTACT";

      $("t_card_n").textContent = "Laws";
      $("t_card_e").textContent = "Products";
      $("t_card_s").textContent = "Gauges";
      $("t_card_w").textContent = "Links";
      $("t_root").textContent = "ROOT";
      $("t_rgsc").textContent = "RGSC";
    }
  }

  function render(depth, lang){
    // pills
    $("pillExplore").classList.toggle("active", depth==="explore");
    $("pillLearn").classList.toggle("active", depth==="learn");

    const b = bulletsFor(depth, lang);
    function fill(id, arr){
      const ul = $(id);
      ul.innerHTML = "";
      arr.forEach(t=>{
        const li = document.createElement("li");
        li.textContent = t;
        ul.appendChild(li);
      });
    }
    fill("nw_bullets", b.nw);
    fill("ne_bullets", b.ne);
    fill("sw_bullets", b.sw);
    fill("se_bullets", b.se);
  }

  // accordion behavior (per quadrant)
  document.querySelectorAll(".qcard").forEach(card=>{
    const head = card.querySelector(".qhead");
    const body = card.querySelector(".qbody");
    const chev = card.querySelector(".qchev");
    head.addEventListener("click", ()=>{
      const open = body.classList.toggle("open");
      chev.textContent = open ? "▴" : "▾";
    });
  });

  const lang = getLang();
  applyI18n(lang);

  let depth = getDepth();
  render(depth, lang);

  $("pillExplore").addEventListener("click", ()=>{ depth="explore"; setDepth(depth); render(depth, lang); });
  $("pillLearn").addEventListener("click", ()=>{ depth="learn"; setDepth(depth); render(depth, lang); });

  // If user wants to change language, they must go back to / (index) (language chosen once)
  $("pillLang").addEventListener("click", ()=>{ location.href="/"; });
})();
</script>

</body>
</html>
