<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRELUDE</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
a{color:inherit;text-decoration:none}

/* Ensure gold grid stays behind */
body{position:relative;z-index:0}
body::before, body::after{z-index:0}

/* Layout */
.page{
  width:min(1000px,94vw);
  margin:0 auto;
  padding:80px 0 140px;
  display:flex;
  flex-direction:column;
  gap:40px;
  z-index:10;
  position:relative;
}

/* Header */
.header{
  background:rgba(0,0,0,.85);
  border:1px solid rgba(255,255,255,.25);
  border-radius:24px;
  padding:40px;
  text-align:center;
  backdrop-filter:blur(14px);
  box-shadow:0 60px 160px rgba(0,0,0,.9);
}

.k{
  font-size:12px;
  letter-spacing:4px;
  opacity:.7;
  margin:0 0 10px;
}

.t{
  font-size:42px;
  font-weight:950;
  margin:0;
  letter-spacing:1px;
}

.s{
  margin-top:14px;
  font-size:16px;
  opacity:.85;
}

/* Vault Lines */
.vault{
  background:rgba(0,0,0,.8);
  border:1px solid rgba(255,255,255,.25);
  border-radius:24px;
  padding:30px 40px;
  backdrop-filter:blur(14px);
  box-shadow:0 50px 140px rgba(0,0,0,.8);
}

.line{
  font-size:15px;
  font-weight:700;
  padding:12px 0;
  border-bottom:1px solid rgba(255,255,255,.08);
}

.line:last-child{border-bottom:none}

/* Map Grid */
.map{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:20px;
}

.tile{
  background:rgba(0,0,0,.9);
  border:1px solid rgba(255,255,255,.25);
  border-radius:18px;
  padding:20px;
  text-align:center;
  cursor:pointer;
  transition:transform .15s ease, border-color .15s ease;
}

.tile:hover{
  transform:translateY(-4px);
  border-color:rgba(212,175,55,.6);
}

.tile h3{
  margin:0 0 10px;
  font-size:16px;
  font-weight:900;
}

.tile p{
  font-size:13px;
  opacity:.8;
  margin:0;
}

/* Focus mode */
.focus{
  display:none;
  background:rgba(0,0,0,.92);
  border:1px solid rgba(255,255,255,.3);
  border-radius:24px;
  padding:40px;
  backdrop-filter:blur(14px);
  box-shadow:0 60px 180px rgba(0,0,0,.95);
}

.focus.show{display:block}

.focus h2{
  margin:0 0 20px;
  font-size:28px;
}

.focus p{
  font-size:15px;
  line-height:1.6;
  opacity:.9;
}

.actions{
  margin-top:30px;
  display:flex;
  gap:14px;
  flex-wrap:wrap;
}

.footer{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  font-size:12px;
  opacity:.6;
}

.top-left{
  position:fixed;
  left:20px;
  top:20px;
  display:flex;
  gap:10px;
}

.top-right{
  position:fixed;
  right:20px;
  top:20px;
  display:flex;
  gap:10px;
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" href="/door/">RETURN</a>
  <a class="btn" id="btnEnterTop">ENTER</a>
</div>

<div class="top-right">
  <button class="btn" id="btnEN">EN</button>
  <button class="btn" id="btnZH">中文</button>
  <button class="btn" id="btnES">ES</button>
</div>

<div class="page">

  <div class="header">
    <p class="k">CARDINAL AXIS</p>
    <h1 class="t">PRELUDE</h1>
    <p class="s">Read this once. Then enter.</p>
  </div>

  <div class="vault">
    <div class="line">Scope comes before scale.</div>
    <div class="line">Scale amplifies error.</div>
    <div class="line">Unbounded claims create fragility.</div>
    <div class="line">If it cannot be measured, it cannot be stabilized.</div>
    <div class="line">Containment prevents cascade.</div>
  </div>

  <div class="map">
    <div class="tile" onclick="openFocus('Definitions')">
      <h3>DEFINITIONS</h3>
      <p>Words that stay fixed.</p>
    </div>

    <div class="tile" onclick="openFocus('Products')">
      <h3>PRODUCTS</h3>
      <p>Tools you can use.</p>
    </div>

    <div class="tile" onclick="openFocus('Constraints')">
      <h3>CONSTRAINTS</h3>
      <p>Limits that prevent drift.</p>
    </div>

    <div class="tile" onclick="openFocus('Containment')">
      <h3>CONTAINMENT</h3>
      <p>Keep failure small.</p>
    </div>
  </div>

  <div class="focus" id="focusBox">
    <h2 id="focusTitle"></h2>
    <p id="focusText"></p>

    <div class="actions">
      <button class="btn" onclick="closeFocus()">BACK</button>
      <a class="btn" id="focusEnter">ENTER</a>
    </div>
  </div>

</div>

<div class="footer">Orientation before scale · Scale before claims</div>

<script>
function qs(){
  const p=new URLSearchParams(location.search);
  const lang=p.get("lang")||localStorage.getItem("gd_lang")||"en";
  const style=p.get("style")||localStorage.getItem("gd_style")||"formal";
  const time=p.get("time")||localStorage.getItem("gd_time")||"now";
  const depth=p.get("depth")||localStorage.getItem("gd_depth")||"explore";
  return "?lang="+lang+"&style="+style+"&time="+time+"&depth="+depth;
}

document.getElementById("btnEnterTop").href="/home/"+qs();
document.getElementById("focusEnter").href="/home/"+qs();

function openFocus(name){
  document.querySelector(".vault").style.display="none";
  document.querySelector(".map").style.display="none";

  document.getElementById("focusTitle").innerText=name;
  document.getElementById("focusText").innerText="This section defines how this area works and what it protects.";

  document.getElementById("focusBox").classList.add("show");
}

function closeFocus(){
  document.getElementById("focusBox").classList.remove("show");
  document.querySelector(".vault").style.display="block";
  document.querySelector(".map").style.display="grid";
}
</script>

</body>
</html>
