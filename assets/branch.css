/* ============================================================
   BRANCH GEOMETRY OWNER
   VERSION: SCOPE v2
   OWNERS: geometry + modal only
   NO html/body rules
   NO :root overrides
   ============================================================ */

/* =============================
   SCOPE CONTAINER
   ============================= */

.crp-scope {
  position: relative;
  width: min(720px, 92vw);
  aspect-ratio: 1 / 1;
  margin: 0 auto;
  border-radius: 999px;
  display: grid;
  place-items: center;
}

/* faint boundary */
.crp-scope::before {
  content: "";
  position: absolute;
  inset: 6%;
  border-radius: 999px;
  border: 1px dashed rgba(255,255,255,.12);
  pointer-events: none;
}

/* =============================
   DIAMOND CORE
   ============================= */

.crp-core {
  position: absolute;
  width: clamp(110px, 20vw, 160px);
  height: clamp(110px, 20vw, 160px);
  border-radius: 22px;
  display: grid;
  place-items: center;
  text-align: center;

  border: 1px solid rgba(255,255,255,.28);
  background: rgba(0,0,0,.22);
  font-weight: 900;
  letter-spacing: .4px;

  cursor: pointer;
  z-index: 5;
}

.crp-core:hover {
  background: rgba(0,0,0,.30);
}

/* =============================
   RING BASE
   ============================= */

.crp-ring {
  position: absolute;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.18);
  display: grid;
  place-items: center;
  pointer-events: none; /* ring base doesn't capture */
}

/* individual rings by size */

.crp-ring.lang   { width: 92%; height: 92%; }
.crp-ring.mode   { width: 78%; height: 78%; }
.crp-ring.depth  { width: 64%; height: 64%; }
.crp-ring.style  { width: 50%; height: 50%; }
.crp-ring.time   { width: 36%; height: 36%; }

/* =============================
   RING KNOBS (SNAP POSITIONS)
   ============================= */

.crp-knob {
  position: absolute;
  width: 70px;
  height: 70px;
  border-radius: 16px;

  display: grid;
  place-items: center;
  text-align: center;

  border: 1px solid rgba(255,255,255,.22);
  background: rgba(0,0,0,.18);
  font-weight: 800;
  font-size: 14px;

  cursor: pointer;
  pointer-events: auto;
  transition: transform .08s ease, background .12s ease;
}

.crp-knob:hover {
  background: rgba(0,0,0,.28);
}

.crp-knob.active {
  border-color: rgba(255,255,255,.50);
  background: rgba(255,255,255,.10);
}

/* =============================
   KNOB POSITIONING HELPERS
   ============================= */

.crp-ring[data-positions="2"] .crp-knob:nth-child(1) {
  top: -35px; left: 50%; transform: translateX(-50%);
}
.crp-ring[data-positions="2"] .crp-knob:nth-child(2) {
  bottom: -35px; left: 50%; transform: translateX(-50%);
}

.crp-ring[data-positions="3"] .crp-knob:nth-child(1) {
  top: -35px; left: 50%; transform: translateX(-50%);
}
.crp-ring[data-positions="3"] .crp-knob:nth-child(2) {
  bottom: 10%; right: -35px;
}
.crp-ring[data-positions="3"] .crp-knob:nth-child(3) {
  bottom: 10%; left: -35px;
}

/* Depth ring (10 positions simplified to 5 visible anchors) */

.crp-ring.depth .crp-knob {
  width: 56px;
  height: 56px;
  font-size: 12px;
}

.crp-ring.depth .crp-knob:nth-child(1) { top: -28px; left: 50%; transform: translateX(-50%); }
.crp-ring.depth .crp-knob:nth-child(2) { right: -28px; top: 25%; }
.crp-ring.depth .crp-knob:nth-child(3) { bottom: -28px; left: 50%; transform: translateX(-50%); }
.crp-ring.depth .crp-knob:nth-child(4) { left: -28px; top: 25%; }
.crp-ring.depth .crp-knob:nth-child(5) { left: 50%; bottom: 25%; transform: translateX(-50%); }

/* =============================
   MODAL (unchanged baseline)
   ============================= */

.crp-modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(6px);
  display: none;
}

.crp-modal.active {
  display: block;
}
