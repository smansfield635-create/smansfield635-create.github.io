<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Door • Geodiametrics</title>
  <link rel="stylesheet" href="/assets/ui.css"/>
</head>
<body>
  <main class="wrap">
    <header class="hero">
      <h1>Be the first.</h1>
      <p class="sub">The door explains. The gate routes.</p>
    </header>

    <!-- DOOR PANEL (4 DIAMONDS ONLY) -->
    <section class="panel door" data-door="1">
      <!-- 1) START QUIZ (opens qualifying sequence; does NOT navigate yet) -->
      <a href="#"
         class="diamond"
         id="startQuizBtn">
        <span>START QUIZ</span>
        <small>~3 minutes</small>
      </a>

      <!-- 2) ENTER (go to real gate/index, NOT a missing route) -->
      <a href="/index.html" class="diamond">
        <span>ENTER</span>
        <small>Go to gate</small>
      </a>

      <!-- 3) LEARN MORE (opens info modal) -->
      <a href="#" class="diamond" id="learnMoreBtn">
        <span>LEARN MORE</span>
        <small>What this is</small>
      </a>

      <!-- 4) EXIT (opens clean exit modal) -->
      <a href="#" class="diamond" id="exitBtn">
        <span>EXIT</span>
        <small>Leave now</small>
      </a>

      <footer class="foot">Canonical · Stable · © Geodiametrics</footer>
    </section>

    <!-- MODALS -->
    <section class="modal hidden" id="modalLearn">
      <h2>What the quiz does</h2>
      <p>You’ll skim short sayings and pick what resonates. No questions. No right answers. Most people finish in about three minutes.</p>
      <div class="btnRow">
        <a class="btn primary" href="#" id="lmStart">Start Quiz</a>
        <a class="btn" href="/index.html">Enter Website</a>
        <a class="btn" href="#" id="lmClose">Close</a>
      </div>
    </section>

    <!-- QUALIFYING SEQUENCE (4 CONFIRMATIONS) -->
    <section class="modal hidden" id="modalQ1">
      <h2>Before you start</h2>
      <p>Do you have about <b>3 minutes</b> right now?</p>
      <div class="btnRow">
        <a class="btn primary" href="#" data-next="modalQ2">Yes</a>
        <a class="btn" href="#" data-close="1">No</a>
      </div>
    </section>

    <section class="modal hidden" id="modalQ2">
      <h2>Before you start</h2>
      <p>Will you take this seriously and <b>finish the quiz</b> once you begin?</p>
      <div class="btnRow">
        <a class="btn primary" href="#" data-next="modalQ3">Yes</a>
        <a class="btn" href="#" data-close="1">No</a>
      </div>
    </section>

    <section class="modal hidden" id="modalQ3">
      <h2>Before you start</h2>
      <p>Are you ready to find out how aligned you are with yourself?</p>
      <div class="btnRow">
        <a class="btn primary" href="#" data-next="modalQ4">Yes</a>
        <a class="btn" href="#" data-close="1">No</a>
      </div>
    </section>

    <section class="modal hidden" id="modalQ4">
      <h2>Final check</h2>
      <p>Proceed only if you intend to complete it. Ready?</p>
      <div class="btnRow">
        <a class="btn primary" href="#" id="qFinish">Yes, start</a>
        <a class="btn" href="/index.html">Skip, enter site</a>
        <a class="btn" href="#" data-close="1">Not now</a>
      </div>
    </section>

    <!-- EXIT MODAL -->
    <section class="modal hidden" id="modalExit">
      <h2>Leave now</h2>
      <p>Thanks for stopping by. You can close this tab anytime.</p>
      <div class="btnRow">
        <a class="btn" href="#" id="stayBtn">Stay</a>
        <a class="btn primary" href="about:blank" rel="noopener">Leave</a>
      </div>
    </section>
  </main>

  <script>
    (function(){
      const $ = (s)=>document.querySelector(s);
      const $$ = (s)=>Array.from(document.querySelectorAll(s));
      const modals = ["#modalLearn","#modalQ1","#modalQ2","#modalQ3","#modalQ4","#modalExit"].map(id=>$(id));

      function closeAll(){
        modals.forEach(m=>m.classList.add("hidden"));
      }
      function open(id){
        closeAll();
        $(id).classList.remove("hidden");
        // scroll to modal if needed
        $(id).scrollIntoView({behavior:"smooth",block:"center"});
      }

      // Door buttons
      $("#startQuizBtn").addEventListener("click",(e)=>{ e.preventDefault(); open("#modalQ1"); });
      $("#learnMoreBtn").addEventListener("click",(e)=>{ e.preventDefault(); open("#modalLearn"); });
      $("#exitBtn").addEventListener("click",(e)=>{ e.preventDefault(); open("#modalExit"); });

      // Learn more modal
      $("#lmStart").addEventListener("click",(e)=>{ e.preventDefault(); open("#modalQ1"); });
      $("#lmClose").addEventListener("click",(e)=>{ e.preventDefault(); closeAll(); });

      // Exit modal
      $("#stayBtn").addEventListener("click",(e)=>{ e.preventDefault(); closeAll(); });

      // Modal routing
      $$(".btn[data-next]").forEach(btn=>{
        btn.addEventListener("click",(e)=>{
          e.preventDefault();
          open("#"+btn.getAttribute("data-next"));
        });
      });
      $$(".btn[data-close]").forEach(btn=>{
        btn.addEventListener("click",(e)=>{ e.preventDefault(); closeAll(); });
      });

      // Finish => go to Step 1
      $("#qFinish").addEventListener("click",(e)=>{
        e.preventDefault();
        window.location.href = "/landing/archetype/";
      });

      // Safety: Escape closes
      window.addEventListener("keydown",(e)=>{
        if(e.key === "Escape") closeAll();
      });
    })();
  </script>
</body>
</html>
