<!-- TNT — /products/software/index.html  (SOFTWARE SUB-HUB · DIAMOND-OF-DIAMONDS)
     FIXES (per your screenshot + instruction):
     1) Main SOFTWARE screen is a DIAMOND with 4 internal DIAMONDS (no grid bubbles).
        - HUB PLATFORM
        - UCI
        - SCORING
        - REGISTRY
     2) Clicking a diamond opens ONE centered modal (opal/obsidian) with lenses INSIDE modal only:
        - STYLE: Formal/Informal (gd_style)
        - TIME: Concept/Live/Roadmap (gd_time = origin/now/post)
     3) Bulletins are THOROUGH: each view renders 4 sections, each with 4 bullets (dense, readable).
     4) Dual language always (EN + 中文) via gd_lang + ?lang=.
     5) Navigation consistent: BACK (/products/), EXIT (/door/), bottom dock routes with state.

     NOTE: This file intentionally removes the "grid bubbles" layout entirely.
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · SOFTWARE</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>

<style>
:root{
  --R:154px;                  /* outer radius for 4 inner diamonds */
  --gold:rgba(212,175,55,.9);
  --goldSoft:rgba(212,175,55,.35);
  --obs1:#070b12;
  --obs2:#0c1626;
  --mut:rgba(255,255,255,.84);
  --mut2:rgba(255,255,255,.68);
}

body{
  margin:0;
  min-height:100vh;
  background:
    radial-gradient(circle at 50% 40%, rgba(90,140,255,.10), transparent 60%),
    repeating-linear-gradient(45deg, rgba(255,255,255,.02) 0 1px, transparent 1px 100px),
    linear-gradient(180deg,#b00000 0%,#7a0000 60%,#550000 100%);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:#fff;
  overflow-x:hidden;
}

.btn{
  padding:10px 16px;
  border-radius:14px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  color:white;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.7);
  cursor:pointer;
  font-weight:900;
  letter-spacing:.2px;
  text-decoration:none;
}
.btn:hover{ box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px var(--goldSoft); }

.top-left{
  position:fixed;left:16px;top:16px;z-index:90;
  display:flex;gap:10px;flex-wrap:wrap;align-items:center;
}

.brand{
  position:fixed;
  left:50%;
  top:16px;
  transform:translateX(-50%);
  z-index:80;
  text-align:center;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);
  backdrop-filter:blur(8px);
}
.brand .name{ font-weight:950; letter-spacing:1.2px; font-size:12px; opacity:.95; }
.brand .tag{ font-size:11px; letter-spacing:.6px; opacity:.70; margin-top:2px; }

/* ===== DIAMOND STAGE ===== */
.stage{
  position:fixed;
  left:50%;
  top:52%;
  transform:translate(-50%,-50%);
  width:min(720px,94vw);
  height:min(720px,94vw);
  z-index:40;
}

/* Outer “one diamond” frame */
.outer{
  position:absolute;
  left:50%; top:50%;
  width:min(680px, 92vw);
  height:min(680px, 92vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:60px;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.14), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.45) 0%, rgba(7,11,18,.62) 70%);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:
    0 90px 260px rgba(0,0,0,.72),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -50px 90px rgba(0,0,0,.55);
  pointer-events:none;
  opacity:.85;
}
.outer::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:60px;
  background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 6deg, transparent 6deg 18deg);
  opacity:.16;
}

/* Inner “gem diamond” */
.d{
  width:170px;height:170px;
  position:absolute;
  left:50%;top:50%;
  transform-origin:center;
  border-radius:26px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;

  background:
    radial-gradient(circle at 35% 25%, rgba(255,255,255,.14), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.18), transparent 60%),
    linear-gradient(160deg, rgba(12,22,38,.92) 0%, rgba(7,11,18,.95) 70%);

  border:1px solid rgba(255,255,255,.10);
  box-shadow:
    0 28px 84px rgba(0,0,0,.78),
    inset 0 2px 0 rgba(255,255,255,.14),
    inset 0 -28px 44px rgba(0,0,0,.62);
  transition:transform 220ms ease, box-shadow 220ms ease, filter 220ms ease, border-color 220ms ease;
}
.d::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:26px;
  padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.45;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
  pointer-events:none;
}
.d::after{
  content:"";
  position:absolute;
  left:12%;
  right:12%;
  top:10%;
  height:28%;
  border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.16), rgba(255,255,255,0));
  opacity:.85;
  transform:rotate(-10deg);
  pointer-events:none;
}

.d:hover{
  transform:translate(-50%,-50%) rotate(45deg) scale(1.02);
  box-shadow:
    0 34px 110px rgba(0,0,0,.88),
    0 0 18px rgba(212,175,55,.18),
    inset 0 2px 0 rgba(255,255,255,.18),
    inset 0 -32px 52px rgba(0,0,0,.68);
}
.d.active{
  border-color:rgba(212,175,55,.55);
  box-shadow:
    0 34px 110px rgba(0,0,0,.88),
    0 0 30px rgba(212,175,55,.40),
    inset 0 2px 0 rgba(255,255,255,.18),
    inset 0 -32px 52px rgba(0,0,0,.68);
}

/* placement */
.d-n{ transform:translate(-50%,-50%) translate(0, calc(var(--R) * -1)) rotate(45deg); }
.d-e{ transform:translate(-50%,-50%) translate(var(--R), 0) rotate(45deg); }
.d-s{ transform:translate(-50%,-50%) translate(0, var(--R)) rotate(45deg); }
.d-w{ transform:translate(-50%,-50%) translate(calc(var(--R) * -1), 0) rotate(45deg); }

.inner{
  width:100%;
  height:100%;
  transform:rotate(-45deg);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:16px;
  gap:10px;
  pointer-events:none;
}
.lab{font-weight:950;letter-spacing:.8px;font-size:16px}
.sub{font-size:12.5px;opacity:.80;line-height:1.35;max-width:18em}

.core{
  position:absolute;
  left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:74px;height:74px;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.18);
  box-shadow:0 18px 44px rgba(0,0,0,.62), inset 0 2px 0 rgba(255,255,255,.10);
  display:grid;place-items:center;
  font-weight:950;letter-spacing:.5px;
  opacity:.92;
  pointer-events:none;
}

/* Dock */
.dock{
  position:fixed;
  left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:90;
  width:min(900px,94vw);
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.20);
  backdrop-filter:blur(8px);
}

/* Modal */
.bd{
  position:fixed;inset:0;z-index:200;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(10px);
  display:none;
}
.bd.show{display:block;}

.modal{
  position:fixed;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:min(1020px,94vw);
  max-height:88vh;
  display:none;
  z-index:210;
}
.modal.show{display:block;}

.shell{
  height:88vh;
  border-radius:26px;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 50% 18%, rgba(176,0,0,.20), transparent 55%),
    radial-gradient(circle at 40% 25%, rgba(90,140,255,.12), transparent 55%),
    linear-gradient(160deg,var(--obs2) 0%, var(--obs1) 65%);
  box-shadow:0 60px 180px rgba(0,0,0,.92);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  position:relative;
}
.shell::before{
  content:"";
  position:absolute;
  left:50%;
  top:58%;
  width:min(980px, 94vw);
  height:min(980px, 94vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:70px;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.16), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.45) 0%, rgba(7,11,18,.68) 70%);
  box-shadow:
    0 100px 280px rgba(0,0,0,.72),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -55px 100px rgba(0,0,0,.55);
  opacity:.55;
  pointer-events:none;
}

.mhead{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  padding:14px 16px;
  border-bottom:1px solid rgba(255,255,255,.08);
  position:relative;z-index:2;
}
.mtitle{ margin:0; font-weight:950; letter-spacing:.3px; font-size:16px; }
.mclose{ border:0; background:transparent; color:#fff; font-size:18px; cursor:pointer; padding:8px 10px; }

.mbody{
  padding:14px 16px 18px;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
  flex:1 1 auto;
  position:relative;z-index:2;
}

.lensbar{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:center;
  padding:10px 10px 14px;
  border-bottom:1px solid rgba(255,255,255,.08);
  margin:-6px -6px 14px;
}
.chip{
  padding:10px 16px;
  border-radius:999px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.65);
  cursor:pointer;
  font-weight:900;
  letter-spacing:.2px;
  color:#fff;
}
.chip.active{
  border-color:rgba(212,175,55,.35);
  box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 16px rgba(212,175,55,.30);
}

/* 4 modal sections (fill space) */
.mgrid{
  display:grid;
  gap:14px;
}
@media (min-width:920px){ .mgrid{ grid-template-columns:1fr 1fr; } }

.box{
  padding:16px 18px;
  border-radius:22px;
  background:
    radial-gradient(circle at 30% 30%, rgba(120,160,255,.08), transparent 55%),
    linear-gradient(145deg, rgba(12,22,38,.92), rgba(7,11,18,.95));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 18px 60px rgba(0,0,0,.70), inset 0 2px 0 rgba(255,255,255,.06);
  position:relative;
}
.box::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:22px;
  padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
  pointer-events:none;
}
.h{ margin:0 0 8px; font-weight:950; letter-spacing:.2px; }
.p{ margin:0 0 10px; color:var(--mut); line-height:1.55; }
.ul{ margin:0 0 0 18px; padding:0; color:var(--mut2); }
.ul li{ margin:6px 0; }

.mact{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:14px;
}
.sbtn{
  padding:12px 18px;
  border-radius:14px;
  background:linear-gradient(145deg,var(--obs2),var(--obs1));
  color:white;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 14px 36px rgba(0,0,0,.7);
  cursor:pointer;
  font-weight:900;
  letter-spacing:.2px;
  text-decoration:none;
}
.sbtn:hover{ box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px var(--goldSoft); }

@media (max-width:560px){
  :root{ --R: 136px; }
  .d{ width:158px; height:158px; }
  .stage{ top:54%; }
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" id="btnBack" href="/products/">BACK</a>
  <a class="btn" id="btnExit" href="/door/">EXIT</a>
</div>

<div class="brand">
  <div class="name" id="brandName">PRODUCTS</div>
  <div class="tag" id="brandTag">SOFTWARE SYSTEMS</div>
</div>

<div class="stage" id="stage">
  <div class="outer"></div>

  <div class="d d-n" id="dHub" role="button" tabindex="0">
    <div class="inner">
      <div class="lab" id="hubLab">HUB PLATFORM</div>
      <div class="sub" id="hubSub">Routing · state · recursion.</div>
    </div>
  </div>

  <div class="d d-e" id="dUci" role="button" tabindex="0">
    <div class="inner">
      <div class="lab" id="uciLab">UCI</div>
      <div class="sub" id="uciSub">ρ/TC · gates · audits.</div>
    </div>
  </div>

  <div class="d d-s" id="dScore" role="button" tabindex="0">
    <div class="inner">
      <div class="lab" id="scoreLab">SCORING</div>
      <div class="sub" id="scoreSub">Executive risk metric.</div>
    </div>
  </div>

  <div class="d d-w" id="dReg" role="button" tabindex="0">
    <div class="inner">
      <div class="lab" id="regLab">REGISTRY</div>
      <div class="sub" id="regSub">Serials · tiers · status.</div>
    </div>
  </div>

  <div class="core">◆</div>
</div>

<nav class="dock" id="dock">
  <a class="btn" id="dockHub" href="/home/">HUB</a>
  <a class="btn" id="dockTerminal" href="/index.html">TERMINAL</a>
  <a class="btn" id="dockLinks" href="/links/">LINKS</a>
  <a class="btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="btn" id="dockGauges" href="/gauges/">GAUGES</a>
</nav>

<div class="bd" id="bd"></div>

<div class="modal" id="modal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="mTitle">DETAIL</h3>
      <button class="mclose" id="mClose" aria-label="Close" type="button">✕</button>
    </div>

    <div class="mbody">
      <div class="lensbar">
        <button class="chip" id="styleChip" type="button">STYLE: FORMAL</button>
        <button class="chip" data-time="origin" id="chipConcept" type="button">CONCEPT</button>
        <button class="chip" data-time="now" id="chipLive" type="button">LIVE</button>
        <button class="chip" data-time="post" id="chipRoadmap" type="button">ROADMAP</button>
      </div>

      <div class="mgrid">
        <div class="box">
          <h4 class="h" id="h1"></h4><p class="p" id="p1"></p><ul class="ul" id="u1"></ul>
        </div>
        <div class="box">
          <h4 class="h" id="h2"></h4><p class="p" id="p2"></p><ul class="ul" id="u2"></ul>
        </div>
        <div class="box">
          <h4 class="h" id="h3"></h4><p class="p" id="p3"></p><ul class="ul" id="u3"></ul>
        </div>
        <div class="box">
          <h4 class="h" id="h4"></h4><p class="p" id="p4"></p><ul class="ul" id="u4"></ul>
        </div>
      </div>

      <div class="mact">
        <button class="sbtn" id="mReturn" type="button">RETURN</button>
        <a class="sbtn" id="mJumpHub" href="/home/">JUMP HUB</a>
        <a class="sbtn" id="mJumpProducts" href="/products/">JUMP PRODUCTS</a>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  // state + language
  var qs = new URLSearchParams(location.search);
  var qLang = qs.get("lang");
  var lang = (qLang==="zh"||qLang==="en") ? qLang : ((localStorage.getItem("gd_lang")==="zh") ? "zh" : "en");
  try{ localStorage.setItem("gd_lang", lang); }catch(e){}

  var style = localStorage.getItem("gd_style") || "formal";
  var time  = localStorage.getItem("gd_time")  || "now";
  if(time==="trajectory") time="post";
  if(["origin","now","post"].indexOf(time)<0) time="now";
  if(["formal","informal"].indexOf(style)<0) style="formal";

  function q(){ return "lang="+encodeURIComponent(lang)+"&style="+encodeURIComponent(style)+"&time="+encodeURIComponent(time); }
  function setLinks(){
    var s=q();
    document.getElementById("btnBack").href="/products/?"+s;
    document.getElementById("btnExit").href="/door/?"+s;
    document.getElementById("dockHub").href="/home/?"+s;
    document.getElementById("dockTerminal").href="/index.html?"+s;
    document.getElementById("dockLinks").href="/links/?"+s;
    document.getElementById("dockProducts").href="/products/?"+s;
    document.getElementById("dockLaws").href="/laws/?"+s;
    document.getElementById("dockGauges").href="/gauges/?"+s;
    document.getElementById("mJumpHub").href="/home/?"+s;
    document.getElementById("mJumpProducts").href="/products/?"+s;
  }
  setLinks();

  var TEXT = {
    en:{
      title:"PRODUCTS",
      tag:"SOFTWARE SYSTEMS",
      d:{
        hub:{lab:"HUB PLATFORM", sub:"Routing · state · recursion."},
        uci:{lab:"UCI", sub:"ρ/TC · gates · audits."},
        score:{lab:"SCORING", sub:"Executive risk metric."},
        reg:{lab:"REGISTRY", sub:"Serials · tiers · status."}
      },
      lens:{formal:"FORMAL", informal:"INFORMAL", concept:"CONCEPT", live:"LIVE", roadmap:"ROADMAP"},
      buttons:{return:"RETURN", jhub:"JUMP HUB", jprod:"JUMP PRODUCTS"},
      content:{
        hub:{
          origin:{formal:{
            title:"Compass Hub Platform",
            b1:{h:"What it is",p:"A traversal hub that routes the entire architecture through one stable geometry.",u:["Hub is the canonical entry.","Every move preserves gd_* state.","Modal recursion is deterministic.","Return paths never drift."]},
            b2:{h:"What it enforces",p:"A strict contract: lens change ⇒ content change (not just highlights).",u:["Text changes.","Bullets change.","Meaning changes.","Disallowed combos resolve deterministically."]},
            b3:{h:"Why it matters",p:"Traversal replaces linear reading with navigable structure that compounds context.",u:["You don’t “finish a page.”","You traverse nodes.","You preserve lenses.","You build a map."]},
            b4:{h:"How to use it",p:"Open a node, set lenses inside, read the bulletins, return cleanly.",u:["Style sets framing.","Time sets emphasis.","Content stays coherent.","Navigation stays stable."]}
          }, informal:{
            title:"Compass Hub Platform",
            b1:{h:"What it is",p:"The main hub that keeps everything reachable.",u:["One geometry.","One state system.","Clean returns.","No drift."]},
            b2:{h:"Rule",p:"If you change a lens, the content changes.",u:["Not cosmetic.","Real text flips.","Real bullets flip.","Always coherent."]},
            b3:{h:"Why",p:"Traversal is faster than scrolling.",u:["Move by meaning.","Keep orientation.","Compound understanding.","Stay calm."]},
            b4:{h:"Use",p:"Tap a node. Adjust lenses inside. Return.",u:["Open.","Adjust.","Read.","Return."]}
          }},
          now:{formal:{
            title:"Compass Hub Platform",
            b1:{h:"Live status",p:"The hub runs as a stable gateway while content expands over time.",u:["Routes work.","State propagates.","Dual language supported.","Placeholders are safe."]},
            b2:{h:"State discipline",p:"All pages consume the same canonical keys and propagate them forward.",u:["gd_lang","gd_style","gd_time","gd_depth (where applicable)"]},
            b3:{h:"Navigation discipline",p:"Each action produces a deterministic next step and preserves return paths.",u:["No broken loops.","No silent redirects.","No drifted labels.","No duplicate forks."]},
            b4:{h:"Operator intent",p:"This layer is designed to scale into a full traversal encyclopedia.",u:["More nodes.","Deeper recursion.","Registries.","Dashboards."]}
          }, informal:{
            title:"Compass Hub Platform",
            b1:{h:"Works now",p:"It’s live and consistent.",u:["Buttons work.","State sticks.","Feels smooth.","Looks aligned."]},
            b2:{h:"Keys",p:"Everything stays on gd_* keys.",u:["No random keys.","No collisions.","No drift.","Always consistent."]},
            b3:{h:"Navigation",p:"You can move anywhere and come back.",u:["Hub → anywhere.","Modal → return.","Dock → routes.","Exit works."]},
            b4:{h:"Next",p:"We expand content without changing the contract.",u:["Same geometry.","Same rules.","More depth.","More pages."]}
          }},
          post:{formal:{
            title:"Compass Hub Platform",
            b1:{h:"Roadmap",p:"The hub becomes a full traversal reference surface across domains.",u:["Domain hubs.","Sub-hubs.","Evidence bundles.","Search and filters."]},
            b2:{h:"Verification",p:"Outputs become replayable and audit-friendly by default.",u:["Hash logs.","Registry entries.","Windowed evidence.","Reason codes."]},
            b3:{h:"Enterprise",p:"The hub integrates with governance and deployment gates.",u:["HIP enforcement.","Rollback discipline.","Zone independence.","Audit latency discipline."]},
            b4:{h:"Public readiness",p:"Stable navigation plus clear content becomes safe for public use.",u:["No broken flows.","Clear lens meaning.","Consistent UI.","Predictable updates."]}
          }, informal:{
            title:"Compass Hub Platform",
            b1:{h:"Next",p:"More pages, same structure.",u:["More nodes.","More depth.","Same rules.","Same feel."]},
            b2:{h:"Proof",p:"We add stronger verification.",u:["Hashes.","Registry.","Audits.","Replay."]},
            b3:{h:"Scale",p:"We add sub-hubs by domain.",u:["Software.","Commercial.","Energy.","Education."]},
            b4:{h:"Result",p:"Traversal becomes the default way to learn this system.",u:["Faster.","Clearer.","Stable.","Coherent."]}
          }}
        },
        uci:{
          origin:{formal:{
            title:"Universal Coherence Instrument (UCI)",
            b1:{h:"What it is",p:"A universal measurement core for correlated exposure and gate compliance.",u:["ρ measures exposure.","TC measures alignment.","Δ measures acceleration.","HIP gates enforce change discipline."]},
            b2:{h:"What it standardizes",p:"One schema, one computation contract, one output bundle.",u:["Inputs are explicit.","No inference without evidence.","Windows are defined.","Missing data is handled deterministically."]},
            b3:{h:"Why it exists",p:"Correlation is the silent killer of resilient systems.",u:["Common-mode failures.","Rollout clustering.","Vendor monoculture.","Hidden dependencies."]},
            b4:{h:"What it outputs",p:"Operator-ready results and audit-ready exports.",u:["Alerts.","Scores.","Dashboards.","Hash-verifiable bundles."]}
          }, informal:{
            title:"Universal Coherence Instrument (UCI)",
            b1:{h:"What it is",p:"A way to measure correlation risk.",u:["It measures ρ.","It measures TC.","It watches drift.","It checks gates."]},
            b2:{h:"Why",p:"So things don’t break together.",u:["Catch clusters.","Reduce blast radius.","Stop drift early.","Stay safe."]},
            b3:{h:"Outputs",p:"What you can read fast.",u:["Alerts.","Scores.","Summaries.","Exports."]},
            b4:{h:"Use",p:"Send it events and read the result.",u:["Input events.","Read output.","Fix issues.","Repeat."]}
          }},
          now:{formal:{
            title:"Universal Coherence Instrument (UCI)",
            b1:{h:"Live status",p:"UCI logic is present and can be expanded per domain adapter.",u:["Same contract.","Multiple domains.","Comparable outputs.","Stable thresholds."]},
            b2:{h:"Gate alignment",p:"UCI pairs with staged deployment to suppress correlated blast radius.",u:["Wave caps.","Segmentation zones.","Rollback readiness.","Audit latency."]},
            b3:{h:"Operator value",p:"Transforms telemetry into bounded risk signals.",u:["Trend + slope.","Breaches + reasons.","Actions + priorities.","Exports + proofs."]},
            b4:{h:"Certification interface",p:"UCI outputs can drive tiering and revocation logic.",u:["Tier 0–4.","Reason codes.","Renewal windows.","Suspension triggers."]}
          }, informal:{
            title:"Universal Coherence Instrument (UCI)",
            b1:{h:"Now",p:"It gives you the signal.",u:["Risk up/down.","Gate pass/fail.","Drift trending.","What to fix."]},
            b2:{h:"Pairing",p:"Use it with staged rollouts.",u:["Small waves.","Rollback ready.","Zones independent.","Audit quick."]},
            b3:{h:"Outputs",p:"Shareable results.",u:["Export file.","Report.","Hash.","Proof."]},
            b4:{h:"Scaling",p:"Adapters plug in by domain.",u:["Water.","Energy.","HVAC.","District."]}
          }},
          post:{formal:{
            title:"Universal Coherence Instrument (UCI)",
            b1:{h:"Roadmap",p:"Domain adapter registries become public and versioned.",u:["Driver vectors defined.","Windows locked.","Sign conventions fixed.","Missing-data rules explicit."]},
            b2:{h:"Anti-gaming",p:"Red-team harnesses become mandatory for high tiers.",u:["Synthetic injections.","Divergence checks.","Reliability tests.","Audit triggers."]},
            b3:{h:"Enterprise",p:"Underwriting and governance integration expands.",u:["Insurance interfaces.","Capital impact framing.","Regulatory snapshots.","Replay windows."]},
            b4:{h:"Public",p:"Registry-backed evidence becomes lookupable and durable.",u:["Serials.","Status.","Revocations.","History."]}
          }, informal:{
            title:"Universal Coherence Instrument (UCI)",
            b1:{h:"Next",p:"More domains plug in cleanly.",u:["More adapters.","Same engine.","Same keys.","Same outputs."]},
            b2:{h:"Defense",p:"Harder to game over time.",u:["Red-team tests.","Checks.","Audits.","Proof."]},
            b3:{h:"Scale",p:"More real-world connectors.",u:["Enterprise.","Insurance.","Capital.","Regulators."]},
            b4:{h:"Public",p:"Lookup-ready.",u:["Serials.","Status.","Reasons.","History."]}
          }}
        },
        score:{
          origin:{formal:{
            title:"Risk & Correlation Scoring",
            b1:{h:"What it is",p:"A deterministic score that converts exposure + gates into an executive metric.",u:["Gate vector dominates.","Correlation penalized.","Slope penalized.","Reason codes explain outcome."]},
            b2:{h:"What it prevents",p:"Score inflation via ambiguity or micro-wave gaming.",u:["Unknown quotas.","Anti-splitting rules.","Effective zone calc.","Comparator regimes."]},
            b3:{h:"What it enables",p:"Decision compression for operators and executives.",u:["One-page summary.","Operator report.","Export bundle.","Audit trace."]},
            b4:{h:"How to use it",p:"Compute per window, publish status, remediate fails.",u:["Measure.","Score.","Publish.","Fix."]}
          }, informal:{
            title:"Risk & Correlation Scoring",
            b1:{h:"What it is",p:"A score that tells you how safe the system is.",u:["Higher = safer.","Lower = riskier.","Fail = stop.","Reasons included."]},
            b2:{h:"Why",p:"So decisions are fast and consistent.",u:["Less guessing.","Clear flags.","Clear actions.","Clear proof."]},
            b3:{h:"Outputs",p:"What you can hand to people.",u:["Score.","Reasons.","Report.","Export."]},
            b4:{h:"Use",p:"Run it regularly and act on fails.",u:["Schedule.","Review.","Fix.","Re-check."]}
          }},
          now:{formal:{
            title:"Risk & Correlation Scoring",
            b1:{h:"Live status",p:"Scoring can run over UCI outputs and gate vectors.",u:["Windowed scoring.","Hard fail overrides.","Tier recommendation.","Audit bundle export."]},
            b2:{h:"Executive framing",p:"Translates correlated exposure into governance and capital implications.",u:["Blast radius risk.","Change discipline.","Audit readiness.","Insurance relevance."]},
            b3:{h:"Operator framing",p:"Turns breaches into prioritized remediation actions.",u:["Which gate failed.","Where drift accelerates.","Where exposure clusters.","What to change first."]},
            b4:{h:"Safety discipline",p:"Scoring does not weaken standards; it reflects them.",u:["No threshold relaxation.","Freeze window honored.","Only implementation changes.","Audit required."]}
          }, informal:{
            title:"Risk & Correlation Scoring",
            b1:{h:"Now",p:"It flags the problem clearly.",u:["Pass/Fail.","Reasons.","What’s next.","Who needs to know."]},
            b2:{h:"Meaning",p:"Correlation = shared failure risk.",u:["High = dangerous.","Low = safer.","Slope up = worse.","Slope down = better."]},
            b3:{h:"Actions",p:"Fix gates before anything else.",u:["Rollback ready.","Wave caps.","Seg zones.","Audit latency."]},
            b4:{h:"Share",p:"You can export and send it.",u:["PDF summary.","CSV metrics.","Hash proof.","Reason codes."]}
          }},
          post:{formal:{
            title:"Risk & Correlation Scoring",
            b1:{h:"Roadmap",p:"Scoring integrates with portfolio and underwriting surfaces.",u:["Portfolio overlays.","Scenario sims.","Capital impact tables.","Policy hooks."]},
            b2:{h:"Stability",p:"Scoring becomes cross-checkable via dual implementations.",u:["Two engines.","Tolerance bounds.","Auto-suspension.","Audit triggers."]},
            b3:{h:"Governance",p:"Scoring is separated from tuning authority by design.",u:["Engineering != issuance.","Commercial != thresholds.","Audit != tuning.","Anti-capture enforced."]},
            b4:{h:"Public readiness",p:"Scores become registry-publishable without leaking telemetry.",u:["Public status.","Private data.","Reason codes.","Time-stamped records."]}
          }, informal:{
            title:"Risk & Correlation Scoring",
            b1:{h:"Next",p:"Portfolio view comes online.",u:["More context.","More sims.","More reports.","Same rules."]},
            b2:{h:"Harder to game",p:"We add dual checks.",u:["Two engines.","Tolerance.","Auto stops.","Audit."]},
            b3:{h:"Governance",p:"Nobody can tune it quietly.",u:["Separation.","Logs.","Time locks.","Freeze rules."]},
            b4:{h:"Public",p:"Status becomes lookupable.",u:["Tier.","Score.","Reason.","Timestamp."]}
          }}
        },
        reg:{
          origin:{formal:{
            title:"Certification Registry Layer",
            b1:{h:"What it is",p:"A serial-based lookup layer for issuance, renewal, and revocation.",u:["Serial ID.","Tier.","Status.","Scope + window."]},
            b2:{h:"What it publishes",p:"Public status without exposing sensitive telemetry.",u:["Active/suspended/revoked.","Timestamp.","Tier.","Reason codes."]},
            b3:{h:"What it enforces",p:"No silent changes and no silent revocations.",u:["Notice required.","Reason required.","Logs required.","Time locks."]},
            b4:{h:"How to use it",p:"Lookup serials; verify status; read reason codes.",u:["Search.","Verify.","Audit.","Act."]}
          }, informal:{
            title:"Certification Registry Layer",
            b1:{h:"What it is",p:"A public lookup for certificate status.",u:["Serial.","Tier.","Status.","Reason."]},
            b2:{h:"Why",p:"So claims are verifiable.",u:["No hand-waving.","No silent edits.","Clear history.","Clear proof."]},
            b3:{h:"What you see",p:"The minimum that still matters.",u:["Active/Revoked.","Date.","Tier.","Reasons."]},
            b4:{h:"Use",p:"Check status before trust.",u:["Lookup.","Verify.","Decide.","Move on."]}
          }},
          now:{formal:{
            title:"Certification Registry Layer",
            b1:{h:"Live status",p:"Registry scaffolding is ready for expansion with evidence hashes.",u:["Hash of window.","Inputs used.","Gate vector.","Score + tier."]},
            b2:{h:"Revocation discipline",p:"Automatic suspension on critical gate FAIL.",u:["Immediate suspension.","Reason codes.","Remediation window.","Re-audit required."]},
            b3:{h:"Anti-capture",p:"Registry cannot be tuned by commercial incentives.",u:["Separation of powers.","Threshold registry immutability.","Public logging.","Time locks."]},
            b4:{h:"Operator value",p:"Enables fast verification at the edge.",u:["Field checks.","Vendor checks.","Compliance checks.","Portfolio checks."]}
          }, informal:{
            title:"Certification Registry Layer",
            b1:{h:"Now",p:"It makes status checkable.",u:["Lookup works.","Status is clear.","Reasons visible.","History stable."]},
            b2:{h:"Revokes",p:"Fails aren’t hidden.",u:["Suspension triggers.","Reason codes.","Remediation steps.","Re-check."]},
            b3:{h:"Capture resistance",p:"Nobody can buy the outcome.",u:["Separation.","Logs.","Locks.","Audits."]},
            b4:{h:"Use",p:"Verify before trust.",u:["Check.","Confirm.","Decide.","Proceed."]}
          }},
          post:{formal:{
            title:"Certification Registry Layer",
            b1:{h:"Roadmap",p:"Registry gains third-party attestations and replay proof.",u:["Auditor signatures.","Replay packages.","Hash chains.","Subscription API."]},
            b2:{h:"Coverage",p:"Registry expands by domain and by system scope.",u:["Data centers.","Utilities.","Industrial systems.","Financial infrastructure."]},
            b3:{h:"Evidence durability",p:"Records become litigation-grade and tamper-evident.",u:["Immutable logs.","Time anchors.","Cross-checks.","Public revocation."]},
            b4:{h:"Public readiness",p:"Enables credible external claims without exposing internal data.",u:["Public status.","Private telemetry.","Clear rules.","Trustable outcomes."]}
          }, informal:{
            title:"Certification Registry Layer",
            b1:{h:"Next",p:"More proof layers come online.",u:["Audits.","Hash chains.","Replay.","API."]},
            b2:{h:"Coverage",p:"More domains supported.",u:["Utilities.","Finance.","Industry.","Cloud."]},
            b3:{h:"Durability",p:"Harder to dispute.",u:["Logs.","Anchors.","Cross-checks.","Public revokes."]},
            b4:{h:"Public",p:"Claims become verifiable.",u:["Status.","Tier.","Reason.","Time."]}
          }}
        }
      }
    },
    zh:{
      title:"产品",
      tag:"软件系统",
      d:{
        hub:{lab:"枢纽平台", sub:"路由 · 状态 · 递归。"},
        uci:{lab:"UCI", sub:"ρ/TC · 门控 · 审计。"},
        score:{lab:"评分", sub:"高管风险指标。"},
        reg:{lab:"登记", sub:"序列 · 分层 · 状态。"}
      },
      lens:{formal:"正式", informal:"非正式", concept:"概念", live:"上线", roadmap:"路线图"},
      buttons:{return:"返回", jhub:"跳转枢纽", jprod:"跳转产品"},
      content:{
        hub:{
          origin:{formal:{
            title:"指南针枢纽平台",
            b1:{h:"它是什么",p:"一个遍历枢纽：用一个稳定几何路由整个架构。",u:["枢纽是规范入口。","所有移动保留 gd_* 状态。","模态递归确定。","返回路径不漂移。"]},
            b2:{h:"它强制什么",p:"严格契约：透镜变 ⇒ 内容变（不是只高亮）。",u:["文本变化。","要点变化。","含义变化。","禁用组合会确定性修正。"]},
            b3:{h:"为什么重要",p:"遍历取代线性阅读：结构可叠加上下文。",u:["不是“读完”。","而是“穿行”。","透镜可保持。","地图会形成。"]},
            b4:{h:"怎么使用",p:"打开节点，在内部切透镜，读要点，干净返回。",u:["风格定框架。","时间定强调。","内容保持一致。","导航保持稳定。"]}
          }, informal:{
            title:"指南针枢纽平台",
            b1:{h:"它是什么",p:"让所有东西都可达的主枢纽。",u:["一个几何。","一个状态。","返回干净。","不漂移。"]},
            b2:{h:"规则",p:"透镜一变，内容就变。",u:["不是装饰。","是真内容变。","是真要点变。","始终一致。"]},
            b3:{h:"为什么",p:"遍历比滚动快。",u:["按含义移动。","保持方向感。","叠加理解。","更清晰。"]},
            b4:{h:"用法",p:"点节点，在气泡里切透镜，再返回。",u:["打开。","调整。","阅读。","返回。"]}
          }},
          now:{formal:{
            title:"指南针枢纽平台",
            b1:{h:"上线状态",p:"枢纽已可用：内容会增长但结构稳定。",u:["路由可用。","状态传播。","双语支持。","占位安全。"]},
            b2:{h:"状态纪律",p:"所有页面只消费并传播规范键。",u:["gd_lang","gd_style","gd_time","gd_depth（适用时）"]},
            b3:{h:"导航纪律",p:"每次动作都有确定下一步并可回退。",u:["不破环。","不暗跳。","不漂移标签。","不重复分叉。"]},
            b4:{h:"扩展意图",p:"这一层会扩展成完整遍历百科。",u:["更多节点。","更深递归。","登记。","仪表盘。"]}
          }, informal:{
            title:"指南针枢纽平台",
            b1:{h:"现在可用",p:"已上线且一致。",u:["按钮可用。","状态不丢。","很顺滑。","很对齐。"]},
            b2:{h:"键",p:"只用 gd_* 键。",u:["不乱用键。","不冲突。","不漂移。","永远一致。"]},
            b3:{h:"导航",p:"你能去任何地方并回来。",u:["枢纽→任意。","模态→返回。","Dock→路由。","退出可用。"]},
            b4:{h:"下一步",p:"扩展内容但不改契约。",u:["同几何。","同规则。","更深度。","更多页。"]}
          }},
          post:{formal:{
            title:"指南针枢纽平台",
            b1:{h:"路线图",p:"枢纽将成为跨域遍历参考面。",u:["领域枢纽。","子枢纽。","证据包。","搜索与筛选。"]},
            b2:{h:"验证",p:"输出默认可回放与可审计。",u:["哈希日志。","登记条目。","窗口证据。","原因码。"]},
            b3:{h:"企业集成",p:"与治理与发布门控融合。",u:["HIP 执行。","回滚纪律。","分区独立。","审计延迟纪律。"]},
            b4:{h:"对公众就绪",p:"稳定导航 + 清晰内容 → 可公开使用。",u:["不破流。","透镜含义清晰。","界面一致。","更新可预测。"]}
          }, informal:{
            title:"指南针枢纽平台",
            b1:{h:"下一步",p:"更多页面，同样结构。",u:["更多节点。","更深度。","同规则。","同感觉。"]},
            b2:{h:"证明",p:"更强验证层上线。",u:["哈希。","登记。","审计。","回放。"]},
            b3:{h:"规模",p:"按域增加子枢纽。",u:["软件。","商业。","能源。","教育。"]},
            b4:{h:"结果",p:"遍历成为默认学习方式。",u:["更快。","更清晰。","更稳定。","更一致。"]}
          }}
        },
        uci:{
          origin:{formal:{
            title:"通用一致性仪器（UCI）",
            b1:{h:"它是什么",p:"用于相关暴露与门控合规的通用测量核心。",u:["ρ 表示暴露。","TC 表示对齐。","Δ 表示加速度。","HIP 门控约束变更。"]},
            b2:{h:"它标准化什么",p:"一个输入格式、一个计算契约、一个输出包。",u:["输入明确。","无证据不推断。","窗口定义。","缺失数据确定性处理。"]},
            b3:{h:"它为什么存在",p:"相关性是不显眼但致命的系统风险。",u:["共因故障。","发布聚集。","单一供给。","隐藏依赖。"]},
            b4:{h:"它输出什么",p:"可操作结果 + 可审计导出。",u:["告警。","评分。","仪表盘。","哈希可验证包。"]}
          }, informal:{
            title:"通用一致性仪器（UCI）",
            b1:{h:"它是什么",p:"一种测相关风险的方法。",u:["测 ρ。","测 TC。","看漂移。","查门控。"]},
            b2:{h:"为什么",p:"避免一起坏。",u:["抓集群。","减爆炸半径。","早点止漂移。","更安全。"]},
            b3:{h:"输出",p:"你能快速读懂。",u:["告警。","评分。","摘要。","导出。"]},
            b4:{h:"用法",p:"输入事件，读结果。",u:["输入。","读取。","修复。","重复。"]}
          }},
          now:{formal:{
            title:"通用一致性仪器（UCI）",
            b1:{h:"上线状态",p:"UCI 契约已就位，可按领域适配扩展。",u:["同契约。","多领域。","可比输出。","阈值稳定。"]},
            b2:{h:"门控协同",p:"与分阶段发布一起抑制相关爆炸半径。",u:["波次上限。","分区独立。","可回滚。","审计延迟。"]},
            b3:{h:"操作价值",p:"把遥测变成有界风险信号。",u:["趋势+斜率。","越界+原因。","动作+优先级。","导出+证明。"]},
            b4:{h:"认证接口",p:"输出可驱动分层与撤销。",u:["Tier 0–4。","原因码。","续期窗口。","暂停触发。"]}
          }, informal:{
            title:"通用一致性仪器（UCI）",
            b1:{h:"现在",p:"给你信号。",u:["风险升降。","门控通过/失败。","漂移趋势。","修什么。"]},
            b2:{h:"配套",p:"搭配分阶段发布。",u:["小波次。","随时回滚。","分区独立。","审计快。"]},
            b3:{h:"输出",p:"可分享结果。",u:["导出文件。","报告。","哈希。","证明。"]},
            b4:{h:"扩展",p:"领域适配器逐步接入。",u:["水。","能源。","HVAC。","区域。"]}
          }},
          post:{formal:{
            title:"通用一致性仪器（UCI）",
            b1:{h:"路线图",p:"领域适配器登记成为公开版本库。",u:["驱动向量定义。","窗口锁定。","符号约定固定。","缺失规则明确。"]},
            b2:{h:"防作弊",p:"红队测试对高层级成为必选。",u:["注入测试。","分歧检查。","可靠性测试。","审计触发。"]},
            b3:{h:"企业",p:"承保与治理集成扩展。",u:["保险接口。","资本影响。","监管快照。","回放窗口。"]},
            b4:{h:"公开",p:"登记+证据变得可查询且耐争议。",u:["序列号。","状态。","撤销。","历史。"]}
          }, informal:{
            title:"通用一致性仪器（UCI）",
            b1:{h:"下一步",p:"更多领域干净接入。",u:["更多适配器。","同引擎。","同键。","同输出。"]},
            b2:{h:"防守",p:"更难被操纵。",u:["红队。","检查。","审计。","证明。"]},
            b3:{h:"规模",p:"更多连接器。",u:["企业。","保险。","资本。","监管。"]},
            b4:{h:"公开",p:"可查询。",u:["序列。","状态。","原因。","历史。"]}
          }}
        },
        score:{
          origin:{formal:{
            title:"风险与相关评分",
            b1:{h:"它是什么",p:"把暴露+门控转为高管指标的确定性评分。",u:["门控权重更高。","相关暴露惩罚。","斜率惩罚。","原因码解释结果。"]},
            b2:{h:"它防止什么",p:"靠模糊与切分发布来“刷分”。",u:["UNKNOWN 配额。","反拆分规则。","有效分区计算。","比较基准。"]},
            b3:{h:"它解锁什么",p:"把决策时间压缩到可执行。",u:["一页纸摘要。","操作报告。","导出包。","审计轨迹。"]},
            b4:{h:"怎么用",p:"按窗口运行，发布状态，修复失败。",u:["测量。","评分。","发布。","修复。"]}
          }, informal:{
            title:"风险与相关评分",
            b1:{h:"它是什么",p:"告诉你系统有多安全的分数。",u:["高=更安全。","低=更危险。","失败=停止。","原因=清楚。"]},
            b2:{h:"为什么",p:"让决策更快更一致。",u:["少猜。","清楚标志。","清楚动作。","清楚证明。"]},
            b3:{h:"输出",p:"能直接拿去用。",u:["分数。","原因。","报告。","导出。"]},
            b4:{h:"用法",p:"定期跑并对失败动手。",u:["排期。","复核。","修复。","再检。"]}
          }},
          now:{formal:{
            title:"风险与相关评分",
            b1:{h:"上线状态",p:"评分可运行在 UCI 输出与门控向量上。",u:["窗口评分。","硬失败覆盖。","分层推荐。","审计导出。"]},
            b2:{h:"高管框架",p:"把相关暴露变成治理与资本语言。",u:["爆炸半径风险。","变更纪律。","审计就绪。","保险相关。"]},
            b3:{h:"操作框架",p:"把越界变成优先级明确的修复动作。",u:["哪个门控失败。","哪里漂移加速。","哪里暴露聚集。","先改什么。"]},
            b4:{h:"安全纪律",p:"评分反映标准，不削弱标准。",u:["不放宽阈值。","冻结窗口。","只改实现。","审计要求。"]}
          }, informal:{
            title:"风险与相关评分",
            b1:{h:"现在",p:"清楚标出问题。",u:["通过/失败。","原因。","下一步。","通知谁。"]},
            b2:{h:"含义",p:"相关=共享故障风险。",u:["高=危险。","低=更安全。","斜率上=变坏。","斜率下=变好。"]},
            b3:{h:"动作",p:"先修门控。",u:["回滚就绪。","波次上限。","分区独立。","审计延迟。"]},
            b4:{h:"共享",p:"可导出并发送。",u:["摘要。","CSV。","哈希。","原因码。"]}
          }},
          post:{formal:{
            title:"风险与相关评分",
            b1:{h:"路线图",p:"与组合与承保视图集成。",u:["组合叠加。","情景模拟。","资本影响表。","策略钩子。"]},
            b2:{h:"稳定性",p:"双实现交叉校验避免单点错误。",u:["双引擎。","容差。","自动暂停。","审计触发。"]},
            b3:{h:"治理",p:"评分与调参权分离。",u:["工程≠颁发。","商业≠阈值。","审计≠调参。","反捕获。"]},
            b4:{h:"公开",p:"不泄露遥测也能公开发布状态。",u:["公开状态。","私有数据。","原因码。","时间锚定。"]}
          }, informal:{
            title:"风险与相关评分",
            b1:{h:"下一步",p:"组合视图上线。",u:["更多上下文。","更多模拟。","更多报告。","同规则。"]},
            b2:{h:"更难作弊",p:"加入双重校验。",u:["双引擎。","容差。","自动停止。","审计。"]},
            b3:{h:"治理",p:"没人能悄悄改标准。",u:["分权。","日志。","锁。","冻结。"]},
            b4:{h:"公开",p:"状态可查询。",u:["分层。","分数。","原因。","时间。"]}
          }}
        },
        reg:{
          origin:{formal:{
            title:"认证登记层",
            b1:{h:"它是什么",p:"基于序列号的颁发/续期/撤销查询层。",u:["序列号。","分层。","状态。","范围+窗口。"]},
            b2:{h:"它发布什么",p:"公开状态但不暴露敏感遥测。",u:["启用/暂停/撤销。","时间戳。","分层。","原因码。"]},
            b3:{h:"它强制什么",p:"不允许静默改动与静默撤销。",u:["必须通知。","必须原因。","必须日志。","时间锁。"]},
            b4:{h:"怎么用",p:"查序列→验状态→读原因。",u:["查询。","验证。","审计。","行动。"]}
          }, informal:{
            title:"认证登记层",
            b1:{h:"它是什么",p:"公开查询证书状态。",u:["序列。","分层。","状态。","原因。"]},
            b2:{h:"为什么",p:"让宣称可验证。",u:["不靠话术。","不暗改。","历史清楚。","证明清楚。"]},
            b3:{h:"你能看到",p:"最小但关键的信息。",u:["状态。","日期。","分层。","原因。"]},
            b4:{h:"用法",p:"信任前先验证。",u:["查询。","确认。","决定。","继续。"]}
          }},
          now:{formal:{
            title:"认证登记层",
            b1:{h:"上线状态",p:"登记脚手架已就位，可接入证据哈希。",u:["窗口哈希。","输入记录。","门控向量。","分数+分层。"]},
            b2:{h:"撤销纪律",p:"关键门控 FAIL 自动暂停。",u:["立即暂停。","原因码。","修复窗口。","复审要求。"]},
            b3:{h:"反捕获",p:"商业激励无法调参登记结果。",u:["分权。","阈值不可变。","公开日志。","时间锁。"]},
            b4:{h:"边缘价值",p:"让现场快速验证成为可能。",u:["外包验证。","供应商验证。","合规验证。","组合验证。"]}
          }, informal:{
            title:"认证登记层",
            b1:{h:"现在",p:"状态可查。",u:["查询可用。","状态清楚。","原因可见。","历史稳定。"]},
            b2:{h:"撤销",p:"失败不会被隐藏。",u:["暂停触发。","原因码。","修复步骤。","再检查。"]},
            b3:{h:"抗捕获",p:"没人能买结果。",u:["分权。","日志。","锁。","审计。"]},
            b4:{h:"用法",p:"信任前先验。",u:["查。","验。","定。","走。"]}
          }},
          post:{formal:{
            title:"认证登记层",
            b1:{h:"路线图",p:"登记扩展第三方证明与回放证据。",u:["审计签名。","回放包。","哈希链。","订阅 API。"]},
            b2:{h:"覆盖",p:"按域与系统范围扩展。",u:["数据中心。","公用事业。","工业系统。","金融基础设施。"]},
            b3:{h:"证据耐久",p:"记录更难被争议与篡改。",u:["不可变日志。","时间锚定。","交叉校验。","公开撤销。"]},
            b4:{h:"公开就绪",p:"可信外宣而不泄露内部数据。",u:["公开状态。","私有遥测。","清楚规则。","可信结果。"]}
          }, informal:{
            title:"认证登记层",
            b1:{h:"下一步",p:"更多证明层上线。",u:["审计。","哈希链。","回放。","API。"]},
            b2:{h:"覆盖",p:"更多领域支持。",u:["公用事业。","金融。","工业。","云。"]},
            b3:{h:"耐久",p:"更难被推翻。",u:["日志。","锚点。","校验。","公开撤销。"]},
            b4:{h:"公开",p:"宣称可验证。",u:["状态。","分层。","原因。","时间。"]}
          }}
        }
      }
    }
  };

  // Apply language UI
  var pack = TEXT[lang] || TEXT.en;
  document.documentElement.lang = (lang==="zh") ? "zh" : "en";
  document.getElementById("brandName").textContent = pack.title;
  document.getElementById("brandTag").textContent = pack.tag;

  document.getElementById("hubLab").textContent = pack.d.hub.lab;
  document.getElementById("hubSub").textContent = pack.d.hub.sub;
  document.getElementById("uciLab").textContent = pack.d.uci.lab;
  document.getElementById("uciSub").textContent = pack.d.uci.sub;
  document.getElementById("scoreLab").textContent = pack.d.score.lab;
  document.getElementById("scoreSub").textContent = pack.d.score.sub;
  document.getElementById("regLab").textContent = pack.d.reg.lab;
  document.getElementById("regSub").textContent = pack.d.reg.sub;

  document.getElementById("mReturn").textContent = pack.buttons.return;
  document.getElementById("mJumpHub").textContent = pack.buttons.jhub;
  document.getElementById("mJumpProducts").textContent = pack.buttons.jprod;

  // Lens labels
  var styleChip=document.getElementById("styleChip");
  var chipConcept=document.getElementById("chipConcept");
  var chipLive=document.getElementById("chipLive");
  var chipRoadmap=document.getElementById("chipRoadmap");

  function persist(){
    try{ localStorage.setItem("gd_style", style); localStorage.setItem("gd_time", time); }catch(e){}
  }
  function setLensLabels(){
    styleChip.textContent = "STYLE: " + (style==="formal" ? pack.lens.formal : pack.lens.informal);
    chipConcept.textContent = pack.lens.concept;
    chipLive.textContent = pack.lens.live;
    chipRoadmap.textContent = pack.lens.roadmap;
    chipConcept.classList.toggle("active", time==="origin");
    chipLive.classList.toggle("active", time==="now");
    chipRoadmap.classList.toggle("active", time==="post");
  }

  // propagate links
  function q(){ return "lang="+encodeURIComponent(lang)+"&style="+encodeURIComponent(style)+"&time="+encodeURIComponent(time); }
  function setLinks(){
    var s=q();
    document.getElementById("btnBack").href="/products/?"+s;
    document.getElementById("btnExit").href="/door/?"+s;
    document.getElementById("dockHub").href="/home/?"+s;
    document.getElementById("dockTerminal").href="/index.html?"+s;
    document.getElementById("dockLinks").href="/links/?"+s;
    document.getElementById("dockProducts").href="/products/?"+s;
    document.getElementById("dockLaws").href="/laws/?"+s;
    document.getElementById("dockGauges").href="/gauges/?"+s;
    document.getElementById("mJumpHub").href="/home/?"+s;
    document.getElementById("mJumpProducts").href="/products/?"+s;
  }
  setLinks();

  // Modal refs
  var bd=document.getElementById("bd");
  var modal=document.getElementById("modal");
  var mClose=document.getElementById("mClose");
  var mTitle=document.getElementById("mTitle");
  var activeKey=null;

  // 4 section refs
  var h1=document.getElementById("h1"),p1=document.getElementById("p1"),u1=document.getElementById("u1");
  var h2=document.getElementById("h2"),p2=document.getElementById("p2"),u2=document.getElementById("u2");
  var h3=document.getElementById("h3"),p3=document.getElementById("p3"),u3=document.getElementById("u3");
  var h4=document.getElementById("h4"),p4=document.getElementById("p4"),u4=document.getElementById("u4");

  function fill(hEl,pEl,uEl,b){
    hEl.textContent=b.h;
    pEl.textContent=b.p;
    uEl.innerHTML="";
    b.u.forEach(function(x){
      var li=document.createElement("li");
      li.textContent=x;
      uEl.appendChild(li);
    });
  }

  function render(){
    setLensLabels();
    persist();
    setLinks();

    var view = pack.content[activeKey][time][style];
    mTitle.textContent = view.title;

    fill(h1,p1,u1,view.b1);
    fill(h2,p2,u2,view.b2);
    fill(h3,p3,u3,view.b3);
    fill(h4,p4,u4,view.b4);
  }

  function setActiveDiamond(key){
    ["dHub","dUci","dScore","dReg"].forEach(function(id){
      var el=document.getElementById(id);
      if(!el) return;
      var match = (id==="dHub"&&key==="hub")||(id==="dUci"&&key==="uci")||(id==="dScore"&&key==="score")||(id==="dReg"&&key==="reg");
      el.classList.toggle("active", match);
    });
  }

  function open(key){
    activeKey=key;
    setActiveDiamond(key);
    render();
    bd.classList.add("show");
    modal.classList.add("show");
  }
  function close(){
    bd.classList.remove("show");
    modal.classList.remove("show");
    setActiveDiamond("__none__");
  }

  // Lens handlers
  styleChip.addEventListener("click", function(){
    style = (style==="formal") ? "informal" : "formal";
    render();
  });
  chipConcept.addEventListener("click", function(){ time="origin"; render(); });
  chipLive.addEventListener("click", function(){ time="now"; render(); });
  chipRoadmap.addEventListener("click", function(){ time="post"; render(); });

  // Close
  bd.addEventListener("click", close);
  mClose.addEventListener("click", close);
  document.getElementById("mReturn").addEventListener("click", close);

  // Diamond clicks
  document.getElementById("dHub").addEventListener("click", function(){ open("hub"); });
  document.getElementById("dUci").addEventListener("click", function(){ open("uci"); });
  document.getElementById("dScore").addEventListener("click", function(){ open("score"); });
  document.getElementById("dReg").addEventListener("click", function(){ open("reg"); });

  // Keyboard accessibility
  ["dHub","dUci","dScore","dReg"].forEach(function(id){
    var el=document.getElementById(id);
    el.addEventListener("keydown", function(e){
      if(e.key==="Enter"||e.key===" "){ e.preventDefault(); el.click(); }
    });
  });

  // Init labels
  setLensLabels();
})();
</script>

</body>
</html>
