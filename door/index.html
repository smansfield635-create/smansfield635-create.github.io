<!-- TNT — /door/index.html
     DOOR · INTRO (DIAMOND GATE BRIDGE) · 3 LANG (EN/中文/ES) · OPAL/PEARL PANELS
     UPGRADE (NO LENSES, NAV-ONLY STILL):
       - Adds PROBLEM block (TED-talk, high clarity, support-bounded)
       - Adds SOLUTION block (finite lattice + finite-measure posture, without overclaiming)
       - Adds "HOW WE COVER IT" block (multi-angle handling: laws/gauges/products/explore)
       - Keeps existing routes + layout; no modals/overlays/onclick; state preserved
     ROUTES:
       - PRELUDE  → /prelude/
       - COMPASS  → /index.html
       - ENTER    → /home/
       - ROOT     → /
     RULES:
       - 3 language toggle (EN/中文/ES)
       - No modals. No overlays. No inline onclick.
       - Preserves gd_* via URL + localStorage (lang/style/time/depth)
       - Uses ui.css/branch.css/instruments.js only
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DIAMOND GATE BRIDGE</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
a{color:inherit;text-decoration:none}

/* keep ui.css field overlays behind */
body{position:relative;z-index:0}
body::before, body::after{z-index:0 !important;pointer-events:none !important}
#root{position:relative;z-index:10}

/* tokens */
:root{
  --obsA:rgba(12,22,38,.95);
  --obsB:rgba(6,10,16,.98);

  --opalA:rgba(210,190,255,.18);
  --opalB:rgba(120,70,255,.14);
  --opalC:rgba(90,210,255,.10);
  --opalR:rgba(255,70,70,.12);

  --goldSoft:rgba(212,175,55,.45);
  --stroke:rgba(255,255,255,.12);
  --stroke2:rgba(255,255,255,.10);
}

/* top (no wrap) */
.top{
  position:fixed;top:16px;left:0;right:0;
  padding:0 16px;
  display:flex;align-items:center;justify-content:space-between;
  gap:12px;
  z-index:240;
  pointer-events:none;
}
.top .left,.top .right{
  display:flex;align-items:center;gap:10px;
  flex-wrap:nowrap;white-space:nowrap;
  pointer-events:auto;
}
.top .btn{white-space:nowrap}

/* page */
.page{
  width:min(1100px,94vw);
  margin:0 auto;
  padding:84px 0 26px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

/* hero (opal glass) */
.hero{
  border-radius:26px;
  border:1px solid rgba(255,255,255,.14);
  background:
    radial-gradient(circle at 20% 30%, var(--opalA), transparent 72%),
    radial-gradient(circle at 82% 66%, var(--opalB), transparent 74%),
    radial-gradient(circle at 55% 110%, var(--opalC), transparent 62%),
    radial-gradient(circle at 88% 18%, var(--opalR), transparent 62%),
    linear-gradient(160deg, rgba(0,0,0,.34), rgba(0,0,0,.16));
  backdrop-filter:blur(12px);
  box-shadow:0 34px 120px rgba(0,0,0,.55);
  padding:18px 18px 16px;
}

.k{
  margin:0 0 6px;
  font-size:11px;
  letter-spacing:4px;
  text-transform:uppercase;
  opacity:.78;
}
.h1{
  margin:0;
  font-weight:950;
  font-size:30px;
  letter-spacing:1.2px;
  line-height:1.12;
}
.p{
  margin:10px 0 0;
  font-size:14px;
  opacity:.90;
  line-height:1.5;
  max-width:980px;
}

/* rule pill (pearl edge) */
.rule{
  margin:12px 0 0;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(circle at 22% 18%, rgba(255,255,255,.08), transparent 58%),
    linear-gradient(160deg, rgba(12,22,38,.62), rgba(6,10,16,.72));
  box-shadow:
    0 14px 48px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.06);
  font-size:12.75px;
  color:rgba(255,255,255,.84);
  line-height:1.45;
}

/* entry cards (opal/pearl panels) */
.grid{
  display:grid;
  grid-template-columns:repeat(3, minmax(0,1fr));
  gap:14px;
}
@media (max-width:920px){
  .grid{grid-template-columns:1fr}
}

.card{
  position:relative;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(circle at 22% 18%, rgba(255,255,255,.12), transparent 58%),
    radial-gradient(circle at 78% 30%, var(--opalA), transparent 62%),
    radial-gradient(circle at 62% 84%, var(--opalC), transparent 72%),
    linear-gradient(160deg, rgba(12,22,38,.88), rgba(6,10,16,.92));
  box-shadow:
    0 22px 72px rgba(0,0,0,.55),
    0 0 28px rgba(212,175,55,.10),
    inset 0 2px 0 rgba(255,255,255,.08),
    inset 0 -36px 70px rgba(0,0,0,.55);
  padding:16px 16px 14px;
  overflow:hidden;
  transition:.18s ease;
}
.card::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
  pointer-events:none;
}
.card::after{
  content:"";
  position:absolute;
  left:10%;
  right:10%;
  top:10%;
  height:28%;
  border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.14), rgba(255,255,255,0));
  transform:rotate(-10deg);
  opacity:.9;
  pointer-events:none;
}
.card:hover{
  transform:translateY(-3px);
  box-shadow:
    0 36px 100px rgba(0,0,0,.72),
    0 0 34px rgba(212,175,55,.16),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -36px 70px rgba(0,0,0,.55);
}

.card .ct{
  margin:0;
  font-weight:950;
  letter-spacing:.6px;
  font-size:18px;
}
.card .cs{
  margin:8px 0 0;
  font-size:13.25px;
  line-height:1.45;
  color:rgba(255,255,255,.86);
}
.card .mini{
  margin:10px 0 0;
  font-size:12.25px;
  line-height:1.45;
  color:rgba(255,255,255,.74);
}
.card .actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
  margin-top:12px;
}
.card .actions .btn{
  border-radius:999px;
  padding:10px 14px;
}

/* how-it-works */
.band{
  padding:10px 12px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.12);
  font-weight:950;
  letter-spacing:.2px;
  color:rgba(255,255,255,.88);
}
.block{
  position:relative;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(circle at 22% 18%, rgba(255,255,255,.10), transparent 58%),
    radial-gradient(circle at 78% 30%, rgba(210,190,255,.10), transparent 62%),
    radial-gradient(circle at 86% 20%, rgba(255,70,70,.10), transparent 62%),
    linear-gradient(160deg, rgba(12,22,38,.70), rgba(6,10,16,.78));
  backdrop-filter:blur(10px);
  box-shadow:
    0 18px 60px rgba(0,0,0,.40),
    inset 0 1px 0 rgba(255,255,255,.06);
  padding:14px 14px 12px;
  overflow:hidden;
}
.block::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  padding:1px;
  background:linear-gradient(120deg, transparent 0%, rgba(212,175,55,.22) 50%, transparent 100%);
  opacity:.40;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
  pointer-events:none;
}
.block .bh{
  margin:0;
  font-weight:950;
  font-size:15.5px;
  letter-spacing:.4px;
}
.block .bp{
  margin:10px 0 0;
  font-size:13.25px;
  line-height:1.55;
  color:rgba(255,255,255,.86);
}
.block .jump{
  margin-top:10px;
  display:flex;
  justify-content:flex-end;
}

.footer{
  margin-top:8px;
  text-align:center;
  font-size:12.5px;
  opacity:.78;
}
.sig{
  margin-top:6px;
  font-size:11px;
  letter-spacing:3px;
  opacity:.65;
}
</style>
</head>

<body>
<div id="root">

  <div class="top" aria-label="Top controls">
    <div class="left">
      <a class="btn" id="btnRoot" href="/">ROOT</a>
    </div>
    <div class="right" aria-label="Language">
      <button class="btn" id="btnEN" type="button">EN</button>
      <button class="btn" id="btnZH" type="button">中文</button>
      <button class="btn" id="btnES" type="button">ES</button>
    </div>
  </div>

  <div class="page">

    <div class="hero">
      <p class="k" id="k0">DIAMOND GATE BRIDGE</p>
      <h1 class="h1" id="h0">INTRO</h1>
      <p class="p" id="p0"></p>
      <div class="rule" id="r0"></div>
    </div>

    <div class="grid" aria-label="Entry choices">
      <div class="card">
        <h2 class="ct" id="c1t">PRELUDE</h2>
        <p class="cs" id="c1s"></p>
        <p class="mini" id="c1m"></p>
        <div class="actions">
          <a class="btn" id="goPrelude" href="/prelude/">OPEN</a>
        </div>
      </div>

      <div class="card">
        <h2 class="ct" id="c2t">COMPASS</h2>
        <p class="cs" id="c2s"></p>
        <p class="mini" id="c2m"></p>
        <div class="actions">
          <a class="btn" id="goCompass" href="/index.html">OPEN</a>
        </div>
      </div>

      <div class="card">
        <h2 class="ct" id="c3t">ENTER</h2>
        <p class="cs" id="c3s"></p>
        <p class="mini" id="c3m"></p>
        <div class="actions">
          <a class="btn" id="goEnter" href="/home/">OPEN</a>
        </div>
      </div>
    </div>

    <div class="band" id="b1">HOW THIS WORKS</div>

    <div class="block">
      <div class="bh" id="bh1">The problem</div>
      <div class="bp" id="bp1"></div>
      <div class="jump">
        <a class="btn" id="jumpProductsA" href="/products/">JUMP: PRODUCTS</a>
      </div>
    </div>

    <div class="block">
      <div class="bh" id="bh2">The solution posture</div>
      <div class="bp" id="bp2"></div>
      <div class="jump">
        <a class="btn" id="jumpLawsA" href="/laws/">JUMP: LAWS</a>
      </div>
    </div>

    <div class="block">
      <div class="bh" id="bh3">Coverage from every angle</div>
      <div class="bp" id="bp3"></div>
      <div class="jump">
        <a class="btn" id="jumpGaugesA" href="/gauges/">JUMP: GAUGES</a>
      </div>
    </div>

    <div class="footer">
      <span id="f0">Orientation is the product.</span>
      <div class="sig">DIAMONDGATEBRIDGE.COM</div>
    </div>

  </div>
</div>

<script>
(function(){
  // ----- state -----
  var qs=new URLSearchParams(location.search);
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var style = qs.get("style") || localStorage.getItem("gd_style") || "formal";
  var time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  var depth = qs.get("depth") || localStorage.getItem("gd_depth") || "explore";

  if(lang!=="en" && lang!=="zh" && lang!=="es") lang="en";
  if(style!=="formal" && style!=="informal") style="formal";
  if(time==="trajectory") time="post";
  if(time!=="origin" && time!=="now" && time!=="post") time="now";
  if(depth!=="explore" && depth!=="learn") depth="explore";

  try{
    localStorage.setItem("gd_lang",lang);
    localStorage.setItem("gd_style",style);
    localStorage.setItem("gd_time",time);
    localStorage.setItem("gd_depth",depth);
  }catch(e){}

  document.documentElement.lang=(lang==="zh")?"zh":(lang==="es")?"es":"en";

  function q(){
    return "?lang="+encodeURIComponent(lang)+
           "&style="+encodeURIComponent(style)+
           "&time="+encodeURIComponent(time)+
           "&depth="+encodeURIComponent(depth);
  }

  // wire links with state
  function wire(id, path){
    var el=document.getElementById(id);
    if(el) el.href = path + q();
  }
  wire("btnRoot","/");
  wire("goPrelude","/prelude/");
  wire("goCompass","/index.html");
  wire("goEnter","/home/");
  wire("jumpProductsA","/products/");
  wire("jumpLawsA","/laws/");
  wire("jumpGaugesA","/gauges/");

  // language buttons
  var btnEN=document.getElementById("btnEN");
  var btnZH=document.getElementById("btnZH");
  var btnES=document.getElementById("btnES");

  function paintLang(){
    btnEN.classList.toggle("active", lang==="en");
    btnZH.classList.toggle("active", lang==="zh");
    btnES.classList.toggle("active", lang==="es");
  }
  paintLang();

  function setLang(next){
    if(next!=="en" && next!=="zh" && next!=="es") next="en";
    lang=next;
    try{ localStorage.setItem("gd_lang",lang); }catch(e){}
    location.href="/door/"+q();
  }
  btnEN.addEventListener("click", function(){ setLang("en"); });
  btnZH.addEventListener("click", function(){ setLang("zh"); });
  btnES.addEventListener("click", function(){ setLang("es"); });

  // i18n helper
  function T(en, zh, es){ return (lang==="zh")?zh:(lang==="es")?es:en; }

  // HERO
  document.getElementById("h0").textContent = T("INTRO","介绍","INTRO");
  document.getElementById("p0").textContent = T(
    "You’re here because something needs a real answer. Not a vibe. Not a belief. A bounded conclusion you can act on.",
    "你来这里，是因为你需要一个真实答案：不是感觉，不是信仰，而是你能执行的有界结论。",
    "Estás aquí porque algo necesita una respuesta real. No una vibra. No una creencia. Una conclusión acotada y accionable."
  );
  document.getElementById("r0").textContent = T(
    "Rule: Claim must be supported. Support must be verifiable. Navigation preserves gd_* state.",
    "规则：主张必须有支撑。支撑必须可验证。导航保留 gd_* 状态。",
    "Regla: la afirmación debe estar respaldada. El soporte debe ser verificable. La navegación preserva el estado gd_*."
  );

  // ENTRY CARDS
  document.getElementById("c1t").textContent = T("PRELUDE","前置页","PRELUDIO");
  document.getElementById("c1s").textContent = T(
    "Slow entry. Learn the posture before you traverse.",
    "慢进入：先学姿态，再开始遍历。",
    "Entrada lenta. Aprende la postura antes de recorrer."
  );
  document.getElementById("c1m").textContent = T(
    "Use this if you want an explanation-first start.",
    "想先看解释，就从这里开始。",
    "Úsalo si quieres empezar con explicación."
  );

  document.getElementById("c2t").textContent = T("COMPASS","指南针","BRÚJULA");
  document.getElementById("c2s").textContent = T(
    "Choose a direction. Then enter.",
    "先选方向，再进入。",
    "Elige una dirección. Luego entra."
  );
  document.getElementById("c2m").textContent = T(
    "Use this for structured traversal (N/E/S/W).",
    "想按结构遍历（N/E/S/W）就用这个。",
    "Úsalo para recorrido estructurado (N/E/S/O)."
  );

  document.getElementById("c3t").textContent = T("ENTER","进入","ENTRAR");
  document.getElementById("c3s").textContent = T(
    "Primary hub. Move by function.",
    "主枢纽：按功能移动。",
    "Hub principal. Muévete por función."
  );
  document.getElementById("c3m").textContent = T(
    "Use this when you already know where you’re going.",
    "已知目的地就直接进。",
    "Úsalo si ya sabes a dónde vas."
  );

  // HOW THIS WORKS blocks
  document.getElementById("b1").textContent = T("HOW THIS WORKS","如何使用","CÓMO FUNCIONA");

  document.getElementById("bh1").textContent = T("The problem","问题","El problema");
  document.getElementById("bp1").textContent = T(
    "Most real-world failures aren’t caused by lack of effort. They’re caused by drift: meanings move, scope expands silently, and small errors multiply under scale. People argue intent while the system collapses. We map this failure pattern as a finite set of repeatable classes—so you can stop guessing and start isolating what’s actually happening.",
    "多数现实失败不是不努力，而是“漂移”：含义在移动，范围悄悄变宽，小错误在规模下被放大。人们争论意图，系统却在崩塌。我们把这种失败模式映射为一组有限、可重复的类别——让你停止猜测，开始隔离“到底发生了什么”。",
    "La mayoría de fallas reales no vienen por falta de esfuerzo. Vienen por deriva: el significado se mueve, el alcance se infla en silencio y errores pequeños se multiplican al escalar. La gente discute intención mientras el sistema colapsa. Aquí lo mapeamos como un conjunto finito de clases repetibles para dejar de adivinar y aislar lo que realmente ocurre."
  );

  document.getElementById("bh2").textContent = T("The solution posture","解决姿态","Postura de solución");
  document.getElementById("bp2").textContent = T(
    "We don’t “win” by rhetoric. We win by constraints. This site treats your situation as a bounded question inside a declared scope. Then it routes you through a finite lattice of definitions, laws, and measurement surfaces. If evidence is missing, the system refuses escalation. If a claim can’t survive constraint, it stays labeled as concept or roadmap—never disguised as fact.",
    "我们不是靠话术“赢”，而是靠约束。本站把你的情况当作声明范围内的有界问题，然后把你路由进一套有限晶格：定义、法则、测量面。缺证据就拒绝升级；主张经不起约束就只保留为概念/路线图，绝不伪装成事实。",
    "No ganamos con retórica. Ganamos con restricciones. Este sitio trata tu situación como una pregunta acotada dentro de un alcance declarado, y te rutea por un lattice finito de definiciones, leyes y superficies de medición. Si falta evidencia, el sistema no escala. Si una afirmación no sobrevive la restricción, se queda etiquetada como concepto o ruta—nunca como hecho."
  );

  document.getElementById("bh3").textContent = T("Coverage from every angle","全角度覆盖","Cobertura desde todos los ángulos");
  document.getElementById("bp3").textContent = T(
    "You can enter from any angle without losing the thread. Products show what you can use. Laws define boundaries that prevent drift. Gauges expose measured signals and receipts. Explore is where we test big ideas without inflating them. The point is not to impress you. The point is to give you a clean path to the answer your situation requires—then let you move.",
    "你可以从任何角度进入而不丢线。产品页展示你能用什么；法则定义防漂移边界；量规展示可测信号与收据；探索允许大想法但不膨胀。目的不是炫耀，而是给你一条干净路径，找到你需要的答案，然后继续前进。",
    "Puedes entrar por cualquier ángulo sin perder el hilo. Productos muestra lo que puedes usar. Leyes define límites contra deriva. Medidores expone señales medidas y recibos. Explorar prueba ideas grandes sin inflarlas. El objetivo no es impresionar: es darte un camino limpio hacia la respuesta que tu situación requiere, y luego dejarte avanzar."
  );

  // Jump labels
  document.getElementById("jumpProductsA").textContent = T("JUMP: PRODUCTS","跳转：产品","SALTAR: PRODUCTOS");
  document.getElementById("jumpLawsA").textContent = T("JUMP: LAWS","跳转：法则","SALTAR: LEYES");
  document.getElementById("jumpGaugesA").textContent = T("JUMP: GAUGES","跳转：量规","SALTAR: MEDIDORES");

  document.getElementById("f0").textContent = T("Orientation is the product.","导览就是产品。","La orientación es el producto.");
})();
</script>

</body>
</html>
