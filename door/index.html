<!-- TNT — /door/index.html  (NEW LANGUAGE PAGE)
     Swap logic: /door/ becomes the first page (Language).
     After choosing language, continue routes to "/" (your new Terminal/Door page). -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>LANGUAGE · Geodiametrics</title>

  <link rel="stylesheet" href="/assets/ui.css?v=DOOR_LANG_1"/>
  <link rel="stylesheet" href="/assets/branch.css?v=DOOR_LANG_1"/>
  <script defer src="/assets/instrument.js?v=DOOR_LANG_1"></script>

  <style>
    .frame{min-height:100vh;width:100%;position:relative}

    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:86px 18px 120px;
      display:flex;
      justify-content:center;
    }
    .card{
      width:min(920px,100%);
      text-align:center;
    }

    .row{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;align-items:center}
    .label{
      opacity:.80;
      font-weight:900;
      letter-spacing:.25px;
      margin:10px 0 6px;
    }
    .note{
      opacity:.72;
      font-size:12px;
      line-height:1.35;
      margin-top:10px;
      text-align:center;
    }

    .dock{
      position:fixed;
      left:50%;
      bottom:max(12px, env(safe-area-inset-bottom));
      transform:translateX(-50%);
      z-index:90;

      width:min(860px, 94vw);
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;

      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.18);
      backdrop-filter:blur(8px);
    }
  </style>
</head>

<body>
<div class="frame">

  <div class="wrap">
    <section class="crp-card card" aria-label="Language selection">
      <header class="crp-header">
        <div class="crp-mark">GEODIAMETRICS</div>
        <h1 class="crp-title">LANGUAGE</h1>
        <p class="crp-subtitle">Choose one to continue.</p>
      </header>

      <div class="label">CANONICAL</div>
      <div class="row" aria-label="Language options">
        <button id="langEn" class="crp-btn" type="button">ENGLISH (Primary)</button>
        <button id="langZh" class="crp-btn" type="button">中文 (Canonical)</button>
      </div>

      <div class="note">
        This sets <b>gd_lang</b> and routes you to the next page (<b>/</b>).<br/>
        You can change language later from any page using the LANGUAGE button.
      </div>

      <hr class="crp-divider"/>

      <div class="label">DEFAULTS (AUTO)</div>
      <div class="row" aria-label="Defaults">
        <span class="crp-chip" style="pointer-events:none">DEPTH: EXPLORE</span>
        <span class="crp-chip" style="pointer-events:none">STYLE: FORMAL</span>
        <span class="crp-chip" style="pointer-events:none">TIME: NOW</span>
      </div>

      <footer class="crp-footer">
        <small class="crp-footnote">BUILD: <strong>DOOR_LANG_1</strong></small>
      </footer>
    </section>
  </div>

  <!-- Bottom dock: continue to "/" (your new Terminal/Door) -->
  <nav class="dock" aria-label="Continue">
    <a id="continueBtn" class="crp-btn crp-btn-primary" href="/?lang=en" role="button" style="min-width:260px;justify-content:center">
      CONTINUE
    </a>
    <a class="crp-btn" href="/" role="button">Skip (EN)</a>
  </nav>

</div>

<script>
(function(){
  "use strict";

  var K_LANG="gd_lang";
  var K_DEPTH="gd_depth";
  var K_STYLE="gd_style";
  var K_TIME="gd_time";

  function lsGet(k){ try{return localStorage.getItem(k);}catch(e){return null;} }
  function lsSet(k,v){ try{localStorage.setItem(k,v);}catch(e){} }

  // Defaults (safe)
  function ensureDefaults(){
    if(!lsGet(K_DEPTH)) lsSet(K_DEPTH,"explore");
    if(!lsGet(K_STYLE)) lsSet(K_STYLE,"formal");
    if(!lsGet(K_TIME))  lsSet(K_TIME,"now");
  }

  var lang = lsGet(K_LANG) || "en";
  if(lang !== "en" && lang !== "zh") lang = "en";

  var enBtn = document.getElementById("langEn");
  var zhBtn = document.getElementById("langZh");
  var cont  = document.getElementById("continueBtn");

  function apply(){
    // highlight
    enBtn.classList.toggle("crp-btn-primary", lang==="en");
    zhBtn.classList.toggle("crp-btn-primary", lang==="zh");

    // continue to "/" with lang query (so your "/" page can read it)
    cont.setAttribute("href","/?lang="+encodeURIComponent(lang));
    document.documentElement.setAttribute("lang", lang);
  }

  function setLang(v){
    lang = v;
    lsSet(K_LANG, lang);
    ensureDefaults();
    apply();
  }

  enBtn.addEventListener("click", function(){ setLang("en"); });
  zhBtn.addEventListener("click", function(){ setLang("zh"); });

  ensureDefaults();
  apply();
})();
</script>

</body>
</html>
