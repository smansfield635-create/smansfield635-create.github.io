<!-- TNT — /products/education/index.html
     PRODUCTS · EDUCATION
     UNIVERSAL PRODUCT MODEL (LOCKED):
       4 QUADRANTS → QUADRANT MODAL (3 DOMAINS + RETURN) → DOMAIN MODAL:
         - Tone toggle: FORMAL / INFORMAL
         - 3 bubbles: CONCEPT / LIVE / ROADMAP (tap-to-open)
     LANGUAGE:
       - EN / 中文 / ES (single-language per page via gd_lang)
     STATE:
       - URL: lang/style/time/depth
       - LS: gd_lang/gd_style/gd_time/gd_depth
     LOCKS:
       - Uses /assets/ui.css + /assets/branch.css + /assets/instruments.js
       - No html/body background overrides
       - Tap-safe (no inline onclick)
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PRODUCTS · EDUCATION</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
a{color:inherit;text-decoration:none}
:root{
  --R:150px;
  --D:184px;
  --goldSoft:rgba(212,175,55,.45);
  --obsA:rgba(12,22,38,.95);
  --obsB:rgba(6,10,16,.98);
  --mut:rgba(255,255,255,.90);
  --mut2:rgba(255,255,255,.74);
}

/* base */
body{margin:0;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
body::before,body::after{pointer-events:none!important}

/* top */
.top-left{
  position:fixed;left:16px;top:16px;z-index:140;
  display:flex;gap:10px;flex-wrap:wrap;align-items:center;
}
.top-right{
  position:fixed;right:16px;top:16px;z-index:140;
  display:flex;gap:10px;flex-wrap:nowrap;align-items:center;white-space:nowrap;
}
.top-right .btn{white-space:nowrap}

/* brand */
.brand{
  position:fixed;left:50%;top:16px;transform:translateX(-50%);
  z-index:130;text-align:center;
  padding:10px 18px;border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.18);
  pointer-events:none;
}
.brand .t{font-weight:950;font-size:40px;letter-spacing:.25px;line-height:1.05;margin:0}
.brand .s{opacity:.86;font-size:14px;margin:6px 0 0;line-height:1.25}

/* stage */
.stage{
  position:fixed;left:50%;top:56%;
  transform:translate(-50%,-50%);
  width:min(720px,94vw);
  height:min(720px,94vw);
  z-index:60;
}
.outer{
  position:absolute;left:50%;top:50%;
  width:min(680px,92vw);height:min(680px,92vw);
  transform:translate(-50%,-50%) rotate(45deg);
  border-radius:60px;opacity:.62;pointer-events:none;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,80,255,.14), transparent 60%),
    linear-gradient(160deg, rgba(14,24,40,.42) 0%, rgba(7,11,18,.58) 70%);
  box-shadow:
    0 90px 260px rgba(0,0,0,.55),
    inset 0 2px 0 rgba(255,255,255,.10),
    inset 0 -50px 90px rgba(0,0,0,.55);
}
.outer::after{
  content:"";position:absolute;inset:0;border-radius:60px;opacity:.12;pointer-events:none;
  background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 6deg, transparent 6deg 18deg);
}

/* glossy diamond */
.d{
  width:var(--D);height:var(--D);
  position:absolute;left:50%;top:50%;
  transform-origin:center;border-radius:28px;
  cursor:pointer;pointer-events:auto;touch-action:manipulation;
  -webkit-tap-highlight-color:transparent;
  background:
    radial-gradient(circle at 30% 22%, rgba(255,255,255,.55), transparent 45%),
    radial-gradient(circle at 70% 78%, rgba(0,120,255,.30), transparent 60%),
    linear-gradient(160deg, var(--obsA), var(--obsB));
  border:1px solid rgba(255,255,255,.16);
  box-shadow:
    0 38px 120px rgba(0,0,0,.85),
    0 0 32px rgba(212,175,55,.28),
    inset 0 2px 0 rgba(255,255,255,.25),
    inset 0 -42px 78px rgba(0,0,0,.80);
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
  overflow:hidden;
}
.d::before{
  content:"";position:absolute;inset:0;border-radius:28px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.65;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  pointer-events:none;
}
.d::after{
  content:"";position:absolute;left:10%;right:10%;top:10%;height:28%;
  border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.25), rgba(255,255,255,0));
  transform:rotate(-10deg);
  pointer-events:none;
}
.d:hover{
  transform:translate(-50%,-50%) rotate(45deg) scale(1.02);
  border-color:rgba(212,175,55,.35);
  box-shadow:
    0 44px 140px rgba(0,0,0,.92),
    0 0 44px rgba(212,175,55,.32),
    inset 0 2px 0 rgba(255,255,255,.28),
    inset 0 -46px 86px rgba(0,0,0,.84);
}
.d:active{transform:translate(-50%,-50%) rotate(45deg) scale(.99)}

.d-n{transform:translate(-50%,-50%) translate(0, calc(var(--R)*-1)) rotate(45deg)}
.d-e{transform:translate(-50%,-50%) translate(var(--R),0) rotate(45deg)}
.d-s{transform:translate(-50%,-50%) translate(0,var(--R)) rotate(45deg)}
.d-w{transform:translate(-50%,-50%) translate(calc(var(--R)*-1),0) rotate(45deg)}

.inner{
  transform:rotate(-45deg) translateY(-3px);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  text-align:center;height:100%;padding:14px;gap:8px;
  pointer-events:none;user-select:none;
}
.lab{font-weight:950;font-size:18px;letter-spacing:.6px;text-shadow:0 0 16px rgba(255,255,255,.14)}
.sub{font-size:13px;opacity:.88;line-height:1.25;max-width:18em}

.core{
  position:absolute;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:60px;height:60px;border-radius:18px;
  background:rgba(0,0,0,.20);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 18px 44px rgba(0,0,0,.55), inset 0 2px 0 rgba(255,255,255,.10);
  display:grid;place-items:center;
  pointer-events:none;
}

/* dock */
.dock{
  position:fixed;left:50%;
  bottom:max(12px, env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:120;width:min(980px,94vw);
  display:flex;justify-content:center;gap:10px;flex-wrap:wrap;
  padding:10px 12px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.18);
  pointer-events:none;
}
.dock .btn{pointer-events:auto}

/* overlay + modals */
.bd{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.72);backdrop-filter:blur(10px);display:none}
.bd.show{display:block}
.modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:min(1180px,96vw);height:90vh;display:none;z-index:210}
.modal.show{display:block}
.shell{height:90vh;border-radius:22px;border:1px solid rgba(255,255,255,.14);background:linear-gradient(160deg, rgba(10,18,30,.96), rgba(6,10,16,.98));overflow:hidden;display:flex;flex-direction:column}
.mhead{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
.mtitle{margin:0;font-weight:950;letter-spacing:.3px;font-size:16px}
.mclose{border:0;background:transparent;color:#fff;font-size:18px;cursor:pointer;padding:8px 10px}
.mbody{padding:16px;overflow:auto;-webkit-overflow-scrolling:touch;flex:1 1 auto}

.hint{max-width:980px;margin:0 auto 12px;padding:10px 12px;border-radius:16px;border:1px solid rgba(255,255,255,.10);background:rgba(0,0,0,.16);color:rgba(255,255,255,.80);font-size:12.5px;line-height:1.45}
.qgrid{display:grid;gap:14px;grid-template-columns:1fr}
@media (min-width:760px){.qgrid{grid-template-columns:1fr 1fr}}
.smallDiamond{
  width:100%;height:140px;position:relative;border-radius:22px;
  cursor:pointer;pointer-events:auto;touch-action:manipulation;
  background:
    radial-gradient(circle at 30% 22%, rgba(255,255,255,.50), transparent 52%),
    radial-gradient(circle at 70% 78%, rgba(0,120,255,.26), transparent 62%),
    linear-gradient(160deg, rgba(14,24,40,.96), rgba(7,11,18,.98));
  border:1px solid rgba(255,255,255,.16);
  box-shadow:0 22px 70px rgba(0,0,0,.70), inset 0 2px 0 rgba(255,255,255,.22), inset 0 -34px 60px rgba(0,0,0,.70);
}
.smallDiamond::before{
  content:"";position:absolute;inset:0;border-radius:22px;padding:1px;
  background:linear-gradient(120deg, transparent 0%, var(--goldSoft) 50%, transparent 100%);
  opacity:.55;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  pointer-events:none;
}
.sdInner{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:14px;pointer-events:none}
.sdT{font-weight:950;letter-spacing:.25px}
.sdS{font-size:12.5px;opacity:.82;margin-top:6px}

.lensbar{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:0 0 14px}
.pill{
  padding:10px 14px;border-radius:999px;
  background:linear-gradient(145deg, rgba(17,22,28,.92), rgba(11,15,20,.96));
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 14px 36px rgba(0,0,0,.65);
  cursor:pointer;font-weight:900;letter-spacing:.2px;color:#fff;user-select:none;
  -webkit-tap-highlight-color:transparent;
}
.pill.active{border-color:rgba(212,175,55,.60);box-shadow:0 18px 50px rgba(0,0,0,.9), 0 0 14px rgba(212,175,55,.22)}

.bubble{
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  background:rgba(255,255,255,.05);
  padding:14px 14px 12px;
  margin:0 0 12px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}
.bubble h4{margin:0 0 8px;font-weight:950;letter-spacing:.15px}
.bubble p{margin:0;color:var(--mut2);line-height:1.65;display:none}
.bubble.open p{display:block}

@media (max-width:560px){
  :root{--R:136px;--D:170px}
  .stage{top:54%}
}
</style>
</head>

<body>

<div class="top-left">
  <a class="btn" id="btnBack" href="/products/">BACK</a>
  <a class="btn" id="btnExit" href="/index.html">EXIT</a>
</div>

<div class="top-right" aria-label="Language">
  <button class="btn" id="btnEN" type="button">EN</button>
  <button class="btn" id="btnZH" type="button">中文</button>
  <button class="btn" id="btnES" type="button">ES</button>
</div>

<div class="brand" aria-hidden="true">
  <div class="t" id="hdrT">Education</div>
  <div class="s" id="hdrS">Programs · Language · Training · Certification</div>
</div>

<div class="stage" aria-label="Education quadrants">
  <div class="outer"></div>

  <div class="d d-n" id="qPrograms" role="button" tabindex="0"><div class="inner"><div class="lab" id="labN">PROGRAMS</div><div class="sub" id="subN">Tracks · outcomes · routines</div></div></div>
  <div class="d d-e" id="qLanguage" role="button" tabindex="0"><div class="inner"><div class="lab" id="labE">LANGUAGE</div><div class="sub" id="subE">Core 1001 · practice</div></div></div>
  <div class="d d-s" id="qTraining" role="button" tabindex="0"><div class="inner"><div class="lab" id="labS">TRAINING</div><div class="sub" id="subS">Masterclasses · reps</div></div></div>
  <div class="d d-w" id="qCertification" role="button" tabindex="0"><div class="inner"><div class="lab" id="labW">CERTIFICATION</div><div class="sub" id="subW">Evidence · tiers</div></div></div>

  <div class="core">◆</div>
</div>

<nav class="dock" aria-label="Bottom navigation">
  <a class="btn" id="dockProducts" href="/products/">PRODUCTS</a>
  <a class="btn" id="dockExplore" href="/explore/">EXPLORE</a>
  <a class="btn" id="dockLaws" href="/laws/">LAWS</a>
  <a class="btn" id="dockGauges" href="/gauges/">GAUGES</a>
</nav>

<div class="bd" id="bd"></div>

<!-- Quadrant Modal -->
<div class="modal" id="quadModal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="quadTitle">EDUCATION</h3>
      <button class="mclose" id="quadClose" aria-label="Close" type="button">✕</button>
    </div>
    <div class="mbody">
      <div class="hint" id="quadHint">Tap a domain to read Concept / Live / Roadmap. Return closes this layer.</div>
      <div class="qgrid" id="quadGrid"></div>
    </div>
  </div>
</div>

<!-- Domain Modal -->
<div class="modal" id="domainModal" role="dialog" aria-modal="true">
  <div class="shell">
    <div class="mhead">
      <h3 class="mtitle" id="domainTitle">EDUCATION · Domain</h3>
      <button class="mclose" id="domainClose" aria-label="Close" type="button">✕</button>
    </div>
    <div class="mbody">
      <div class="lensbar">
        <div class="pill active" id="toneFormal">FORMAL</div>
        <div class="pill" id="toneInformal">INFORMAL</div>
      </div>

      <div class="hint" id="domainHint">—</div>

      <div class="bubble" id="bConcept"><h4 id="hConcept">Concept</h4><p id="pConcept"></p></div>
      <div class="bubble" id="bLive"><h4 id="hLive">Live</h4><p id="pLive"></p></div>
      <div class="bubble" id="bRoadmap"><h4 id="hRoadmap">Roadmap</h4><p id="pRoadmap"></p></div>
    </div>
  </div>
</div>

<script>
(function(){
  // state
  var qs=new URLSearchParams(location.search);
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var style = qs.get("style") || localStorage.getItem("gd_style") || "formal";
  var time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  var depth = qs.get("depth") || localStorage.getItem("gd_depth") || "explore";
  if(time==="trajectory") time="post";
  if(lang!=="en" && lang!=="zh" && lang!=="es") lang="en";
  if(style!=="formal" && style!=="informal") style="formal";
  if(time!=="origin" && time!=="now" && time!=="post") time="now";
  if(depth!=="explore" && depth!=="learn") depth="explore";
  try{
    localStorage.setItem("gd_lang",lang);
    localStorage.setItem("gd_style",style);
    localStorage.setItem("gd_time",time);
    localStorage.setItem("gd_depth",depth);
  }catch(e){}
  document.documentElement.lang=(lang==="zh")?"zh":(lang==="es")?"es":"en";

  function q(){
    var p=new URLSearchParams();
    p.set("lang",lang); p.set("style",style); p.set("time",time); p.set("depth",depth);
    return "?"+p.toString();
  }

  // nav
  document.getElementById("btnBack").href="/products/"+q();
  document.getElementById("btnExit").href="/index.html"+q();
  document.getElementById("dockProducts").href="/products/"+q();
  document.getElementById("dockExplore").href="/explore/"+q();
  document.getElementById("dockLaws").href="/laws/"+q();
  document.getElementById("dockGauges").href="/gauges/"+q();

  // language buttons (stay on page)
  var btnEN=document.getElementById("btnEN");
  var btnZH=document.getElementById("btnZH");
  var btnES=document.getElementById("btnES");
  function paintLang(){
    btnEN.classList.toggle("active", lang==="en");
    btnZH.classList.toggle("active", lang==="zh");
    btnES.classList.toggle("active", lang==="es");
  }
  paintLang();
  function setLang(next){
    if(next!=="en" && next!=="zh" && next!=="es") next="en";
    lang=next;
    try{ localStorage.setItem("gd_lang",lang); }catch(e){}
    location.href="/products/education/"+q();
  }
  btnEN.addEventListener("click", function(){ setLang("en"); });
  btnZH.addEventListener("click", function(){ setLang("zh"); });
  btnES.addEventListener("click", function(){ setLang("es"); });

  // UI per language
  var UI={
    en:{
      hdrT:"Education",
      hdrS:"Programs · Language · Training · Certification",
      q:{PROGRAMS:["PROGRAMS","Tracks · outcomes · routines"],LANGUAGE:["LANGUAGE","Core 1001 · practice"],TRAINING:["TRAINING","Masterclasses · reps"],CERTIFICATION:["CERTIFICATION","Evidence · tiers"]},
      quadHint:"Tap a domain to open Concept / Live / Roadmap. Return closes this layer.",
      formal:"FORMAL", informal:"INFORMAL",
      concept:"Concept", live:"Live", roadmap:"Roadmap",
      ret:"RETURN",
      sd:"Concept · Live · Roadmap",
      hint:"Each domain binds: INPUT → CONSTRAINT → OUTPUT → PROOF HOOK → next."
    },
    zh:{
      hdrT:"教育",
      hdrS:"课程 · 语言 · 训练 · 认证",
      q:{PROGRAMS:["课程体系","路径 · 成果 · 例程"],LANGUAGE:["语言","核心1001 · 练习"],TRAINING:["训练","大师课 · 反复练"],CERTIFICATION:["认证","证据 · 分层"]},
      quadHint:"点选域展开：概念 / 上线 / 路线图。返回关闭本层。",
      formal:"正式", informal:"通俗",
      concept:"概念", live:"上线", roadmap:"路线图",
      ret:"返回",
      sd:"概念 · 上线 · 路线图",
      hint:"每个域都绑定：输入 → 约束 → 输出 → 证明钩子 → 下一步。"
    },
    es:{
      hdrT:"Educación",
      hdrS:"Programas · Lenguaje · Formación · Certificación",
      q:{PROGRAMS:["PROGRAMAS","Rutas · resultados · rutinas"],LANGUAGE:["LENGUAJE","Core 1001 · práctica"],TRAINING:["FORMACIÓN","Clases · repeticiones"],CERTIFICATION:["CERTIFICACIÓN","Evidencia · niveles"]},
      quadHint:"Toca un dominio para abrir Concepto / En vivo / Hoja de ruta. RETURN cierra esta capa.",
      formal:"FORMAL", informal:"INFORMAL",
      concept:"Concepto", live:"En vivo", roadmap:"Hoja de ruta",
      ret:"RETURN",
      sd:"Concepto · En vivo · Hoja de ruta",
      hint:"Cada dominio se ata: ENTRADA → RESTRICCIÓN → SALIDA → PRUEBA → siguiente."
    }
  };
  var T=(lang==="zh")?UI.zh:(lang==="es")?UI.es:UI.en;

  document.getElementById("hdrT").textContent=T.hdrT;
  document.getElementById("hdrS").textContent=T.hdrS;

  document.getElementById("labN").textContent=T.q.PROGRAMS[0];
  document.getElementById("subN").textContent=T.q.PROGRAMS[1];
  document.getElementById("labE").textContent=T.q.LANGUAGE[0];
  document.getElementById("subE").textContent=T.q.LANGUAGE[1];
  document.getElementById("labS").textContent=T.q.TRAINING[0];
  document.getElementById("subS").textContent=T.q.TRAINING[1];
  document.getElementById("labW").textContent=T.q.CERTIFICATION[0];
  document.getElementById("subW").textContent=T.q.CERTIFICATION[1];

  document.getElementById("quadHint").textContent=T.quadHint;
  document.getElementById("toneFormal").textContent=T.formal;
  document.getElementById("toneInformal").textContent=T.informal;
  document.getElementById("hConcept").textContent=T.concept;
  document.getElementById("hLive").textContent=T.live;
  document.getElementById("hRoadmap").textContent=T.roadmap;

  // Domains per quadrant (12 total)
  var DOM={
    PROGRAMS:["curriculum","routines","checkpoints"],
    LANGUAGE:["core1001","levels","loops"],
    TRAINING:["masterclass","trainer","rubrics"],
    CERTIFICATION:["evidence","tiers","integrity"]
  };

  // Domain metadata (depth/gravity) in 3 languages
  var META={
    curriculum:{
      en:{name:"Curriculum Map",input:"learner goals + time budget",constraint:"stable taxonomy + outcomes locked",output:"traversal map + checkpoints",proof:"pass-rate by node + 30-day recall"},
      zh:{name:"课程地图",input:"目标 + 时间预算",constraint:"分类稳定 + 成果锁定",output:"遍历地图 + 检查点",proof:"节点通过率 + 30天回忆"},
      es:{name:"Mapa Curricular",input:"metas + tiempo",constraint:"taxonomía estable + resultados fijos",output:"mapa + checkpoints",proof:"tasa de paso + recuerdo 30 días"}
    },
    routines:{
      en:{name:"Daily Routines",input:"minutes/day + weak points",constraint:"bounded loops (no overload)",output:"repeatable drills",proof:"error variance decreases per week"},
      zh:{name:"每日例程",input:"每日分钟 + 薄弱点",constraint:"有界循环（不超载）",output:"可重复训练",proof:"错误方差周周下降"},
      es:{name:"Rutinas Diarias",input:"minutos/día + puntos débiles",constraint:"bucles acotados",output:"drills repetibles",proof:"varianza de error baja semanalmente"}
    },
    checkpoints:{
      en:{name:"Checkpoints",input:"attempt outputs",constraint:"pass/fail thresholds",output:"admissible mastery signal",proof:"independent scorer agreement"},
      zh:{name:"检查点",input:"输出尝试",constraint:"通过/失败阈值",output:"可采信掌握信号",proof:"独立评分一致"},
      es:{name:"Checkpoints",input:"salidas",constraint:"umbral pasa/falla",output:"señal de dominio",proof:"acuerdo entre evaluadores"}
    },
    core1001:{
      en:{name:"Core 1001",input:"high-frequency vocabulary",constraint:"fixed set + minimal grammar",output:"functional speech baseline",proof:"comprehension + production tests"},
      zh:{name:"核心1001词",input:"高频词汇",constraint:"集合固定 + 极简语法",output:"功能表达基线",proof:"理解+输出测试"},
      es:{name:"Core 1001",input:"vocabulario frecuente",constraint:"set fijo + gramática mínima",output:"base funcional",proof:"pruebas de comprensión y producción"}
    },
    levels:{
      en:{name:"Four Levels",input:"placement evidence",constraint:"band definitions do not drift",output:"level routing",proof:"time-to-competence bands"},
      zh:{name:"四级结构",input:"分级证据",constraint:"等级定义不漂移",output:"分级路由",proof:"达标时间带宽"},
      es:{name:"Cuatro Niveles",input:"evidencia de nivel",constraint:"definiciones no derivan",output:"ruta por nivel",proof:"bandas de tiempo a competencia"}
    },
    loops:{
      en:{name:"Practice Loops",input:"prompt + response",constraint:"short cycles, measurable",output:"automaticity",proof:"speed + accuracy trend"},
      zh:{name:"练习循环",input:"提示+回应",constraint:"短循环可测",output:"自动化",proof:"速度+准确趋势"},
      es:{name:"Bucles de Práctica",input:"prompt + respuesta",constraint:"ciclos cortos medibles",output:"automaticidad",proof:"tendencia velocidad + precisión"}
    },
    masterclass:{
      en:{name:"Masterclasses",input:"cohort baseline",constraint:"same rubric for all",output:"skills uplift",proof:"pre/post delta by checkpoint"},
      zh:{name:"大师课",input:"群体基线",constraint:"同一评分规",output:"能力提升",proof:"检查点前后Δ"},
      es:{name:"Masterclasses",input:"línea base cohort",constraint:"misma rúbrica",output:"mejora",proof:"delta pre/post por checkpoint"}
    },
    trainer:{
      en:{name:"Train the Trainer",input:"facilitator candidates",constraint:"delivery scripts + audits",output:"replicable instruction",proof:"inter-rater consistency"},
      zh:{name:"培训讲师",input:"讲师候选",constraint:"脚本+审计",output:"可复制教学",proof:"评分一致性"},
      es:{name:"Formar Formadores",input:"candidatos",constraint:"guiones + auditoría",output:"enseñanza replicable",proof:"consistencia entre evaluadores"}
    },
    rubrics:{
      en:{name:"Rubrics",input:"observable outputs",constraint:"observer-invariant scoring",output:"reason-coded grade",proof:"same evidence → same score"},
      zh:{name:"评分规",input:"可观察输出",constraint:"观察者不变评分",output:"带原因码成绩",proof:"同证据→同分"},
      es:{name:"Rúbricas",input:"salidas observables",constraint:"puntuación invariante",output:"nota con razones",proof:"misma evidencia → misma nota"}
    },
    evidence:{
      en:{name:"Evidence Verification",input:"receipts + outputs",constraint:"no self-report upgrades",output:"verifiable status",proof:"audit bundle + hash"},
      zh:{name:"证据验证",input:"收据+输出",constraint:"不靠自述升级",output:"可核查状态",proof:"审计包+哈希"},
      es:{name:"Verificación",input:"recibos + salidas",constraint:"sin auto-reporte",output:"estado verificable",proof:"paquete de auditoría + hash"}
    },
    tiers:{
      en:{name:"Tier System",input:"checkpoint history",constraint:"tier requires renewals",output:"capability bands",proof:"tier change reason codes"},
      zh:{name:"分层体系",input:"检查点历史",constraint:"分层需续期",output:"能力带宽",proof:"分层变更原因码"},
      es:{name:"Sistema de Niveles",input:"historial",constraint:"renovación requerida",output:"bandas de capacidad",proof:"códigos de razón por cambio"}
    },
    integrity:{
      en:{name:"Integrity Discipline",input:"attempt patterns",constraint:"anti-gaming rules",output:"trustable outcomes",proof:"exception logs + fail triggers"},
      zh:{name:"防作弊纪律",input:"尝试模式",constraint:"反作弊规则",output:"可信结果",proof:"例外日志+失败触发"},
      es:{name:"Integridad",input:"patrones",constraint:"anti-trampa",output:"resultados confiables",proof:"logs de excepción + disparadores"}
    }
  };

  function m(domain){
    return (lang==="zh")?META[domain].zh:(lang==="es")?META[domain].es:META[domain].en;
  }

  function compose(domain, tone, phase){
    var X=m(domain);

    if(lang==="zh"){
      if(tone==="formal"){
        if(phase==="concept"){
          return "输入："+X.input+"。约束："+X.constraint+"。输出："+X.output+"。证明钩子："+X.proof+"。本域的目标是把学习从“感觉懂了”变成“在约束下可复现的输出”。";
        }
        if(phase==="live"){
          return "当前执行以可观测为权威：每次练习产生可评分输出，评分使用统一规则并记录原因码。若输出未达阈值，则不能升级掌握状态；需要回到训练循环再试。";
        }
        return "路线图按门控扩展：增加域包与双语一致性，但不改变分类与阈值。扩展只发生在证据可回放、评分可复核、差异可解释的前提下。";
      }else{
        if(phase==="concept"){
          return "这不是“看懂就算”。你得做出输出，而且别人也能用同一套标准判定你是否达标。";
        }
        if(phase==="live"){
          return "现在的玩法很直接：做练习→交输出→看结果。过了就前进，不过就回去补强。";
        }
        return "以后会更丰富：更多场景包、更多路径，但规则不乱改，你永远知道自己在哪、差什么。";
      }
    }

    if(lang==="es"){
      if(tone==="formal"){
        if(phase==="concept"){
          return "Entrada: "+X.input+". Restricción: "+X.constraint+". Salida: "+X.output+". Prueba: "+X.proof+". El objetivo es convertir aprendizaje en salida reproducible bajo restricción.";
        }
        if(phase==="live"){
          return "En vivo manda lo observable: cada intento produce una salida puntuable, con reglas y códigos de razón. Sin umbral, no hay ascenso; se regresa al bucle y se reintenta.";
        }
        return "Hoja de ruta con compuertas: más packs y bilingüismo consistente sin cambiar taxonomía ni umbrales. Se escala solo si la evidencia es re-jugable y la puntuación es audit-able.";
      }else{
        if(phase==="concept"){
          return "No basta con “entender”. Tienes que producir algo que otra persona pueda verificar con la misma regla.";
        }
        if(phase==="live"){
          return "Hoy es simple: practica → entrega → recibe resultado. Si no pasa, vuelves al bucle. Si pasa, avanzas.";
        }
        return "Luego se vuelve más grande sin volverse confuso: más packs, misma estructura, mismas reglas.";
      }
    }

    // en
    if(tone==="formal"){
      if(phase==="concept"){
        return "Input: "+X.input+". Constraint: "+X.constraint+". Output: "+X.output+". Proof hook: "+X.proof+". The objective is reproducible output under constraint, not self-reported understanding.";
      }
      if(phase==="live"){
        return "Live posture is observable-first: each attempt yields a scorable output with reason codes. If thresholds are not met, mastery cannot upgrade; the learner returns to the loop and retries under the same rubric.";
      }
      return "Roadmap scales by gates: add packs and multilingual parity without changing taxonomy or thresholds. Expansion occurs only when evidence is replayable, scoring is audit-ready, and disagreements are explainable.";
    }else{
      if(phase==="concept"){
        return "This isn’t “I read it so I know it.” You produce an output, and anyone can verify it with the same rule.";
      }
      if(phase==="live"){
        return "Right now it’s simple: practice → submit → get a result. If you fail, you loop. If you pass, you move on.";
      }
      return "Next gets bigger without getting messy: more packs, more paths, but the rules don’t shift under your feet.";
    }
  }

  // refs
  var bd=document.getElementById("bd");
  var quadModal=document.getElementById("quadModal");
  var domainModal=document.getElementById("domainModal");
  var quadClose=document.getElementById("quadClose");
  var domainClose=document.getElementById("domainClose");
  var quadTitle=document.getElementById("quadTitle");
  var quadGrid=document.getElementById("quadGrid");
  var domainTitle=document.getElementById("domainTitle");
  var toneFormal=document.getElementById("toneFormal");
  var toneInformal=document.getElementById("toneInformal");
  var bConcept=document.getElementById("bConcept");
  var bLive=document.getElementById("bLive");
  var bRoadmap=document.getElementById("bRoadmap");
  var pConcept=document.getElementById("pConcept");
  var pLive=document.getElementById("pLive");
  var pRoadmap=document.getElementById("pRoadmap");
  var domainHint=document.getElementById("domainHint");

  var currentQuad=null;
  var currentDomain=null;
  var tone="formal";

  function showBD(){bd.classList.add("show")}
  function hideBD(){bd.classList.remove("show")}
  function closeAll(){quadModal.classList.remove("show");domainModal.classList.remove("show");hideBD()}

  function openQuad(qname){
    currentQuad=qname;
    quadTitle.textContent = (lang==="zh")?("教育 · "+T.q[qname][0]):(lang==="es")?("EDUCACIÓN · "+T.q[qname][0]):("EDUCATION · "+T.q[qname][0]);
    quadGrid.innerHTML="";

    var ids=DOM[qname]||[];
    ids.forEach(function(id){
      var X=m(id);
      var tile=document.createElement("div");
      tile.className="smallDiamond";
      tile.setAttribute("role","button");
      tile.tabIndex=0;
      tile.innerHTML='<div class="sdInner"><div class="sdT">'+X.name+'</div><div class="sdS">'+T.sd+'</div></div>';
      function act(){ openDomain(id); }
      tile.addEventListener("click", act);
      tile.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); act(); }});
      quadGrid.appendChild(tile);
    });

    var ret=document.createElement("div");
    ret.className="smallDiamond";
    ret.setAttribute("role","button");
    ret.tabIndex=0;
    ret.innerHTML='<div class="sdInner"><div class="sdT">'+T.ret+'</div><div class="sdS">—</div></div>';
    function r(){ closeAll(); }
    ret.addEventListener("click", r);
    ret.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); r(); }});
    quadGrid.appendChild(ret);

    showBD(); quadModal.classList.add("show");
    domainModal.classList.remove("show");
  }

  function openDomain(id){
    currentDomain=id;
    var X=m(id);
    domainTitle.textContent = (lang==="zh")?("教育 · "+X.name):(lang==="es")?("EDUCACIÓN · "+X.name):("EDUCATION · "+X.name);

    // reset bubbles
    [bConcept,bLive,bRoadmap].forEach(function(b){ b.classList.remove("open"); });

    quadModal.classList.remove("show");
    showBD(); domainModal.classList.add("show");
    applyTone(tone);

    domainHint.textContent = T.hint + "  |  " +
      ((lang==="zh")?("输入："+X.input+"；约束："+X.constraint+"；输出："+X.output+"；证明："+X.proof)
      :(lang==="es")?("Entrada: "+X.input+"; Restricción: "+X.constraint+"; Salida: "+X.output+"; Prueba: "+X.proof)
      :("Input: "+X.input+"; Constraint: "+X.constraint+"; Output: "+X.output+"; Proof: "+X.proof));
  }

  function applyTone(t){
    tone=t;
    toneFormal.classList.toggle("active", tone==="formal");
    toneInformal.classList.toggle("active", tone==="informal");
    pConcept.textContent = compose(currentDomain, tone, "concept");
    pLive.textContent    = compose(currentDomain, tone, "live");
    pRoadmap.textContent = compose(currentDomain, tone, "roadmap");
  }

  function bindBubble(box){
    box.tabIndex=0; box.setAttribute("role","button");
    box.addEventListener("click", function(){ box.classList.toggle("open"); });
    box.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); box.classList.toggle("open"); }});
  }
  bindBubble(bConcept); bindBubble(bLive); bindBubble(bRoadmap);

  // close wiring
  quadClose.addEventListener("click", closeAll);
  domainClose.addEventListener("click", closeAll);
  bd.addEventListener("click", closeAll);
  quadModal.addEventListener("click", function(e){ e.stopPropagation(); });
  domainModal.addEventListener("click", function(e){ e.stopPropagation(); });

  toneFormal.addEventListener("click", function(){ applyTone("formal"); });
  toneInformal.addEventListener("click", function(){ applyTone("informal"); });

  function bindQuad(elId, quad){
    var el=document.getElementById(elId);
    function act(){ openQuad(quad); }
    el.addEventListener("click", act);
    el.addEventListener("keydown", function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); act(); }});
  }
  bindQuad("qPrograms","PROGRAMS");
  bindQuad("qLanguage","LANGUAGE");
  bindQuad("qTraining","TRAINING");
  bindQuad("qCertification","CERTIFICATION");

})();
</script>

</body>
</html>
