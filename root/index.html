<!-- TNT — /root/index.html
     ROOT · TRILINGUAL (EN/中文/ES) · BIGGER PRINT · CLEAN RETURN PAGE
     PURPOSE:
       - Minimal, stable return page that never “acts like the compass.”
       - Routes to Door / Prelude / Compass / Home.
     NOTE:
       - If you do NOT want /root/, set ROUTE.root in /door/ to "/".
-->

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ROOT</title>

<link rel="stylesheet" href="/assets/ui.css"/>
<link rel="stylesheet" href="/assets/branch.css"/>
<script defer src="/assets/instruments.js"></script>

<style>
a{color:inherit;text-decoration:none}
body{margin:0;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
body::before,body::after{pointer-events:none!important}

:root{
  --dockH:88px;
  --opalA:rgba(210,190,255,.14);
  --opalB:rgba(120,70,255,.10);
  --opalC:rgba(255,80,80,.08);
  --stroke:rgba(255,255,255,.12);
  --txt:rgba(255,255,255,.90);
  --mut:rgba(255,255,255,.78);
}

.top{
  position:sticky; top:0; z-index:240;
  padding:10px 0 8px;
  display:flex; justify-content:space-between; gap:12px;
}
.top .left,.top .right{
  display:flex; gap:10px; align-items:center;
  flex-wrap:nowrap; white-space:nowrap;
}

.page{
  width:min(1000px,94vw);
  margin:0 auto;
  padding:14px 0 calc(var(--dockH) + 18px);
  display:flex; flex-direction:column; gap:14px;
}

.header{
  border:1px solid var(--stroke);
  border-radius:22px;
  background:
    radial-gradient(circle at 22% 18%, var(--opalA), transparent 62%),
    radial-gradient(circle at 78% 30%, var(--opalB), transparent 66%),
    radial-gradient(circle at 62% 92%, var(--opalC), transparent 64%),
    rgba(0,0,0,.14);
  backdrop-filter:blur(10px);
  box-shadow:0 24px 80px rgba(0,0,0,.55);
  padding:16px 18px;
  text-align:center;
}
.h1{margin:0;font-weight:950;font-size:34px;letter-spacing:1px}
.p{margin:12px 0 0;font-size:15px;line-height:1.6;color:var(--txt)}
.fine{margin-top:10px;font-size:13px;opacity:.75;line-height:1.5;color:var(--mut)}

.grid{display:grid;grid-template-columns:1fr;gap:12px}
.card{
  border:1px solid rgba(255,255,255,.10);
  border-radius:22px;
  background:linear-gradient(145deg, rgba(17,22,28,.86), rgba(11,15,20,.92));
  box-shadow:0 16px 52px rgba(0,0,0,.60);
  padding:16px 16px 14px;
}
.card h2{margin:0;font-weight:950;font-size:18px;letter-spacing:.2px}
.card p{margin:10px 0 0;color:rgba(255,255,255,.80);line-height:1.6;font-size:14px}
.actions{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
.actions .btn{padding:10px 14px;border-radius:999px}
</style>
</head>

<body>

<div class="page">
  <div class="top">
    <div class="left">
      <a class="btn" id="btnDoor" href="/door/">DOOR</a>
      <a class="btn" id="btnPrelude" href="/prelude/">PRELUDE</a>
      <a class="btn" id="btnCompass" href="/index.html">COMPASS</a>
    </div>
    <div class="right" aria-label="Language">
      <button class="btn" id="btnEN" type="button">EN</button>
      <button class="btn" id="btnZH" type="button">中文</button>
      <button class="btn" id="btnES" type="button">ES</button>
    </div>
  </div>

  <div class="header">
    <h1 class="h1" id="ttl">ROOT</h1>
    <p class="p" id="tag"></p>
    <div class="fine" id="fine"></div>
  </div>

  <div class="grid">
    <div class="card">
      <h2 id="h1">DOOR</h2>
      <p id="p1"></p>
      <div class="actions"><a class="btn" id="goDoor" href="/door/">OPEN</a></div>
    </div>
    <div class="card">
      <h2 id="h2">PRELUDE</h2>
      <p id="p2"></p>
      <div class="actions"><a class="btn" id="goPrelude" href="/prelude/">OPEN</a></div>
    </div>
    <div class="card">
      <h2 id="h3">COMPASS</h2>
      <p id="p3"></p>
      <div class="actions"><a class="btn" id="goCompass" href="/index.html">OPEN</a></div>
    </div>
    <div class="card">
      <h2 id="h4">HOME</h2>
      <p id="p4"></p>
      <div class="actions"><a class="btn" id="goHome" href="/home/">OPEN</a></div>
    </div>
  </div>
</div>

<script>
(function(){
  var qs=new URLSearchParams(location.search);
  var lang  = qs.get("lang")  || localStorage.getItem("gd_lang")  || "en";
  var style = qs.get("style") || localStorage.getItem("gd_style") || "informal";
  var time  = qs.get("time")  || localStorage.getItem("gd_time")  || "now";
  var depth = qs.get("depth") || localStorage.getItem("gd_depth") || "explore";

  if(lang!=="en"&&lang!=="zh"&&lang!=="es") lang="en";
  if(style!=="formal"&&style!=="informal") style="informal";
  if(time==="trajectory") time="post";
  if(time!=="origin"&&time!=="now"&&time!=="post") time="now";
  if(depth!=="explore"&&depth!=="learn") depth="explore";

  try{
    localStorage.setItem("gd_lang",lang);
    localStorage.setItem("gd_style",style);
    localStorage.setItem("gd_time",time);
    localStorage.setItem("gd_depth",depth);
  }catch(e){}

  function q(over){
    var L=(over&&over.lang)?over.lang:lang;
    var S=(over&&over.style)?over.style:style;
    var T=(over&&over.time)?over.time:time;
    var D=(over&&over.depth)?over.depth:depth;
    return "?lang="+encodeURIComponent(L)+"&style="+encodeURIComponent(S)+"&time="+encodeURIComponent(T)+"&depth="+encodeURIComponent(D);
  }
  function wire(id,path){ var el=document.getElementById(id); if(el) el.href=path+q(); }

  wire("btnDoor","/door/");
  wire("btnPrelude","/prelude/");
  wire("btnCompass","/index.html");
  wire("goDoor","/door/");
  wire("goPrelude","/prelude/");
  wire("goCompass","/index.html");
  wire("goHome","/home/");

  var btnEN=document.getElementById("btnEN");
  var btnZH=document.getElementById("btnZH");
  var btnES=document.getElementById("btnES");
  function paintLang(){
    btnEN.classList.toggle("active", lang==="en");
    btnZH.classList.toggle("active", lang==="zh");
    btnES.classList.toggle("active", lang==="es");
  }
  paintLang();
  function setLang(next){
    if(next!=="en"&&next!=="zh"&&next!=="es") next="en";
    lang=next;
    try{ localStorage.setItem("gd_lang",lang); }catch(e){}
    window.location.href = window.location.pathname + q({lang:lang});
  }
  btnEN.addEventListener("click", function(){ setLang("en"); });
  btnZH.addEventListener("click", function(){ setLang("zh"); });
  btnES.addEventListener("click", function(){ setLang("es"); });

  function T(en,zh,es){ return (lang==="zh")?zh:(lang==="es")?es:en; }

  document.getElementById("ttl").textContent=T("ROOT","根","RAÍZ");
  document.getElementById("tag").textContent=T(
    "Minimal return page. Choose where to enter.",
    "最小返回页：选择从哪里进入。",
    "Página mínima de retorno. Elige por dónde entrar."
  );
  document.getElementById("fine").textContent=T(
    "This page does not try to be the compass. It routes cleanly.",
    "本页不试图当指南针，只负责干净路由。",
    "Esta página no intenta ser brújula. Enruta limpio."
  );

  document.getElementById("h1").textContent=T("DOOR","门","PUERTA");
  document.getElementById("p1").textContent=T("Intro + posture. Frontier with receipts.", "介绍+姿态：前沿但有收据。", "Intro + postura. Frontera con recibos.");
  document.getElementById("h2").textContent=T("PRELUDE","前置页","PRELUDIO");
  document.getElementById("p2").textContent=T("The ramp. Names the problem and the lattice.", "坡道：讲清问题与晶格。", "La rampa. Nombra el problema y el lattice.");
  document.getElementById("h3").textContent=T("COMPASS","指南针","BRÚJULA");
  document.getElementById("p3").textContent=T("Directional traversal.", "方向遍历。", "Recorrido direccional.");
  document.getElementById("h4").textContent=T("HOME","主页","INICIO");
  document.getElementById("p4").textContent=T("Launchpad of surfaces.", "执行面发射台。", "Lanzadera de superficies.");

  var open=T("OPEN","打开","ABRIR");
  document.querySelectorAll(".actions .btn").forEach(function(b){ b.textContent=open; });
})();
</script>

</body>
</html>
