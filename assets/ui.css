/* TNT: assets/branch.css (FULL REPLACEMENT, SAFE SCOPE FIX)
   GOAL: KEEP BRANCH “DIAMOND STAGE” THEME, BUT STOP IT FROM AFFECTING OTHER PAGES’ .diamond TILES
   CHANGE: SCOPE ALL BRANCH DIAMOND RULES UNDER .diamond-stage ONLY
*/
.diamond-stage{position:relative;width:420px;height:420px;margin:0 auto}

/* MAIN PLATE (SCOPED) */
.diamond-stage>.diamond{
  position:absolute;
  width:100%;
  height:100%;
  transform:rotate(45deg);
  border-radius:22px;
  background:rgba(255,255,255,0.045);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.14),
    inset 0 18px 30px rgba(255,255,255,0.03),
    inset 0 -28px 40px rgba(0,0,0,0.28),
    0 22px 60px rgba(0,0,0,0.60);
  backdrop-filter:blur(10px);
}

.diamond-stage>.diamond::before{
  content:"";
  position:absolute;
  inset:10px;
  border-radius:18px;
  background:rgba(255,255,255,0.03);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.10),
    inset 0 10px 16px rgba(255,255,255,0.02),
    inset 0 -18px 26px rgba(0,0,0,0.22);
  pointer-events:none;
}

/* MINI DIAMONDS (SCOPED) */
.diamond-stage .mini-diamond{
  position:absolute;
  width:46%;
  height:46%;
  transform:rotate(45deg);
  border-radius:18px;
  background:rgba(255,255,255,0.07);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.16),
    inset 0 14px 20px rgba(255,255,255,0.03),
    inset 0 -22px 30px rgba(0,0,0,0.26),
    0 14px 34px rgba(0,0,0,0.60);
  display:flex;
  align-items:center;
  justify-content:center;
  backdrop-filter:blur(10px);
  transition:filter 0.15s ease, transform 0.15s ease, box-shadow 0.15s ease;

  -webkit-mask-image:
    radial-gradient(18px 18px at 0% 0%, rgba(0,0,0,0) 70%, rgba(0,0,0,1) 72%),
    radial-gradient(18px 18px at 100% 0%, rgba(0,0,0,0) 70%, rgba(0,0,0,1) 72%),
    radial-gradient(18px 18px at 0% 100%, rgba(0,0,0,0) 70%, rgba(0,0,0,1) 72%),
    radial-gradient(18px 18px at 100% 100%, rgba(0,0,0,0) 70%, rgba(0,0,0,1) 72%),
    linear-gradient(#000,#000);
  -webkit-mask-composite:source-over;
  -webkit-mask-repeat:no-repeat;
  -webkit-mask-size:100% 100%;
  mask-image:
    radial-gradient(18px 18px at 0% 0%, rgba(0,0,0,0) 70%, rgba(0,0,0,1) 72%),
    radial-gradient(18px 18px at 100% 0%, rgba(0,0,0,0) 70%, rgba(0,0,0,1) 72%),
    radial-gradient(18px 18px at 0% 100%, rgba(0,0,0,0) 70%, rgba(0,0,0,1) 72%),
    radial-gradient(18px 18px at 100% 100%, rgba(0,0,0,0) 70%, rgba(0,0,0,1) 72%),
    linear-gradient(#000,#000);
  mask-repeat:no-repeat;
  mask-size:100% 100%;
}

.diamond-stage .mini-diamond:hover{filter:brightness(1.05)}
.diamond-stage .mini-diamond:active{filter:brightness(1.08);transform:rotate(45deg) translateY(1px)}

.diamond-stage .mini-diamond span{
  transform:rotate(-45deg);
  font-size:22px;
  font-weight:900;
  letter-spacing:0.04em;
  pointer-events:none;
  color:rgba(233,241,244,0.95);
  text-shadow:0 2px 14px rgba(0,0,0,0.55);
}

/* POSITIONING — NO OVERLAP (SCOPED) */
.diamond-stage .mini-top{top:2%;left:27%}
.diamond-stage .mini-right{top:27%;right:2%}
.diamond-stage .mini-bottom{bottom:2%;left:27%}
.diamond-stage .mini-left{top:27%;left:2%}

/* COLOR ACCENTS (SCOPED) */
.diamond-stage .mini-diamond.c-blue{
  box-shadow:
    inset 0 0 0 1px rgba(120,190,255,0.30),
    inset 0 14px 20px rgba(255,255,255,0.03),
    inset 0 -22px 30px rgba(0,0,0,0.26),
    0 14px 34px rgba(0,0,0,0.60),
    0 0 18px rgba(72,166,255,0.16);
}
.diamond-stage .mini-diamond.c-green{
  box-shadow:
    inset 0 0 0 1px rgba(90,255,190,0.26),
    inset 0 14px 20px rgba(255,255,255,0.03),
    inset 0 -22px 30px rgba(0,0,0,0.26),
    0 14px 34px rgba(0,0,0,0.60),
    0 0 18px rgba(42,255,186,0.14);
}
.diamond-stage .mini-diamond.c-amber{
  box-shadow:
    inset 0 0 0 1px rgba(255,200,110,0.30),
    inset 0 14px 20px rgba(255,255,255,0.03),
    inset 0 -22px 30px rgba(0,0,0,0.26),
    0 14px 34px rgba(0,0,0,0.60),
    0 0 18px rgba(255,170,70,0.14);
}
.diamond-stage .mini-diamond.c-purple{
  box-shadow:
    inset 0 0 0 1px rgba(210,140,255,0.26),
    inset 0 14px 20px rgba(255,255,255,0.03),
    inset 0 -22px 30px rgba(0,0,0,0.26),
    0 14px 34px rgba(0,0,0,0.60),
    0 0 18px rgba(190,91,255,0.14);
}

/* TWINKLE (SCOPED) */
@media (prefers-reduced-motion: no-preference){
  .diamond-stage>.diamond{animation:diamondTwinkle 6.0s ease-in-out infinite alternate}
}
@keyframes diamondTwinkle{0%{filter:brightness(0.99)}100%{filter:brightness(1.04)}}

/* COMPASS LABELS (SCOPED) */
.diamond-stage .compass-label{
  position:absolute;
  font-weight:900;
  font-size:14px;
  letter-spacing:0.22em;
  opacity:0.82;
  pointer-events:none;
  text-transform:uppercase;
  color:rgba(233,241,244,0.92);
  text-shadow:0 0 14px rgba(255,255,255,0.18),0 10px 22px rgba(0,0,0,0.55);
}
.diamond-stage .compass-label span{display:inline-block}
.diamond-stage .compass-n{top:-30px;left:50%;transform:translateX(-50%)}
.diamond-stage .compass-e{right:-30px;top:50%;transform:translateY(-50%)}
.diamond-stage .compass-s{bottom:-30px;left:50%;transform:translateX(-50%)}
.diamond-stage .compass-w{left:-30px;top:50%;transform:translateY(-50%)}
.diamond-stage .compass-label::after{
  content:"";
  display:block;
  width:8px;
  height:8px;
  margin:6px auto 0;
  border-top:2px solid rgba(255,255,255,0.42);
  border-right:2px solid rgba(255,255,255,0.42);
  opacity:0.75;
}
.diamond-stage .compass-n::after{transform:rotate(-45deg)}
.diamond-stage .compass-e::after{transform:rotate(45deg)}
.diamond-stage .compass-s::after{transform:rotate(135deg)}
.diamond-stage .compass-w::after{transform:rotate(-135deg)}
